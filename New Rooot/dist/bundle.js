!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";e.r(n);var r=function(){return function(t,n){this.toNode=t,this.cost=n}}(),o=function(){return function(t,n,e){this.name=t,this.value=n,this.links=e}}(),i=function(){return function(t,n){this.nodes=t,this.cost=n}}(),s=function(){function t(t){this.shortestLinks=[],this.allNodes=[];for(var n=t.slice(),e=(n=n.sort(function(t,n){return t.cost-n.cost}).reverse()).flatMap(function(t){return t.nodes}),r=new Map,o=0,i=e;o<i.length;o++){var s=i[o];r.has(s.name)||(r.set(s.name,!0),this.allNodes.push(s))}for(this.root=this.allNodes.sort(function(t,n){return t.value-n.value})[0];!this.allNodesAreConnected(this.allNodes);)this.shortestLinks.push(n.pop());this.shortestLinks.length}return t.prototype.getNextNodeWhenGoing=function(t,n){return this.getNextStep(t,n)},t.prototype.getNextStep=function(t,n,e,r){if(t.name===n.name)return e;for(var o=0,i=this.shortestLinks.filter(function(n){return-1!==n.nodes.findIndex(function(n){return n.name===t.name})}).map(function(n){return n.nodes.find(function(n){return n.name!==t.name})}).filter(function(t){return!r||t.name!==r});o<i.length;o++){var s=i[o],c=void 0;if(c=e?this.getNextStep(s,n,e,t):this.getNextStep(s,n,s,t))return c}},t.prototype.allNodesAreConnected=function(t){for(var n=[],e=this.shortestLinks.flatMap(function(t){return t.nodes}),r=new Map,o=0,i=e;o<i.length;o++){var s=i[o];r.has(s.name)||(r.set(s.name,!0),n.push(name))}var c=n.length===t.length,u=!0;if(c)for(var a=0,h=this.allNodes;a<h.length;a++){if((s=h[a]).name!==this.root.name&&!this.getNextNodeWhenGoing(this.root,name)){u=!1;break}}return c&&u},t.prototype.linkToString=function(){var t=this.shortestLinks.map(function(t){return new i(t.nodes.sort(function(t,n){return t.name<n.name?-1:t.name>n.name?1:0}),t.cost)}).sort(function(t,n){return t.nodes[0].name<n.nodes[0].name?-1:t.nodes[0].name>n.nodes[0].name?1:0}),n="";return t.forEach(function(t){n+=t.nodes[0].name+" - "+t.nodes[1].name+";\n\t"}),n},t}(),c=function(t,n,e,r){return new(e||(e=Promise))(function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(s,c)}u((r=r.apply(t,n||[])).next())})},u=function(t,n){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(t,s)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},a=function(){function t(t,n,e){var r=this;this.rootOfIndexing=!1,this.returnTo=[],this.DISCOVERED_LINKS=[],this.name=t,this.value=n,this.connection=e,this.connection.receive.subscribe(function(t){return r.receive(t)})}return t.prototype.indexNetwork=function(){return c(this,void 0,void 0,function(){var t,n=this;return u(this,function(e){switch(e.label){case 0:return this.rootOfIndexing=!0,[4,this.connection.ping];case 1:return t=e.sent(),this.WAITING_FOR_BRIDGES=t,t.forEach(function(t){n.send({protocol:"CSTP",content:{message:"Dear Neighbor hear is my name and the package provides you the cost to me. Follow the CSTP.",from:{name:n.name,value:n.value}},target:t})}),[2]}})})},t.prototype.send=function(t){this.connection.send.next(t)},t.prototype.handleCSTPPackage=function(t){var n,e=this;if(!this.INDEXED){if(console.log(this.name,"received pkg"),0!==this.DISCOVERED_LINKS.length||this.rootOfIndexing||(this.connection.ping.then(function(n){if(e.WAITING_FOR_BRIDGES=n.filter(function(n){return n!==t.content.from.name}),console.log(e.name," waiting for:",e.WAITING_FOR_BRIDGES),e.WAITING_FOR_BRIDGES.forEach(function(t){return e.send({protocol:"CSTP",content:{message:"Dear Neighbor hear is my name and the package provides you the cost to me. Follow the CSTP.",from:{name:e.name,value:e.value}},target:t})}),0===e.WAITING_FOR_BRIDGES.length){var r=e.DISCOVERED_LINKS[0].nodes.find(function(t){return t.name!==e.name});if(e.send({protocol:"CSTP",content:{message:"Dear Neighbor hear are my discovered links, you may concat them with yours and send them back!",discoveredLinks:e.DISCOVERED_LINKS},target:r.name}),e.INDEXED=!0,e.rootOfIndexing){var o=new s(e.DISCOVERED_LINKS);e.connection.finishedIndexing.next(o)}else e.connection.finishedIndexing.next()}}),this.DISCOVERED_LINKS.push({cost:t.cost,nodes:[{name:this.name,value:this.value},t.content.from]}),this.returnTo.push(t.content.from.name),console.log("returning from ",this.name,"to ",this.returnTo)),this.WAITING_FOR_BRIDGES&&t.content.discoveredLinks){var r=t.content.discoveredLinks[0].nodes.find(function(t){return t.name!==e.name});this.WAITING_FOR_BRIDGES.splice(this.WAITING_FOR_BRIDGES.findIndex(function(t){return t===r}),1),console.log(this.name," waiting for:",this.WAITING_FOR_BRIDGES),(n=this.DISCOVERED_LINKS).push.apply(n,t.content.discoveredLinks)}else this.WAITING_FOR_BRIDGES&&t.content.from&&(this.WAITING_FOR_BRIDGES.splice(this.WAITING_FOR_BRIDGES.findIndex(function(n){return n===t.content.from.name}),1),console.log(this.name," waiting for:",this.WAITING_FOR_BRIDGES),this.returnTo.push(t.content.from.name),console.log("returning from ",this.name,"to ",this.returnTo),this.DISCOVERED_LINKS.push({cost:t.cost,nodes:[{name:this.name,value:this.value},t.content.from]}));if(this.WAITING_FOR_BRIDGES&&0===this.WAITING_FOR_BRIDGES.length)if(this.returnTo.forEach(function(t){e.send({protocol:"CSTP",content:{message:"Dear Neighbor hear are my discovered links, you may concat them with yours and send them back!",discoveredLinks:e.DISCOVERED_LINKS},target:t})}),this.INDEXED=!0,console.log("Node has finished ",this.name),this.rootOfIndexing){var o=[];this.DISCOVERED_LINKS.forEach(function(t){o.find(function(n){return-1!==t.nodes.findIndex(function(t){return t.name===n.nodes[0].name})&&-1!==t.nodes.findIndex(function(t){return t.name===n.nodes[1].name})})||o.push(t)});var i=new s(o);this.connection.finishedIndexing.next(i)}else this.connection.finishedIndexing.next()}},t.prototype.receive=function(t){"CSTP"===t.protocol&&this.handleCSTPPackage(t)},t}(),h=function(t,n){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function f(t,n){function e(){this.constructor=t}h(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}function l(t){return"function"==typeof t}var p=!1,d={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;p=t},get useDeprecatedSynchronousErrorHandling(){return p}};function b(t){setTimeout(function(){throw t})}var y={closed:!0,next:function(t){},error:function(t){if(d.useDeprecatedSynchronousErrorHandling)throw t;b(t)},complete:function(){}},m=Array.isArray||function(t){return t&&"number"==typeof t.length};function v(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,n){return n+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}v.prototype=Object.create(Error.prototype);var _=v,g=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var n;return t.prototype.unsubscribe=function(){var t,n=!1;if(!this.closed){var e=this._parent,r=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s,c=-1,u=r?r.length:0;e;)e.remove(this),e=++c<u&&r[c]||null;if(l(o))try{o.call(this)}catch(e){n=!0,t=e instanceof _?w(e.errors):[e]}if(m(i))for(c=-1,u=i.length;++c<u;){var a=i[c];if(null!==(s=a)&&"object"==typeof s)try{a.unsubscribe()}catch(e){n=!0,t=t||[],e instanceof _?t=t.concat(w(e.errors)):t.push(e)}}if(n)throw new _(t)}},t.prototype.add=function(n){var e=n;switch(typeof n){case"function":e=new t(n);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof t)){var r=e;(e=new t)._subscriptions=[r]}break;default:if(!n)return t.EMPTY;throw new Error("unrecognized teardown "+n+" added to Subscription.")}if(e._addParent(this)){var o=this._subscriptions;o?o.push(e):this._subscriptions=[e]}return e},t.prototype.remove=function(t){var n=this._subscriptions;if(n){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}},t.prototype._addParent=function(t){var n=this._parent,e=this._parents;return n!==t&&(n?e?-1===e.indexOf(t)&&(e.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))},t.EMPTY=((n=new t).closed=!0,n),t}();function w(t){return t.reduce(function(t,n){return t.concat(n instanceof _?n.errors:n)},[])}var E="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),S=function(t){function n(e,r,o){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=y;break;case 1:if(!e){i.destination=y;break}if("object"==typeof e){e instanceof n?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new I(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new I(i,e,r,o)}return i}return f(n,t),n.prototype[E]=function(){return this},n.create=function(t,e,r){var o=new n(t,e,r);return o.syncErrorThrowable=!1,o},n.prototype.next=function(t){this.isStopped||this._next(t)},n.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},n.prototype._next=function(t){this.destination.next(t)},n.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},n.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},n.prototype._unsubscribeAndRecycle=function(){var t=this._parent,n=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=n,this},n}(g),I=function(t){function n(n,e,r,o){var i,s=t.call(this)||this;s._parentSubscriber=n;var c=s;return l(e)?i=e:e&&(i=e.next,r=e.error,o=e.complete,e!==y&&(l((c=Object.create(e)).unsubscribe)&&s.add(c.unsubscribe.bind(c)),c.unsubscribe=s.unsubscribe.bind(s))),s._context=c,s._next=i,s._error=r,s._complete=o,s}return f(n,t),n.prototype.next=function(t){if(!this.isStopped&&this._next){var n=this._parentSubscriber;d.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},n.prototype.error=function(t){if(!this.isStopped){var n=this._parentSubscriber,e=d.useDeprecatedSynchronousErrorHandling;if(this._error)e&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)e?(n.syncErrorValue=t,n.syncErrorThrown=!0):b(t),this.unsubscribe();else{if(this.unsubscribe(),e)throw t;b(t)}}},n.prototype.complete=function(){var t=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var e=function(){return t._complete.call(t._context)};d.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?(this.__tryOrSetError(n,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},n.prototype.__tryOrUnsub=function(t,n){try{t.call(this._context,n)}catch(t){if(this.unsubscribe(),d.useDeprecatedSynchronousErrorHandling)throw t;b(t)}},n.prototype.__tryOrSetError=function(t,n,e){if(!d.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,e)}catch(n){return d.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=n,t.syncErrorThrown=!0,!0):(b(n),!0)}return!1},n.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},n}(S);var x="function"==typeof Symbol&&Symbol.observable||"@@observable";function T(){}function O(t){return t?1===t.length?t[0]:function(n){return t.reduce(function(t,n){return n(t)},n)}:T}var D=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(n){var e=new t;return e.source=this,e.operator=n,e},t.prototype.subscribe=function(t,n,e){var r=this.operator,o=function(t,n,e){if(t){if(t instanceof S)return t;if(t[E])return t[E]()}return t||n||e?new S(t,n,e):new S(y)}(t,n,e);if(r?o.add(r.call(o,this.source)):o.add(this.source||d.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),d.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){d.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=n),!function(t){for(;t;){var n=t,e=n.closed,r=n.destination,o=n.isStopped;if(e||o)return!1;t=r&&r instanceof S?r:null}return!0}(t)?console.warn(n):t.error(n)}},t.prototype.forEach=function(t,n){var e=this;return new(n=N(n))(function(n,r){var o;o=e.subscribe(function(n){try{t(n)}catch(t){r(t),o&&o.unsubscribe()}},r,n)})},t.prototype._subscribe=function(t){var n=this.source;return n&&n.subscribe(t)},t.prototype[x]=function(){return this},t.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0===t.length?this:O(t)(this)},t.prototype.toPromise=function(t){var n=this;return new(t=N(t))(function(t,e){var r;n.subscribe(function(t){return r=t},function(t){return e(t)},function(){return t(r)})})},t.create=function(n){return new t(n)},t}();function N(t){if(t||(t=d.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function R(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}R.prototype=Object.create(Error.prototype);var k=R,G=function(t){function n(n,e){var r=t.call(this)||this;return r.subject=n,r.subscriber=e,r.closed=!1,r}return f(n,t),n.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,n=t.observers;if(this.subject=null,n&&0!==n.length&&!t.isStopped&&!t.closed){var e=n.indexOf(this.subscriber);-1!==e&&n.splice(e,1)}}},n}(g),P=function(t){function n(n){var e=t.call(this,n)||this;return e.destination=n,e}return f(n,t),n}(S),A=function(t){function n(){var n=t.call(this)||this;return n.observers=[],n.closed=!1,n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return f(n,t),n.prototype[E]=function(){return new P(this)},n.prototype.lift=function(t){var n=new C(this,this);return n.operator=t,n},n.prototype.next=function(t){if(this.closed)throw new k;if(!this.isStopped)for(var n=this.observers,e=n.length,r=n.slice(),o=0;o<e;o++)r[o].next(t)},n.prototype.error=function(t){if(this.closed)throw new k;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var n=this.observers,e=n.length,r=n.slice(),o=0;o<e;o++)r[o].error(t);this.observers.length=0},n.prototype.complete=function(){if(this.closed)throw new k;this.isStopped=!0;for(var t=this.observers,n=t.length,e=t.slice(),r=0;r<n;r++)e[r].complete();this.observers.length=0},n.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},n.prototype._trySubscribe=function(n){if(this.closed)throw new k;return t.prototype._trySubscribe.call(this,n)},n.prototype._subscribe=function(t){if(this.closed)throw new k;return this.hasError?(t.error(this.thrownError),g.EMPTY):this.isStopped?(t.complete(),g.EMPTY):(this.observers.push(t),new G(this,t))},n.prototype.asObservable=function(){var t=new D;return t.source=this,t},n.create=function(t,n){return new C(t,n)},n}(D),C=function(t){function n(n,e){var r=t.call(this)||this;return r.destination=n,r.source=e,r}return f(n,t),n.prototype.next=function(t){var n=this.destination;n&&n.next&&n.next(t)},n.prototype.error=function(t){var n=this.destination;n&&n.error&&this.destination.error(t)},n.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},n.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):g.EMPTY},n}(A),B=function(){return function(t){this.send=new A,this.receive=new A,this.finishedIndexing=new A,this.ping=new Promise(function(n){return n(t)})}}(),L=function(t,n,e,r){return new(e||(e=Promise))(function(o,i){function s(t){try{u(r.next(t))}catch(t){i(t)}}function c(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(s,c)}u((r=r.apply(t,n||[])).next())})},j=function(t,n){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(t,s)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},F=function(){return function(t){var n=this;this.nodes=t,this.bridges=[],this.startIndexingFromRandomBridge=function(){return new Promise(function(t){return L(n,void 0,void 0,function(){var n;return j(this,function(e){return n=this.bridges[Math.round(Math.random()*this.bridges.length)],console.log(this.bridges,n),n.connection.finishedIndexing.subscribe(function(n){return t(n)}),n.indexNetwork().then(function(){return console.log("wtf")}),[2]})})})},t.forEach(function(t){var e=t.links.map(function(t){return t.toNode}),r=new B(e);n.bridges.push(new a(t.name,t.value,r))}),this.bridges.forEach(function(e){var r=t.find(function(t){return t.name===e.name}).links,o=r.map(function(t){return t.toNode});e.connection.send.subscribe(function(t){console.log(e.name+">>>"+t.target),o.find(function(n){return n===t.target})&&(t.cost=r.find(function(n){return n.toNode===t.target}).cost,setTimeout(function(){return n.bridges.find(function(n){return n.name===t.target}).connection.receive.next(t)},1e3*t.cost))})})}}(),W=document.getElementById("textIn"),M=(document.getElementById("textOut"),document.getElementById("simulate_btn"));W.value="\nGraph mygraph {\n\t// Node\n\tA = 2;\n\tB = 1;\n\tC = 3;\n\t\n\t// Links und zugeh. Kosten\n\tA - B : 1;\n\tA - C : 1;\n\tC - B : 2;\n}",console.log(W);M.addEventListener("click",function(){var t=function(t){for(var n=[],e=[],i=t.match(/(?<=Graph[ ])(\S+)/g)[0],s=t.match(/[^\s]+(?= =)|(?<== )[1-9]*/g),c=t.match(/[^\s]+(?= -)|[^\s]+(?= :)|(?<=: )[0-9]*/g),u=0;u<c.length;u+=3)n.push({nodes:[c[u],c[u+1]],cost:+c[u+2]});var a=function(t){var i=s[t],c=+s[t+1],u=n.filter(function(t){return-1!==t.nodes.findIndex(function(t){return t===i})}).map(function(t){return new r(t.nodes.find(function(t){return t!==i}),t.cost)});e.push(new o(i,c,u))};for(u=0;u<s.length;u+=2)a(u);return{graphName:i,nodes:e}}(W.value),n=new F(t.nodes);console.log(n),n.startIndexingFromRandomBridge().then(function(t){console.log(t)})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9TcGFubmluZ1RyZWUvc3Bhbm5pbmdUcmVlTGluay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1NwYW5uaW5nVHJlZS9zcGFubmluZ1RyZWVOb2RlLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU2ltdWxhdGlvbi9TaW11bGF0aW9uTGluay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1NwYW5uaW5nVHJlZS9taW5pbWFsU3Bhbm5pbmdUcmVlLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU2ltdWxhdGlvbi9CcmlkZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL2lzRnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvY29uZmlnLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaG9zdFJlcG9ydEVycm9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL09ic2VydmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaXNBcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL1Vuc3Vic2NyaXB0aW9uRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvU3Vic2NyaXB0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaXNPYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvc3ltYm9sL3J4U3Vic2NyaWJlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9TdWJzY3JpYmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3N5bWJvbC9vYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvbm9vcC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL3BpcGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL3RvU3Vic2NyaWJlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL2NhblJlcG9ydEVycm9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvU3ViamVjdFN1YnNjcmlwdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9TdWJqZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU2ltdWxhdGlvbi9TaW11bGF0aW9uQ29ubmVjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1NpbXVsYXRpb24vU2ltdWxhdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFyc2VyL2dyYXBoUGFyc2VyLnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiU3Bhbm5pbmdUcmVlTGluayIsInRvTm9kZSIsImNvc3QiLCJ0aGlzIiwiU3Bhbm5pbmdUcmVlTm9kZSIsImxpbmtzIiwiU2ltdWxhdGlvbkxpbmsiLCJub2RlcyIsIm1pbmltYWxTcGFubmluZ1RyZWVfTWluaW1hbFNwYW5UcmVlIiwiTWluaW1hbFNwYW5UcmVlIiwic3BhblRyZWVMaW5rcyIsInNob3J0ZXN0TGlua3MiLCJhbGxOb2RlcyIsInNsaWNlIiwiYXJyYXkiLCJzb3J0IiwiYSIsImIiLCJyZXZlcnNlIiwiZmxhdE1hcCIsIm1hcCIsIk1hcCIsIl9pIiwiYXJyYXlfMSIsImxlbmd0aCIsIml0ZW0iLCJoYXMiLCJzZXQiLCJwdXNoIiwicm9vdCIsImFsbE5vZGVzQXJlQ29ubmVjdGVkIiwicG9wIiwiZ2V0TmV4dE5vZGVXaGVuR29pbmciLCJmcm9tIiwidG8iLCJnZXROZXh0U3RlcCIsInBvc3NpYmxlUmV0IiwibGFzdEZyb20iLCJub2Rlc18xIiwiZmlsdGVyIiwiZmluZEluZGV4Iiwic2libGluZ0xpbmsiLCJmaW5kIiwibm9kZSIsInJldCIsInJlc3VsdCIsImFycmF5XzIiLCJhbGxOb2Rlc0FyZUluY2x1ZGVkIiwiX2EiLCJfYiIsImxpbmtUb1N0cmluZyIsInNvcnRlZCIsImxpbmsiLCJmb3JFYWNoIiwiQnJpZGdlX0JyaWRnZSIsIkJyaWRnZSIsImNvbm5lY3Rpb24iLCJfdGhpcyIsInJvb3RPZkluZGV4aW5nIiwicmV0dXJuVG8iLCJESVNDT1ZFUkVEX0xJTktTIiwicmVjZWl2ZSIsInN1YnNjcmliZSIsInBrZyIsImluZGV4TmV0d29yayIsInBpbmciLCJzaWJsaW5ncyIsInNlbnQiLCJXQUlUSU5HX0ZPUl9CUklER0VTIiwidGFyZ2V0Iiwic2VuZCIsInByb3RvY29sIiwiY29udGVudCIsIm1lc3NhZ2UiLCJuZXh0IiwiaGFuZGxlQ1NUUFBhY2thZ2UiLCJJTkRFWEVEIiwiY29uc29sZSIsImxvZyIsInRoZW4iLCJicmlkZ2VzIiwiZGlzY292ZXJlZExpbmtzIiwibXN0IiwiZmluaXNoZWRJbmRleGluZyIsIm5hbWVfMSIsInNwbGljZSIsImFwcGx5IiwibGlua3NfMSIsImV4dGVuZFN0YXRpY3MiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkFycmF5IiwiX19leHRlbmRzIiwiX18iLCJjb25zdHJ1Y3RvciIsImlzRnVuY3Rpb24iLCJ4IiwiX2VuYWJsZV9zdXBlcl9ncm9zc19tb2RlX3RoYXRfd2lsbF9jYXVzZV9iYWRfdGhpbmdzIiwiY29uZmlnIiwiUHJvbWlzZSIsInVuZGVmaW5lZCIsInVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmciLCJFcnJvciIsInN0YWNrIiwiaG9zdFJlcG9ydEVycm9yIiwiZXJyIiwic2V0VGltZW91dCIsImVtcHR5IiwiY2xvc2VkIiwiZXJyb3IiLCJjb21wbGV0ZSIsImlzQXJyYXkiLCJVbnN1YnNjcmlwdGlvbkVycm9ySW1wbCIsImVycm9ycyIsInRvU3RyaW5nIiwiam9pbiIsIlVuc3Vic2NyaXB0aW9uRXJyb3IiLCJTdWJzY3JpcHRpb25fU3Vic2NyaXB0aW9uIiwiU3Vic2NyaXB0aW9uIiwidW5zdWJzY3JpYmUiLCJfcGFyZW50IiwiX3BhcmVudHMiLCJfc3Vic2NyaXB0aW9ucyIsIl91bnN1YnNjcmliZSIsImhhc0Vycm9ycyIsImluZGV4IiwibGVuIiwicmVtb3ZlIiwiZSIsImZsYXR0ZW5VbnN1YnNjcmlwdGlvbkVycm9ycyIsInN1YiIsImNvbmNhdCIsImFkZCIsInRlYXJkb3duIiwic3Vic2NyaXB0aW9uIiwidG1wIiwiRU1QVFkiLCJfYWRkUGFyZW50Iiwic3Vic2NyaXB0aW9ucyIsInN1YnNjcmlwdGlvbkluZGV4IiwiaW5kZXhPZiIsInBhcmVudCIsInJlZHVjZSIsImVycnMiLCJyeFN1YnNjcmliZXIiLCJNYXRoIiwicmFuZG9tIiwiU3Vic2NyaWJlcl9TdWJzY3JpYmVyIiwiX3N1cGVyIiwiU3Vic2NyaWJlciIsImRlc3RpbmF0aW9uT3JOZXh0Iiwic3luY0Vycm9yVmFsdWUiLCJzeW5jRXJyb3JUaHJvd24iLCJzeW5jRXJyb3JUaHJvd2FibGUiLCJpc1N0b3BwZWQiLCJhcmd1bWVudHMiLCJkZXN0aW5hdGlvbiIsIlN1YnNjcmliZXJfU2FmZVN1YnNjcmliZXIiLCJzdWJzY3JpYmVyIiwiX25leHQiLCJfZXJyb3IiLCJfY29tcGxldGUiLCJfdW5zdWJzY3JpYmVBbmRSZWN5Y2xlIiwiU2FmZVN1YnNjcmliZXIiLCJfcGFyZW50U3Vic2NyaWJlciIsIm9ic2VydmVyT3JOZXh0IiwiY29udGV4dCIsIl9jb250ZXh0IiwiX190cnlPclNldEVycm9yIiwiX190cnlPclVuc3ViIiwid3JhcHBlZENvbXBsZXRlIiwiZm4iLCJvYnNlcnZhYmxlX29ic2VydmFibGUiLCJvYnNlcnZhYmxlIiwibm9vcCIsInBpcGVGcm9tQXJyYXkiLCJmbnMiLCJpbnB1dCIsInByZXYiLCJPYnNlcnZhYmxlX09ic2VydmFibGUiLCJPYnNlcnZhYmxlIiwiX2lzU2NhbGFyIiwiX3N1YnNjcmliZSIsImxpZnQiLCJvcGVyYXRvciIsInNvdXJjZSIsInNpbmsiLCJuZXh0T3JPYnNlcnZlciIsInRvU3Vic2NyaWJlciIsIl90cnlTdWJzY3JpYmUiLCJvYnNlcnZlciIsImNsb3NlZF8xIiwiY2FuUmVwb3J0RXJyb3IiLCJ3YXJuIiwicHJvbWlzZUN0b3IiLCJnZXRQcm9taXNlQ3RvciIsInJlc29sdmUiLCJyZWplY3QiLCJwaXBlIiwib3BlcmF0aW9ucyIsInRvUHJvbWlzZSIsIk9iamVjdFVuc3Vic2NyaWJlZEVycm9ySW1wbCIsIk9iamVjdFVuc3Vic2NyaWJlZEVycm9yIiwiU3ViamVjdFN1YnNjcmlwdGlvbl9TdWJqZWN0U3Vic2NyaXB0aW9uIiwiU3ViamVjdFN1YnNjcmlwdGlvbiIsInN1YmplY3QiLCJvYnNlcnZlcnMiLCJzdWJzY3JpYmVySW5kZXgiLCJTdWJqZWN0X1N1YmplY3RTdWJzY3JpYmVyIiwiU3ViamVjdFN1YnNjcmliZXIiLCJTdWJqZWN0X1N1YmplY3QiLCJTdWJqZWN0IiwiaGFzRXJyb3IiLCJ0aHJvd25FcnJvciIsIlN1YmplY3RfQW5vbnltb3VzU3ViamVjdCIsImNvcHkiLCJhc09ic2VydmFibGUiLCJBbm9ueW1vdXNTdWJqZWN0IiwiU2ltdWxhdGlvbkNvbm5lY3Rpb25fU2ltdWxhdGlvbkNvbm5lY3Rpb24iLCJzaWJsaW5nQnJpZGdlcyIsIlNpbXVsYXRpb25fU2ltdWxhdGlvbiIsInN0YXJ0SW5kZXhpbmdGcm9tUmFuZG9tQnJpZGdlIiwiU2ltdWxhdGlvbl9hd2FpdGVyIiwiYnJpZGdlIiwicm91bmQiLCJzaWJsaW5nTm9kZXMiLCJjb25uIiwiaW5wdXRBcmVhIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInNpbXVsYXRpb25CdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwicGFyc2VSZXN1bHQiLCJ0ZW1wTGlua3MiLCJncmFwaE5hbWUiLCJtYXRjaCIsIm5vZGVNYXRjaGVzIiwibGlua01hdGNoZXMiLCJwYXJzZSIsInNpbXVsYXRpb24iXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FH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QyxNQUFNaUMsVUFBVSxTQUFBL0MsR0FBSyxPQUFBQSxJQUFNMkYsTUFDL0RoRSxJQUFJLFNBQUFnQyxHQUFRLFdBQUlwRCxFQUFpQm9ELEVBQUs3QyxNQUFNbUMsS0FBSyxTQUFBakQsR0FBSyxPQUFBQSxJQUFNMkYsSUFBT2hDLEVBQUtsRCxRQUMxRUssRUFBTXFCLEtBQUssSUFBSXhCLEVBQWlCZ0YsRUFBTW5HLEVBQU9vQixLQUw5QyxJQUFTckMsRUFBSSxFQUFHQSxFQUFJNFEsRUFBWXBOLE9BQVF4RCxHQUFRLElBQXZDQSxHQU9ULE1BQU8sQ0FDTjBRLFVBQVNBLEVBQ1RuTyxNQUFLQSxHRG9CZ0J1TyxDQUFNWCxFQUFVbFAsT0FDOUI4UCxFQUFhLElBQUluQixFQUFXWSxFQUFZak8sT0FDOUNzRSxRQUFRQyxJQUFJaUssR0FDWkEsRUFBV2xCLGdDQUFnQzlJLEtBQUssU0FBQUcsR0FDNUNMLFFBQVFDLElBQUlJIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBjbGFzcyBTcGFubmluZ1RyZWVMaW5rIHtcclxuXHRjb25zdHJ1Y3RvcihwdWJsaWMgdG9Ob2RlOiBzdHJpbmcsIHB1YmxpYyBjb3N0OiBudW1iZXIpIHtcclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHtTcGFubmluZ1RyZWVMaW5rfSBmcm9tIFwiLi9zcGFubmluZ1RyZWVMaW5rXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU3Bhbm5pbmdUcmVlTm9kZSB7XHJcblx0Y29uc3RydWN0b3IocHVibGljIG5hbWU6IHN0cmluZywgcHVibGljIHZhbHVlOiBudW1iZXIsIHB1YmxpYyBsaW5rczogU3Bhbm5pbmdUcmVlTGlua1tdKSB7XHJcblx0fVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBTaW11bGF0aW9uTGluayB7XHJcblx0Y29uc3RydWN0b3IocHVibGljIG5vZGVzOiB7bmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyfVtdLCBwdWJsaWMgY29zdDogbnVtYmVyKXt9XHJcbn1cclxuIiwiaW1wb3J0IHtTaW11bGF0aW9uTGlua30gZnJvbSBcIi4uL1NpbXVsYXRpb24vU2ltdWxhdGlvbkxpbmtcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNaW5pbWFsU3BhblRyZWUge1xyXG5cdHB1YmxpYyBzaG9ydGVzdExpbmtzOiBTaW11bGF0aW9uTGlua1tdID0gW107XHJcblx0cHVibGljIGFsbE5vZGVzOiB7bmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyfVtdID0gW107XHJcblx0cHVibGljIHJvb3Q6IHtuYW1lOiBzdHJpbmcsIHZhbHVlOiBudW1iZXJ9O1xyXG5cdGdldE5leHROb2RlV2hlbkdvaW5nKGZyb20sIHRvKVxyXG5cdHtcclxuXHRcdGxldCBuZXh0U3RlcCA9IHRoaXMuZ2V0TmV4dFN0ZXAoZnJvbSwgdG8pO1xyXG5cdFx0cmV0dXJuIG5leHRTdGVwO1xyXG5cdH1cclxuXHJcblx0Z2V0TmV4dFN0ZXAoZnJvbSwgdG8sIHBvc3NpYmxlUmV0PywgbGFzdEZyb20/KVxyXG5cdHtcclxuXHRcdGlmIChmcm9tLm5hbWUgPT09IHRvLm5hbWUpXHJcblx0XHR7XHJcblx0XHRcdHJldHVybiBwb3NzaWJsZVJldDtcclxuXHRcdH1cclxuXHRcdGxldCBub2RlcyA9IHRoaXMuc2hvcnRlc3RMaW5rcy5maWx0ZXIobCA9PiBsLm5vZGVzLmZpbmRJbmRleChuID0+IG4ubmFtZSA9PT0gZnJvbS5uYW1lKSAhPT0gLTEpXHJcblx0XHRcdFx0XHRcdC5tYXAoc2libGluZ0xpbmsgPT4gc2libGluZ0xpbmsubm9kZXMuZmluZChuID0+IG4ubmFtZSAhPT0gZnJvbS5uYW1lKSkuZmlsdGVyKG4gPT4gIWxhc3RGcm9tID8gdHJ1ZSA6IG4ubmFtZSAhPT0gbGFzdEZyb20pO1xyXG5cdFx0Zm9yIChjb25zdCBub2RlIG9mIG5vZGVzKVxyXG5cdFx0e1xyXG5cdFx0XHRsZXQgcmV0O1xyXG5cdFx0XHRpZiAoIXBvc3NpYmxlUmV0KVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0ID0gdGhpcy5nZXROZXh0U3RlcChub2RlLCB0bywgbm9kZSwgZnJvbSk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0ID0gdGhpcy5nZXROZXh0U3RlcChub2RlLCB0bywgcG9zc2libGVSZXQsIGZyb20pO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICghIXJldClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiByZXQ7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGFsbE5vZGVzQXJlQ29ubmVjdGVkKGFsbE5vZGVzKVxyXG5cdHtcclxuXHRcdGNvbnN0IHJlc3VsdCA9IFtdO1xyXG5cdFx0Y29uc3QgYXJyYXkgPSB0aGlzLnNob3J0ZXN0TGlua3MuZmxhdE1hcChsID0+IGwubm9kZXMpO1xyXG5cdFx0Y29uc3QgbWFwID0gbmV3IE1hcCgpO1xyXG5cdFx0Zm9yIChjb25zdCBpdGVtIG9mIGFycmF5KVxyXG5cdFx0e1xyXG5cdFx0XHRpZiAoIW1hcC5oYXMoaXRlbS5uYW1lKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdG1hcC5zZXQoaXRlbS5uYW1lLCB0cnVlKTtcclxuXHRcdFx0XHRyZXN1bHQucHVzaChuYW1lKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0bGV0IGFsbE5vZGVzQXJlSW5jbHVkZWQgPSByZXN1bHQubGVuZ3RoID09PSBhbGxOb2Rlcy5sZW5ndGg7XHJcblx0XHRsZXQgYWxsTm9kZXNBcmVDb25uZWN0ZWQgPSB0cnVlO1xyXG5cdFx0aWYgKGFsbE5vZGVzQXJlSW5jbHVkZWQpXHJcblx0XHRcdGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLmFsbE5vZGVzKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0aWYgKGl0ZW0ubmFtZSAhPT0gdGhpcy5yb290Lm5hbWUpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0aWYgKCF0aGlzLmdldE5leHROb2RlV2hlbkdvaW5nKHRoaXMucm9vdCwgbmFtZSkpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGFsbE5vZGVzQXJlQ29ubmVjdGVkID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0cmV0dXJuIGFsbE5vZGVzQXJlSW5jbHVkZWQgJiYgYWxsTm9kZXNBcmVDb25uZWN0ZWQ7XHJcblx0fTtcclxuXHJcblx0Y29uc3RydWN0b3Ioc3BhblRyZWVMaW5rczogU2ltdWxhdGlvbkxpbmtbXSlcclxuXHR7XHJcblxyXG5cdFx0bGV0IGxpbmtzID0gWy4uLnNwYW5UcmVlTGlua3NdO1xyXG5cdFx0bGlua3MgPSBsaW5rcy5zb3J0KChhLCBiKSA9PiBhLmNvc3QgLSBiLmNvc3QpLnJldmVyc2UoKTtcclxuXHJcblx0XHRjb25zdCBhcnJheSA9IGxpbmtzLmZsYXRNYXAobCA9PiBsLm5vZGVzKTtcclxuXHJcblx0XHRjb25zdCBtYXAgPSBuZXcgTWFwKCk7XHJcblx0XHRmb3IgKGNvbnN0IGl0ZW0gb2YgYXJyYXkpXHJcblx0XHR7XHJcblx0XHRcdGlmICghbWFwLmhhcyhpdGVtLm5hbWUpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0bWFwLnNldChpdGVtLm5hbWUsIHRydWUpO1xyXG5cdFx0XHRcdHRoaXMuYWxsTm9kZXMucHVzaChpdGVtKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0dGhpcy5yb290ID0gdGhpcy5hbGxOb2Rlcy5zb3J0KChhLCBiKSA9PiBhLnZhbHVlIC0gYi52YWx1ZSlbMF07XHJcblxyXG5cdFx0d2hpbGUgKCF0aGlzLmFsbE5vZGVzQXJlQ29ubmVjdGVkKHRoaXMuYWxsTm9kZXMpKVxyXG5cdFx0e1xyXG5cdFx0XHR0aGlzLnNob3J0ZXN0TGlua3MucHVzaChsaW5rcy5wb3AoKSlcclxuXHRcdH1cclxuXHRcdGlmICh0aGlzLnNob3J0ZXN0TGlua3MubGVuZ3RoIDwgNSlcclxuXHRcdHtcclxuXHRcdFx0ZGVidWdnZXI7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRsaW5rVG9TdHJpbmcoKVxyXG5cdHtcclxuXHRcdGNvbnN0IHNvcnRlZCA9IHRoaXMuc2hvcnRlc3RMaW5rcy5tYXAobGluayA9PiB7XHJcblx0XHRcdHJldHVybiBuZXcgU2ltdWxhdGlvbkxpbmsobGluay5ub2Rlcy5zb3J0KChhLCBiKSA9PiB7XHJcblx0XHRcdFx0XHRpZiAoYS5uYW1lIDwgYi5uYW1lKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gLTE7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRpZiAoYS5uYW1lID4gYi5uYW1lKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gMTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybiAwO1xyXG5cdFx0XHRcdH0pLCBsaW5rLmNvc3RcclxuXHRcdFx0KTtcclxuXHRcdH0pLnNvcnQoKGEsIGIpID0+IHtcclxuXHRcdFx0aWYgKGEubm9kZXNbMF0ubmFtZSA8IGIubm9kZXNbMF0ubmFtZSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHJldHVybiAtMTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoYS5ub2Rlc1swXS5uYW1lID4gYi5ub2Rlc1swXS5uYW1lKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0cmV0dXJuIDE7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIDA7XHJcblx0XHR9KTtcclxuXHRcdGxldCByZXQgPSBcIlwiO1xyXG5cdFx0c29ydGVkLmZvckVhY2gobGluayA9PiB7XHJcblx0XHRcdHJldCArPSBgJHtsaW5rLm5vZGVzWzBdLm5hbWV9IC0gJHtsaW5rLm5vZGVzWzFdLm5hbWV9O1xcblxcdGBcclxuXHRcdH0pO1xyXG5cdFx0cmV0dXJuIHJldDtcclxuXHR9XHJcblxyXG59XHJcbiIsImltcG9ydCB7U2ltdWxhdGlvbkNvbm5lY3Rpb259IGZyb20gXCIuL1NpbXVsYXRpb25Db25uZWN0aW9uXCI7XHJcbmltcG9ydCB7U2ltdWxhdGlvblBhY2thZ2V9IGZyb20gXCIuL1NpbXVsYXRpb25QYWNrYWdlXCI7XHJcbmltcG9ydCB7TWluaW1hbFNwYW5UcmVlfSBmcm9tIFwiLi4vU3Bhbm5pbmdUcmVlL21pbmltYWxTcGFubmluZ1RyZWVcIjtcclxuaW1wb3J0IHt0cnlSZXNvbHZlUGFja2FnZX0gZnJvbSBcInRzbGludC9saWIvdXRpbHNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCcmlkZ2Uge1xyXG4gICAgcHJpdmF0ZSByb290T2ZJbmRleGluZyA9IGZhbHNlO1xyXG4gICAgcHJpdmF0ZSByZXR1cm5Ubzogc3RyaW5nW10gPSBbXTtcclxuICAgIC8vIEJyaWRnZSBkYXRhXHJcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nO1xyXG4gICAgcHVibGljIHZhbHVlOiBudW1iZXI7XHJcblxyXG4gICAgLy8gRGF0YSBkaXNjb3ZlcmVkXHJcbiAgICBwdWJsaWMga25vd25fUk9PVF9JRD86IHN0cmluZztcclxuICAgIHB1YmxpYyBrbm93bl9ORVhUX0hPUF9UT19ST09UPzogc3RyaW5nO1xyXG4gICAgcHVibGljIGtub3duX0NPU1RfVE9fUk9PVD86IG51bWJlcjtcclxuXHJcbiAgICAvLyBkYXRhIGZvciBDZW50cmFsU3Bhbm5pbmdUcmVlUHJvdG9jb2xcclxuICAgIHB1YmxpYyBJTkRFWEVEOiBib29sZWFuO1xyXG4gICAgcHVibGljIERJU0NPVkVSRURfTElOS1M6IHtcclxuICAgICAgICBub2RlczogeyBuYW1lOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIgfVtdOyAvLyBteSBuYW1lIGFuZCBhIGNvbm5lY3RlZCBicmlkZ2VzIG5hbWVcclxuICAgICAgICBjb3N0OiBudW1iZXI7IC8vIGNvc3QgdG8gcmVhY2ggdGhlIGJyaWRnZVxyXG4gICAgfVtdID0gW107XHJcblxyXG4gICAgcHJpdmF0ZSBXQUlUSU5HX0ZPUl9CUklER0VTOiBzdHJpbmdbXTtcclxuXHJcbiAgICAvLyBzaW11bGF0aW9uIENvbm5lY3Rpb25cclxuICAgIHB1YmxpYyBjb25uZWN0aW9uOiBTaW11bGF0aW9uQ29ubmVjdGlvbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIsIGNvbm5lY3Rpb246IFNpbXVsYXRpb25Db25uZWN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uID0gY29ubmVjdGlvbjtcclxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24ucmVjZWl2ZS5zdWJzY3JpYmUoKHBrZykgPT4gdGhpcy5yZWNlaXZlKHBrZykpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBpbmRleE5ldHdvcmsoKSB7XHJcbiAgICAgICAgdGhpcy5yb290T2ZJbmRleGluZyA9IHRydWU7XHJcbiAgICAgICAgbGV0IHNpYmxpbmdzID0gKGF3YWl0IHRoaXMuY29ubmVjdGlvbi5waW5nKTtcclxuICAgICAgICB0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMgPSBzaWJsaW5ncztcclxuICAgICAgICBzaWJsaW5ncy5mb3JFYWNoKHRhcmdldCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICBwcm90b2NvbDogJ0NTVFAnLFxyXG4gICAgICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdEZWFyIE5laWdoYm9yIGhlYXIgaXMgbXkgbmFtZSBhbmQgdGhlIHBhY2thZ2UgcHJvdmlkZXMgeW91IHRoZSBjb3N0IHRvIG1lLiBGb2xsb3cgdGhlIENTVFAuJyxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiB7bmFtZTogdGhpcy5uYW1lLCB2YWx1ZTogdGhpcy52YWx1ZX1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0YXJnZXRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBzZW5kKHBrZzogU2ltdWxhdGlvblBhY2thZ2UpIHtcclxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24uc2VuZC5uZXh0KHBrZyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhhbmRsZUNTVFBQYWNrYWdlKHBrZzogU2ltdWxhdGlvblBhY2thZ2UpIHtcclxuICAgICAgICBpZih0aGlzLklOREVYRUQpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm5hbWUsICdyZWNlaXZlZCBwa2cnKTtcclxuICAgICAgICBpZiAodGhpcy5ESVNDT1ZFUkVEX0xJTktTLmxlbmd0aCA9PT0gMCAmJiAhdGhpcy5yb290T2ZJbmRleGluZykge1xyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24ucGluZy50aGVuKGJyaWRnZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTID0gYnJpZGdlcy5maWx0ZXIobmFtZSA9PiBuYW1lICE9PSBwa2cuY29udGVudC5mcm9tLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5uYW1lLCBcIiB3YWl0aW5nIGZvcjpcIiwgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuV0FJVElOR19GT1JfQlJJREdFUy5mb3JFYWNoKHRhcmdldCA9PiB0aGlzLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3RvY29sOiAnQ1NUUCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRGVhciBOZWlnaGJvciBoZWFyIGlzIG15IG5hbWUgYW5kIHRoZSBwYWNrYWdlIHByb3ZpZGVzIHlvdSB0aGUgY29zdCB0byBtZS4gRm9sbG93IHRoZSBDU1RQLicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb206IHtuYW1lOiB0aGlzLm5hbWUsIHZhbHVlOiB0aGlzLnZhbHVlfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldHVyblRvID0gdGhpcy5ESVNDT1ZFUkVEX0xJTktTWzBdLm5vZGVzLmZpbmQobiA9PiBuLm5hbWUgIT09IHRoaXMubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2w6ICdDU1RQJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0RlYXIgTmVpZ2hib3IgaGVhciBhcmUgbXkgZGlzY292ZXJlZCBsaW5rcywgeW91IG1heSBjb25jYXQgdGhlbSB3aXRoIHlvdXJzIGFuZCBzZW5kIHRoZW0gYmFjayEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzY292ZXJlZExpbmtzOiB0aGlzLkRJU0NPVkVSRURfTElOS1NcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiByZXR1cm5Uby5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5JTkRFWEVEID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucm9vdE9mSW5kZXhpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLmZpbmlzaGVkSW5kZXhpbmcubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1zdCA9IG5ldyBNaW5pbWFsU3BhblRyZWUodGhpcy5ESVNDT1ZFUkVEX0xJTktTKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLmZpbmlzaGVkSW5kZXhpbmcubmV4dChtc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuRElTQ09WRVJFRF9MSU5LUy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGNvc3Q6IHBrZy5jb3N0LFxyXG4gICAgICAgICAgICAgICAgbm9kZXM6IFt7bmFtZTogdGhpcy5uYW1lLCB2YWx1ZTogdGhpcy52YWx1ZX0sIHBrZy5jb250ZW50LmZyb21dXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnJldHVyblRvLnB1c2gocGtnLmNvbnRlbnQuZnJvbS5uYW1lKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJyZXR1cm5pbmcgZnJvbSBcIiwgdGhpcy5uYW1lLCBcInRvIFwiLCB0aGlzLnJldHVyblRvKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMgJiYgISFwa2cuY29udGVudC5kaXNjb3ZlcmVkTGlua3MpIHtcclxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHBrZy5jb250ZW50LmRpc2NvdmVyZWRMaW5rc1swXS5ub2Rlcy5maW5kKG4gPT4gbi5uYW1lICE9PSB0aGlzLm5hbWUpO1xyXG4gICAgICAgICAgICB0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMuc3BsaWNlKHRoaXMuV0FJVElOR19GT1JfQlJJREdFUy5maW5kSW5kZXgobiA9PiBuID09PSBuYW1lKSwgMSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubmFtZSwgXCIgd2FpdGluZyBmb3I6XCIsIHRoaXMuV0FJVElOR19GT1JfQlJJREdFUyk7XHJcbiAgICAgICAgICAgIHRoaXMuRElTQ09WRVJFRF9MSU5LUy5wdXNoKC4uLnBrZy5jb250ZW50LmRpc2NvdmVyZWRMaW5rcyk7XHJcbiAgICAgICAgfSBlbHNlIGlmKHRoaXMuV0FJVElOR19GT1JfQlJJREdFUyAmJiBwa2cuY29udGVudC5mcm9tKXtcclxuICAgICAgICAgICAgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTLnNwbGljZSh0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMuZmluZEluZGV4KG4gPT4gbiA9PT0gcGtnLmNvbnRlbnQuZnJvbS5uYW1lKSwgMSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubmFtZSwgXCIgd2FpdGluZyBmb3I6XCIsIHRoaXMuV0FJVElOR19GT1JfQlJJREdFUyk7XHJcbiAgICAgICAgICAgIHRoaXMucmV0dXJuVG8ucHVzaChwa2cuY29udGVudC5mcm9tLm5hbWUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInJldHVybmluZyBmcm9tIFwiLCB0aGlzLm5hbWUsIFwidG8gXCIsIHRoaXMucmV0dXJuVG8pO1xyXG4gICAgICAgICAgICB0aGlzLkRJU0NPVkVSRURfTElOS1MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBjb3N0OiBwa2cuY29zdCxcclxuICAgICAgICAgICAgICAgIG5vZGVzOiBbe25hbWU6IHRoaXMubmFtZSwgdmFsdWU6IHRoaXMudmFsdWV9LCBwa2cuY29udGVudC5mcm9tXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCEhdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTICYmIHRoaXMuV0FJVElOR19GT1JfQlJJREdFUy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5yZXR1cm5Uby5mb3JFYWNoKHRhcmdldCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3RvY29sOiAnQ1NUUCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRGVhciBOZWlnaGJvciBoZWFyIGFyZSBteSBkaXNjb3ZlcmVkIGxpbmtzLCB5b3UgbWF5IGNvbmNhdCB0aGVtIHdpdGggeW91cnMgYW5kIHNlbmQgdGhlbSBiYWNrIScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2NvdmVyZWRMaW5rczogdGhpcy5ESVNDT1ZFUkVEX0xJTktTXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5JTkRFWEVEID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ05vZGUgaGFzIGZpbmlzaGVkICcsIHRoaXMubmFtZSk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5yb290T2ZJbmRleGluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLmZpbmlzaGVkSW5kZXhpbmcubmV4dCgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGlua3MgPSBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRElTQ09WRVJFRF9MSU5LUy5mb3JFYWNoKGwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCFsaW5rcy5maW5kKGxpbmsgPT4gbC5ub2Rlcy5maW5kSW5kZXgobiA9PiBuLm5hbWUgPT09IGxpbmsubm9kZXNbMF0ubmFtZSkgIT09IC0xICYmIGwubm9kZXMuZmluZEluZGV4KG4gPT4gbi5uYW1lID09PSBsaW5rLm5vZGVzWzFdLm5hbWUpICE9PSAtMSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5rcy5wdXNoKGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbXN0ID0gbmV3IE1pbmltYWxTcGFuVHJlZShsaW5rcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uZmluaXNoZWRJbmRleGluZy5uZXh0KG1zdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlY2VpdmUocGtnOiBTaW11bGF0aW9uUGFja2FnZSkge1xyXG4gICAgICAgIGlmIChwa2cucHJvdG9jb2wgPT09ICdDU1RQJykge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUNTVFBQYWNrYWdlKHBrZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMClcclxuICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzRnVuY3Rpb24uanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG52YXIgX2VuYWJsZV9zdXBlcl9ncm9zc19tb2RlX3RoYXRfd2lsbF9jYXVzZV9iYWRfdGhpbmdzID0gZmFsc2U7XG5leHBvcnQgdmFyIGNvbmZpZyA9IHtcbiAgICBQcm9taXNlOiB1bmRlZmluZWQsXG4gICAgc2V0IHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSAvKkBfX1BVUkVfXyovIG5ldyBFcnJvcigpO1xuICAgICAgICAgICAgLypAX19QVVJFX18qLyBjb25zb2xlLndhcm4oJ0RFUFJFQ0FURUQhIFJ4SlMgd2FzIHNldCB0byB1c2UgZGVwcmVjYXRlZCBzeW5jaHJvbm91cyBlcnJvciBoYW5kbGluZyBiZWhhdmlvciBieSBjb2RlIGF0OiBcXG4nICsgZXJyb3Iuc3RhY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKF9lbmFibGVfc3VwZXJfZ3Jvc3NfbW9kZV90aGF0X3dpbGxfY2F1c2VfYmFkX3RoaW5ncykge1xuICAgICAgICAgICAgLypAX19QVVJFX18qLyBjb25zb2xlLmxvZygnUnhKUzogQmFjayB0byBhIGJldHRlciBlcnJvciBiZWhhdmlvci4gVGhhbmsgeW91LiA8MycpO1xuICAgICAgICB9XG4gICAgICAgIF9lbmFibGVfc3VwZXJfZ3Jvc3NfbW9kZV90aGF0X3dpbGxfY2F1c2VfYmFkX3RoaW5ncyA9IHZhbHVlO1xuICAgIH0sXG4gICAgZ2V0IHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcoKSB7XG4gICAgICAgIHJldHVybiBfZW5hYmxlX3N1cGVyX2dyb3NzX21vZGVfdGhhdF93aWxsX2NhdXNlX2JhZF90aGluZ3M7XG4gICAgfSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25maWcuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgZnVuY3Rpb24gaG9zdFJlcG9ydEVycm9yKGVycikge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyB0aHJvdyBlcnI7IH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aG9zdFJlcG9ydEVycm9yLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfY29uZmlnLF91dGlsX2hvc3RSZXBvcnRFcnJvciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgeyBob3N0UmVwb3J0RXJyb3IgfSBmcm9tICcuL3V0aWwvaG9zdFJlcG9ydEVycm9yJztcbmV4cG9ydCB2YXIgZW1wdHkgPSB7XG4gICAgY2xvc2VkOiB0cnVlLFxuICAgIG5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkgeyB9LFxuICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaG9zdFJlcG9ydEVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7IH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYnNlcnZlci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCB2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4ICYmIHR5cGVvZiB4Lmxlbmd0aCA9PT0gJ251bWJlcic7IH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNBcnJheS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmZ1bmN0aW9uIFVuc3Vic2NyaXB0aW9uRXJyb3JJbXBsKGVycm9ycykge1xuICAgIEVycm9yLmNhbGwodGhpcyk7XG4gICAgdGhpcy5tZXNzYWdlID0gZXJyb3JzID9cbiAgICAgICAgZXJyb3JzLmxlbmd0aCArIFwiIGVycm9ycyBvY2N1cnJlZCBkdXJpbmcgdW5zdWJzY3JpcHRpb246XFxuXCIgKyBlcnJvcnMubWFwKGZ1bmN0aW9uIChlcnIsIGkpIHsgcmV0dXJuIGkgKyAxICsgXCIpIFwiICsgZXJyLnRvU3RyaW5nKCk7IH0pLmpvaW4oJ1xcbiAgJykgOiAnJztcbiAgICB0aGlzLm5hbWUgPSAnVW5zdWJzY3JpcHRpb25FcnJvcic7XG4gICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XG4gICAgcmV0dXJuIHRoaXM7XG59XG5VbnN1YnNjcmlwdGlvbkVycm9ySW1wbC5wcm90b3R5cGUgPSAvKkBfX1BVUkVfXyovIE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbmV4cG9ydCB2YXIgVW5zdWJzY3JpcHRpb25FcnJvciA9IFVuc3Vic2NyaXB0aW9uRXJyb3JJbXBsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VW5zdWJzY3JpcHRpb25FcnJvci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX3V0aWxfaXNBcnJheSxfdXRpbF9pc09iamVjdCxfdXRpbF9pc0Z1bmN0aW9uLF91dGlsX1Vuc3Vic2NyaXB0aW9uRXJyb3IgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgaXNBcnJheSB9IGZyb20gJy4vdXRpbC9pc0FycmF5JztcbmltcG9ydCB7IGlzT2JqZWN0IH0gZnJvbSAnLi91dGlsL2lzT2JqZWN0JztcbmltcG9ydCB7IGlzRnVuY3Rpb24gfSBmcm9tICcuL3V0aWwvaXNGdW5jdGlvbic7XG5pbXBvcnQgeyBVbnN1YnNjcmlwdGlvbkVycm9yIH0gZnJvbSAnLi91dGlsL1Vuc3Vic2NyaXB0aW9uRXJyb3InO1xudmFyIFN1YnNjcmlwdGlvbiA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdWJzY3JpcHRpb24odW5zdWJzY3JpYmUpIHtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcGFyZW50cyA9IG51bGw7XG4gICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMgPSBudWxsO1xuICAgICAgICBpZiAodW5zdWJzY3JpYmUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlID0gdW5zdWJzY3JpYmU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGhhc0Vycm9ycyA9IGZhbHNlO1xuICAgICAgICB2YXIgZXJyb3JzO1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX2EgPSB0aGlzLCBfcGFyZW50ID0gX2EuX3BhcmVudCwgX3BhcmVudHMgPSBfYS5fcGFyZW50cywgX3Vuc3Vic2NyaWJlID0gX2EuX3Vuc3Vic2NyaWJlLCBfc3Vic2NyaXB0aW9ucyA9IF9hLl9zdWJzY3JpcHRpb25zO1xuICAgICAgICB0aGlzLmNsb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX3BhcmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3BhcmVudHMgPSBudWxsO1xuICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25zID0gbnVsbDtcbiAgICAgICAgdmFyIGluZGV4ID0gLTE7XG4gICAgICAgIHZhciBsZW4gPSBfcGFyZW50cyA/IF9wYXJlbnRzLmxlbmd0aCA6IDA7XG4gICAgICAgIHdoaWxlIChfcGFyZW50KSB7XG4gICAgICAgICAgICBfcGFyZW50LnJlbW92ZSh0aGlzKTtcbiAgICAgICAgICAgIF9wYXJlbnQgPSArK2luZGV4IDwgbGVuICYmIF9wYXJlbnRzW2luZGV4XSB8fCBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKF91bnN1YnNjcmliZSkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgX3Vuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGhhc0Vycm9ycyA9IHRydWU7XG4gICAgICAgICAgICAgICAgZXJyb3JzID0gZSBpbnN0YW5jZW9mIFVuc3Vic2NyaXB0aW9uRXJyb3IgPyBmbGF0dGVuVW5zdWJzY3JpcHRpb25FcnJvcnMoZS5lcnJvcnMpIDogW2VdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FycmF5KF9zdWJzY3JpcHRpb25zKSkge1xuICAgICAgICAgICAgaW5kZXggPSAtMTtcbiAgICAgICAgICAgIGxlbiA9IF9zdWJzY3JpcHRpb25zLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN1YiA9IF9zdWJzY3JpcHRpb25zW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoaXNPYmplY3Qoc3ViKSkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ViLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0Vycm9ycyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMgfHwgW107XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFVuc3Vic2NyaXB0aW9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMuY29uY2F0KGZsYXR0ZW5VbnN1YnNjcmlwdGlvbkVycm9ycyhlLmVycm9ycykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0Vycm9ycykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3Vic2NyaXB0aW9uRXJyb3IoZXJyb3JzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodGVhcmRvd24pIHtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHRlYXJkb3duO1xuICAgICAgICBzd2l0Y2ggKHR5cGVvZiB0ZWFyZG93bikge1xuICAgICAgICAgICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24odGVhcmRvd24pO1xuICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uID09PSB0aGlzIHx8IHN1YnNjcmlwdGlvbi5jbG9zZWQgfHwgdHlwZW9mIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIShzdWJzY3JpcHRpb24gaW5zdGFuY2VvZiBTdWJzY3JpcHRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSBzdWJzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLl9zdWJzY3JpcHRpb25zID0gW3RtcF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIGlmICghdGVhcmRvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN1YnNjcmlwdGlvbi5FTVBUWTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bnJlY29nbml6ZWQgdGVhcmRvd24gJyArIHRlYXJkb3duICsgJyBhZGRlZCB0byBTdWJzY3JpcHRpb24uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbi5fYWRkUGFyZW50KHRoaXMpKSB7XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IHRoaXMuX3N1YnNjcmlwdGlvbnM7XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IFtzdWJzY3JpcHRpb25dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgfTtcbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSB0aGlzLl9zdWJzY3JpcHRpb25zO1xuICAgICAgICBpZiAoc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbkluZGV4ID0gc3Vic2NyaXB0aW9ucy5pbmRleE9mKHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9ucy5zcGxpY2Uoc3Vic2NyaXB0aW9uSW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLl9hZGRQYXJlbnQgPSBmdW5jdGlvbiAocGFyZW50KSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIF9wYXJlbnQgPSBfYS5fcGFyZW50LCBfcGFyZW50cyA9IF9hLl9wYXJlbnRzO1xuICAgICAgICBpZiAoX3BhcmVudCA9PT0gcGFyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIV9wYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFfcGFyZW50cykge1xuICAgICAgICAgICAgdGhpcy5fcGFyZW50cyA9IFtwYXJlbnRdO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoX3BhcmVudHMuaW5kZXhPZihwYXJlbnQpID09PSAtMSkge1xuICAgICAgICAgICAgX3BhcmVudHMucHVzaChwYXJlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uLkVNUFRZID0gKGZ1bmN0aW9uIChlbXB0eSkge1xuICAgICAgICBlbXB0eS5jbG9zZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgfShuZXcgU3Vic2NyaXB0aW9uKCkpKTtcbiAgICByZXR1cm4gU3Vic2NyaXB0aW9uO1xufSgpKTtcbmV4cG9ydCB7IFN1YnNjcmlwdGlvbiB9O1xuZnVuY3Rpb24gZmxhdHRlblVuc3Vic2NyaXB0aW9uRXJyb3JzKGVycm9ycykge1xuICAgIHJldHVybiBlcnJvcnMucmVkdWNlKGZ1bmN0aW9uIChlcnJzLCBlcnIpIHsgcmV0dXJuIGVycnMuY29uY2F0KChlcnIgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yKSA/IGVyci5lcnJvcnMgOiBlcnIpOyB9LCBbXSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdWJzY3JpcHRpb24uanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QoeCkge1xuICAgIHJldHVybiB4ICE9PSBudWxsICYmIHR5cGVvZiB4ID09PSAnb2JqZWN0Jztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzT2JqZWN0LmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IHZhciByeFN1YnNjcmliZXIgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nXG4gICAgPyAvKkBfX1BVUkVfXyovIFN5bWJvbCgncnhTdWJzY3JpYmVyJylcbiAgICA6ICdAQHJ4U3Vic2NyaWJlcl8nICsgLypAX19QVVJFX18qLyBNYXRoLnJhbmRvbSgpO1xuZXhwb3J0IHZhciAkJHJ4U3Vic2NyaWJlciA9IHJ4U3Vic2NyaWJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ4U3Vic2NyaWJlci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX3V0aWxfaXNGdW5jdGlvbixfT2JzZXJ2ZXIsX1N1YnNjcmlwdGlvbixfaW50ZXJuYWxfc3ltYm9sX3J4U3Vic2NyaWJlcixfY29uZmlnLF91dGlsX2hvc3RSZXBvcnRFcnJvciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vdXRpbC9pc0Z1bmN0aW9uJztcbmltcG9ydCB7IGVtcHR5IGFzIGVtcHR5T2JzZXJ2ZXIgfSBmcm9tICcuL09ic2VydmVyJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IHJ4U3Vic2NyaWJlciBhcyByeFN1YnNjcmliZXJTeW1ib2wgfSBmcm9tICcuLi9pbnRlcm5hbC9zeW1ib2wvcnhTdWJzY3JpYmVyJztcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJy4vY29uZmlnJztcbmltcG9ydCB7IGhvc3RSZXBvcnRFcnJvciB9IGZyb20gJy4vdXRpbC9ob3N0UmVwb3J0RXJyb3InO1xudmFyIFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc3luY0Vycm9yVmFsdWUgPSBudWxsO1xuICAgICAgICBfdGhpcy5zeW5jRXJyb3JUaHJvd24gPSBmYWxzZTtcbiAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGVtcHR5T2JzZXJ2ZXI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgaWYgKCFkZXN0aW5hdGlvbk9yTmV4dCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGVtcHR5T2JzZXJ2ZXI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRlc3RpbmF0aW9uT3JOZXh0ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVzdGluYXRpb25Pck5leHQgaW5zdGFuY2VvZiBTdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zeW5jRXJyb3JUaHJvd2FibGUgPSBkZXN0aW5hdGlvbk9yTmV4dC5zeW5jRXJyb3JUaHJvd2FibGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uT3JOZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb25Pck5leHQuYWRkKF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnN5bmNFcnJvclRocm93YWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IG5ldyBTYWZlU3Vic2NyaWJlcihfdGhpcywgZGVzdGluYXRpb25Pck5leHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IG5ldyBTYWZlU3Vic2NyaWJlcihfdGhpcywgZGVzdGluYXRpb25Pck5leHQsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZVtyeFN1YnNjcmliZXJTeW1ib2xdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfTtcbiAgICBTdWJzY3JpYmVyLmNyZWF0ZSA9IGZ1bmN0aW9uIChuZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIHN1YnNjcmliZXIgPSBuZXcgU3Vic2NyaWJlcihuZXh0LCBlcnJvciwgY29tcGxldGUpO1xuICAgICAgICBzdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gc3Vic2NyaWJlcjtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdGhpcy5fbmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51bnN1YnNjcmliZS5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlQW5kUmVjeWNsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgX3BhcmVudCA9IF9hLl9wYXJlbnQsIF9wYXJlbnRzID0gX2EuX3BhcmVudHM7XG4gICAgICAgIHRoaXMuX3BhcmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3BhcmVudHMgPSBudWxsO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRoaXMuY2xvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3BhcmVudCA9IF9wYXJlbnQ7XG4gICAgICAgIHRoaXMuX3BhcmVudHMgPSBfcGFyZW50cztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gU3Vic2NyaWJlcjtcbn0oU3Vic2NyaXB0aW9uKSk7XG5leHBvcnQgeyBTdWJzY3JpYmVyIH07XG52YXIgU2FmZVN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoU2FmZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2FmZVN1YnNjcmliZXIoX3BhcmVudFN1YnNjcmliZXIsIG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuX3BhcmVudFN1YnNjcmliZXIgPSBfcGFyZW50U3Vic2NyaWJlcjtcbiAgICAgICAgdmFyIG5leHQ7XG4gICAgICAgIHZhciBjb250ZXh0ID0gX3RoaXM7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKG9ic2VydmVyT3JOZXh0KSkge1xuICAgICAgICAgICAgbmV4dCA9IG9ic2VydmVyT3JOZXh0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9ic2VydmVyT3JOZXh0KSB7XG4gICAgICAgICAgICBuZXh0ID0gb2JzZXJ2ZXJPck5leHQubmV4dDtcbiAgICAgICAgICAgIGVycm9yID0gb2JzZXJ2ZXJPck5leHQuZXJyb3I7XG4gICAgICAgICAgICBjb21wbGV0ZSA9IG9ic2VydmVyT3JOZXh0LmNvbXBsZXRlO1xuICAgICAgICAgICAgaWYgKG9ic2VydmVyT3JOZXh0ICE9PSBlbXB0eU9ic2VydmVyKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dCA9IE9iamVjdC5jcmVhdGUob2JzZXJ2ZXJPck5leHQpO1xuICAgICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRleHQudW5zdWJzY3JpYmUpKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZChjb250ZXh0LnVuc3Vic2NyaWJlLmJpbmQoY29udGV4dCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250ZXh0LnVuc3Vic2NyaWJlID0gX3RoaXMudW5zdWJzY3JpYmUuYmluZChfdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuX2NvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICBfdGhpcy5fbmV4dCA9IG5leHQ7XG4gICAgICAgIF90aGlzLl9lcnJvciA9IGVycm9yO1xuICAgICAgICBfdGhpcy5fY29tcGxldGUgPSBjb21wbGV0ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkICYmIHRoaXMuX25leHQpIHtcbiAgICAgICAgICAgIHZhciBfcGFyZW50U3Vic2NyaWJlciA9IHRoaXMuX3BhcmVudFN1YnNjcmliZXI7XG4gICAgICAgICAgICBpZiAoIWNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nIHx8ICFfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JVbnN1Yih0aGlzLl9uZXh0LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLl9fdHJ5T3JTZXRFcnJvcihfcGFyZW50U3Vic2NyaWJlciwgdGhpcy5fbmV4dCwgdmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHZhciBfcGFyZW50U3Vic2NyaWJlciA9IHRoaXMuX3BhcmVudFN1YnNjcmliZXI7XG4gICAgICAgICAgICB2YXIgdXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyA9IGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2Vycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nIHx8ICFfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yVW5zdWIodGhpcy5fZXJyb3IsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclNldEVycm9yKF9wYXJlbnRTdWJzY3JpYmVyLCB0aGlzLl9lcnJvciwgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBob3N0UmVwb3J0RXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIF9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclZhbHVlID0gZXJyO1xuICAgICAgICAgICAgICAgICAgICBfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaG9zdFJlcG9ydEVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZWRDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl9jb21wbGV0ZS5jYWxsKF90aGlzLl9jb250ZXh0KTsgfTtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nIHx8ICFfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yVW5zdWIod3JhcHBlZENvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yU2V0RXJyb3IoX3BhcmVudFN1YnNjcmliZXIsIHdyYXBwZWRDb21wbGV0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5fX3RyeU9yVW5zdWIgPSBmdW5jdGlvbiAoZm4sIHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMuX2NvbnRleHQsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBob3N0UmVwb3J0RXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLl9fdHJ5T3JTZXRFcnJvciA9IGZ1bmN0aW9uIChwYXJlbnQsIGZuLCB2YWx1ZSkge1xuICAgICAgICBpZiAoIWNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2JhZCBjYWxsJyk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcy5fY29udGV4dCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgICAgIHBhcmVudC5zeW5jRXJyb3JWYWx1ZSA9IGVycjtcbiAgICAgICAgICAgICAgICBwYXJlbnQuc3luY0Vycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGhvc3RSZXBvcnRFcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfcGFyZW50U3Vic2NyaWJlciA9IHRoaXMuX3BhcmVudFN1YnNjcmliZXI7XG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSBudWxsO1xuICAgICAgICB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyID0gbnVsbDtcbiAgICAgICAgX3BhcmVudFN1YnNjcmliZXIudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIHJldHVybiBTYWZlU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcikpO1xuZXhwb3J0IHsgU2FmZVN1YnNjcmliZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YnNjcmliZXIuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgdmFyIG9ic2VydmFibGUgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5vYnNlcnZhYmxlIHx8ICdAQG9ic2VydmFibGUnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JzZXJ2YWJsZS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCBmdW5jdGlvbiBub29wKCkgeyB9XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ub29wLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfbm9vcCBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBub29wIH0gZnJvbSAnLi9ub29wJztcbmV4cG9ydCBmdW5jdGlvbiBwaXBlKCkge1xuICAgIHZhciBmbnMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBmbnNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuIHBpcGVGcm9tQXJyYXkoZm5zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwaXBlRnJvbUFycmF5KGZucykge1xuICAgIGlmICghZm5zKSB7XG4gICAgICAgIHJldHVybiBub29wO1xuICAgIH1cbiAgICBpZiAoZm5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gZm5zWzBdO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gcGlwZWQoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGZucy5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIGZuKSB7IHJldHVybiBmbihwcmV2KTsgfSwgaW5wdXQpO1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1waXBlLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfdXRpbF9jYW5SZXBvcnRFcnJvcixfdXRpbF90b1N1YnNjcmliZXIsX2ludGVybmFsX3N5bWJvbF9vYnNlcnZhYmxlLF91dGlsX3BpcGUsX2NvbmZpZyBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBjYW5SZXBvcnRFcnJvciB9IGZyb20gJy4vdXRpbC9jYW5SZXBvcnRFcnJvcic7XG5pbXBvcnQgeyB0b1N1YnNjcmliZXIgfSBmcm9tICcuL3V0aWwvdG9TdWJzY3JpYmVyJztcbmltcG9ydCB7IG9ic2VydmFibGUgYXMgU3ltYm9sX29ic2VydmFibGUgfSBmcm9tICcuLi9pbnRlcm5hbC9zeW1ib2wvb2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBwaXBlRnJvbUFycmF5IH0gZnJvbSAnLi91dGlsL3BpcGUnO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xudmFyIE9ic2VydmFibGUgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT2JzZXJ2YWJsZShzdWJzY3JpYmUpIHtcbiAgICAgICAgdGhpcy5faXNTY2FsYXIgPSBmYWxzZTtcbiAgICAgICAgaWYgKHN1YnNjcmliZSkge1xuICAgICAgICAgICAgdGhpcy5fc3Vic2NyaWJlID0gc3Vic2NyaWJlO1xuICAgICAgICB9XG4gICAgfVxuICAgIE9ic2VydmFibGUucHJvdG90eXBlLmxpZnQgPSBmdW5jdGlvbiAob3BlcmF0b3IpIHtcbiAgICAgICAgdmFyIG9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZSgpO1xuICAgICAgICBvYnNlcnZhYmxlLnNvdXJjZSA9IHRoaXM7XG4gICAgICAgIG9ic2VydmFibGUub3BlcmF0b3IgPSBvcGVyYXRvcjtcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGU7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAob2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIgb3BlcmF0b3IgPSB0aGlzLm9wZXJhdG9yO1xuICAgICAgICB2YXIgc2luayA9IHRvU3Vic2NyaWJlcihvYnNlcnZlck9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKTtcbiAgICAgICAgaWYgKG9wZXJhdG9yKSB7XG4gICAgICAgICAgICBzaW5rLmFkZChvcGVyYXRvci5jYWxsKHNpbmssIHRoaXMuc291cmNlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzaW5rLmFkZCh0aGlzLnNvdXJjZSB8fCAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgJiYgIXNpbmsuc3luY0Vycm9yVGhyb3dhYmxlKSA/XG4gICAgICAgICAgICAgICAgdGhpcy5fc3Vic2NyaWJlKHNpbmspIDpcbiAgICAgICAgICAgICAgICB0aGlzLl90cnlTdWJzY3JpYmUoc2luaykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgaWYgKHNpbmsuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICAgICAgc2luay5zeW5jRXJyb3JUaHJvd2FibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoc2luay5zeW5jRXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgc2luay5zeW5jRXJyb3JWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNpbms7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlID0gZnVuY3Rpb24gKHNpbmspIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmUoc2luayk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgaWYgKGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgICAgc2luay5zeW5jRXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNpbmsuc3luY0Vycm9yVmFsdWUgPSBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2FuUmVwb3J0RXJyb3Ioc2luaykpIHtcbiAgICAgICAgICAgICAgICBzaW5rLmVycm9yKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChuZXh0LCBwcm9taXNlQ3Rvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBwcm9taXNlQ3RvciA9IGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKTtcbiAgICAgICAgcmV0dXJuIG5ldyBwcm9taXNlQ3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQodmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHJlamVjdCwgcmVzb2x2ZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLnNvdXJjZTtcbiAgICAgICAgcmV0dXJuIHNvdXJjZSAmJiBzb3VyY2Uuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGVbU3ltYm9sX29ic2VydmFibGVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvcGVyYXRpb25zID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBvcGVyYXRpb25zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wZXJhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGlwZUZyb21BcnJheShvcGVyYXRpb25zKSh0aGlzKTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnRvUHJvbWlzZSA9IGZ1bmN0aW9uIChwcm9taXNlQ3Rvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBwcm9taXNlQ3RvciA9IGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKTtcbiAgICAgICAgcmV0dXJuIG5ldyBwcm9taXNlQ3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgICAgICBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHZhbHVlID0geDsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gcmVqZWN0KGVycik7IH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc29sdmUodmFsdWUpOyB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKHN1YnNjcmliZSk7XG4gICAgfTtcbiAgICByZXR1cm4gT2JzZXJ2YWJsZTtcbn0oKSk7XG5leHBvcnQgeyBPYnNlcnZhYmxlIH07XG5mdW5jdGlvbiBnZXRQcm9taXNlQ3Rvcihwcm9taXNlQ3Rvcikge1xuICAgIGlmICghcHJvbWlzZUN0b3IpIHtcbiAgICAgICAgcHJvbWlzZUN0b3IgPSBjb25maWcuUHJvbWlzZSB8fCBQcm9taXNlO1xuICAgIH1cbiAgICBpZiAoIXByb21pc2VDdG9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignbm8gUHJvbWlzZSBpbXBsIGZvdW5kJyk7XG4gICAgfVxuICAgIHJldHVybiBwcm9taXNlQ3Rvcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmFibGUuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9TdWJzY3JpYmVyLF9zeW1ib2xfcnhTdWJzY3JpYmVyLF9PYnNlcnZlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBTdWJzY3JpYmVyIH0gZnJvbSAnLi4vU3Vic2NyaWJlcic7XG5pbXBvcnQgeyByeFN1YnNjcmliZXIgYXMgcnhTdWJzY3JpYmVyU3ltYm9sIH0gZnJvbSAnLi4vc3ltYm9sL3J4U3Vic2NyaWJlcic7XG5pbXBvcnQgeyBlbXB0eSBhcyBlbXB0eU9ic2VydmVyIH0gZnJvbSAnLi4vT2JzZXJ2ZXInO1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3Vic2NyaWJlcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgaWYgKG5leHRPck9ic2VydmVyKSB7XG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciBpbnN0YW5jZW9mIFN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXh0T3JPYnNlcnZlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXJbcnhTdWJzY3JpYmVyU3ltYm9sXSkge1xuICAgICAgICAgICAgcmV0dXJuIG5leHRPck9ic2VydmVyW3J4U3Vic2NyaWJlclN5bWJvbF0oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIW5leHRPck9ic2VydmVyICYmICFlcnJvciAmJiAhY29tcGxldGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVyKGVtcHR5T2JzZXJ2ZXIpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFN1YnNjcmliZXIobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b1N1YnNjcmliZXIuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9TdWJzY3JpYmVyIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IFN1YnNjcmliZXIgfSBmcm9tICcuLi9TdWJzY3JpYmVyJztcbmV4cG9ydCBmdW5jdGlvbiBjYW5SZXBvcnRFcnJvcihvYnNlcnZlcikge1xuICAgIHdoaWxlIChvYnNlcnZlcikge1xuICAgICAgICB2YXIgX2EgPSBvYnNlcnZlciwgY2xvc2VkXzEgPSBfYS5jbG9zZWQsIGRlc3RpbmF0aW9uID0gX2EuZGVzdGluYXRpb24sIGlzU3RvcHBlZCA9IF9hLmlzU3RvcHBlZDtcbiAgICAgICAgaWYgKGNsb3NlZF8xIHx8IGlzU3RvcHBlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlc3RpbmF0aW9uICYmIGRlc3RpbmF0aW9uIGluc3RhbmNlb2YgU3Vic2NyaWJlcikge1xuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9ic2VydmVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhblJlcG9ydEVycm9yLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZnVuY3Rpb24gT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JJbXBsKCkge1xuICAgIEVycm9yLmNhbGwodGhpcyk7XG4gICAgdGhpcy5tZXNzYWdlID0gJ29iamVjdCB1bnN1YnNjcmliZWQnO1xuICAgIHRoaXMubmFtZSA9ICdPYmplY3RVbnN1YnNjcmliZWRFcnJvcic7XG4gICAgcmV0dXJuIHRoaXM7XG59XG5PYmplY3RVbnN1YnNjcmliZWRFcnJvckltcGwucHJvdG90eXBlID0gLypAX19QVVJFX18qLyBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG5leHBvcnQgdmFyIE9iamVjdFVuc3Vic2NyaWJlZEVycm9yID0gT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JJbXBsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpcHRpb24gUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3Vic2NyaXB0aW9uJztcbnZhciBTdWJqZWN0U3Vic2NyaXB0aW9uID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFN1YmplY3RTdWJzY3JpcHRpb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3ViamVjdFN1YnNjcmlwdGlvbihzdWJqZWN0LCBzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnN1YmplY3QgPSBzdWJqZWN0O1xuICAgICAgICBfdGhpcy5zdWJzY3JpYmVyID0gc3Vic2NyaWJlcjtcbiAgICAgICAgX3RoaXMuY2xvc2VkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU3ViamVjdFN1YnNjcmlwdGlvbi5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgdmFyIHN1YmplY3QgPSB0aGlzLnN1YmplY3Q7XG4gICAgICAgIHZhciBvYnNlcnZlcnMgPSBzdWJqZWN0Lm9ic2VydmVycztcbiAgICAgICAgdGhpcy5zdWJqZWN0ID0gbnVsbDtcbiAgICAgICAgaWYgKCFvYnNlcnZlcnMgfHwgb2JzZXJ2ZXJzLmxlbmd0aCA9PT0gMCB8fCBzdWJqZWN0LmlzU3RvcHBlZCB8fCBzdWJqZWN0LmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdWJzY3JpYmVySW5kZXggPSBvYnNlcnZlcnMuaW5kZXhPZih0aGlzLnN1YnNjcmliZXIpO1xuICAgICAgICBpZiAoc3Vic2NyaWJlckluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXJzLnNwbGljZShzdWJzY3JpYmVySW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU3ViamVjdFN1YnNjcmlwdGlvbjtcbn0oU3Vic2NyaXB0aW9uKSk7XG5leHBvcnQgeyBTdWJqZWN0U3Vic2NyaXB0aW9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdWJqZWN0U3Vic2NyaXB0aW9uLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfT2JzZXJ2YWJsZSxfU3Vic2NyaWJlcixfU3Vic2NyaXB0aW9uLF91dGlsX09iamVjdFVuc3Vic2NyaWJlZEVycm9yLF9TdWJqZWN0U3Vic2NyaXB0aW9uLF9pbnRlcm5hbF9zeW1ib2xfcnhTdWJzY3JpYmVyIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi9PYnNlcnZhYmxlJztcbmltcG9ydCB7IFN1YnNjcmliZXIgfSBmcm9tICcuL1N1YnNjcmliZXInO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAnLi9TdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IgfSBmcm9tICcuL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3InO1xuaW1wb3J0IHsgU3ViamVjdFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3ViamVjdFN1YnNjcmlwdGlvbic7XG5pbXBvcnQgeyByeFN1YnNjcmliZXIgYXMgcnhTdWJzY3JpYmVyU3ltYm9sIH0gZnJvbSAnLi4vaW50ZXJuYWwvc3ltYm9sL3J4U3Vic2NyaWJlcic7XG52YXIgU3ViamVjdFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoU3ViamVjdFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3ViamVjdFN1YnNjcmliZXIoZGVzdGluYXRpb24pIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFN1YmplY3RTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyKSk7XG5leHBvcnQgeyBTdWJqZWN0U3Vic2NyaWJlciB9O1xudmFyIFN1YmplY3QgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoU3ViamVjdCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdWJqZWN0KCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICAgICAgX3RoaXMuY2xvc2VkID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5oYXNFcnJvciA9IGZhbHNlO1xuICAgICAgICBfdGhpcy50aHJvd25FcnJvciA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU3ViamVjdC5wcm90b3R5cGVbcnhTdWJzY3JpYmVyU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdWJqZWN0U3Vic2NyaWJlcih0aGlzKTtcbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLmxpZnQgPSBmdW5jdGlvbiAob3BlcmF0b3IpIHtcbiAgICAgICAgdmFyIHN1YmplY3QgPSBuZXcgQW5vbnltb3VzU3ViamVjdCh0aGlzLCB0aGlzKTtcbiAgICAgICAgc3ViamVjdC5vcGVyYXRvciA9IG9wZXJhdG9yO1xuICAgICAgICByZXR1cm4gc3ViamVjdDtcbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB2YXIgb2JzZXJ2ZXJzID0gdGhpcy5vYnNlcnZlcnM7XG4gICAgICAgICAgICB2YXIgbGVuID0gb2JzZXJ2ZXJzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBjb3B5ID0gb2JzZXJ2ZXJzLnNsaWNlKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29weVtpXS5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWU7XG4gICAgICAgIHRoaXMudGhyb3duRXJyb3IgPSBlcnI7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIG9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzO1xuICAgICAgICB2YXIgbGVuID0gb2JzZXJ2ZXJzLmxlbmd0aDtcbiAgICAgICAgdmFyIGNvcHkgPSBvYnNlcnZlcnMuc2xpY2UoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY29weVtpXS5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA9IDA7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVycztcbiAgICAgICAgdmFyIGxlbiA9IG9ic2VydmVycy5sZW5ndGg7XG4gICAgICAgIHZhciBjb3B5ID0gb2JzZXJ2ZXJzLnNsaWNlKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNvcHlbaV0uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm9ic2VydmVycyA9IG51bGw7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLl90cnlTdWJzY3JpYmUuY2FsbCh0aGlzLCBzdWJzY3JpYmVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5oYXNFcnJvcikge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcih0aGlzLnRocm93bkVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb24uRU1QVFk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb24uRU1QVFk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdWJqZWN0U3Vic2NyaXB0aW9uKHRoaXMsIHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5hc09ic2VydmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoKTtcbiAgICAgICAgb2JzZXJ2YWJsZS5zb3VyY2UgPSB0aGlzO1xuICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZTtcbiAgICB9O1xuICAgIFN1YmplY3QuY3JlYXRlID0gZnVuY3Rpb24gKGRlc3RpbmF0aW9uLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNTdWJqZWN0KGRlc3RpbmF0aW9uLCBzb3VyY2UpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1YmplY3Q7XG59KE9ic2VydmFibGUpKTtcbmV4cG9ydCB7IFN1YmplY3QgfTtcbnZhciBBbm9ueW1vdXNTdWJqZWN0ID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKEFub255bW91c1N1YmplY3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQW5vbnltb3VzU3ViamVjdChkZXN0aW5hdGlvbiwgc291cmNlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgICAgIF90aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBBbm9ueW1vdXNTdWJqZWN0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGlmIChkZXN0aW5hdGlvbiAmJiBkZXN0aW5hdGlvbi5uZXh0KSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGlmIChkZXN0aW5hdGlvbiAmJiBkZXN0aW5hdGlvbi5lcnJvcikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBbm9ueW1vdXNTdWJqZWN0LnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgaWYgKGRlc3RpbmF0aW9uICYmIGRlc3RpbmF0aW9uLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFub255bW91c1N1YmplY3QucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5zb3VyY2U7XG4gICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gU3Vic2NyaXB0aW9uLkVNUFRZO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQW5vbnltb3VzU3ViamVjdDtcbn0oU3ViamVjdCkpO1xuZXhwb3J0IHsgQW5vbnltb3VzU3ViamVjdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ViamVjdC5qcy5tYXBcbiIsImltcG9ydCB7U2ltdWxhdGlvblBhY2thZ2V9IGZyb20gXCIuL1NpbXVsYXRpb25QYWNrYWdlXCI7XHJcbmltcG9ydCB7U3ViamVjdH0gZnJvbSBcInJ4anNcIjtcclxuaW1wb3J0IHtNaW5pbWFsU3BhblRyZWV9IGZyb20gXCIuLi9TcGFubmluZ1RyZWUvbWluaW1hbFNwYW5uaW5nVHJlZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNpbXVsYXRpb25Db25uZWN0aW9ue1xyXG5cdHB1YmxpYyBzZW5kOiBTdWJqZWN0PFNpbXVsYXRpb25QYWNrYWdlPiA9IG5ldyBTdWJqZWN0PFNpbXVsYXRpb25QYWNrYWdlPigpO1xyXG5cdHB1YmxpYyByZWNlaXZlOiBTdWJqZWN0PFNpbXVsYXRpb25QYWNrYWdlPiA9IG5ldyBTdWJqZWN0PFNpbXVsYXRpb25QYWNrYWdlPigpO1xyXG5cdHB1YmxpYyBwaW5nOiBQcm9taXNlPHN0cmluZ1tdPjtcclxuXHRjb25zdHJ1Y3RvcihzaWJsaW5nQnJpZGdlczogc3RyaW5nW10pe1xyXG5cdFx0dGhpcy5waW5nID0gbmV3IFByb21pc2U8c3RyaW5nW10+KHJlc29sdmUgPT4gcmVzb2x2ZShzaWJsaW5nQnJpZGdlcykpO1xyXG5cdH1cclxuXHRwdWJsaWMgZmluaXNoZWRJbmRleGluZzogU3ViamVjdDxNaW5pbWFsU3BhblRyZWV8YW55PiA9IG5ldyBTdWJqZWN0KCk7XHJcbn1cclxuIiwiaW1wb3J0IHtTcGFubmluZ1RyZWVOb2RlfSBmcm9tIFwiLi4vU3Bhbm5pbmdUcmVlL3NwYW5uaW5nVHJlZU5vZGVcIjtcclxuaW1wb3J0IHtCcmlkZ2V9IGZyb20gXCIuL0JyaWRnZVwiO1xyXG5pbXBvcnQge1NpbXVsYXRpb25Db25uZWN0aW9ufSBmcm9tIFwiLi9TaW11bGF0aW9uQ29ubmVjdGlvblwiO1xyXG5pbXBvcnQge1NpbXVsYXRpb25QYWNrYWdlfSBmcm9tIFwiLi9TaW11bGF0aW9uUGFja2FnZVwiO1xyXG5pbXBvcnQge01pbmltYWxTcGFuVHJlZX0gZnJvbSBcIi4uL1NwYW5uaW5nVHJlZS9taW5pbWFsU3Bhbm5pbmdUcmVlXCI7XHJcbmltcG9ydCB7U3Bhbm5pbmdUcmVlTGlua30gZnJvbSBcIi4uL1NwYW5uaW5nVHJlZS9zcGFubmluZ1RyZWVMaW5rXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU2ltdWxhdGlvbiB7XHJcbiAgICBwdWJsaWMgYnJpZGdlczogQnJpZGdlW10gPSBbXTtcclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBub2RlczogU3Bhbm5pbmdUcmVlTm9kZVtdKSB7XHJcbiAgICAgICAgbm9kZXMuZm9yRWFjaChub2RlID0+IHtcclxuICAgICAgICAgICAgbGV0IHNpYmxpbmdOb2RlcyA9IG5vZGUubGlua3MubWFwKGwgPT4gbC50b05vZGUpO1xyXG4gICAgICAgICAgICBjb25zdCBjb25uID0gbmV3IFNpbXVsYXRpb25Db25uZWN0aW9uKHNpYmxpbmdOb2Rlcyk7XHJcbiAgICAgICAgICAgIHRoaXMuYnJpZGdlcy5wdXNoKG5ldyBCcmlkZ2Uobm9kZS5uYW1lLCBub2RlLnZhbHVlLCBjb25uKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gYWxsb3cgY29tbXVuaWNhdGlvbiBiZXR3ZWVuIGRpcmVjdCBjb25uZWN0ZWQgYnJpZGdlc1xyXG4gICAgICAgIHRoaXMuYnJpZGdlcy5mb3JFYWNoKGJyaWRnZSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBsaW5rczogU3Bhbm5pbmdUcmVlTGlua1tdID0gbm9kZXMuZmluZChuID0+IG4ubmFtZSA9PT0gYnJpZGdlLm5hbWUpLmxpbmtzO1xyXG4gICAgICAgICAgICBsZXQgc2libGluZ05vZGVzID0gbGlua3MubWFwKGwgPT4gbC50b05vZGUpO1xyXG4gICAgICAgICAgICBicmlkZ2UuY29ubmVjdGlvbi5zZW5kLnN1YnNjcmliZSgocGtnOiBTaW11bGF0aW9uUGFja2FnZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCR7YnJpZGdlLm5hbWV9Pj4+JHtwa2cudGFyZ2V0fWApO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbm5lY3RlZE5vZGUgPSBzaWJsaW5nTm9kZXMuZmluZChuID0+IG4gPT09IHBrZy50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCEhY29ubmVjdGVkTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBrZy5jb3N0ID0gbGlua3MuZmluZChsID0+IGwudG9Ob2RlID09PSBwa2cudGFyZ2V0KS5jb3N0O1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJyaWRnZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKGIgPT4gYi5uYW1lID09PSBwa2cudGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbm5lY3Rpb24ucmVjZWl2ZS5uZXh0KHBrZyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBrZy5jb3N0KjEwMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhcnRJbmRleGluZ0Zyb21SYW5kb21CcmlkZ2U6ICgpID0+IFByb21pc2U8TWluaW1hbFNwYW5UcmVlPiA9ICgpID0+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8TWluaW1hbFNwYW5UcmVlPihhc3luYyByZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYnJpZGdlID0gdGhpcy5icmlkZ2VzW01hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIHRoaXMuYnJpZGdlcy5sZW5ndGgpXTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5icmlkZ2VzLCBicmlkZ2UpO1xyXG4gICAgICAgICAgICBicmlkZ2UuY29ubmVjdGlvbi5maW5pc2hlZEluZGV4aW5nLnN1YnNjcmliZSgobXN0KSA9PiByZXNvbHZlKG1zdCkpO1xyXG4gICAgICAgICAgICBicmlkZ2UuaW5kZXhOZXR3b3JrKCkudGhlbigoKT0+IGNvbnNvbGUubG9nKCd3dGYnKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8gcmVmZXJlbmNlcyB0byB0aGUgZG9tXHJcbmltcG9ydCB7cGFyc2V9IGZyb20gXCIuL3BhcnNlclwiO1xyXG5pbXBvcnQge1NpbXVsYXRpb259IGZyb20gXCIuL21vZGVscy9TaW11bGF0aW9uL1NpbXVsYXRpb25cIjtcclxuXHJcbmNvbnN0IGlucHV0QXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXh0SW4nKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xyXG5jb25zdCBvdXRwdXRBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RleHRPdXQnKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xyXG5jb25zdCBzaW11bGF0aW9uQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbXVsYXRlX2J0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuY29uc3Qgc2ltcGxlVGVzdCA9IGBcclxuR3JhcGggbXlncmFwaCB7XHJcblx0Ly8gTm9kZVxyXG5cdEEgPSAyO1xyXG5cdEIgPSAxO1xyXG5cdEMgPSAzO1xyXG5cdFxyXG5cdC8vIExpbmtzIHVuZCB6dWdlaC4gS29zdGVuXHJcblx0QSAtIEIgOiAxO1xyXG5cdEEgLSBDIDogMTtcclxuXHRDIC0gQiA6IDI7XHJcbn1gO1xyXG5jb25zdCB0ZXN0ID0gYFxyXG5HcmFwaCBteWdyYXBoIHtcclxuXHQvLyBOb2RlXHJcblx0QSA9IDU7XHJcblx0QiA9IDE7XHJcblx0QyA9IDM7XHJcblx0RCA9IDc7XHJcblx0RSA9IDY7XHJcblx0RiA9IDQ7XHJcblx0XHJcblx0Ly8gTGlua3MgdW5kIHp1Z2VoLiBLb3N0ZW5cclxuXHRBIC0gQiA6IDEwO1xyXG5cdEEgLSBDIDogMTA7XHJcblx0QiAtIEQgOiAxNTtcclxuXHRCIC0gRSA6IDEwO1xyXG5cdEMgLSBEIDogMztcclxuXHRDIC0gRSA6IDEwO1xyXG5cdEQgLSBFIDogMjtcclxuXHREIC0gRiA6IDEwO1xyXG5cdEUgLSBGIDogMjtcclxufWA7XHJcbmlucHV0QXJlYS52YWx1ZSA9IHNpbXBsZVRlc3Q7XHJcbmNvbnNvbGUubG9nKGlucHV0QXJlYSk7XHJcbi8vIGNsaWNrIGltcGxcclxuY29uc3Qgb25TaW11bGF0aW9uQ2xpY2sgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBwYXJzZVJlc3VsdCA9IHBhcnNlKGlucHV0QXJlYS52YWx1ZSk7XHJcbiAgICBjb25zdCBzaW11bGF0aW9uID0gbmV3IFNpbXVsYXRpb24ocGFyc2VSZXN1bHQubm9kZXMpO1xyXG4gICAgY29uc29sZS5sb2coc2ltdWxhdGlvbik7XHJcbiAgICBzaW11bGF0aW9uLnN0YXJ0SW5kZXhpbmdGcm9tUmFuZG9tQnJpZGdlKCkudGhlbihtc3QgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKG1zdCk7XHJcbiAgICB9KVxyXG59O1xyXG5cclxuLy8gY2FsbCBjbGljayBpbXBsIG9uIHNpbXVsYXRpb25CdXR0b24gY2xpY2tcclxuc2ltdWxhdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uU2ltdWxhdGlvbkNsaWNrKTtcclxuIiwiaW1wb3J0IHtTcGFubmluZ1RyZWVMaW5rfSBmcm9tIFwiLi4vbW9kZWxzL1NwYW5uaW5nVHJlZS9zcGFubmluZ1RyZWVMaW5rXCI7XHJcbmltcG9ydCB7U3Bhbm5pbmdUcmVlTm9kZX0gZnJvbSBcIi4uL21vZGVscy9TcGFubmluZ1RyZWUvc3Bhbm5pbmdUcmVlTm9kZVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBhcnNlOiAoaW5wdXQ6IHN0cmluZykgPT4ge2dyYXBoTmFtZTogc3RyaW5nLCBub2RlczogU3Bhbm5pbmdUcmVlTm9kZVtdfSA9XHJcblx0KGlucHV0OiBzdHJpbmcpID0+IHtcclxuXHRcdGNvbnN0IHRlbXBMaW5rczoge25vZGVzOiBzdHJpbmdbXSwgY29zdDogbnVtYmVyfVtdID0gW107XHJcblx0XHRjb25zdCBub2RlczogU3Bhbm5pbmdUcmVlTm9kZVtdID0gW107XHJcblx0XHRjb25zdCBncmFwaE5hbWUgPSBpbnB1dC5tYXRjaCgvKD88PUdyYXBoWyBdKShcXFMrKS9nKVswXTtcclxuXHRcdGNvbnN0IG5vZGVNYXRjaGVzID0gaW5wdXQubWF0Y2goL1teXFxzXSsoPz0gPSl8KD88PT0gKVsxLTldKi9nKTtcclxuXHRcdGNvbnN0IGxpbmtNYXRjaGVzID0gaW5wdXQubWF0Y2goL1teXFxzXSsoPz0gLSl8W15cXHNdKyg/PSA6KXwoPzw9OiApWzAtOV0qL2cpO1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaW5rTWF0Y2hlcy5sZW5ndGg7IGkgPSBpICsgMykge1xyXG5cdFx0XHR0ZW1wTGlua3MucHVzaCh7XHJcblx0XHRcdFx0bm9kZXM6IFtsaW5rTWF0Y2hlc1tpXSwgbGlua01hdGNoZXNbaSArIDFdXSxcclxuXHRcdFx0XHRjb3N0OiArbGlua01hdGNoZXNbaSArIDJdIC8vIHNvbWUgbGl0dGxlIHRyaWNrIHRvIGNhc3QgYSBzdHJpbmcgdG8gbnVtYmVyICsnNCcgPT09IDRcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVNYXRjaGVzLmxlbmd0aDsgaSA9IGkgKyAyKSB7XHJcblx0XHRcdGNvbnN0IG5hbWUgPSBub2RlTWF0Y2hlc1tpXTtcclxuXHRcdFx0Y29uc3QgdmFsdWUgPSArbm9kZU1hdGNoZXNbaSArIDFdO1xyXG5cdFx0XHRjb25zdCBsaW5rcyA9IHRlbXBMaW5rcy5maWx0ZXIobCA9PiBsLm5vZGVzLmZpbmRJbmRleChuID0+IG4gPT09IG5hbWUpICE9PSAtMSlcclxuXHRcdFx0XHQubWFwKGxpbmsgPT4gbmV3IFNwYW5uaW5nVHJlZUxpbmsobGluay5ub2Rlcy5maW5kKG4gPT4gbiAhPT0gbmFtZSksIGxpbmsuY29zdCkpO1xyXG5cdFx0XHRub2Rlcy5wdXNoKG5ldyBTcGFubmluZ1RyZWVOb2RlKG5hbWUsIHZhbHVlLCBsaW5rcykpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0Z3JhcGhOYW1lLFxyXG5cdFx0XHRub2Rlc1xyXG5cdFx0fVxyXG5cdH07XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=
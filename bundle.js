!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=1)}([function(t,n,e){var r,o,i;o=[t,n],void 0===(i="function"==typeof(r=function(t,n){"use strict";function e(t,n,e){this._parent=new Array(t),this._rank=new Array(t),this._numSubsets=t,this._subsetProps=new Array(t),this._subsetPropsReducer=n;var r=void 0;r="[object Function]"==Object.prototype.toString.call(e)?e:function(){return e};for(var o=0;o<t;o++)this._parent[o]=o,this._rank[o]=0,this._subsetProps[o]=Object.assign({},r(o))}Object.defineProperty(n,"__esModule",{value:!0}),e.prototype.find=function(t){return this._parent[t]!==t&&(this._parent[t]=this.find(this._parent[t])),this._parent[t]},e.prototype.isConnected=function(t,n){return this.find(t)===this.find(n)},e.prototype.union=function(t,n,e){var r=this.find(t),o=this.find(n);return r===o?r:this._rank[r]<this._rank[o]?(this._parent[r]=o,this._numSubsets-=1,this._subsetPropsReducer&&(this._subsetProps[o]=this._subsetPropsReducer(this._subsetProps[o],this._subsetProps[r],e),this._subsetProps[r]=null),o):(this._parent[o]=r,this._numSubsets-=1,this._subsetPropsReducer&&(this._subsetProps[r]=this._subsetPropsReducer(this._subsetProps[r],this._subsetProps[o],e),this._subsetProps[o]=null),this._rank[r]===this._rank[o]&&(this._rank[r]+=1),r)},e.prototype.subsets=function(){for(var t={},n=0;n<this._parent.length;n++){var e=this.find(n);t.hasOwnProperty(e)||(t[e]=[]),t[e].push(n)}return Object.keys(t).map(function(n){return t[n]}).map(function(t){return t.sort()}).sort(function(t,n){return t[0]-n[0]})},e.prototype.subset=function(t){for(var n=this.find(t),e=[],r=0;r<this._parent.length;r++)this.find(r)===n&&e.push(r);return e.sort(),e},e.prototype.numSubsets=function(){return this._numSubsets},e.prototype.subsetProps=function(t){return this._subsetProps[this.find(t)]},n.default=e,t.exports=n.default})?r.apply(n,o):r)||(t.exports=i)},function(t,n,e){"use strict";e.r(n);var r=function(){return function(t,n){this.toNode=t,this.cost=n}}(),o=function(){return function(t,n,e){this.name=t,this.value=n,this.links=e}}(),i=function(){return function(t,n){this.nodes=t,this.cost=n}}(),s=e(0),u=function(){function t(t){this.shortestLinks=[],this.allNodes=[];for(var n=t.slice(),e=(n=n.sort(function(t,n){return t.cost-n.cost}).reverse()).flatMap(function(t){return t.nodes}),r=new Map,o=0,i=e;o<i.length;o++){var s=i[o];r.has(s.name)||(r.set(s.name,!0),this.allNodes.push(s))}this.root=this.allNodes.sort(function(t,n){return t.value-n.value})[0],this.shortestLinks=this.kruskal(n,n.length)}return t.prototype.getRoutingTable=function(t,n){var e,r,o,i,s,u=this,c=this.allNodes.map(function(t){return t.value}),a=this.shortestLinks.map(function(t){return t.nodes.map(function(t){return t.value})}),h=function(t){return a.filter(function(n){return-1!==n.indexOf(t)}).map(function(n){return n.find(function(n){return n!==t})})},f=function(t,n){var e=h(t).filter(function(t){return t!==n});return e.concat(e.flatMap(function(n){return f(n,t)}))};return(e=this.allNodes.find(function(n){return n.name===t}).value,r=this.allNodes.find(function(t){return t.name===n}).value,o=c.slice().filter(function(t){return t!==e}),i=[],s=e,h(e).filter(function(t){return t!==r}).forEach(function(t){i.push({target:t,nextHop:t});var n=f(t,s);n.forEach(function(n){return i.push({target:n,nextHop:t})}),o=o.filter(function(e){return e!==t&&-1===n.indexOf(e)})}),o.forEach(function(t){return i.push({target:t,nextHop:r})}),i).map(function(t){return console.log(t),{target:u.allNodes.find(function(n){return n.value===t.target}).name,nextHop:u.allNodes.find(function(n){return n.value===t.nextHop}).name}})},t.prototype.kruskal=function(t,n){for(var e=this,r=new s(this.allNodes.length),o=function(t){return t.nodes.map(function(t){return e.allNodes.findIndex(function(n){return n.name===t.name})})},i=[];t.length>0;){var u=t.pop();r.isConnected.apply(r,o(u))||(r.union.apply(r,o(u)),i.push(u))}return i},t.prototype.linkToString=function(){var t=this.shortestLinks.map(function(t){return new i(t.nodes.sort(function(t,n){return t.name<n.name?-1:t.name>n.name?1:0}),t.cost)}).sort(function(t,n){if(t.nodes[0].name<n.nodes[0].name)return-1;if(t.nodes[0].name>n.nodes[0].name)return 1;if(t.nodes[0].name===n.nodes[0].name){if(t.nodes[1].name<n.nodes[1].name)return-1;if(t.nodes[1].name>n.nodes[1].name)return 1}return 0}),n="";return t.forEach(function(t){n+=t.nodes[0].name+" - "+t.nodes[1].name+";\n\t"}),n},t}(),c=function(t,n,e,r){return new(e||(e=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(s,u)}c((r=r.apply(t,n||[])).next())})},a=function(t,n){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(t,s)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},h=function(){function t(t,n,e,r){var o=this;this.BLOCKED=function(){return!o.MST},this.DISCOVERED_LINKS=[],this.rootOfIndexing=!1,this.returnTo=[],this.name=t,this.value=n,this.connection=e,this.connection.receive.subscribe(function(t){return o.receive(t)}),this.dumpChanges=function(){return r(o)}}return t.prototype.indexNetwork=function(){return c(this,void 0,void 0,function(){var t,n=this;return a(this,function(e){switch(e.label){case 0:return this.rootOfIndexing=!0,this.dumpChanges(),[4,this.connection.ping];case 1:return t=e.sent(),this.WAITING_FOR_BRIDGES=t,t.forEach(function(t){n.send({protocol:"CSTP",content:{message:"Dear Neighbor hear is my name and the package provides you the cost to me. Follow the CSTP.",from:{name:n.name,value:n.value}},target:t})}),[2]}})})},t.prototype.send=function(t){t.sender=this.name,this.connection.send.next(t)},t.prototype.receive=function(t){"CSTP"===t.protocol?this.handleCSTPPackage(t).then(function(){}):this.handlePackage(t)},t.prototype.handlePackage=function(t){this.name===t.destination?alert(this.name+" received a pkg with: "+t.content):(t.target=this.ROUTING_TABLE.find(function(n){return n.target===t.destination}).nextHop,this.send(t))},t.prototype.handleCSTPPackage=function(t){return c(this,void 0,void 0,function(){var n,e;return a(this,function(r){switch(r.label){case 0:return 3!==(n=this.buildCase(t.content)).id?[3,1]:(this.handleCase3(t,n),this.dumpChanges(),[3,4]);case 1:return this.INDEXED||1===n.id&&this.WAITING_FOR_BRIDGES&&-1===this.WAITING_FOR_BRIDGES.indexOf(n.content.name)?[2]:!(e=0===this.DISCOVERED_LINKS.length)||this.rootOfIndexing||1!==n.id?[3,3]:(this.addLink({cost:t.cost,nodes:[{name:this.name,value:this.value},n.content]}),[4,this.spread(t)]);case 2:r.sent(),this.dumpChanges(),r.label=3;case 3:(1===n.id&&!e||2===n.id)&&(this.handleReturnedInfoFromSpread(n,t),this.dumpChanges()),1!==n.id||this.rootOfIndexing||(e?this.returnTo.push(n.content.name):(console.log(this.name,">",n.content.name),this.send({protocol:"CSTP",content:{message:"Dear Neighbor hear is my name and the package provides you the cost to me. Follow the CSTP.",discoveredLinks:[{cost:t.cost,nodes:[{name:this.name,value:this.value},n.content]}]},target:n.content.name})),this.dumpChanges()),this.WAITING_FOR_BRIDGES&&0===this.WAITING_FOR_BRIDGES.length&&(this.handleSpreadFinished(t.sender),this.dumpChanges()),r.label=4;case 4:return[2]}})})},t.prototype.addLink=function(t){var n,e=this;console.log(void 0===t.length),void 0===t.length&&(t=[t]),(n=this.DISCOVERED_LINKS).push.apply(n,t.filter(function(t){return!e.checkLinkKnown(t.nodes.map(function(t){return t.name}))}))},t.prototype.checkLinkKnown=function(t){return t[0]===t[1]||-1!==this.DISCOVERED_LINKS.findIndex(function(n){return-1!==n.nodes.findIndex(function(n){return n.name===t[0]})&&-1!==n.nodes.findIndex(function(n){return n.name===t[1]})})},t.prototype.buildCase=function(t){var n=[t.from,t.discoveredLinks,t.mst],e=n.findIndex(function(t){return!0==!!t})+1;return{id:e,content:t=n[e-1]}},t.prototype.handleCase3=function(t,n){this.finishMST(n.content,t.sender),t.destination!==this.name&&(t.target=this.ROUTING_TABLE.find(function(n){return n.target===t.destination}).nextHop,this.send(t))},t.prototype.spread=function(t){return c(this,void 0,void 0,function(){var n,e=this;return a(this,function(r){switch(r.label){case 0:return[4,this.connection.ping];case 1:return n=r.sent(),this.WAITING_FOR_BRIDGES=n.filter(function(n){return n!==t.content.from.name}),this.WAITING_FOR_BRIDGES.forEach(function(t){return e.send({protocol:"CSTP",content:{message:"Dear Neighbor hear is my name and the package provides you the cost to me. Follow the CSTP.",from:{name:e.name,value:e.value}},target:t})}),[2]}})})},t.prototype.handleReturnedInfoFromSpread=function(t,n){"C"===this.name&&console.log("asdasd",this.WAITING_FOR_BRIDGES,t,n);var e=this.WAITING_FOR_BRIDGES.findIndex(function(t){return t===n.sender});-1!==e&&this.WAITING_FOR_BRIDGES.splice(e,1);var r=t.content;1===t.id?r=[{cost:n.cost,nodes:[{name:this.name,value:this.value},r]}]:-1===r[r.length-1].cost&&(r[r.length-1].cost=n.cost,r[r.length-1].nodes.push({name:this.name,value:this.value})),this.addLink(r.slice())},t.prototype.finishMST=function(t,n){var e=new u(t);this.MST=e,this.ROUTING_TABLE=this.MST.getRoutingTable(this.name,n),this.connection.finishedIndexing.next(e)},t.prototype.handleSpreadFinished=function(t){this.sendDiscoveredLinksBack(),this.INDEXED=!0,this.rootOfIndexing?this.shareMst(t):this.connection.finishedIndexing.next()},t.prototype.shareMst=function(t){var n=this,e=this.getLinks();this.finishMST(e,t),this.ROUTING_TABLE.forEach(function(t){n.send({protocol:"CSTP",content:{message:"Dear Neighbor hear is my name and the package provides you the cost to me. Follow the CSTP.",mst:e},target:t.nextHop,destination:t.target})})},t.prototype.getLinks=function(){var t=[];return this.DISCOVERED_LINKS.forEach(function(n){t.find(function(t){return-1!==n.nodes.findIndex(function(n){return n.name===t.nodes[0].name})&&-1!==n.nodes.findIndex(function(n){return n.name===t.nodes[1].name})})||t.push(n)}),t.slice()},t.prototype.sendDiscoveredLinksBack=function(){var t=this;this.returnTo.forEach(function(n){t.send({protocol:"CSTP",content:{message:"Dear Neighbor hear are my discovered links, you may concat them with yours and send them back!",discoveredLinks:t.DISCOVERED_LINKS.concat([{cost:-1,nodes:[{name:t.name,value:t.value}]}])},target:n})})},t}(),f=function(t,n){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function d(t,n){function e(){this.constructor=t}f(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}function l(t){return"function"==typeof t}var p=!1,b={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;p=t},get useDeprecatedSynchronousErrorHandling(){return p}};function m(t){setTimeout(function(){throw t})}var y={closed:!0,next:function(t){},error:function(t){if(b.useDeprecatedSynchronousErrorHandling)throw t;m(t)},complete:function(){}},v=Array.isArray||function(t){return t&&"number"==typeof t.length};function g(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,n){return n+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}g.prototype=Object.create(Error.prototype);var _=g,E=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var n;return t.prototype.unsubscribe=function(){var t,n=!1;if(!this.closed){var e=this._parent,r=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s,u=-1,c=r?r.length:0;e;)e.remove(this),e=++u<c&&r[u]||null;if(l(o))try{o.call(this)}catch(e){n=!0,t=e instanceof _?w(e.errors):[e]}if(v(i))for(u=-1,c=i.length;++u<c;){var a=i[u];if(null!==(s=a)&&"object"==typeof s)try{a.unsubscribe()}catch(e){n=!0,t=t||[],e instanceof _?t=t.concat(w(e.errors)):t.push(e)}}if(n)throw new _(t)}},t.prototype.add=function(n){var e=n;switch(typeof n){case"function":e=new t(n);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof t)){var r=e;(e=new t)._subscriptions=[r]}break;default:if(!n)return t.EMPTY;throw new Error("unrecognized teardown "+n+" added to Subscription.")}if(e._addParent(this)){var o=this._subscriptions;o?o.push(e):this._subscriptions=[e]}return e},t.prototype.remove=function(t){var n=this._subscriptions;if(n){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}},t.prototype._addParent=function(t){var n=this._parent,e=this._parents;return n!==t&&(n?e?-1===e.indexOf(t)&&(e.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))},t.EMPTY=((n=new t).closed=!0,n),t}();function w(t){return t.reduce(function(t,n){return t.concat(n instanceof _?n.errors:n)},[])}var S="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),x=function(t){function n(e,r,o){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=y;break;case 1:if(!e){i.destination=y;break}if("object"==typeof e){e instanceof n?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new I(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new I(i,e,r,o)}return i}return d(n,t),n.prototype[S]=function(){return this},n.create=function(t,e,r){var o=new n(t,e,r);return o.syncErrorThrowable=!1,o},n.prototype.next=function(t){this.isStopped||this._next(t)},n.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},n.prototype._next=function(t){this.destination.next(t)},n.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},n.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},n.prototype._unsubscribeAndRecycle=function(){var t=this._parent,n=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=n,this},n}(E),I=function(t){function n(n,e,r,o){var i,s=t.call(this)||this;s._parentSubscriber=n;var u=s;return l(e)?i=e:e&&(i=e.next,r=e.error,o=e.complete,e!==y&&(l((u=Object.create(e)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=i,s._error=r,s._complete=o,s}return d(n,t),n.prototype.next=function(t){if(!this.isStopped&&this._next){var n=this._parentSubscriber;b.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},n.prototype.error=function(t){if(!this.isStopped){var n=this._parentSubscriber,e=b.useDeprecatedSynchronousErrorHandling;if(this._error)e&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)e?(n.syncErrorValue=t,n.syncErrorThrown=!0):m(t),this.unsubscribe();else{if(this.unsubscribe(),e)throw t;m(t)}}},n.prototype.complete=function(){var t=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var e=function(){return t._complete.call(t._context)};b.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?(this.__tryOrSetError(n,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},n.prototype.__tryOrUnsub=function(t,n){try{t.call(this._context,n)}catch(t){if(this.unsubscribe(),b.useDeprecatedSynchronousErrorHandling)throw t;m(t)}},n.prototype.__tryOrSetError=function(t,n,e){if(!b.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,e)}catch(n){return b.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=n,t.syncErrorThrown=!0,!0):(m(n),!0)}return!1},n.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},n}(x);var O="function"==typeof Symbol&&Symbol.observable||"@@observable";function T(){}function k(t){return t?1===t.length?t[0]:function(n){return t.reduce(function(t,n){return n(t)},n)}:T}var D=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(n){var e=new t;return e.source=this,e.operator=n,e},t.prototype.subscribe=function(t,n,e){var r=this.operator,o=function(t,n,e){if(t){if(t instanceof x)return t;if(t[S])return t[S]()}return t||n||e?new x(t,n,e):new x(y)}(t,n,e);if(r?o.add(r.call(o,this.source)):o.add(this.source||b.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),b.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){b.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=n),!function(t){for(;t;){var n=t,e=n.closed,r=n.destination,o=n.isStopped;if(e||o)return!1;t=r&&r instanceof x?r:null}return!0}(t)?console.warn(n):t.error(n)}},t.prototype.forEach=function(t,n){var e=this;return new(n=P(n))(function(n,r){var o;o=e.subscribe(function(n){try{t(n)}catch(t){r(t),o&&o.unsubscribe()}},r,n)})},t.prototype._subscribe=function(t){var n=this.source;return n&&n.subscribe(t)},t.prototype[O]=function(){return this},t.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0===t.length?this:k(t)(this)},t.prototype.toPromise=function(t){var n=this;return new(t=P(t))(function(t,e){var r;n.subscribe(function(t){return r=t},function(t){return e(t)},function(){return t(r)})})},t.create=function(n){return new t(n)},t}();function P(t){if(t||(t=b.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function B(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}B.prototype=Object.create(Error.prototype);var N=B,C=function(t){function n(n,e){var r=t.call(this)||this;return r.subject=n,r.subscriber=e,r.closed=!1,r}return d(n,t),n.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,n=t.observers;if(this.subject=null,n&&0!==n.length&&!t.isStopped&&!t.closed){var e=n.indexOf(this.subscriber);-1!==e&&n.splice(e,1)}}},n}(E),R=function(t){function n(n){var e=t.call(this,n)||this;return e.destination=n,e}return d(n,t),n}(x),L=function(t){function n(){var n=t.call(this)||this;return n.observers=[],n.closed=!1,n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return d(n,t),n.prototype[S]=function(){return new R(this)},n.prototype.lift=function(t){var n=new j(this,this);return n.operator=t,n},n.prototype.next=function(t){if(this.closed)throw new N;if(!this.isStopped)for(var n=this.observers,e=n.length,r=n.slice(),o=0;o<e;o++)r[o].next(t)},n.prototype.error=function(t){if(this.closed)throw new N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var n=this.observers,e=n.length,r=n.slice(),o=0;o<e;o++)r[o].error(t);this.observers.length=0},n.prototype.complete=function(){if(this.closed)throw new N;this.isStopped=!0;for(var t=this.observers,n=t.length,e=t.slice(),r=0;r<n;r++)e[r].complete();this.observers.length=0},n.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},n.prototype._trySubscribe=function(n){if(this.closed)throw new N;return t.prototype._trySubscribe.call(this,n)},n.prototype._subscribe=function(t){if(this.closed)throw new N;return this.hasError?(t.error(this.thrownError),E.EMPTY):this.isStopped?(t.complete(),E.EMPTY):(this.observers.push(t),new C(this,t))},n.prototype.asObservable=function(){var t=new D;return t.source=this,t},n.create=function(t,n){return new j(t,n)},n}(D),j=function(t){function n(n,e){var r=t.call(this)||this;return r.destination=n,r.source=e,r}return d(n,t),n.prototype.next=function(t){var n=this.destination;n&&n.next&&n.next(t)},n.prototype.error=function(t){var n=this.destination;n&&n.error&&this.destination.error(t)},n.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},n.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):E.EMPTY},n}(L),M=function(){return function(t){this.send=new L,this.receive=new L,this.finishedIndexing=new L,this.ping=new Promise(function(n){return n(t)})}}(),A=function(){return function(t,n,e,r){var o=this;this.protocol=t,this.content=n,this.target=e,this.destination=e;var i=r.find(function(t){return t.target===o.target});this.target=i.nextHop}}(),F=function(){var t=document.getElementById("container_target");t.childNodes.forEach(function(t){return t.remove()}),t.childNodes.forEach(function(t){return t.remove()}),t.childNodes.forEach(function(t){return t.remove()});t.insertAdjacentElement("beforeend",(new DOMParser).parseFromString('\n<div class="item" id="init_pkg" style="display: flex">\n    <div style="height: 100%; width: 90%; justify-self: center; align-self: center">\n        <h3>Packages:</h3>\n        <div id="pkg_s_target">\n    </div>\n</div>\n    \n</div>\n',"text/html").getElementById("init_pkg"))},G=function(t){var n=document.getElementById("container_target");t.sort(function(t,n){return t.name<n.name?-1:t.name>n.name?1:0}).forEach(function(t){n.insertAdjacentElement("beforeend",(new DOMParser).parseFromString(function(t){return'\n<div class="item">\n    <div class="item-content" id="bridge_'+t.value+'">\n        <h3>Bridge '+t.name+"</h3>\n    <div>\n</div>\n"}(t),"text/html").getElementById("bridge_"+t.value))})},K=0,H=function(t,n){var e=document.getElementById("pkg_s_target"),r=K++;return e.insertAdjacentElement("beforeend",(new DOMParser).parseFromString(function(t,n){return'\n<div id="pkg_'+r+'">\n    '+n+" -> "+t.target+" : "+t.cost+"\n</div>\n"}(t,n),"text/html").getElementById("pkg_"+r)),function(){e.removeChild(document.getElementById("pkg_"+r))}},U=function(t,n){if(-1===n.findIndex(function(t){return t.BLOCKED()})){var e=document.getElementById("pkg_test_target");e.insertAdjacentElement("beforeend",(new DOMParser).parseFromString('\n<div class="item" id="pkg-card" style="\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n">\n    <h3>Send a sample package through with the new topology</h3>\n</div>\n',"text/html").getElementById("pkg-card")),e=document.getElementById("pkg-card");var r=n.map(function(t){return t.name}),o=function(t){return'\n<label id="l_'+t+'" for="'+t+'">Send '+t+':</label>\n<select id="'+t+'">\n    '+r.map(function(t){return'<option value="'+t+'">'+t+"</option>\n    "})+"\n</select>\n"},i=function(t){e.insertAdjacentElement("beforeend",(new DOMParser).parseFromString(o(t)+"<br>","text/html").getElementById("l_"+t)),e.insertAdjacentElement("beforeend",(new DOMParser).parseFromString(o(t),"text/html").getElementById(t))};i("from"),i("to");e.insertAdjacentElement("beforeend",(new DOMParser).parseFromString('\n<button id="test_send">Send</button>\n',"text/html").getElementById("test_send")),document.getElementById("test_send").addEventListener("click",function(){return t=document.getElementById("from").value,e=document.getElementById("to").value,r=n.find(function(n){return n.name===t}),o=new A("SOME_NORMAL","Greetings from"+r.name,e,r.ROUTING_TABLE),void r.send(o);var t,e,r,o})}document.getElementById("bridge_"+t.value).replaceWith((new DOMParser).parseFromString(function(t){return'\n<div class="item" id="bridge_'+t.value+'">\n    <div class="item-content" style="width: 80%; height: 100%; overflow-y: auto; overflow-x: hidden; '+(t.BLOCKED()?"":"box-shadow: 5px 5px 4px #33b040 !important;")+'">\n        <h3>Bridge '+t.name+"</h3>\n        "+(t.rootOfIndexing?"Indexing Root!":"")+"<br>\n        Known links: [<br><BLOCKQUOTE>"+t.DISCOVERED_LINKS.map(function(t){return t.nodes.map(function(t){return t.name}).join("-")+":"+t.cost}).join(",<br>")+"</BLOCKQUOTE><br>]<br>\n        Returning Data to: [<br><BLOCKQUOTE>"+t.returnTo.join(",<br>")+"</BLOCKQUOTE><br>]<br>\n        "+(!t.rootOfIndexing&&t.INDEXED?"<br>Node has finished indexing!<br>Returning Data to "+t.returnTo.join(",<br>"):"")+"<br>\n        "+(t.rootOfIndexing&&t.INDEXED?"<br>Network has finished indexing!<br>MST generated.<br>Sending MST to: [<br><BLOCKQUOTE>"+t.MST.allNodes.map(function(t){return t.name}).filter(function(n){return n!==t.name}).join(",<br>")+"</BLOCKQUOTE><br>]":"")+"\n        "+(t.BLOCKED()?"":"<br>Received MST. Routing Table: [<br><BLOCKQUOTE>"+t.ROUTING_TABLE.map(function(t){return"->"+t.target+" via "+t.nextHop}).join(",<br>")+"</BLOCKQUOTE><br>]")+"\n    </div>\n</div>\n"}(t),"text/html").getElementById("bridge_"+t.value))},V=function(t,n,e,r){return new(e||(e=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(s,u)}c((r=r.apply(t,n||[])).next())})},W=function(t,n){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(t,s)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},Q=function(){return function(t,n){void 0===n&&(n=.5);var e=this;this.nodes=t,this.multiForCostInSeconds=n,this.bridges=[],this.startIndexingFromRandomBridge=function(){return new Promise(function(t){return V(e,void 0,void 0,function(){var n;return W(this,function(e){switch(e.label){case 0:return(n=this.bridges[Math.round(Math.random()*this.bridges.length)]).connection.finishedIndexing.subscribe(function(n){return t(n)}),[4,n.indexNetwork()];case 1:return e.sent(),[2]}})})})},F(),t.forEach(function(t){var n=t.links.map(function(t){return t.toNode}),r=new M(n);e.bridges.push(new h(t.name,t.value,r,function(t){return U(t,e.bridges)}))}),this.bridges.forEach(function(n){var r=t.find(function(t){return t.name===n.name}).links,o=r.map(function(t){return t.toNode});n.connection.send.subscribe(function(t){if(o.find(function(n){return n===t.target})){t.cost=r.find(function(n){return n.toNode===t.target}).cost;var i=H(t,n.name);setTimeout(function(){i(),e.bridges.find(function(n){return n.name===t.target}).connection.receive.next(t)},1e3*t.cost*e.multiForCostInSeconds)}})}),G(this.bridges)}}(),Y=document.getElementById("textIn"),X=document.getElementById("textOut"),z=document.getElementById("simulate_btn");Y.value="\nGraph mygraph {\n\t// Node\n\tA = 5;\n\tB = 1;\n\tC = 3;\n\tD = 7;\n\tE = 6;\n\tF = 4;\n\t\n\t// Links und zugeh. Kosten\n\tA - B : 10;\n\tA - C : 10;\n\tB - D : 15;\n\tB - E : 10;\n\tC - D : 3;\n\tC - E : 10;\n\tD - E : 2;\n\tD - F : 10;\n\tE - F : 2;\n}";z.addEventListener("click",function(){var t=function(t){for(var n=[],e=[],i=t.match(/(?<=Graph[ ])(\S+)/g)[0],s=t.match(/[^\s]+(?= =)|(?<== )[1-9]*/g),u=t.match(/[^\s]+(?= -)|[^\s]+(?= :)|(?<=: )[0-9]*/g),c=0;c<u.length;c+=3)n.push({nodes:[u[c],u[c+1]],cost:+u[c+2]});var a=function(t){var i=s[t],u=+s[t+1],c=n.filter(function(t){return-1!==t.nodes.findIndex(function(t){return t===i})}).map(function(t){return new r(t.nodes.find(function(t){return t!==i}),t.cost)});e.push(new o(i,u,c))};for(c=0;c<s.length;c+=2)a(c);return{graphName:i,nodes:e}}(Y.value);new Q(t.nodes,+document.getElementById("mult").value).startIndexingFromRandomBridge().then(function(n){var e;X.value=(e=n,"\nSpanning-Tree of "+t.graphName+" {\n\tRoot: "+e.root.name+";\n\t"+e.linkToString()+"\n}")})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Rpc2pvaW50L2xpYi9kaXNqb2ludC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1NwYW5uaW5nVHJlZS9zcGFubmluZ1RyZWVMaW5rLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU3Bhbm5pbmdUcmVlL3NwYW5uaW5nVHJlZU5vZGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9TaW11bGF0aW9uL1NpbXVsYXRpb25MaW5rLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU3Bhbm5pbmdUcmVlL21pbmltYWxTcGFubmluZ1RyZWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9TaW11bGF0aW9uL0JyaWRnZS50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaXNGdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9jb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9ob3N0UmVwb3J0RXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvT2JzZXJ2ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9pc0FycmF5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvVW5zdWJzY3JpcHRpb25FcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9TdWJzY3JpcHRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9pc09iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9zeW1ib2wvcnhTdWJzY3JpYmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL1N1YnNjcmliZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvc3ltYm9sL29ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9ub29wLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvcGlwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9PYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvdG9TdWJzY3JpYmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvY2FuUmVwb3J0RXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9PYmplY3RVbnN1YnNjcmliZWRFcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9TdWJqZWN0U3Vic2NyaXB0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL1N1YmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9TaW11bGF0aW9uL1NpbXVsYXRpb25Db25uZWN0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU2ltdWxhdGlvbi9TaW11bGF0aW9uUGFja2FnZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL3ZpZXcvU2ltdWxhdGlvblZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9TaW11bGF0aW9uL1NpbXVsYXRpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhcnNlci9ncmFwaFBhcnNlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFyc2VyL21zdFN0cmluZ2lmeS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyIsIl9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18iLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsInVuZGVmaW5lZCIsImUiLCJ0aGlzIiwiX3BhcmVudCIsIkFycmF5IiwiX3JhbmsiLCJfbnVtU3Vic2V0cyIsIl9zdWJzZXRQcm9wcyIsIl9zdWJzZXRQcm9wc1JlZHVjZXIiLCJ0b1N0cmluZyIsImFzc2lnbiIsImZpbmQiLCJpc0Nvbm5lY3RlZCIsInVuaW9uIiwic3Vic2V0cyIsImxlbmd0aCIsInB1c2giLCJrZXlzIiwibWFwIiwic29ydCIsInN1YnNldCIsIm51bVN1YnNldHMiLCJzdWJzZXRQcm9wcyIsImRlZmF1bHQiLCJhcHBseSIsIlNwYW5uaW5nVHJlZUxpbmsiLCJ0b05vZGUiLCJjb3N0IiwiU3Bhbm5pbmdUcmVlTm9kZSIsImxpbmtzIiwiU2ltdWxhdGlvbkxpbmsiLCJub2RlcyIsIm1pbmltYWxTcGFubmluZ1RyZWVfTWluaW1hbFNwYW5UcmVlIiwiTWluaW1hbFNwYW5UcmVlIiwic3BhblRyZWVMaW5rcyIsInNob3J0ZXN0TGlua3MiLCJhbGxOb2RlcyIsInNsaWNlIiwiYXJyYXkiLCJhIiwiYiIsInJldmVyc2UiLCJmbGF0TWFwIiwiTWFwIiwiX2kiLCJhcnJheV8xIiwiaXRlbSIsImhhcyIsInNldCIsInJvb3QiLCJrcnVza2FsIiwiZ2V0Um91dGluZ1RhYmxlIiwic2VuZGVyT2ZQa2ciLCJmb3JOb2RlIiwiZGlzRmF2b3VyZWROZXh0IiwicmVzIiwibm90IiwiX3RoaXMiLCJub2RlIiwibGluayIsImdldENvbm5lY3RlZCIsImZpbHRlciIsImluZGV4T2YiLCJnZXRBbGxOb2Rlc0JlaGluZCIsImV4Y2x1ZGUiLCJjb25uTm9kZXMiLCJjb25jYXQiLCJmb3JFYWNoIiwidGFyZ2V0IiwibmV4dEhvcCIsInRlbXAiLCJjb25zb2xlIiwibG9nIiwibGlua1NldCIsImRpc2pvaW50IiwiZ2V0SW5kZXhlcyIsIm5vIiwiZmluZEluZGV4IiwibXN0TGlua3MiLCJwb3AiLCJsaW5rVG9TdHJpbmciLCJzb3J0ZWQiLCJyZXQiLCJCcmlkZ2VfQnJpZGdlIiwiQnJpZGdlIiwiY29ubmVjdGlvbiIsImR1bXBDaGFuZ2VzIiwiQkxPQ0tFRCIsIk1TVCIsIkRJU0NPVkVSRURfTElOS1MiLCJyb290T2ZJbmRleGluZyIsInJldHVyblRvIiwicmVjZWl2ZSIsInN1YnNjcmliZSIsInBrZyIsImluZGV4TmV0d29yayIsInBpbmciLCJzaWJsaW5ncyIsIl9hIiwic2VudCIsIldBSVRJTkdfRk9SX0JSSURHRVMiLCJzZW5kIiwicHJvdG9jb2wiLCJjb250ZW50IiwibWVzc2FnZSIsImZyb20iLCJzZW5kZXIiLCJuZXh0IiwiaGFuZGxlQ1NUUFBhY2thZ2UiLCJ0aGVuIiwiaGFuZGxlUGFja2FnZSIsImRlc3RpbmF0aW9uIiwiYWxlcnQiLCJST1VUSU5HX1RBQkxFIiwiY3N0cENhc2UiLCJidWlsZENhc2UiLCJpZCIsImhhbmRsZUNhc2UzIiwiSU5ERVhFRCIsImZpcnN0IiwiYWRkTGluayIsInNwcmVhZCIsImhhbmRsZVJldHVybmVkSW5mb0Zyb21TcHJlYWQiLCJkaXNjb3ZlcmVkTGlua3MiLCJoYW5kbGVTcHJlYWRGaW5pc2hlZCIsImNoZWNrTGlua0tub3duIiwiQ0FTRV9DU1RQIiwibXN0IiwiZmluaXNoTVNUIiwiY29ubmVjdGVkQnJpZGdlcyIsInN0YXJ0Iiwic3BsaWNlIiwiZmluaXNoZWRJbmRleGluZyIsInNlbmREaXNjb3ZlcmVkTGlua3NCYWNrIiwic2hhcmVNc3QiLCJsaW5rc01zdCIsImdldExpbmtzIiwiZXh0ZW5kU3RhdGljcyIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX19leHRlbmRzIiwiX18iLCJjb25zdHJ1Y3RvciIsImlzRnVuY3Rpb24iLCJ4IiwiX2VuYWJsZV9zdXBlcl9ncm9zc19tb2RlX3RoYXRfd2lsbF9jYXVzZV9iYWRfdGhpbmdzIiwiY29uZmlnIiwiUHJvbWlzZSIsInVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmciLCJFcnJvciIsInN0YWNrIiwiaG9zdFJlcG9ydEVycm9yIiwiZXJyIiwic2V0VGltZW91dCIsImVtcHR5IiwiY2xvc2VkIiwiZXJyb3IiLCJjb21wbGV0ZSIsImlzQXJyYXkiLCJVbnN1YnNjcmlwdGlvbkVycm9ySW1wbCIsImVycm9ycyIsImpvaW4iLCJVbnN1YnNjcmlwdGlvbkVycm9yIiwiU3Vic2NyaXB0aW9uX1N1YnNjcmlwdGlvbiIsIlN1YnNjcmlwdGlvbiIsInVuc3Vic2NyaWJlIiwiX3BhcmVudHMiLCJfc3Vic2NyaXB0aW9ucyIsIl91bnN1YnNjcmliZSIsImhhc0Vycm9ycyIsImluZGV4IiwibGVuIiwicmVtb3ZlIiwiZmxhdHRlblVuc3Vic2NyaXB0aW9uRXJyb3JzIiwic3ViIiwiYWRkIiwidGVhcmRvd24iLCJzdWJzY3JpcHRpb24iLCJ0bXAiLCJFTVBUWSIsIl9hZGRQYXJlbnQiLCJzdWJzY3JpcHRpb25zIiwic3Vic2NyaXB0aW9uSW5kZXgiLCJwYXJlbnQiLCJyZWR1Y2UiLCJlcnJzIiwicnhTdWJzY3JpYmVyIiwiTWF0aCIsInJhbmRvbSIsIlN1YnNjcmliZXJfU3Vic2NyaWJlciIsIl9zdXBlciIsIlN1YnNjcmliZXIiLCJkZXN0aW5hdGlvbk9yTmV4dCIsInN5bmNFcnJvclZhbHVlIiwic3luY0Vycm9yVGhyb3duIiwic3luY0Vycm9yVGhyb3dhYmxlIiwiaXNTdG9wcGVkIiwiYXJndW1lbnRzIiwiU3Vic2NyaWJlcl9TYWZlU3Vic2NyaWJlciIsInN1YnNjcmliZXIiLCJfbmV4dCIsIl9lcnJvciIsIl9jb21wbGV0ZSIsIl91bnN1YnNjcmliZUFuZFJlY3ljbGUiLCJTYWZlU3Vic2NyaWJlciIsIl9wYXJlbnRTdWJzY3JpYmVyIiwib2JzZXJ2ZXJPck5leHQiLCJjb250ZXh0IiwiX2NvbnRleHQiLCJfX3RyeU9yU2V0RXJyb3IiLCJfX3RyeU9yVW5zdWIiLCJ3cmFwcGVkQ29tcGxldGUiLCJmbiIsIm9ic2VydmFibGVfb2JzZXJ2YWJsZSIsIm9ic2VydmFibGUiLCJub29wIiwicGlwZUZyb21BcnJheSIsImZucyIsImlucHV0IiwicHJldiIsIk9ic2VydmFibGVfT2JzZXJ2YWJsZSIsIk9ic2VydmFibGUiLCJfaXNTY2FsYXIiLCJfc3Vic2NyaWJlIiwibGlmdCIsIm9wZXJhdG9yIiwic291cmNlIiwic2luayIsIm5leHRPck9ic2VydmVyIiwidG9TdWJzY3JpYmVyIiwiX3RyeVN1YnNjcmliZSIsIm9ic2VydmVyIiwiY2xvc2VkXzEiLCJjYW5SZXBvcnRFcnJvciIsIndhcm4iLCJwcm9taXNlQ3RvciIsImdldFByb21pc2VDdG9yIiwicmVzb2x2ZSIsInJlamVjdCIsInBpcGUiLCJvcGVyYXRpb25zIiwidG9Qcm9taXNlIiwiT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JJbXBsIiwiT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IiLCJTdWJqZWN0U3Vic2NyaXB0aW9uX1N1YmplY3RTdWJzY3JpcHRpb24iLCJTdWJqZWN0U3Vic2NyaXB0aW9uIiwic3ViamVjdCIsIm9ic2VydmVycyIsInN1YnNjcmliZXJJbmRleCIsIlN1YmplY3RfU3ViamVjdFN1YnNjcmliZXIiLCJTdWJqZWN0U3Vic2NyaWJlciIsIlN1YmplY3RfU3ViamVjdCIsIlN1YmplY3QiLCJoYXNFcnJvciIsInRocm93bkVycm9yIiwiU3ViamVjdF9Bbm9ueW1vdXNTdWJqZWN0IiwiY29weSIsImFzT2JzZXJ2YWJsZSIsIkFub255bW91c1N1YmplY3QiLCJTaW11bGF0aW9uQ29ubmVjdGlvbl9TaW11bGF0aW9uQ29ubmVjdGlvbiIsInNpYmxpbmdCcmlkZ2VzIiwiU2ltdWxhdGlvblBhY2thZ2UiLCJyb3V0aW5nVGFibGUiLCJyb3V0aW5nVGFibGVFbnRyeSIsImluaXQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2hpbGROb2RlcyIsImluc2VydEFkamFjZW50RWxlbWVudCIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsImNyZWF0ZURvbUJyaWRnZXMiLCJicmlkZ2VzIiwiYnJpZGdlIiwiYnJpZGdlVGVtcGxhdGUiLCJkdW1wUGtnIiwicGtnX3NfdGFyZ2V0IiwibnVtYmVyIiwicGtnVGVtcGxhdGUiLCJyZW1vdmVDaGlsZCIsImR1bXBCcmlkZ2UiLCJ0YXJnZXRfMSIsInZhbHVlc18xIiwiZHJvcGRvd25UZW1wbGF0ZV8xIiwidiIsImRyb3Bkb3duIiwiYWRkRXZlbnRMaXN0ZW5lciIsImZyb21OYW1lIiwidG9OYW1lIiwic2ltdWxhdGlvblBhY2thZ2UiLCJyZXBsYWNlV2l0aCIsIlNpbXVsYXRpb25fU2ltdWxhdGlvbiIsIm11bHRpRm9yQ29zdEluU2Vjb25kcyIsInN0YXJ0SW5kZXhpbmdGcm9tUmFuZG9tQnJpZGdlIiwiU2ltdWxhdGlvbl9hd2FpdGVyIiwicm91bmQiLCJzaWJsaW5nTm9kZXMiLCJjb25uIiwiY2JfMSIsImlucHV0QXJlYSIsIm91dHB1dEFyZWEiLCJzaW11bGF0aW9uQnV0dG9uIiwicGFyc2VSZXN1bHQiLCJ0ZW1wTGlua3MiLCJncmFwaE5hbWUiLCJtYXRjaCIsIm5vZGVNYXRjaGVzIiwibGlua01hdGNoZXMiLCJuYW1lXzEiLCJwYXJzZSIsIm1pbmltYWxTcGFuVHJlZSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFD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QUtoQyxRQUUxRUksRUFBTWYsS0FBSyxJQUFJWSxFQUFpQndSLEVBQU10VSxFQUFPK0MsS0FSOUMsSUFBU2hFLEVBQUksRUFBR0EsRUFBSXFWLEVBQVluUyxPQUFRbEQsR0FBUSxJQUF2Q0EsR0FVVCxNQUFPLENBQ05tVixVQUFTQSxFQUNUalIsTUFBS0EsR0RhZ0JzUixDQUFNVixFQUFVN1QsT0FFakIsSUFBSXFULEVBQVdXLEVBQVkvUSxPQUFTME8sU0FBU0MsZUFBZSxRQUE2QjVSLE9BRWpHdVQsZ0NBQWdDeEwsS0FBSyxTQUFBa0IsR0VuRG5ELElBQUN1TCxFRnVETVYsRUFBVzlULE9FdkRqQndVLEVGdURtQ3ZMLEVFdkRELHNCRnVETStLLEVBQVlFLFVFdEQvQixlQUNkTSxFQUFnQnJRLEtBQUs3RSxLQUFJLFFBQy9Ca1YsRUFBZ0J0TyxlQUFjIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsIiFmdW5jdGlvbih0LHMpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW1wibW9kdWxlXCIsXCJleHBvcnRzXCJdLHMpO2Vsc2UgaWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGV4cG9ydHMpcyhtb2R1bGUsZXhwb3J0cyk7ZWxzZXt2YXIgZT17ZXhwb3J0czp7fX07cyhlLGUuZXhwb3J0cyksdC5kaXNqb2ludD1lLmV4cG9ydHN9fSh0aGlzLGZ1bmN0aW9uKHQscyl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gZSh0LHMsZSl7dGhpcy5fcGFyZW50PW5ldyBBcnJheSh0KSx0aGlzLl9yYW5rPW5ldyBBcnJheSh0KSx0aGlzLl9udW1TdWJzZXRzPXQsdGhpcy5fc3Vic2V0UHJvcHM9bmV3IEFycmF5KHQpLHRoaXMuX3N1YnNldFByb3BzUmVkdWNlcj1zO3ZhciByPXZvaWQgMDtyPVwiW29iamVjdCBGdW5jdGlvbl1cIj09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpP2U6ZnVuY3Rpb24oKXtyZXR1cm4gZX07Zm9yKHZhciBuPTA7bjx0O24rKyl0aGlzLl9wYXJlbnRbbl09bix0aGlzLl9yYW5rW25dPTAsdGhpcy5fc3Vic2V0UHJvcHNbbl09T2JqZWN0LmFzc2lnbih7fSxyKG4pKX1PYmplY3QuZGVmaW5lUHJvcGVydHkocyxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KSxlLnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9wYXJlbnRbdF0hPT10JiYodGhpcy5fcGFyZW50W3RdPXRoaXMuZmluZCh0aGlzLl9wYXJlbnRbdF0pKSx0aGlzLl9wYXJlbnRbdF19LGUucHJvdG90eXBlLmlzQ29ubmVjdGVkPWZ1bmN0aW9uKHQscyl7cmV0dXJuIHRoaXMuZmluZCh0KT09PXRoaXMuZmluZChzKX0sZS5wcm90b3R5cGUudW5pb249ZnVuY3Rpb24odCxzLGUpe3ZhciByPXRoaXMuZmluZCh0KSxuPXRoaXMuZmluZChzKTtyZXR1cm4gcj09PW4/cjp0aGlzLl9yYW5rW3JdPHRoaXMuX3Jhbmtbbl0/KHRoaXMuX3BhcmVudFtyXT1uLHRoaXMuX251bVN1YnNldHMtPTEsdGhpcy5fc3Vic2V0UHJvcHNSZWR1Y2VyJiYodGhpcy5fc3Vic2V0UHJvcHNbbl09dGhpcy5fc3Vic2V0UHJvcHNSZWR1Y2VyKHRoaXMuX3N1YnNldFByb3BzW25dLHRoaXMuX3N1YnNldFByb3BzW3JdLGUpLHRoaXMuX3N1YnNldFByb3BzW3JdPW51bGwpLG4pOih0aGlzLl9wYXJlbnRbbl09cix0aGlzLl9udW1TdWJzZXRzLT0xLHRoaXMuX3N1YnNldFByb3BzUmVkdWNlciYmKHRoaXMuX3N1YnNldFByb3BzW3JdPXRoaXMuX3N1YnNldFByb3BzUmVkdWNlcih0aGlzLl9zdWJzZXRQcm9wc1tyXSx0aGlzLl9zdWJzZXRQcm9wc1tuXSxlKSx0aGlzLl9zdWJzZXRQcm9wc1tuXT1udWxsKSx0aGlzLl9yYW5rW3JdPT09dGhpcy5fcmFua1tuXSYmKHRoaXMuX3Jhbmtbcl0rPTEpLHIpfSxlLnByb3RvdHlwZS5zdWJzZXRzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXt9LHM9MDtzPHRoaXMuX3BhcmVudC5sZW5ndGg7cysrKXt2YXIgZT10aGlzLmZpbmQocyk7dC5oYXNPd25Qcm9wZXJ0eShlKXx8KHRbZV09W10pLHRbZV0ucHVzaChzKX1yZXR1cm4gT2JqZWN0LmtleXModCkubWFwKGZ1bmN0aW9uKHMpe3JldHVybiB0W3NdfSkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LnNvcnQoKX0pLnNvcnQoZnVuY3Rpb24odCxzKXtyZXR1cm4gdFswXS1zWzBdfSl9LGUucHJvdG90eXBlLnN1YnNldD1mdW5jdGlvbih0KXtmb3IodmFyIHM9dGhpcy5maW5kKHQpLGU9W10scj0wO3I8dGhpcy5fcGFyZW50Lmxlbmd0aDtyKyspdGhpcy5maW5kKHIpPT09cyYmZS5wdXNoKHIpO3JldHVybiBlLnNvcnQoKSxlfSxlLnByb3RvdHlwZS5udW1TdWJzZXRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX251bVN1YnNldHN9LGUucHJvdG90eXBlLnN1YnNldFByb3BzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9zdWJzZXRQcm9wc1t0aGlzLmZpbmQodCldfSxzLmRlZmF1bHQ9ZSx0LmV4cG9ydHM9cy5kZWZhdWx0fSk7XG4iLCJleHBvcnQgY2xhc3MgU3Bhbm5pbmdUcmVlTGluayB7XHJcblx0Y29uc3RydWN0b3IocHVibGljIHRvTm9kZTogc3RyaW5nLCBwdWJsaWMgY29zdDogbnVtYmVyKSB7XHJcblx0fVxyXG59XHJcbiIsImltcG9ydCB7U3Bhbm5pbmdUcmVlTGlua30gZnJvbSBcIi4vc3Bhbm5pbmdUcmVlTGlua1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNwYW5uaW5nVHJlZU5vZGUge1xyXG5cdGNvbnN0cnVjdG9yKHB1YmxpYyBuYW1lOiBzdHJpbmcsIHB1YmxpYyB2YWx1ZTogbnVtYmVyLCBwdWJsaWMgbGlua3M6IFNwYW5uaW5nVHJlZUxpbmtbXSkge1xyXG5cdH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgU2ltdWxhdGlvbkxpbmsge1xyXG5cdGNvbnN0cnVjdG9yKHB1YmxpYyBub2Rlczoge25hbWU6IHN0cmluZywgdmFsdWU6IG51bWJlcn1bXSwgcHVibGljIGNvc3Q6IG51bWJlcil7fVxyXG59XHJcbiIsImltcG9ydCB7U2ltdWxhdGlvbkxpbmt9IGZyb20gXCIuLi9TaW11bGF0aW9uL1NpbXVsYXRpb25MaW5rXCI7XHJcbmltcG9ydCAqIGFzIERpc2pvaW50U2V0IGZyb20gXCJkaXNqb2ludFwiO1xyXG5pbXBvcnQge1JvdXRpbmdUYWJsZUVudHJ5fSBmcm9tIFwiLi4vU2ltdWxhdGlvbi9CcmlkZ2VcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNaW5pbWFsU3BhblRyZWUge1xyXG5cclxuICAgIC8vIHRvcG9sb2d5XHJcbiAgICBwdWJsaWMgc2hvcnRlc3RMaW5rczogU2ltdWxhdGlvbkxpbmtbXSA9IFtdO1xyXG4gICAgcHVibGljIGFsbE5vZGVzOiB7IG5hbWU6IHN0cmluZywgdmFsdWU6IG51bWJlciB9W10gPSBbXTtcclxuICAgIHB1YmxpYyByb290OiB7IG5hbWU6IHN0cmluZywgdmFsdWU6IG51bWJlciB9O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNwYW5UcmVlTGlua3M6IFNpbXVsYXRpb25MaW5rW10pIHtcclxuICAgICAgICAvLyBzb3J0IGxpbmtzIHNob3J0ZXN0IGxhc3RcclxuICAgICAgICBsZXQgbGlua3MgPSBbLi4uc3BhblRyZWVMaW5rc107XHJcbiAgICAgICAgbGlua3MgPSBsaW5rcy5zb3J0KChhLCBiKSA9PiBhLmNvc3QgLSBiLmNvc3QpLnJldmVyc2UoKTtcclxuXHJcbiAgICAgICAgY29uc3QgYXJyYXkgPSBsaW5rcy5mbGF0TWFwKGwgPT4gbC5ub2Rlcyk7XHJcbiAgICAgICAgLy8gZmluZCBhbGwgTm9kZXNcclxuICAgICAgICBjb25zdCBtYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFycmF5KSB7XHJcbiAgICAgICAgICAgIGlmICghbWFwLmhhcyhpdGVtLm5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBtYXAuc2V0KGl0ZW0ubmFtZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsbE5vZGVzLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZmluZCByb290XHJcbiAgICAgICAgdGhpcy5yb290ID0gdGhpcy5hbGxOb2Rlcy5zb3J0KChhLCBiKSA9PiBhLnZhbHVlIC0gYi52YWx1ZSlbMF07XHJcbiAgICAgICAgLy8gZmluZCBtc3QgdXNpbmcga3J1c2thbCBpbXBsIHdpdGggZGlzam9pbnQgc2V0XHJcbiAgICAgICAgdGhpcy5zaG9ydGVzdExpbmtzID0gdGhpcy5rcnVza2FsKGxpbmtzLCBsaW5rcy5sZW5ndGgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGJ1aWxkcyByb3V0aW5nIHRhYmxlIGZvciBbbmFtZV0sIHRvIG9wdGltaXplIHByb3ZpZGUgbGFzdCBzZW5kZXI7XHJcbiAgICBnZXRSb3V0aW5nVGFibGUobmFtZTogc3RyaW5nLCBzZW5kZXJPZlBrZzogc3RyaW5nKTogUm91dGluZ1RhYmxlRW50cnlbXSB7XHJcbiAgICAgICAgLy8gYWxsIG5vZGVzIGFzIG51bWJlciBhcnJcclxuICAgICAgICBjb25zdCBhbGxOb2RlcyA9IHRoaXMuYWxsTm9kZXMubWFwKG5vZGUgPT4gbm9kZS52YWx1ZSk7XHJcbiAgICAgICAgLy8gYWxsIGxpbmtzIGFzIG51bWJlciBhcnJcclxuICAgICAgICBjb25zdCBsaW5rcyA9IHRoaXMuc2hvcnRlc3RMaW5rcy5tYXAobGluayA9PiBsaW5rLm5vZGVzLm1hcChub2RlID0+IG5vZGUudmFsdWUpKTtcclxuICAgICAgICAvLyBnZXRzIGNvbm5lY3RlZCBub2RlcyBvZiBub2RlXHJcbiAgICAgICAgY29uc3QgZ2V0Q29ubmVjdGVkID0gKG5vZGU6IG51bWJlcikgPT4gbGlua3MuZmlsdGVyKGwgPT4gbC5pbmRleE9mKG5vZGUpICE9PSAtMSkubWFwKGwgPT4gbC5maW5kKG4gPT4gbiAhPT0gbm9kZSkpO1xyXG4gICAgICAgIC8vIHJldHVybnMgYXJyIG9mIGFsbCBub2RlcyBiZWhpbmQgW25vZGVdIGV4Y2x1ZGVkIHRob3NlIHRoYXQgYXJlIGJlaGluZCBbZXhjbHVkZV1cclxuICAgICAgICBjb25zdCBnZXRBbGxOb2Rlc0JlaGluZCA9IChub2RlOiBudW1iZXIsIGV4Y2x1ZGU6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgcmV0ID0gW107XHJcbiAgICAgICAgICAgIC8vIGZpbmQgY29ubmVjdGVkIG5vZGVzXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbm5Ob2RlcyA9IGdldENvbm5lY3RlZChub2RlKS5maWx0ZXIobiA9PiBuICE9PSBleGNsdWRlKTtcclxuICAgICAgICAgICAgLy8gcmV0dXJuIGNvbm5lY3RlZCBub2RlcyBhbmQgdGhvc2UgdGhhdCBhcmUgY29ubmVjdGVkIHdpdGggdGhhdCBjb25uZWN0ZWQgbm9kZXNcclxuICAgICAgICAgICAgcmV0dXJuIFsuLi5jb25uTm9kZXMsIC4uLmNvbm5Ob2Rlcy5mbGF0TWFwKG4gPT4gZ2V0QWxsTm9kZXNCZWhpbmQobiwgbm9kZSkpXTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBidWlsZFJvdXRpbmdUYWJsZSA9IChmb3JOb2RlOiBudW1iZXIsIGRpc0Zhdm91cmVkTmV4dDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBub2RlcyA9IFsuLi5hbGxOb2Rlc10uZmlsdGVyKG4gPT4gbiAhPT0gZm9yTm9kZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcyA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBub3QgPSBmb3JOb2RlO1xyXG4gICAgICAgICAgICBjb25zdCBjb25uTm9kZXMgPSBnZXRDb25uZWN0ZWQoZm9yTm9kZSkuZmlsdGVyKG4gPT4gbiAhPT0gZGlzRmF2b3VyZWROZXh0KTtcclxuICAgICAgICAgICAgY29ubk5vZGVzLmZvckVhY2gobm9kZSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXMucHVzaCh7dGFyZ2V0OiBub2RlLCBuZXh0SG9wOiBub2RlfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wID0gZ2V0QWxsTm9kZXNCZWhpbmQobm9kZSwgbm90KTtcclxuICAgICAgICAgICAgICAgIHRlbXAuZm9yRWFjaChuID0+IHJlcy5wdXNoKHt0YXJnZXQ6IG4sIG5leHRIb3A6IG5vZGV9KSk7XHJcbiAgICAgICAgICAgICAgICBub2RlcyA9IG5vZGVzLmZpbHRlcihuID0+IG4gIT09IG5vZGUgJiYgdGVtcC5pbmRleE9mKG4pID09PSAtMSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBub2Rlcy5mb3JFYWNoKG4gPT4gcmVzLnB1c2goe3RhcmdldDogbiwgbmV4dEhvcDogZGlzRmF2b3VyZWROZXh0fSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIGJ1aWxkUm91dGluZ1RhYmxlKHRoaXMuYWxsTm9kZXMuZmluZChuID0+IG4ubmFtZSA9PT0gbmFtZSkudmFsdWUsIHRoaXMuYWxsTm9kZXMuZmluZChuID0+IG4ubmFtZSA9PT0gc2VuZGVyT2ZQa2cpLnZhbHVlKVxyXG4gICAgICAgICAgICAubWFwKGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHtcclxuICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcy5hbGxOb2Rlcy5maW5kKG4gPT4gbi52YWx1ZSA9PT0gZS50YXJnZXQpLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBuZXh0SG9wOiB0aGlzLmFsbE5vZGVzLmZpbmQobiA9PiBuLnZhbHVlID09PSBlLm5leHRIb3ApLm5hbWVcclxuICAgICAgICAgICAgfSl9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGtydXNrYWwobGlua3M6IFNpbXVsYXRpb25MaW5rW10sIG46IG51bWJlcik6IFNpbXVsYXRpb25MaW5rW10ge1xyXG4gICAgICAgIC8vIG1ha2UgbmV3IGRpc2pvaW50IHNldCB3aXRoIHNpemUgb2Ygbm9kZXMgY291bnRcclxuICAgICAgICBjb25zdCBsaW5rU2V0ID0gbmV3IERpc2pvaW50U2V0KHRoaXMuYWxsTm9kZXMubGVuZ3RoKTtcclxuICAgICAgICAvLyB1dGlsXHJcbiAgICAgICAgY29uc3QgZ2V0SW5kZXhlcyA9IChsaW5rKSA9PiBsaW5rLm5vZGVzLm1hcChubyA9PiB0aGlzLmFsbE5vZGVzLmZpbmRJbmRleChub2RlID0+IG5vZGUubmFtZSA9PT0gbm8ubmFtZSkpO1xyXG4gICAgICAgIC8vIHNvIGZhciBzaG9ydGVzdCBsaW5rcyB3aXRob3V0IGxvb3BcclxuICAgICAgICBjb25zdCBtc3RMaW5rczogU2ltdWxhdGlvbkxpbmtbXSA9IFtdO1xyXG4gICAgICAgIHdoaWxlIChsaW5rcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmsgPSBsaW5rcy5wb3AoKTtcclxuICAgICAgICAgICAgaWYgKCFsaW5rU2V0LmlzQ29ubmVjdGVkKC4uLmdldEluZGV4ZXMobGluaykpKSB7XHJcbiAgICAgICAgICAgICAgICBsaW5rU2V0LnVuaW9uKC4uLmdldEluZGV4ZXMobGluaykpO1xyXG4gICAgICAgICAgICAgICAgbXN0TGlua3MucHVzaChsaW5rKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbXN0TGlua3M7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gZm9yIHZpZXdcclxuICAgIGxpbmtUb1N0cmluZygpIHtcclxuICAgICAgICBjb25zdCBzb3J0ZWQgPSB0aGlzLnNob3J0ZXN0TGlua3MubWFwKGxpbmsgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNpbXVsYXRpb25MaW5rKGxpbmsubm9kZXMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhLm5hbWUgPCBiLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYS5uYW1lID4gYi5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgICAgIH0pLCBsaW5rLmNvc3RcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KS5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhLm5vZGVzWzBdLm5hbWUgPCBiLm5vZGVzWzBdLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYS5ub2Rlc1swXS5uYW1lID4gYi5ub2Rlc1swXS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoYS5ub2Rlc1swXS5uYW1lID09PSBiLm5vZGVzWzBdLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhLm5vZGVzWzFdLm5hbWUgPCBiLm5vZGVzWzFdLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoYS5ub2Rlc1sxXS5uYW1lID4gYi5ub2Rlc1sxXS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbGV0IHJldCA9IFwiXCI7XHJcbiAgICAgICAgc29ydGVkLmZvckVhY2gobGluayA9PiB7XHJcbiAgICAgICAgICAgIHJldCArPSBgJHtsaW5rLm5vZGVzWzBdLm5hbWV9IC0gJHtsaW5rLm5vZGVzWzFdLm5hbWV9O1xcblxcdGBcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7U2ltdWxhdGlvbkNvbm5lY3Rpb259IGZyb20gXCIuL1NpbXVsYXRpb25Db25uZWN0aW9uXCI7XHJcbmltcG9ydCB7U2ltdWxhdGlvblBhY2thZ2V9IGZyb20gXCIuL1NpbXVsYXRpb25QYWNrYWdlXCI7XHJcbmltcG9ydCB7TWluaW1hbFNwYW5UcmVlfSBmcm9tIFwiLi4vU3Bhbm5pbmdUcmVlL21pbmltYWxTcGFubmluZ1RyZWVcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUm91dGluZ1RhYmxlRW50cnkge1xyXG4gICAgdGFyZ2V0OiBzdHJpbmc7XHJcbiAgICBuZXh0SG9wOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBCcmlkZ2Uge1xyXG4gICAgLy8gQnJpZGdlIGRhdGFcclxuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgdmFsdWU6IG51bWJlcjtcclxuXHJcbiAgICAvLyBEYXRhIGRpc2NvdmVyZWRcclxuICAgIHB1YmxpYyBNU1Q6IE1pbmltYWxTcGFuVHJlZTtcclxuXHJcbiAgICAvLyBkYXRhIGZvciBDZW50cmFsU3Bhbm5pbmdUcmVlUHJvdG9jb2xcclxuICAgIHB1YmxpYyBJTkRFWEVEOiBib29sZWFuO1xyXG4gICAgcHVibGljIEJMT0NLRUQ6ICgpID0+IGJvb2xlYW4gPSAoKSA9PiAhdGhpcy5NU1Q7XHJcbiAgICBwdWJsaWMgRElTQ09WRVJFRF9MSU5LUzoge1xyXG4gICAgICAgIG5vZGVzOiB7IG5hbWU6IHN0cmluZywgdmFsdWU6IG51bWJlciB9W107IC8vIG15IG5hbWUgYW5kIGEgY29ubmVjdGVkIGJyaWRnZXMgbmFtZVxyXG4gICAgICAgIGNvc3Q6IG51bWJlcjsgLy8gY29zdCB0byByZWFjaCB0aGUgYnJpZGdlXHJcbiAgICB9W10gPSBbXTtcclxuICAgIHB1YmxpYyBST1VUSU5HX1RBQkxFOiBSb3V0aW5nVGFibGVFbnRyeVtdO1xyXG5cclxuICAgIHByaXZhdGUgV0FJVElOR19GT1JfQlJJREdFUzogc3RyaW5nW107XHJcblxyXG4gICAgLy8gZm9yIHZpZXdcclxuICAgIHB1YmxpYyByb290T2ZJbmRleGluZyA9IGZhbHNlO1xyXG4gICAgcHVibGljIHJldHVyblRvOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgIC8vIHNpbXVsYXRpb24gQ29ubmVjdGlvblxyXG4gICAgcHVibGljIGNvbm5lY3Rpb246IFNpbXVsYXRpb25Db25uZWN0aW9uO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBkdW1wQ2hhbmdlczogKCkgPT4gdm9pZDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIsIGNvbm5lY3Rpb246IFNpbXVsYXRpb25Db25uZWN0aW9uLCBkdW1wQ2hhbmdlczogKGIpID0+IHZvaWQpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5yZWNlaXZlLnN1YnNjcmliZSgocGtnKSA9PiB0aGlzLnJlY2VpdmUocGtnKSk7XHJcbiAgICAgICAgdGhpcy5kdW1wQ2hhbmdlcyA9ICgpID0+IGR1bXBDaGFuZ2VzKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBpbmRleE5ldHdvcmsoKSB7XHJcbiAgICAgICAgdGhpcy5yb290T2ZJbmRleGluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5kdW1wQ2hhbmdlcygpO1xyXG4gICAgICAgIGxldCBzaWJsaW5ncyA9IChhd2FpdCB0aGlzLmNvbm5lY3Rpb24ucGluZyk7XHJcbiAgICAgICAgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTID0gc2libGluZ3M7XHJcbiAgICAgICAgc2libGluZ3MuZm9yRWFjaCh0YXJnZXQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgcHJvdG9jb2w6ICdDU1RQJyxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRGVhciBOZWlnaGJvciBoZWFyIGlzIG15IG5hbWUgYW5kIHRoZSBwYWNrYWdlIHByb3ZpZGVzIHlvdSB0aGUgY29zdCB0byBtZS4gRm9sbG93IHRoZSBDU1RQLicsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbToge25hbWU6IHRoaXMubmFtZSwgdmFsdWU6IHRoaXMudmFsdWV9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZW5kKHBrZzogU2ltdWxhdGlvblBhY2thZ2UpIHtcclxuICAgICAgICBwa2cuc2VuZGVyID0gdGhpcy5uYW1lO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5zZW5kLm5leHQocGtnKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVjZWl2ZShwa2c6IFNpbXVsYXRpb25QYWNrYWdlKSB7XHJcbiAgICAgICAgaWYgKHBrZy5wcm90b2NvbCA9PT0gJ0NTVFAnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQ1NUUFBhY2thZ2UocGtnKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVQYWNrYWdlKHBrZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlUGFja2FnZShwa2c6IFNpbXVsYXRpb25QYWNrYWdlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubmFtZSA9PT0gcGtnLmRlc3RpbmF0aW9uKSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KHRoaXMubmFtZSArIFwiIHJlY2VpdmVkIGEgcGtnIHdpdGg6IFwiICsgcGtnLmNvbnRlbnQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBrZy50YXJnZXQgPSB0aGlzLlJPVVRJTkdfVEFCTEUuZmluZChpID0+IGkudGFyZ2V0ID09PSBwa2cuZGVzdGluYXRpb24pLm5leHRIb3A7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZChwa2cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgaGFuZGxlQ1NUUFBhY2thZ2UocGtnOiBTaW11bGF0aW9uUGFja2FnZSkge1xyXG4gICAgICAgIGNvbnN0IGNzdHBDYXNlID0gdGhpcy5idWlsZENhc2UocGtnLmNvbnRlbnQpO1xyXG4gICAgICAgIC8vIGlmIG1zdCBzaGFyZSBidWlsZCBtc3QgYW5kIHJvdXRpbmcgdGFibGVcclxuICAgICAgICBpZiAoY3N0cENhc2UuaWQgPT09IDMpIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVDYXNlMyhwa2csIGNzdHBDYXNlKTtcclxuICAgICAgICAgICAgdGhpcy5kdW1wQ2hhbmdlcygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLklOREVYRUQgfHwgY3N0cENhc2UuaWQgPT09IDEgJiYgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTICYmIHRoaXMuV0FJVElOR19GT1JfQlJJREdFUy5pbmRleE9mKGNzdHBDYXNlLmNvbnRlbnQubmFtZSkgPT09IC0xKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgY2FzZSAxIGFuZCBmaXJzdCBJbmNvbWluZyBwa2cgYW5kIG5vdCByb290IG9mIGluZGV4aW5nXHJcbiAgICAgICAgICAgIGxldCBmaXJzdCA9IHRoaXMuRElTQ09WRVJFRF9MSU5LUy5sZW5ndGggPT09IDA7XHJcbiAgICAgICAgICAgIGlmIChmaXJzdCAmJiAhdGhpcy5yb290T2ZJbmRleGluZyAmJiBjc3RwQ2FzZS5pZCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gc3ByZWFkIHRvIGFsbCBkaXJlY3QgY29ubmVjdGVkIGJyaWRnZXMgZXhjZXB0IHdoZXJlIHRoZSBwa2cgY2FtZSBmcm9tLlxyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRMaW5rKHtcclxuICAgICAgICAgICAgICAgICAgICBjb3N0OiBwa2cuY29zdCxcclxuICAgICAgICAgICAgICAgICAgICBub2RlczogW3tuYW1lOiB0aGlzLm5hbWUsIHZhbHVlOiB0aGlzLnZhbHVlfSwgY3N0cENhc2UuY29udGVudF1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAvKiB0aGlzLkRJU0NPVkVSRURfTElOS1MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgY29zdDogcGtnLmNvc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9kZXM6IFt7bmFtZTogdGhpcy5uYW1lLCB2YWx1ZTogdGhpcy52YWx1ZX0sIGNzdHBDYXNlLmNvbnRlbnRdXHJcbiAgICAgICAgICAgICAgICB9KTsqL1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zcHJlYWQocGtnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHVtcENoYW5nZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpZiBwYWNrYWdlIGNvbnRhaW5zIGxpbmsocykgaW5mbyBhbmQgd2FpdGluZyBmb3IgdGhhdCBicmlkZ2VcclxuICAgICAgICAgICAgaWYgKCgoY3N0cENhc2UuaWQgPT09IDEgJiYgIWZpcnN0KSB8fCBjc3RwQ2FzZS5pZCA9PT0gMikpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUmV0dXJuZWRJbmZvRnJvbVNwcmVhZChjc3RwQ2FzZSwgcGtnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHVtcENoYW5nZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBhZGQgbmV3IHJldHVybmluZyB0byBicmlkZ2VcclxuICAgICAgICAgICAgaWYgKGNzdHBDYXNlLmlkID09PSAxICYmICF0aGlzLnJvb3RPZkluZGV4aW5nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJldHVyblRvLnB1c2goY3N0cENhc2UuY29udGVudC5uYW1lKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5uYW1lLCAnPicsIGNzdHBDYXNlLmNvbnRlbnQubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2w6ICdDU1RQJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0RlYXIgTmVpZ2hib3IgaGVhciBpcyBteSBuYW1lIGFuZCB0aGUgcGFja2FnZSBwcm92aWRlcyB5b3UgdGhlIGNvc3QgdG8gbWUuIEZvbGxvdyB0aGUgQ1NUUC4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzY292ZXJlZExpbmtzOiBbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvc3Q6IHBrZy5jb3N0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzOiBbe25hbWU6IHRoaXMubmFtZSwgdmFsdWU6IHRoaXMudmFsdWV9LCBjc3RwQ2FzZS5jb250ZW50XVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBjc3RwQ2FzZS5jb250ZW50Lm5hbWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuZHVtcENoYW5nZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBpZiBhbGwgZGlyZWN0IGNvbm5lY3Rpb24gYXJlIGtub3duXHJcbiAgICAgICAgICAgIGlmICghIXRoaXMuV0FJVElOR19GT1JfQlJJREdFUyAmJiB0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVNwcmVhZEZpbmlzaGVkKHBrZy5zZW5kZXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kdW1wQ2hhbmdlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBhZGRMaW5rKGxpbmtzKXtcclxuICAgICAgICBjb25zb2xlLmxvZyhsaW5rcy5sZW5ndGggPT09IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgaWYobGlua3MubGVuZ3RoID09PSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBsaW5rcyA9IFtsaW5rc107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuRElTQ09WRVJFRF9MSU5LUy5wdXNoKC4uLmxpbmtzLmZpbHRlcihsID0+ICF0aGlzLmNoZWNrTGlua0tub3duKGwubm9kZXMubWFwKG4gPT4gbi5uYW1lKSkpKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgY2hlY2tMaW5rS25vd24obm9kZXM6IHN0cmluZ1tdKXtcclxuICAgICAgICBpZihub2Rlc1swXSA9PT0gbm9kZXNbMV0pe1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRElTQ09WRVJFRF9MSU5LUy5maW5kSW5kZXgobCA9PiBsLm5vZGVzLmZpbmRJbmRleChuID0+IG4ubmFtZSA9PT0gbm9kZXNbMF0pICE9PSAtMSAmJiBsLm5vZGVzLmZpbmRJbmRleChuID0+IG4ubmFtZSA9PT0gbm9kZXNbMV0pICE9PSAtMSkgIT09IC0xXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBidWlsZENhc2UoY29udGVudDogYW55KSB7XHJcbiAgICAgICAgY29uc3QgQ0FTRV9DU1RQID0gW1xyXG4gICAgICAgICAgICAvLyBpbiBjYXNlLi4uXHJcbiAgICAgICAgICAgIGNvbnRlbnQuZnJvbSwgLy8gIC4uLi4uLi4uLi4uLi4xIHRoZSBwYWNrYWdlIGNvbnRhaW5zIGEgc2luZ2xlIGRpc2NvdmVyZWQgbGluayAob3V0Z29pbmcgQ1NUUCB0byByZXF1ZXN0IGEgc3ByZWFkKVxyXG4gICAgICAgICAgICBjb250ZW50LmRpc2NvdmVyZWRMaW5rcywgLy8gLi4uMiB0aGUgcGFja2FnZSBpcyBhIFJldHVybiBmcm9tIGEgcmVxdWVzdGVkIHNwcmVhZCAobXVsdGlwbGUgZGlzY292ZXJlZCBsaW5rcylcclxuICAgICAgICAgICAgY29udGVudC5tc3QsIC8vICAgLi4uLi4uLi4uLi4uLjMgdGhlIHBhY2thZ2UgY29udGFpbnMgdGhlIGZ1bGwgc2V0IG9mIGxpbmtzIHRvIGNyZWF0ZSB0aGUgbXN0XHJcbiAgICAgICAgXTtcclxuICAgICAgICBjb25zdCBpZCA9IENBU0VfQ1NUUC5maW5kSW5kZXgoYyA9PiAhIWMgPT09IHRydWUpICsgMTtcclxuICAgICAgICBjb250ZW50ID0gQ0FTRV9DU1RQW2lkIC0gMV07XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgIGNvbnRlbnRcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhhbmRsZUNhc2UzKHBrZzogU2ltdWxhdGlvblBhY2thZ2UsIGNzdHBDYXNlKSB7XHJcbiAgICAgICAgdGhpcy5maW5pc2hNU1QoY3N0cENhc2UuY29udGVudCwgcGtnLnNlbmRlcik7XHJcbiAgICAgICAgLy8gaWYgdGhpcyBicmlkZ2UgaXNuJ3QgdGhlIGRlc3RpbmF0aW9uIG9mIHRoZSBwa2dcclxuICAgICAgICBpZiAocGtnLmRlc3RpbmF0aW9uICE9PSB0aGlzLm5hbWUpIHtcclxuICAgICAgICAgICAgLy8gc2VuZCBwa2cgdHRvIG5leHRIb3BcclxuICAgICAgICAgICAgcGtnLnRhcmdldCA9IHRoaXMuUk9VVElOR19UQUJMRS5maW5kKGkgPT4gaS50YXJnZXQgPT09IHBrZy5kZXN0aW5hdGlvbikubmV4dEhvcDtcclxuICAgICAgICAgICAgdGhpcy5zZW5kKHBrZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBzcHJlYWQocGtnOiBTaW11bGF0aW9uUGFja2FnZSkge1xyXG4gICAgICAgIC8vIHRoZXJlZm9yZSB3ZSBuZWVkIHRvIGtub3cgYWxsIGNvbm5lY3RlZCBCcmlkZ2VzXHJcbiAgICAgICAgY29uc3QgY29ubmVjdGVkQnJpZGdlcyA9IGF3YWl0IHRoaXMuY29ubmVjdGlvbi5waW5nO1xyXG4gICAgICAgIC8vIGFuZCB3ZSBuZWVkIHRvIHNhdmUgdGhlbVxyXG4gICAgICAgIHRoaXMuV0FJVElOR19GT1JfQlJJREdFUyA9IGNvbm5lY3RlZEJyaWRnZXMuZmlsdGVyKG5hbWUgPT4gbmFtZSAhPT0gcGtnLmNvbnRlbnQuZnJvbS5uYW1lKTtcclxuICAgICAgICAvLyBzcHJlYWRcclxuICAgICAgICB0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMuZm9yRWFjaCh0YXJnZXQgPT4gdGhpcy5zZW5kKHtcclxuICAgICAgICAgICAgcHJvdG9jb2w6ICdDU1RQJyxcclxuICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0RlYXIgTmVpZ2hib3IgaGVhciBpcyBteSBuYW1lIGFuZCB0aGUgcGFja2FnZSBwcm92aWRlcyB5b3UgdGhlIGNvc3QgdG8gbWUuIEZvbGxvdyB0aGUgQ1NUUC4nLFxyXG4gICAgICAgICAgICAgICAgZnJvbToge25hbWU6IHRoaXMubmFtZSwgdmFsdWU6IHRoaXMudmFsdWV9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRhcmdldFxyXG4gICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZVJldHVybmVkSW5mb0Zyb21TcHJlYWQoY3N0cENhc2UsIHBrZykge1xyXG4gICAgICAgIGlmICh0aGlzLm5hbWUgPT09ICdDJykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYXNkYXNkJywgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTLCBjc3RwQ2FzZSwgcGtnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTLmZpbmRJbmRleChuID0+IG4gPT09IHBrZy5zZW5kZXIpO1xyXG4gICAgICAgIGlmKHN0YXJ0ICE9PSAtMSl7XHJcbiAgICAgICAgICAgIHRoaXMuV0FJVElOR19GT1JfQlJJREdFUy5zcGxpY2Uoc3RhcnQsIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyByZW1vdmUgc2VuZGVyIGZyb20gd2FpdGluZyBmb3JcclxuICAgICAgICBsZXQgdCA9IGNzdHBDYXNlLmNvbnRlbnQ7XHJcbiAgICAgICAgaWYgKGNzdHBDYXNlLmlkID09PSAxKSB7XHJcbiAgICAgICAgICAgIHQgPSBbe1xyXG4gICAgICAgICAgICAgICAgY29zdDogcGtnLmNvc3QsXHJcbiAgICAgICAgICAgICAgICBub2RlczogW3tuYW1lOiB0aGlzLm5hbWUsIHZhbHVlOiB0aGlzLnZhbHVlfSwgdF1cclxuICAgICAgICAgICAgfV07XHJcbiAgICAgICAgfSBlbHNlIGlmICh0W3QubGVuZ3RoIC0gMV0uY29zdCA9PT0gLTEpIHtcclxuICAgICAgICAgICAgdFt0Lmxlbmd0aCAtIDFdLmNvc3QgPSBwa2cuY29zdDtcclxuICAgICAgICAgICAgdFt0Lmxlbmd0aCAtIDFdLm5vZGVzLnB1c2goe25hbWU6IHRoaXMubmFtZSwgdmFsdWU6IHRoaXMudmFsdWV9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gc2F2ZSBsaW5rKHMpXHJcbiAgICAgICAgdGhpcy5hZGRMaW5rKFsuLi50XSk7XHJcbiAgICAgICAgLy90aGlzLkRJU0NPVkVSRURfTElOS1MucHVzaCguLi50KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZpbmlzaE1TVChsaW5rcywgc2VuZGVyKSB7XHJcbiAgICAgICAgY29uc3QgbXN0ID0gbmV3IE1pbmltYWxTcGFuVHJlZShsaW5rcyk7XHJcbiAgICAgICAgdGhpcy5NU1QgPSBtc3Q7XHJcbiAgICAgICAgdGhpcy5ST1VUSU5HX1RBQkxFID0gdGhpcy5NU1QuZ2V0Um91dGluZ1RhYmxlKHRoaXMubmFtZSwgc2VuZGVyKTtcclxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24uZmluaXNoZWRJbmRleGluZy5uZXh0KG1zdCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVTcHJlYWRGaW5pc2hlZChzZW5kZXIpIHtcclxuICAgICAgICB0aGlzLnNlbmREaXNjb3ZlcmVkTGlua3NCYWNrKCk7XHJcbiAgICAgICAgdGhpcy5JTkRFWEVEID0gdHJ1ZTtcclxuICAgICAgICBpZiAoIXRoaXMucm9vdE9mSW5kZXhpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLmZpbmlzaGVkSW5kZXhpbmcubmV4dCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hhcmVNc3Qoc2VuZGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaGFyZU1zdChzZW5kZXIpIHtcclxuICAgICAgICBsZXQgbGlua3NNc3QgPSB0aGlzLmdldExpbmtzKCk7XHJcbiAgICAgICAgdGhpcy5maW5pc2hNU1QobGlua3NNc3QsIHNlbmRlcik7XHJcbiAgICAgICAgdGhpcy5ST1VUSU5HX1RBQkxFLmZvckVhY2goKGl0ZW06IFJvdXRpbmdUYWJsZUVudHJ5KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICBwcm90b2NvbDogJ0NTVFAnLFxyXG4gICAgICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdEZWFyIE5laWdoYm9yIGhlYXIgaXMgbXkgbmFtZSBhbmQgdGhlIHBhY2thZ2UgcHJvdmlkZXMgeW91IHRoZSBjb3N0IHRvIG1lLiBGb2xsb3cgdGhlIENTVFAuJyxcclxuICAgICAgICAgICAgICAgICAgICBtc3Q6IGxpbmtzTXN0XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBpdGVtLm5leHRIb3AsXHJcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbjogaXRlbS50YXJnZXRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRMaW5rcygpIHtcclxuICAgICAgICBjb25zdCBsaW5rcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuRElTQ09WRVJFRF9MSU5LUy5mb3JFYWNoKGwgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWxpbmtzLmZpbmQobGluayA9PiBsLm5vZGVzLmZpbmRJbmRleChuID0+IG4ubmFtZSA9PT0gbGluay5ub2Rlc1swXS5uYW1lKSAhPT0gLTEgJiYgbC5ub2Rlcy5maW5kSW5kZXgobiA9PiBuLm5hbWUgPT09IGxpbmsubm9kZXNbMV0ubmFtZSkgIT09IC0xKSkge1xyXG4gICAgICAgICAgICAgICAgbGlua3MucHVzaChsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBbLi4ubGlua3NdO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2VuZERpc2NvdmVyZWRMaW5rc0JhY2soKSB7XHJcblxyXG4gICAgICAgIHRoaXMucmV0dXJuVG8uZm9yRWFjaCh0YXJnZXQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgcHJvdG9jb2w6ICdDU1RQJyxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRGVhciBOZWlnaGJvciBoZWFyIGFyZSBteSBkaXNjb3ZlcmVkIGxpbmtzLCB5b3UgbWF5IGNvbmNhdCB0aGVtIHdpdGggeW91cnMgYW5kIHNlbmQgdGhlbSBiYWNrIScsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzY292ZXJlZExpbmtzOiBbLi4udGhpcy5ESVNDT1ZFUkVEX0xJTktTLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvc3Q6IC0xLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlczogW3tuYW1lOiB0aGlzLm5hbWUsIHZhbHVlOiB0aGlzLnZhbHVlfV1cclxuICAgICAgICAgICAgICAgICAgICB9XVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRhcmdldFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApXHJcbiAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc0Z1bmN0aW9uLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xudmFyIF9lbmFibGVfc3VwZXJfZ3Jvc3NfbW9kZV90aGF0X3dpbGxfY2F1c2VfYmFkX3RoaW5ncyA9IGZhbHNlO1xuZXhwb3J0IHZhciBjb25maWcgPSB7XG4gICAgUHJvbWlzZTogdW5kZWZpbmVkLFxuICAgIHNldCB1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGVycm9yID0gLypAX19QVVJFX18qLyBuZXcgRXJyb3IoKTtcbiAgICAgICAgICAgIC8qQF9fUFVSRV9fKi8gY29uc29sZS53YXJuKCdERVBSRUNBVEVEISBSeEpTIHdhcyBzZXQgdG8gdXNlIGRlcHJlY2F0ZWQgc3luY2hyb25vdXMgZXJyb3IgaGFuZGxpbmcgYmVoYXZpb3IgYnkgY29kZSBhdDogXFxuJyArIGVycm9yLnN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChfZW5hYmxlX3N1cGVyX2dyb3NzX21vZGVfdGhhdF93aWxsX2NhdXNlX2JhZF90aGluZ3MpIHtcbiAgICAgICAgICAgIC8qQF9fUFVSRV9fKi8gY29uc29sZS5sb2coJ1J4SlM6IEJhY2sgdG8gYSBiZXR0ZXIgZXJyb3IgYmVoYXZpb3IuIFRoYW5rIHlvdS4gPDMnKTtcbiAgICAgICAgfVxuICAgICAgICBfZW5hYmxlX3N1cGVyX2dyb3NzX21vZGVfdGhhdF93aWxsX2NhdXNlX2JhZF90aGluZ3MgPSB2YWx1ZTtcbiAgICB9LFxuICAgIGdldCB1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKCkge1xuICAgICAgICByZXR1cm4gX2VuYWJsZV9zdXBlcl9ncm9zc19tb2RlX3RoYXRfd2lsbF9jYXVzZV9iYWRfdGhpbmdzO1xuICAgIH0sXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uZmlnLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhvc3RSZXBvcnRFcnJvcihlcnIpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgdGhyb3cgZXJyOyB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhvc3RSZXBvcnRFcnJvci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX2NvbmZpZyxfdXRpbF9ob3N0UmVwb3J0RXJyb3IgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHsgaG9zdFJlcG9ydEVycm9yIH0gZnJvbSAnLi91dGlsL2hvc3RSZXBvcnRFcnJvcic7XG5leHBvcnQgdmFyIGVtcHR5ID0ge1xuICAgIGNsb3NlZDogdHJ1ZSxcbiAgICBuZXh0OiBmdW5jdGlvbiAodmFsdWUpIHsgfSxcbiAgICBlcnJvcjogZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhvc3RSZXBvcnRFcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkgeyB9XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JzZXJ2ZXIuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgdmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IChmdW5jdGlvbiAoeCkgeyByZXR1cm4geCAmJiB0eXBlb2YgeC5sZW5ndGggPT09ICdudW1iZXInOyB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzQXJyYXkuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5mdW5jdGlvbiBVbnN1YnNjcmlwdGlvbkVycm9ySW1wbChlcnJvcnMpIHtcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICAgIHRoaXMubWVzc2FnZSA9IGVycm9ycyA/XG4gICAgICAgIGVycm9ycy5sZW5ndGggKyBcIiBlcnJvcnMgb2NjdXJyZWQgZHVyaW5nIHVuc3Vic2NyaXB0aW9uOlxcblwiICsgZXJyb3JzLm1hcChmdW5jdGlvbiAoZXJyLCBpKSB7IHJldHVybiBpICsgMSArIFwiKSBcIiArIGVyci50b1N0cmluZygpOyB9KS5qb2luKCdcXG4gICcpIDogJyc7XG4gICAgdGhpcy5uYW1lID0gJ1Vuc3Vic2NyaXB0aW9uRXJyb3InO1xuICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xuICAgIHJldHVybiB0aGlzO1xufVxuVW5zdWJzY3JpcHRpb25FcnJvckltcGwucHJvdG90eXBlID0gLypAX19QVVJFX18qLyBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG5leHBvcnQgdmFyIFVuc3Vic2NyaXB0aW9uRXJyb3IgPSBVbnN1YnNjcmlwdGlvbkVycm9ySW1wbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVVuc3Vic2NyaXB0aW9uRXJyb3IuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF91dGlsX2lzQXJyYXksX3V0aWxfaXNPYmplY3QsX3V0aWxfaXNGdW5jdGlvbixfdXRpbF9VbnN1YnNjcmlwdGlvbkVycm9yIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IGlzQXJyYXkgfSBmcm9tICcuL3V0aWwvaXNBcnJheSc7XG5pbXBvcnQgeyBpc09iamVjdCB9IGZyb20gJy4vdXRpbC9pc09iamVjdCc7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi91dGlsL2lzRnVuY3Rpb24nO1xuaW1wb3J0IHsgVW5zdWJzY3JpcHRpb25FcnJvciB9IGZyb20gJy4vdXRpbC9VbnN1YnNjcmlwdGlvbkVycm9yJztcbnZhciBTdWJzY3JpcHRpb24gPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uKHVuc3Vic2NyaWJlKSB7XG4gICAgICAgIHRoaXMuY2xvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3BhcmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3BhcmVudHMgPSBudWxsO1xuICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25zID0gbnVsbDtcbiAgICAgICAgaWYgKHVuc3Vic2NyaWJlKSB7XG4gICAgICAgICAgICB0aGlzLl91bnN1YnNjcmliZSA9IHVuc3Vic2NyaWJlO1xuICAgICAgICB9XG4gICAgfVxuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBoYXNFcnJvcnMgPSBmYWxzZTtcbiAgICAgICAgdmFyIGVycm9ycztcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIF9hID0gdGhpcywgX3BhcmVudCA9IF9hLl9wYXJlbnQsIF9wYXJlbnRzID0gX2EuX3BhcmVudHMsIF91bnN1YnNjcmliZSA9IF9hLl91bnN1YnNjcmliZSwgX3N1YnNjcmlwdGlvbnMgPSBfYS5fc3Vic2NyaXB0aW9ucztcbiAgICAgICAgdGhpcy5jbG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLl9wYXJlbnRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IG51bGw7XG4gICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICB2YXIgbGVuID0gX3BhcmVudHMgPyBfcGFyZW50cy5sZW5ndGggOiAwO1xuICAgICAgICB3aGlsZSAoX3BhcmVudCkge1xuICAgICAgICAgICAgX3BhcmVudC5yZW1vdmUodGhpcyk7XG4gICAgICAgICAgICBfcGFyZW50ID0gKytpbmRleCA8IGxlbiAmJiBfcGFyZW50c1tpbmRleF0gfHwgbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNGdW5jdGlvbihfdW5zdWJzY3JpYmUpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIF91bnN1YnNjcmliZS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBoYXNFcnJvcnMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IGUgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yID8gZmxhdHRlblVuc3Vic2NyaXB0aW9uRXJyb3JzKGUuZXJyb3JzKSA6IFtlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnJheShfc3Vic2NyaXB0aW9ucykpIHtcbiAgICAgICAgICAgIGluZGV4ID0gLTE7XG4gICAgICAgICAgICBsZW4gPSBfc3Vic2NyaXB0aW9ucy5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbikge1xuICAgICAgICAgICAgICAgIHZhciBzdWIgPSBfc3Vic2NyaXB0aW9uc1tpbmRleF07XG4gICAgICAgICAgICAgICAgaWYgKGlzT2JqZWN0KHN1YikpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Yi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNFcnJvcnMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzLmNvbmNhdChmbGF0dGVuVW5zdWJzY3JpcHRpb25FcnJvcnMoZS5lcnJvcnMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNFcnJvcnMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVbnN1YnNjcmlwdGlvbkVycm9yKGVycm9ycyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHRlYXJkb3duKSB7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0ZWFyZG93bjtcbiAgICAgICAgc3dpdGNoICh0eXBlb2YgdGVhcmRvd24pIHtcbiAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKHRlYXJkb3duKTtcbiAgICAgICAgICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbiA9PT0gdGhpcyB8fCBzdWJzY3JpcHRpb24uY2xvc2VkIHx8IHR5cGVvZiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCEoc3Vic2NyaXB0aW9uIGluc3RhbmNlb2YgU3Vic2NyaXB0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG1wID0gc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5fc3Vic2NyaXB0aW9ucyA9IFt0bXBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRlYXJkb3duKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb24uRU1QVFk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5yZWNvZ25pemVkIHRlYXJkb3duICcgKyB0ZWFyZG93biArICcgYWRkZWQgdG8gU3Vic2NyaXB0aW9uLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb24uX2FkZFBhcmVudCh0aGlzKSkge1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSB0aGlzLl9zdWJzY3JpcHRpb25zO1xuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMgPSBbc3Vic2NyaXB0aW9uXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb25zID0gdGhpcy5fc3Vic2NyaXB0aW9ucztcbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb25JbmRleCA9IHN1YnNjcmlwdGlvbnMuaW5kZXhPZihzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbkluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMuc3BsaWNlKHN1YnNjcmlwdGlvbkluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5fYWRkUGFyZW50ID0gZnVuY3Rpb24gKHBhcmVudCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBfcGFyZW50ID0gX2EuX3BhcmVudCwgX3BhcmVudHMgPSBfYS5fcGFyZW50cztcbiAgICAgICAgaWYgKF9wYXJlbnQgPT09IHBhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFfcGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLl9wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghX3BhcmVudHMpIHtcbiAgICAgICAgICAgIHRoaXMuX3BhcmVudHMgPSBbcGFyZW50XTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKF9wYXJlbnRzLmluZGV4T2YocGFyZW50KSA9PT0gLTEpIHtcbiAgICAgICAgICAgIF9wYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5FTVBUWSA9IChmdW5jdGlvbiAoZW1wdHkpIHtcbiAgICAgICAgZW1wdHkuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGVtcHR5O1xuICAgIH0obmV3IFN1YnNjcmlwdGlvbigpKSk7XG4gICAgcmV0dXJuIFN1YnNjcmlwdGlvbjtcbn0oKSk7XG5leHBvcnQgeyBTdWJzY3JpcHRpb24gfTtcbmZ1bmN0aW9uIGZsYXR0ZW5VbnN1YnNjcmlwdGlvbkVycm9ycyhlcnJvcnMpIHtcbiAgICByZXR1cm4gZXJyb3JzLnJlZHVjZShmdW5jdGlvbiAoZXJycywgZXJyKSB7IHJldHVybiBlcnJzLmNvbmNhdCgoZXJyIGluc3RhbmNlb2YgVW5zdWJzY3JpcHRpb25FcnJvcikgPyBlcnIuZXJyb3JzIDogZXJyKTsgfSwgW10pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3Vic2NyaXB0aW9uLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KHgpIHtcbiAgICByZXR1cm4geCAhPT0gbnVsbCAmJiB0eXBlb2YgeCA9PT0gJ29iamVjdCc7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc09iamVjdC5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCB2YXIgcnhTdWJzY3JpYmVyID0gdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgID8gLypAX19QVVJFX18qLyBTeW1ib2woJ3J4U3Vic2NyaWJlcicpXG4gICAgOiAnQEByeFN1YnNjcmliZXJfJyArIC8qQF9fUFVSRV9fKi8gTWF0aC5yYW5kb20oKTtcbmV4cG9ydCB2YXIgJCRyeFN1YnNjcmliZXIgPSByeFN1YnNjcmliZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yeFN1YnNjcmliZXIuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF91dGlsX2lzRnVuY3Rpb24sX09ic2VydmVyLF9TdWJzY3JpcHRpb24sX2ludGVybmFsX3N5bWJvbF9yeFN1YnNjcmliZXIsX2NvbmZpZyxfdXRpbF9ob3N0UmVwb3J0RXJyb3IgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGlzRnVuY3Rpb24gfSBmcm9tICcuL3V0aWwvaXNGdW5jdGlvbic7XG5pbXBvcnQgeyBlbXB0eSBhcyBlbXB0eU9ic2VydmVyIH0gZnJvbSAnLi9PYnNlcnZlcic7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICcuL1N1YnNjcmlwdGlvbic7XG5pbXBvcnQgeyByeFN1YnNjcmliZXIgYXMgcnhTdWJzY3JpYmVyU3ltYm9sIH0gZnJvbSAnLi4vaW50ZXJuYWwvc3ltYm9sL3J4U3Vic2NyaWJlcic7XG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgeyBob3N0UmVwb3J0RXJyb3IgfSBmcm9tICcuL3V0aWwvaG9zdFJlcG9ydEVycm9yJztcbnZhciBTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3Vic2NyaWJlcihkZXN0aW5hdGlvbk9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnN5bmNFcnJvclZhbHVlID0gbnVsbDtcbiAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3duID0gZmFsc2U7XG4gICAgICAgIF90aGlzLnN5bmNFcnJvclRocm93YWJsZSA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBlbXB0eU9ic2VydmVyO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIGlmICghZGVzdGluYXRpb25Pck5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBlbXB0eU9ic2VydmVyO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkZXN0aW5hdGlvbk9yTmV4dCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlc3RpbmF0aW9uT3JOZXh0IGluc3RhbmNlb2YgU3Vic2NyaWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gZGVzdGluYXRpb25Pck5leHQuc3luY0Vycm9yVGhyb3dhYmxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbk9yTmV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uT3JOZXh0LmFkZChfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zeW5jRXJyb3JUaHJvd2FibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBuZXcgU2FmZVN1YnNjcmliZXIoX3RoaXMsIGRlc3RpbmF0aW9uT3JOZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIF90aGlzLnN5bmNFcnJvclRocm93YWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBuZXcgU2FmZVN1YnNjcmliZXIoX3RoaXMsIGRlc3RpbmF0aW9uT3JOZXh0LCBlcnJvciwgY29tcGxldGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGVbcnhTdWJzY3JpYmVyU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG4gICAgU3Vic2NyaWJlci5jcmVhdGUgPSBmdW5jdGlvbiAobmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIHZhciBzdWJzY3JpYmVyID0gbmV3IFN1YnNjcmliZXIobmV4dCwgZXJyb3IsIGNvbXBsZXRlKTtcbiAgICAgICAgc3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmliZXI7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX25leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX2NvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUudW5zdWJzY3JpYmUuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZUFuZFJlY3ljbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIF9wYXJlbnQgPSBfYS5fcGFyZW50LCBfcGFyZW50cyA9IF9hLl9wYXJlbnRzO1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLl9wYXJlbnRzID0gbnVsbDtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSBfcGFyZW50O1xuICAgICAgICB0aGlzLl9wYXJlbnRzID0gX3BhcmVudHM7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgcmV0dXJuIFN1YnNjcmliZXI7XG59KFN1YnNjcmlwdGlvbikpO1xuZXhwb3J0IHsgU3Vic2NyaWJlciB9O1xudmFyIFNhZmVTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFNhZmVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNhZmVTdWJzY3JpYmVyKF9wYXJlbnRTdWJzY3JpYmVyLCBvYnNlcnZlck9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLl9wYXJlbnRTdWJzY3JpYmVyID0gX3BhcmVudFN1YnNjcmliZXI7XG4gICAgICAgIHZhciBuZXh0O1xuICAgICAgICB2YXIgY29udGV4dCA9IF90aGlzO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihvYnNlcnZlck9yTmV4dCkpIHtcbiAgICAgICAgICAgIG5leHQgPSBvYnNlcnZlck9yTmV4dDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvYnNlcnZlck9yTmV4dCkge1xuICAgICAgICAgICAgbmV4dCA9IG9ic2VydmVyT3JOZXh0Lm5leHQ7XG4gICAgICAgICAgICBlcnJvciA9IG9ic2VydmVyT3JOZXh0LmVycm9yO1xuICAgICAgICAgICAgY29tcGxldGUgPSBvYnNlcnZlck9yTmV4dC5jb21wbGV0ZTtcbiAgICAgICAgICAgIGlmIChvYnNlcnZlck9yTmV4dCAhPT0gZW1wdHlPYnNlcnZlcikge1xuICAgICAgICAgICAgICAgIGNvbnRleHQgPSBPYmplY3QuY3JlYXRlKG9ic2VydmVyT3JOZXh0KTtcbiAgICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjb250ZXh0LnVuc3Vic2NyaWJlKSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5hZGQoY29udGV4dC51bnN1YnNjcmliZS5iaW5kKGNvbnRleHQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGV4dC51bnN1YnNjcmliZSA9IF90aGlzLnVuc3Vic2NyaWJlLmJpbmQoX3RoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIF90aGlzLl9jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgX3RoaXMuX25leHQgPSBuZXh0O1xuICAgICAgICBfdGhpcy5fZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgX3RoaXMuX2NvbXBsZXRlID0gY29tcGxldGU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCAmJiB0aGlzLl9uZXh0KSB7XG4gICAgICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICAgICAgaWYgKCFjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyB8fCAhX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yVW5zdWIodGhpcy5fbmV4dCwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5fX3RyeU9yU2V0RXJyb3IoX3BhcmVudFN1YnNjcmliZXIsIHRoaXMuX25leHQsIHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICAgICAgdmFyIHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgPSBjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZztcbiAgICAgICAgICAgIGlmICh0aGlzLl9lcnJvcikge1xuICAgICAgICAgICAgICAgIGlmICghdXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyB8fCAhX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclVuc3ViKHRoaXMuX2Vycm9yLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JTZXRFcnJvcihfcGFyZW50U3Vic2NyaWJlciwgdGhpcy5fZXJyb3IsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIGlmICh1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaG9zdFJlcG9ydEVycm9yKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgICAgICAgICBfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JWYWx1ZSA9IGVycjtcbiAgICAgICAgICAgICAgICAgICAgX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGhvc3RSZXBvcnRFcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdmFyIF9wYXJlbnRTdWJzY3JpYmVyID0gdGhpcy5fcGFyZW50U3Vic2NyaWJlcjtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgIHZhciB3cmFwcGVkQ29tcGxldGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fY29tcGxldGUuY2FsbChfdGhpcy5fY29udGV4dCk7IH07XG4gICAgICAgICAgICAgICAgaWYgKCFjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyB8fCAhX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclVuc3ViKHdyYXBwZWRDb21wbGV0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclNldEVycm9yKF9wYXJlbnRTdWJzY3JpYmVyLCB3cmFwcGVkQ29tcGxldGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuX190cnlPclVuc3ViID0gZnVuY3Rpb24gKGZuLCB2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLl9jb250ZXh0LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgaWYgKGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaG9zdFJlcG9ydEVycm9yKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5fX3RyeU9yU2V0RXJyb3IgPSBmdW5jdGlvbiAocGFyZW50LCBmbiwgdmFsdWUpIHtcbiAgICAgICAgaWYgKCFjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdiYWQgY2FsbCcpO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMuX2NvbnRleHQsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQuc3luY0Vycm9yVmFsdWUgPSBlcnI7XG4gICAgICAgICAgICAgICAgcGFyZW50LnN5bmNFcnJvclRocm93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBob3N0UmVwb3J0RXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICB0aGlzLl9jb250ZXh0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcGFyZW50U3Vic2NyaWJlciA9IG51bGw7XG4gICAgICAgIF9wYXJlbnRTdWJzY3JpYmVyLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gU2FmZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXIpKTtcbmV4cG9ydCB7IFNhZmVTdWJzY3JpYmVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdWJzY3JpYmVyLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IHZhciBvYnNlcnZhYmxlID0gdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBTeW1ib2wub2JzZXJ2YWJsZSB8fCAnQEBvYnNlcnZhYmxlJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9ic2VydmFibGUuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgZnVuY3Rpb24gbm9vcCgpIHsgfVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bm9vcC5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX25vb3AgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgbm9vcCB9IGZyb20gJy4vbm9vcCc7XG5leHBvcnQgZnVuY3Rpb24gcGlwZSgpIHtcbiAgICB2YXIgZm5zID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgZm5zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBwaXBlRnJvbUFycmF5KGZucyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGlwZUZyb21BcnJheShmbnMpIHtcbiAgICBpZiAoIWZucykge1xuICAgICAgICByZXR1cm4gbm9vcDtcbiAgICB9XG4gICAgaWYgKGZucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIGZuc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHBpcGVkKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBmbnMucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBmbikgeyByZXR1cm4gZm4ocHJldik7IH0sIGlucHV0KTtcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwZS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX3V0aWxfY2FuUmVwb3J0RXJyb3IsX3V0aWxfdG9TdWJzY3JpYmVyLF9pbnRlcm5hbF9zeW1ib2xfb2JzZXJ2YWJsZSxfdXRpbF9waXBlLF9jb25maWcgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgY2FuUmVwb3J0RXJyb3IgfSBmcm9tICcuL3V0aWwvY2FuUmVwb3J0RXJyb3InO1xuaW1wb3J0IHsgdG9TdWJzY3JpYmVyIH0gZnJvbSAnLi91dGlsL3RvU3Vic2NyaWJlcic7XG5pbXBvcnQgeyBvYnNlcnZhYmxlIGFzIFN5bWJvbF9vYnNlcnZhYmxlIH0gZnJvbSAnLi4vaW50ZXJuYWwvc3ltYm9sL29ic2VydmFibGUnO1xuaW1wb3J0IHsgcGlwZUZyb21BcnJheSB9IGZyb20gJy4vdXRpbC9waXBlJztcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJy4vY29uZmlnJztcbnZhciBPYnNlcnZhYmxlID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE9ic2VydmFibGUoc3Vic2NyaWJlKSB7XG4gICAgICAgIHRoaXMuX2lzU2NhbGFyID0gZmFsc2U7XG4gICAgICAgIGlmIChzdWJzY3JpYmUpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1YnNjcmliZSA9IHN1YnNjcmliZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5saWZ0ID0gZnVuY3Rpb24gKG9wZXJhdG9yKSB7XG4gICAgICAgIHZhciBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoKTtcbiAgICAgICAgb2JzZXJ2YWJsZS5zb3VyY2UgPSB0aGlzO1xuICAgICAgICBvYnNlcnZhYmxlLm9wZXJhdG9yID0gb3BlcmF0b3I7XG4gICAgICAgIHJldHVybiBvYnNlcnZhYmxlO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIG9wZXJhdG9yID0gdGhpcy5vcGVyYXRvcjtcbiAgICAgICAgdmFyIHNpbmsgPSB0b1N1YnNjcmliZXIob2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgICAgIGlmIChvcGVyYXRvcikge1xuICAgICAgICAgICAgc2luay5hZGQob3BlcmF0b3IuY2FsbChzaW5rLCB0aGlzLnNvdXJjZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2luay5hZGQodGhpcy5zb3VyY2UgfHwgKGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nICYmICFzaW5rLnN5bmNFcnJvclRocm93YWJsZSkgP1xuICAgICAgICAgICAgICAgIHRoaXMuX3N1YnNjcmliZShzaW5rKSA6XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJ5U3Vic2NyaWJlKHNpbmspKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgIGlmIChzaW5rLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgIHNpbmsuc3luY0Vycm9yVGhyb3dhYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKHNpbmsuc3luY0Vycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IHNpbmsuc3luY0Vycm9yVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaW5rO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3RyeVN1YnNjcmliZSA9IGZ1bmN0aW9uIChzaW5rKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaWJlKHNpbmspO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgICAgIHNpbmsuc3luY0Vycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzaW5rLnN5bmNFcnJvclZhbHVlID0gZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhblJlcG9ydEVycm9yKHNpbmspKSB7XG4gICAgICAgICAgICAgICAgc2luay5lcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAobmV4dCwgcHJvbWlzZUN0b3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcHJvbWlzZUN0b3IgPSBnZXRQcm9taXNlQ3Rvcihwcm9taXNlQ3Rvcik7XG4gICAgICAgIHJldHVybiBuZXcgcHJvbWlzZUN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBuZXh0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCByZWplY3QsIHJlc29sdmUpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5zb3VyY2U7XG4gICAgICAgIHJldHVybiBzb3VyY2UgJiYgc291cmNlLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlW1N5bWJvbF9vYnNlcnZhYmxlXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb3BlcmF0aW9ucyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgb3BlcmF0aW9uc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcGVyYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBpcGVGcm9tQXJyYXkob3BlcmF0aW9ucykodGhpcyk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS50b1Byb21pc2UgPSBmdW5jdGlvbiAocHJvbWlzZUN0b3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcHJvbWlzZUN0b3IgPSBnZXRQcm9taXNlQ3Rvcihwcm9taXNlQ3Rvcik7XG4gICAgICAgIHJldHVybiBuZXcgcHJvbWlzZUN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICAgICAgX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh4KSB7IHJldHVybiB2YWx1ZSA9IHg7IH0sIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIHJlamVjdChlcnIpOyB9LCBmdW5jdGlvbiAoKSB7IHJldHVybiByZXNvbHZlKHZhbHVlKTsgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlKSB7XG4gICAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShzdWJzY3JpYmUpO1xuICAgIH07XG4gICAgcmV0dXJuIE9ic2VydmFibGU7XG59KCkpO1xuZXhwb3J0IHsgT2JzZXJ2YWJsZSB9O1xuZnVuY3Rpb24gZ2V0UHJvbWlzZUN0b3IocHJvbWlzZUN0b3IpIHtcbiAgICBpZiAoIXByb21pc2VDdG9yKSB7XG4gICAgICAgIHByb21pc2VDdG9yID0gY29uZmlnLlByb21pc2UgfHwgUHJvbWlzZTtcbiAgICB9XG4gICAgaWYgKCFwcm9taXNlQ3Rvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIFByb21pc2UgaW1wbCBmb3VuZCcpO1xuICAgIH1cbiAgICByZXR1cm4gcHJvbWlzZUN0b3I7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYnNlcnZhYmxlLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfU3Vic2NyaWJlcixfc3ltYm9sX3J4U3Vic2NyaWJlcixfT2JzZXJ2ZXIgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgU3Vic2NyaWJlciB9IGZyb20gJy4uL1N1YnNjcmliZXInO1xuaW1wb3J0IHsgcnhTdWJzY3JpYmVyIGFzIHJ4U3Vic2NyaWJlclN5bWJvbCB9IGZyb20gJy4uL3N5bWJvbC9yeFN1YnNjcmliZXInO1xuaW1wb3J0IHsgZW1wdHkgYXMgZW1wdHlPYnNlcnZlciB9IGZyb20gJy4uL09ic2VydmVyJztcbmV4cG9ydCBmdW5jdGlvbiB0b1N1YnNjcmliZXIobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgIGlmIChuZXh0T3JPYnNlcnZlcikge1xuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgaW5zdGFuY2VvZiBTdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV4dE9yT2JzZXJ2ZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyW3J4U3Vic2NyaWJlclN5bWJvbF0pIHtcbiAgICAgICAgICAgIHJldHVybiBuZXh0T3JPYnNlcnZlcltyeFN1YnNjcmliZXJTeW1ib2xdKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFuZXh0T3JPYnNlcnZlciAmJiAhZXJyb3IgJiYgIWNvbXBsZXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3Vic2NyaWJlcihlbXB0eU9ic2VydmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVyKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9TdWJzY3JpYmVyLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfU3Vic2NyaWJlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBTdWJzY3JpYmVyIH0gZnJvbSAnLi4vU3Vic2NyaWJlcic7XG5leHBvcnQgZnVuY3Rpb24gY2FuUmVwb3J0RXJyb3Iob2JzZXJ2ZXIpIHtcbiAgICB3aGlsZSAob2JzZXJ2ZXIpIHtcbiAgICAgICAgdmFyIF9hID0gb2JzZXJ2ZXIsIGNsb3NlZF8xID0gX2EuY2xvc2VkLCBkZXN0aW5hdGlvbiA9IF9hLmRlc3RpbmF0aW9uLCBpc1N0b3BwZWQgPSBfYS5pc1N0b3BwZWQ7XG4gICAgICAgIGlmIChjbG9zZWRfMSB8fCBpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZXN0aW5hdGlvbiAmJiBkZXN0aW5hdGlvbiBpbnN0YW5jZW9mIFN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIG9ic2VydmVyID0gZGVzdGluYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYnNlcnZlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYW5SZXBvcnRFcnJvci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmZ1bmN0aW9uIE9iamVjdFVuc3Vic2NyaWJlZEVycm9ySW1wbCgpIHtcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICAgIHRoaXMubWVzc2FnZSA9ICdvYmplY3QgdW5zdWJzY3JpYmVkJztcbiAgICB0aGlzLm5hbWUgPSAnT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3InO1xuICAgIHJldHVybiB0aGlzO1xufVxuT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JJbXBsLnByb3RvdHlwZSA9IC8qQF9fUFVSRV9fKi8gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuZXhwb3J0IHZhciBPYmplY3RVbnN1YnNjcmliZWRFcnJvciA9IE9iamVjdFVuc3Vic2NyaWJlZEVycm9ySW1wbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9iamVjdFVuc3Vic2NyaWJlZEVycm9yLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfU3Vic2NyaXB0aW9uIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICcuL1N1YnNjcmlwdGlvbic7XG52YXIgU3ViamVjdFN1YnNjcmlwdGlvbiA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhTdWJqZWN0U3Vic2NyaXB0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YmplY3RTdWJzY3JpcHRpb24oc3ViamVjdCwgc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5zdWJqZWN0ID0gc3ViamVjdDtcbiAgICAgICAgX3RoaXMuc3Vic2NyaWJlciA9IHN1YnNjcmliZXI7XG4gICAgICAgIF90aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN1YmplY3RTdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsb3NlZCA9IHRydWU7XG4gICAgICAgIHZhciBzdWJqZWN0ID0gdGhpcy5zdWJqZWN0O1xuICAgICAgICB2YXIgb2JzZXJ2ZXJzID0gc3ViamVjdC5vYnNlcnZlcnM7XG4gICAgICAgIHRoaXMuc3ViamVjdCA9IG51bGw7XG4gICAgICAgIGlmICghb2JzZXJ2ZXJzIHx8IG9ic2VydmVycy5sZW5ndGggPT09IDAgfHwgc3ViamVjdC5pc1N0b3BwZWQgfHwgc3ViamVjdC5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3Vic2NyaWJlckluZGV4ID0gb2JzZXJ2ZXJzLmluZGV4T2YodGhpcy5zdWJzY3JpYmVyKTtcbiAgICAgICAgaWYgKHN1YnNjcmliZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIG9ic2VydmVycy5zcGxpY2Uoc3Vic2NyaWJlckluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFN1YmplY3RTdWJzY3JpcHRpb247XG59KFN1YnNjcmlwdGlvbikpO1xuZXhwb3J0IHsgU3ViamVjdFN1YnNjcmlwdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ViamVjdFN1YnNjcmlwdGlvbi5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX09ic2VydmFibGUsX1N1YnNjcmliZXIsX1N1YnNjcmlwdGlvbixfdXRpbF9PYmplY3RVbnN1YnNjcmliZWRFcnJvcixfU3ViamVjdFN1YnNjcmlwdGlvbixfaW50ZXJuYWxfc3ltYm9sX3J4U3Vic2NyaWJlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4vT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBTdWJzY3JpYmVyIH0gZnJvbSAnLi9TdWJzY3JpYmVyJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yIH0gZnJvbSAnLi91dGlsL09iamVjdFVuc3Vic2NyaWJlZEVycm9yJztcbmltcG9ydCB7IFN1YmplY3RTdWJzY3JpcHRpb24gfSBmcm9tICcuL1N1YmplY3RTdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgcnhTdWJzY3JpYmVyIGFzIHJ4U3Vic2NyaWJlclN5bWJvbCB9IGZyb20gJy4uL2ludGVybmFsL3N5bWJvbC9yeFN1YnNjcmliZXInO1xudmFyIFN1YmplY3RTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFN1YmplY3RTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YmplY3RTdWJzY3JpYmVyKGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBTdWJqZWN0U3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcikpO1xuZXhwb3J0IHsgU3ViamVjdFN1YnNjcmliZXIgfTtcbnZhciBTdWJqZWN0ID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFN1YmplY3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3ViamVjdCgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMub2JzZXJ2ZXJzID0gW107XG4gICAgICAgIF90aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMudGhyb3duRXJyb3IgPSBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN1YmplY3QucHJvdG90eXBlW3J4U3Vic2NyaWJlclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3ViamVjdFN1YnNjcmliZXIodGhpcyk7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5saWZ0ID0gZnVuY3Rpb24gKG9wZXJhdG9yKSB7XG4gICAgICAgIHZhciBzdWJqZWN0ID0gbmV3IEFub255bW91c1N1YmplY3QodGhpcywgdGhpcyk7XG4gICAgICAgIHN1YmplY3Qub3BlcmF0b3IgPSBvcGVyYXRvcjtcbiAgICAgICAgcmV0dXJuIHN1YmplY3Q7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdmFyIG9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzO1xuICAgICAgICAgICAgdmFyIGxlbiA9IG9ic2VydmVycy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgY29weSA9IG9ic2VydmVycy5zbGljZSgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNvcHlbaV0ubmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3RVbnN1YnNjcmliZWRFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICB0aGlzLnRocm93bkVycm9yID0gZXJyO1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVycztcbiAgICAgICAgdmFyIGxlbiA9IG9ic2VydmVycy5sZW5ndGg7XG4gICAgICAgIHZhciBjb3B5ID0gb2JzZXJ2ZXJzLnNsaWNlKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNvcHlbaV0uZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB2YXIgb2JzZXJ2ZXJzID0gdGhpcy5vYnNlcnZlcnM7XG4gICAgICAgIHZhciBsZW4gPSBvYnNlcnZlcnMubGVuZ3RoO1xuICAgICAgICB2YXIgY29weSA9IG9ic2VydmVycy5zbGljZSgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjb3B5W2ldLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBudWxsO1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuX3RyeVN1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlLmNhbGwodGhpcywgc3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3RVbnN1YnNjcmliZWRFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaGFzRXJyb3IpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IodGhpcy50aHJvd25FcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gU3Vic2NyaXB0aW9uLkVNUFRZO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gU3Vic2NyaXB0aW9uLkVNUFRZO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChzdWJzY3JpYmVyKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3ViamVjdFN1YnNjcmlwdGlvbih0aGlzLCBzdWJzY3JpYmVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuYXNPYnNlcnZhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlKCk7XG4gICAgICAgIG9ic2VydmFibGUuc291cmNlID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGU7XG4gICAgfTtcbiAgICBTdWJqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChkZXN0aW5hdGlvbiwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBuZXcgQW5vbnltb3VzU3ViamVjdChkZXN0aW5hdGlvbiwgc291cmNlKTtcbiAgICB9O1xuICAgIHJldHVybiBTdWJqZWN0O1xufShPYnNlcnZhYmxlKSk7XG5leHBvcnQgeyBTdWJqZWN0IH07XG52YXIgQW5vbnltb3VzU3ViamVjdCA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhBbm9ueW1vdXNTdWJqZWN0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFub255bW91c1N1YmplY3QoZGVzdGluYXRpb24sIHNvdXJjZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgICAgICBfdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICBpZiAoZGVzdGluYXRpb24gJiYgZGVzdGluYXRpb24ubmV4dCkge1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFub255bW91c1N1YmplY3QucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICBpZiAoZGVzdGluYXRpb24gJiYgZGVzdGluYXRpb24uZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGlmIChkZXN0aW5hdGlvbiAmJiBkZXN0aW5hdGlvbi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBbm9ueW1vdXNTdWJqZWN0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlO1xuICAgICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFN1YnNjcmlwdGlvbi5FTVBUWTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEFub255bW91c1N1YmplY3Q7XG59KFN1YmplY3QpKTtcbmV4cG9ydCB7IEFub255bW91c1N1YmplY3QgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YmplY3QuanMubWFwXG4iLCJpbXBvcnQge1NpbXVsYXRpb25QYWNrYWdlfSBmcm9tIFwiLi9TaW11bGF0aW9uUGFja2FnZVwiO1xyXG5pbXBvcnQge1N1YmplY3R9IGZyb20gXCJyeGpzXCI7XHJcbmltcG9ydCB7TWluaW1hbFNwYW5UcmVlfSBmcm9tIFwiLi4vU3Bhbm5pbmdUcmVlL21pbmltYWxTcGFubmluZ1RyZWVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTaW11bGF0aW9uQ29ubmVjdGlvbntcclxuXHQvLyBhIEJyaWRnZSBjYW4gZG8gY29ubi5zZW5kLm5leHQocGtnKVxyXG5cdC8vIGFuZCB0aGUgc2ltdWxhdGlvbiBkb2VzIGNvbm4uc2VuZC5zdWJzY3JpYmUgYW5kIHByb3ZpZGVzIGEgaGFuZGxlciB0aGF0IG9ubHkgYWxsb3dzIHRvIHNlbmQgdG8gZGlyZWN0IGNvbm5lY3RlZCBicmlkZ2VzXHJcblx0cHVibGljIHNlbmQ6IFN1YmplY3Q8U2ltdWxhdGlvblBhY2thZ2U+ID0gbmV3IFN1YmplY3Q8U2ltdWxhdGlvblBhY2thZ2U+KCk7XHJcblx0Ly8gYSBCcmlkZ2UgY2FuIHN1YnNjcmliZSB0byB0aGUgcmVjZWl2ZSBTdWJqZWN0IGFuZCB0aGUgY2IgZ2V0cyBjYWxsZWQgaWYgdGhlIHNpbXVsYXRpb24gcmVkaXJlY3RzIHRoYXQgc2VuZC5uZXh0IGZyb20gYSBvdGhlciBicmlkZ2UgdG8geW91XHJcblx0cHVibGljIHJlY2VpdmU6IFN1YmplY3Q8U2ltdWxhdGlvblBhY2thZ2U+ID0gbmV3IFN1YmplY3Q8U2ltdWxhdGlvblBhY2thZ2U+KCk7XHJcblx0Ly8gcmV0dXJucyBkaXJlY3QgQ29ubmVjdGVkIEJyaWRnZXNcclxuXHRwdWJsaWMgcGluZzogUHJvbWlzZTxzdHJpbmdbXT47XHJcblx0Y29uc3RydWN0b3Ioc2libGluZ0JyaWRnZXM6IHN0cmluZ1tdKXtcclxuXHRcdHRoaXMucGluZyA9IG5ldyBQcm9taXNlPHN0cmluZ1tdPihyZXNvbHZlID0+IHJlc29sdmUoc2libGluZ0JyaWRnZXMpKTtcclxuXHR9XHJcblx0Ly8gb25seSBmb3IgdGhlIHNpbXVsYXRpb25cclxuXHRwdWJsaWMgZmluaXNoZWRJbmRleGluZzogU3ViamVjdDxNaW5pbWFsU3BhblRyZWV8YW55PiA9IG5ldyBTdWJqZWN0KCk7XHJcbn1cclxuIiwiaW1wb3J0IHtSb3V0aW5nVGFibGVFbnRyeX0gZnJvbSBcIi4vQnJpZGdlXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFNpbXVsYXRpb25QYWNrYWdlIHtcclxuICAgIHByb3RvY29sOiBzdHJpbmcsXHJcbiAgICBjb250ZW50OiBhbnksXHJcbiAgICB0YXJnZXQ6IHN0cmluZyxcclxuICAgIGRlc3RpbmF0aW9uPzogc3RyaW5nLFxyXG4gICAgY29zdD86IG51bWJlclxyXG4gICAgc2VuZGVyPzogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgU2ltdWxhdGlvblBhY2thZ2UgaW1wbGVtZW50cyBTaW11bGF0aW9uUGFja2FnZSB7XHJcbiAgICBjb3N0PzogbnVtYmVyO1xyXG4gICAgZGVzdGluYXRpb24/OiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIHByb3RvY29sOiBzdHJpbmcsIHB1YmxpYyBjb250ZW50OiBhbnksIHB1YmxpYyB0YXJnZXQ6IHN0cmluZywgcm91dGluZ1RhYmxlOiBSb3V0aW5nVGFibGVFbnRyeVtdKSB7XHJcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbiA9IHRhcmdldDtcclxuICAgICAgICBsZXQgcm91dGluZ1RhYmxlRW50cnkgPSByb3V0aW5nVGFibGUuZmluZChpID0+IGkudGFyZ2V0ID09PSB0aGlzLnRhcmdldCk7XHJcbiAgICAgICAgaWYoIXJvdXRpbmdUYWJsZUVudHJ5KXtcclxuICAgICAgICAgICAgZGVidWdnZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gcm91dGluZ1RhYmxlRW50cnkubmV4dEhvcDtcclxuICAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHtCcmlkZ2V9IGZyb20gXCIuLi9TaW11bGF0aW9uL0JyaWRnZVwiO1xyXG5pbXBvcnQge1NpbXVsYXRpb25QYWNrYWdlfSBmcm9tIFwiLi4vU2ltdWxhdGlvbi9TaW11bGF0aW9uUGFja2FnZVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGluaXQgPSAoKSA9PiB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyX3RhcmdldCcpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgdGFyZ2V0LmNoaWxkTm9kZXMuZm9yRWFjaChuID0+IG4ucmVtb3ZlKCkpO1xyXG4gICAgdGFyZ2V0LmNoaWxkTm9kZXMuZm9yRWFjaChuID0+IG4ucmVtb3ZlKCkpO1xyXG4gICAgdGFyZ2V0LmNoaWxkTm9kZXMuZm9yRWFjaChuID0+IG4ucmVtb3ZlKCkpO1xyXG4gICAgY29uc3QgaW5pdGlhbFBhY2thZ2VzVGVtcGxhdGUgPSBgXHJcbjxkaXYgY2xhc3M9XCJpdGVtXCIgaWQ9XCJpbml0X3BrZ1wiIHN0eWxlPVwiZGlzcGxheTogZmxleFwiPlxyXG4gICAgPGRpdiBzdHlsZT1cImhlaWdodDogMTAwJTsgd2lkdGg6IDkwJTsganVzdGlmeS1zZWxmOiBjZW50ZXI7IGFsaWduLXNlbGY6IGNlbnRlclwiPlxyXG4gICAgICAgIDxoMz5QYWNrYWdlczo8L2gzPlxyXG4gICAgICAgIDxkaXYgaWQ9XCJwa2dfc190YXJnZXRcIj5cclxuICAgIDwvZGl2PlxyXG48L2Rpdj5cclxuICAgIFxyXG48L2Rpdj5cclxuYDtcclxuICAgIHRhcmdldC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJiZWZvcmVlbmRcIiwgbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhpbml0aWFsUGFja2FnZXNUZW1wbGF0ZSwgXCJ0ZXh0L2h0bWxcIikuZ2V0RWxlbWVudEJ5SWQoYGluaXRfcGtnYCkpO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZURvbUJyaWRnZXMgPSAoYnJpZGdlcykgPT4ge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRhaW5lcl90YXJnZXQnKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgIGNvbnN0IGJyaWRnZVRlbXBsYXRlID0gKGJyaWRnZTogQnJpZGdlKSA9PiBgXHJcbjxkaXYgY2xhc3M9XCJpdGVtXCI+XHJcbiAgICA8ZGl2IGNsYXNzPVwiaXRlbS1jb250ZW50XCIgaWQ9XCJicmlkZ2VfJHticmlkZ2UudmFsdWV9XCI+XHJcbiAgICAgICAgPGgzPkJyaWRnZSAke2JyaWRnZS5uYW1lfTwvaDM+XHJcbiAgICA8ZGl2PlxyXG48L2Rpdj5cclxuYDtcclxuICAgIGJyaWRnZXMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgIGlmIChhLm5hbWUgPCBiLm5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYS5uYW1lID4gYi5uYW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH0pLmZvckVhY2goYnJpZGdlID0+IHtcclxuICAgICAgICB0YXJnZXQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlZW5kXCIsIG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoYnJpZGdlVGVtcGxhdGUoYnJpZGdlKSwgXCJ0ZXh0L2h0bWxcIikuZ2V0RWxlbWVudEJ5SWQoYGJyaWRnZV8ke2JyaWRnZS52YWx1ZX1gKSk7XHJcbiAgICB9KVxyXG59O1xyXG5cclxuXHJcbmxldCBpZCA9IDA7XHJcblxyXG5leHBvcnQgY29uc3QgZHVtcFBrZyA9IChwa2c6IFNpbXVsYXRpb25QYWNrYWdlLCBmcm9tOiBzdHJpbmcpID0+IHtcclxuXHJcbiAgICBjb25zdCBwa2dfc190YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGtnX3NfdGFyZ2V0JykgYXMgSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICAgbGV0IG51bWJlciA9IGlkKys7XHJcbiAgICBjb25zdCBwa2dUZW1wbGF0ZSA9IChwa2c6IFNpbXVsYXRpb25QYWNrYWdlLCBmcm9tOiBzdHJpbmcpID0+IGBcclxuPGRpdiBpZD1cInBrZ18ke251bWJlcn1cIj5cclxuICAgICR7ZnJvbX0gLT4gJHtwa2cudGFyZ2V0fSA6ICR7cGtnLmNvc3R9XHJcbjwvZGl2PlxyXG5gO1xyXG4gICAgcGtnX3NfdGFyZ2V0Lmluc2VydEFkamFjZW50RWxlbWVudChcImJlZm9yZWVuZFwiLCBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHBrZ1RlbXBsYXRlKHBrZywgZnJvbSksIFwidGV4dC9odG1sXCIpLmdldEVsZW1lbnRCeUlkKGBwa2dfJHtudW1iZXJ9YCkpO1xyXG4vL3BrZ19zX3RhcmdldC4obmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhwa2dUZW1wbGF0ZShwa2csIGZyb20pLCBcInRleHQvaHRtbFwiKS5nZXRFbGVtZW50QnlJZChgcGtnXyR7bnVtYmVyfWApKTtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgcGtnX3NfdGFyZ2V0LnJlbW92ZUNoaWxkKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwa2dfJHtudW1iZXJ9YCkpO1xyXG4gICAgfTtcclxufTtcclxuXHJcblxyXG5leHBvcnQgY29uc3QgZHVtcEJyaWRnZSA9IChicmlkZ2U6IEJyaWRnZSwgYnJpZGdlczogQnJpZGdlW10pID0+IHtcclxuICAgIGlmIChicmlkZ2VzLmZpbmRJbmRleChiID0+IGIuQkxPQ0tFRCgpKSA9PT0gLTEpIHtcclxuICAgICAgICBsZXQgdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BrZ190ZXN0X3RhcmdldCcpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG5cclxuICAgICAgICBjb25zdCBjYXJkID0gYFxyXG48ZGl2IGNsYXNzPVwiaXRlbVwiIGlkPVwicGtnLWNhcmRcIiBzdHlsZT1cIlxyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICB3aWR0aDogMTAwJTtcclxuXCI+XHJcbiAgICA8aDM+U2VuZCBhIHNhbXBsZSBwYWNrYWdlIHRocm91Z2ggd2l0aCB0aGUgbmV3IHRvcG9sb2d5PC9oMz5cclxuPC9kaXY+XHJcbmA7XHJcbiAgICAgICAgdGFyZ2V0Lmluc2VydEFkamFjZW50RWxlbWVudChcImJlZm9yZWVuZFwiLCBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGNhcmQsIFwidGV4dC9odG1sXCIpLmdldEVsZW1lbnRCeUlkKCdwa2ctY2FyZCcpKTtcclxuICAgICAgICB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGtnLWNhcmQnKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgICBjb25zdCB2YWx1ZXMgPSBicmlkZ2VzLm1hcChiID0+IGIubmFtZSk7XHJcbiAgICAgICAgY29uc3QgZHJvcGRvd25UZW1wbGF0ZSA9IChpZDogc3RyaW5nKSA9PiBgXHJcbjxsYWJlbCBpZD1cImxfJHtpZH1cIiBmb3I9XCIke2lkfVwiPlNlbmQgJHtpZH06PC9sYWJlbD5cclxuPHNlbGVjdCBpZD1cIiR7aWR9XCI+XHJcbiAgICAke3ZhbHVlcy5tYXAodiA9PiBgPG9wdGlvbiB2YWx1ZT1cIiR7dn1cIj4ke3Z9PC9vcHRpb24+XHJcbiAgICBgKX1cclxuPC9zZWxlY3Q+XHJcbmA7XHJcbiAgICAgICAgbGV0IGRyb3Bkb3duID0gKGlkOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgdGFyZ2V0Lmluc2VydEFkamFjZW50RWxlbWVudChcImJlZm9yZWVuZFwiLCBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGRyb3Bkb3duVGVtcGxhdGUoaWQpICsgYDxicj5gLCBcInRleHQvaHRtbFwiKS5nZXRFbGVtZW50QnlJZChgbF8ke2lkfWApKTtcclxuICAgICAgICAgICAgdGFyZ2V0Lmluc2VydEFkamFjZW50RWxlbWVudChcImJlZm9yZWVuZFwiLCBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGRyb3Bkb3duVGVtcGxhdGUoaWQpLCBcInRleHQvaHRtbFwiKS5nZXRFbGVtZW50QnlJZChpZCkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZHJvcGRvd24oJ2Zyb20nKTtcclxuICAgICAgICBkcm9wZG93bigndG8nKTtcclxuICAgICAgICBjb25zdCBidXR0b24gPSBgXHJcbjxidXR0b24gaWQ9XCJ0ZXN0X3NlbmRcIj5TZW5kPC9idXR0b24+XHJcbmA7XHJcbiAgICAgICAgY29uc3Qgc2VuZFBrZyA9ICgpID0+IHtcclxuICAgICAgICAgICAgLy8gdGhpcy5tdWx0aUZvckNvc3RJblNlY29uZHMgPSArKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtdWx0JykgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGZyb21OYW1lID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmcm9tJykgYXMgSFRNTFNlbGVjdEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICBjb25zdCB0b05hbWUgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvJykgYXMgSFRNTFNlbGVjdEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICBsZXQgZmluZCA9IGJyaWRnZXMuZmluZChiID0+IGIubmFtZSA9PT0gZnJvbU5hbWUpO1xyXG4gICAgICAgICAgICBsZXQgc2ltdWxhdGlvblBhY2thZ2UgPSBuZXcgU2ltdWxhdGlvblBhY2thZ2UoJ1NPTUVfTk9STUFMJywgXCJHcmVldGluZ3MgZnJvbVwiICsgZmluZC5uYW1lLCB0b05hbWUsIGZpbmQuUk9VVElOR19UQUJMRSk7XHJcbiAgICAgICAgICAgIGZpbmQuc2VuZChzaW11bGF0aW9uUGFja2FnZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0YXJnZXQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlZW5kXCIsIG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoYnV0dG9uLCBcInRleHQvaHRtbFwiKS5nZXRFbGVtZW50QnlJZCgndGVzdF9zZW5kJykpO1xyXG4gICAgICAgIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVzdF9zZW5kJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gc2VuZFBrZygpKVxyXG4gICAgfVxyXG4gICAgY29uc3QgYnJpZGdlVGVtcGxhdGUgPSAoYnJpZGdlOiBCcmlkZ2UpID0+IGBcclxuPGRpdiBjbGFzcz1cIml0ZW1cIiBpZD1cImJyaWRnZV8ke2JyaWRnZS52YWx1ZX1cIj5cclxuICAgIDxkaXYgY2xhc3M9XCJpdGVtLWNvbnRlbnRcIiBzdHlsZT1cIndpZHRoOiA4MCU7IGhlaWdodDogMTAwJTsgb3ZlcmZsb3cteTogYXV0bzsgb3ZlcmZsb3cteDogaGlkZGVuOyAkeyFicmlkZ2UuQkxPQ0tFRCgpID8gYGJveC1zaGFkb3c6IDVweCA1cHggNHB4ICMzM2IwNDAgIWltcG9ydGFudDtgIDogJyd9XCI+XHJcbiAgICAgICAgPGgzPkJyaWRnZSAke2JyaWRnZS5uYW1lfTwvaDM+XHJcbiAgICAgICAgJHticmlkZ2Uucm9vdE9mSW5kZXhpbmcgPyAnSW5kZXhpbmcgUm9vdCEnIDogJyd9PGJyPlxyXG4gICAgICAgIEtub3duIGxpbmtzOiBbPGJyPjxCTE9DS1FVT1RFPiR7YnJpZGdlLkRJU0NPVkVSRURfTElOS1MubWFwKGwgPT4gbC5ub2Rlcy5tYXAobiA9PiBuLm5hbWUpLmpvaW4oJy0nKSArICc6JyArIGwuY29zdCkuam9pbignLDxicj4nKX08L0JMT0NLUVVPVEU+PGJyPl08YnI+XHJcbiAgICAgICAgJHtgUmV0dXJuaW5nIERhdGEgdG86IFs8YnI+PEJMT0NLUVVPVEU+JHticmlkZ2UucmV0dXJuVG8uam9pbignLDxicj4nKX08L0JMT0NLUVVPVEU+PGJyPl1gfTxicj5cclxuICAgICAgICAkeyFicmlkZ2Uucm9vdE9mSW5kZXhpbmcgJiYgYnJpZGdlLklOREVYRUQgPyBgPGJyPk5vZGUgaGFzIGZpbmlzaGVkIGluZGV4aW5nITxicj5SZXR1cm5pbmcgRGF0YSB0byAke2JyaWRnZS5yZXR1cm5Uby5qb2luKCcsPGJyPicpfWAgOiAnJ308YnI+XHJcbiAgICAgICAgJHticmlkZ2Uucm9vdE9mSW5kZXhpbmcgJiYgYnJpZGdlLklOREVYRUQgPyBgPGJyPk5ldHdvcmsgaGFzIGZpbmlzaGVkIGluZGV4aW5nITxicj5NU1QgZ2VuZXJhdGVkLjxicj5TZW5kaW5nIE1TVCB0bzogWzxicj48QkxPQ0tRVU9URT4ke2JyaWRnZS5NU1QuYWxsTm9kZXMubWFwKG4gPT4gbi5uYW1lKS5maWx0ZXIocyA9PiBzICE9PSBicmlkZ2UubmFtZSkuam9pbignLDxicj4nKX08L0JMT0NLUVVPVEU+PGJyPl1gIDogJyd9XHJcbiAgICAgICAgJHshYnJpZGdlLkJMT0NLRUQoKSA/IGA8YnI+UmVjZWl2ZWQgTVNULiBSb3V0aW5nIFRhYmxlOiBbPGJyPjxCTE9DS1FVT1RFPiR7YnJpZGdlLlJPVVRJTkdfVEFCTEUubWFwKGkgPT4gYC0+JHtpLnRhcmdldH0gdmlhICR7aS5uZXh0SG9wfWApLmpvaW4oJyw8YnI+Jyl9PC9CTE9DS1FVT1RFPjxicj5dYCA6ICcnfVxyXG4gICAgPC9kaXY+XHJcbjwvZGl2PlxyXG5gO1xyXG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgYnJpZGdlXyR7YnJpZGdlLnZhbHVlfWApO1xyXG4gICAgZWwucmVwbGFjZVdpdGgobmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhicmlkZ2VUZW1wbGF0ZShicmlkZ2UpLCBcInRleHQvaHRtbFwiKS5nZXRFbGVtZW50QnlJZChgYnJpZGdlXyR7YnJpZGdlLnZhbHVlfWApKVxyXG59O1xyXG4iLCJpbXBvcnQge1NwYW5uaW5nVHJlZU5vZGV9IGZyb20gXCIuLi9TcGFubmluZ1RyZWUvc3Bhbm5pbmdUcmVlTm9kZVwiO1xyXG5pbXBvcnQge0JyaWRnZX0gZnJvbSBcIi4vQnJpZGdlXCI7XHJcbmltcG9ydCB7U2ltdWxhdGlvbkNvbm5lY3Rpb259IGZyb20gXCIuL1NpbXVsYXRpb25Db25uZWN0aW9uXCI7XHJcbmltcG9ydCB7U2ltdWxhdGlvblBhY2thZ2V9IGZyb20gXCIuL1NpbXVsYXRpb25QYWNrYWdlXCI7XHJcbmltcG9ydCB7TWluaW1hbFNwYW5UcmVlfSBmcm9tIFwiLi4vU3Bhbm5pbmdUcmVlL21pbmltYWxTcGFubmluZ1RyZWVcIjtcclxuaW1wb3J0IHtTcGFubmluZ1RyZWVMaW5rfSBmcm9tIFwiLi4vU3Bhbm5pbmdUcmVlL3NwYW5uaW5nVHJlZUxpbmtcIjtcclxuaW1wb3J0ICogYXMgdmlldyBmcm9tIFwiLi4vdmlldy9TaW11bGF0aW9uVmlld1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNpbXVsYXRpb24ge1xyXG4gICAgcHVibGljIGJyaWRnZXM6IEJyaWRnZVtdID0gW107XHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIG5vZGVzOiBTcGFubmluZ1RyZWVOb2RlW10sIHByaXZhdGUgbXVsdGlGb3JDb3N0SW5TZWNvbmRzID0gMC41KSB7XHJcbiAgICAgICAgdmlldy5pbml0KCk7XHJcbiAgICAgICAgLy8gZm9yZWFjaCBub2RlIGNyZWF0ZSBhIEJyaWRnZSB3aXRoIGEgY29ubmVjdGlvblxyXG4gICAgICAgIG5vZGVzLmZvckVhY2gobm9kZSA9PiB7XHJcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBDb25uZWN0aW9uXHJcbiAgICAgICAgICAgIGxldCBzaWJsaW5nTm9kZXMgPSBub2RlLmxpbmtzLm1hcChsID0+IGwudG9Ob2RlKTtcclxuICAgICAgICAgICAgY29uc3QgY29ubiA9IG5ldyBTaW11bGF0aW9uQ29ubmVjdGlvbihzaWJsaW5nTm9kZXMpO1xyXG4gICAgICAgICAgICAvLyBwdXNoIG5ldyBicmlkZ2VcclxuICAgICAgICAgICAgdGhpcy5icmlkZ2VzLnB1c2gobmV3IEJyaWRnZShub2RlLm5hbWUsIG5vZGUudmFsdWUsIGNvbm4sIChicmlkZ2UpID0+IHZpZXcuZHVtcEJyaWRnZShicmlkZ2UsIHRoaXMuYnJpZGdlcykpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBhbGxvdyBjb21tdW5pY2F0aW9uIGJldHdlZW4gZGlyZWN0IGNvbm5lY3RlZCBicmlkZ2VzXHJcbiAgICAgICAgdGhpcy5icmlkZ2VzLmZvckVhY2goYnJpZGdlID0+IHtcclxuICAgICAgICAgICAgbGV0IGxpbmtzOiBTcGFubmluZ1RyZWVMaW5rW10gPSBub2Rlcy5maW5kKG4gPT4gbi5uYW1lID09PSBicmlkZ2UubmFtZSkubGlua3M7XHJcbiAgICAgICAgICAgIGxldCBzaWJsaW5nTm9kZXMgPSBsaW5rcy5tYXAobCA9PiBsLnRvTm9kZSk7XHJcbiAgICAgICAgICAgIGJyaWRnZS5jb25uZWN0aW9uLnNlbmQuc3Vic2NyaWJlKChwa2c6IFNpbXVsYXRpb25QYWNrYWdlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY29ubmVjdGVkTm9kZSA9IHNpYmxpbmdOb2Rlcy5maW5kKG4gPT4gbiA9PT0gcGtnLnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoISFjb25uZWN0ZWROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGtnLmNvc3QgPSBsaW5rcy5maW5kKGwgPT4gbC50b05vZGUgPT09IHBrZy50YXJnZXQpLmNvc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2IgPSB2aWV3LmR1bXBQa2cocGtnLCBicmlkZ2UubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5icmlkZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoYiA9PiBiLm5hbWUgPT09IHBrZy50YXJnZXQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbm5lY3Rpb24ucmVjZWl2ZS5uZXh0KHBrZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBrZy5jb3N0ICogMTAwMCAqIHRoaXMubXVsdGlGb3JDb3N0SW5TZWNvbmRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmlldy5jcmVhdGVEb21CcmlkZ2VzKHRoaXMuYnJpZGdlcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXJ0SW5kZXhpbmdGcm9tUmFuZG9tQnJpZGdlOiAoKSA9PiBQcm9taXNlPE1pbmltYWxTcGFuVHJlZT4gPSAoKSA9PiB7XHJcbiAgICAgICAgLy8gYXMgdGhlIHByb3RvY29sIHNheXMgc2VuZCBhIENTVFAgcGFja2FnZSB0byBhbGwgZGlyZWN0IGNvbm5lY3RlZCBCcmlkZ2VzXHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPE1pbmltYWxTcGFuVHJlZT4oYXN5bmMgcmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJyaWRnZSA9IHRoaXMuYnJpZGdlc1tNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiB0aGlzLmJyaWRnZXMubGVuZ3RoKV07XHJcbiAgICAgICAgICAgIGJyaWRnZS5jb25uZWN0aW9uLmZpbmlzaGVkSW5kZXhpbmcuc3Vic2NyaWJlKChtc3QpID0+IHJlc29sdmUobXN0KSk7XHJcbiAgICAgICAgICAgIGF3YWl0IGJyaWRnZS5pbmRleE5ldHdvcmsoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn1cclxuIiwiICAgIC8vIHJlZmVyZW5jZXMgdG8gdGhlIGRvbVxyXG5pbXBvcnQge3BhcnNlLCBzdHJpbmdpZnl9IGZyb20gXCIuL3BhcnNlclwiO1xyXG5pbXBvcnQge1NpbXVsYXRpb259IGZyb20gXCIuL21vZGVscy9TaW11bGF0aW9uL1NpbXVsYXRpb25cIjtcclxuXHJcbi8vIGdldCBhIHJlZiB0byB0aGUgaW5wdXQgYW5kIG91dHB1dCBvZiBncmFwaHNcclxuY29uc3QgaW5wdXRBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RleHRJbicpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XHJcbmNvbnN0IG91dHB1dEFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGV4dE91dCcpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XHJcbi8vIHRyaWdnZXIgbmV3IHNpbXVsYXRpb24gcmVmXHJcbmNvbnN0IHNpbXVsYXRpb25CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltdWxhdGVfYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG5cclxuLy8gZXhhbXBsZSBpbnB1dHNcclxuY29uc3Qgc2ltcGxlVGVzdCA9IGBcclxuR3JhcGggbXlncmFwaCB7XHJcblx0Ly8gTm9kZVxyXG5cdEEgPSAyO1xyXG5cdEIgPSAxO1xyXG5cdEMgPSAzO1xyXG5cdFxyXG5cdC8vIExpbmtzIHVuZCB6dWdlaC4gS29zdGVuXHJcblx0QSAtIEIgOiAxO1xyXG5cdEEgLSBDIDogMTtcclxuXHRDIC0gQiA6IDI7XHJcbn1gO1xyXG5jb25zdCB0ZXN0ID0gYFxyXG5HcmFwaCBteWdyYXBoIHtcclxuXHQvLyBOb2RlXHJcblx0QSA9IDU7XHJcblx0QiA9IDE7XHJcblx0QyA9IDM7XHJcblx0RCA9IDc7XHJcblx0RSA9IDY7XHJcblx0RiA9IDQ7XHJcblx0XHJcblx0Ly8gTGlua3MgdW5kIHp1Z2VoLiBLb3N0ZW5cclxuXHRBIC0gQiA6IDEwO1xyXG5cdEEgLSBDIDogMTA7XHJcblx0QiAtIEQgOiAxNTtcclxuXHRCIC0gRSA6IDEwO1xyXG5cdEMgLSBEIDogMztcclxuXHRDIC0gRSA6IDEwO1xyXG5cdEQgLSBFIDogMjtcclxuXHREIC0gRiA6IDEwO1xyXG5cdEUgLSBGIDogMjtcclxufWA7XHJcbmlucHV0QXJlYS52YWx1ZSA9IHRlc3Q7XHJcblxyXG4vLyBjbGljayBpbXBsXHJcbmNvbnN0IG9uU2ltdWxhdGlvbkNsaWNrID0gKCkgPT4ge1xyXG4gICAgLy8gcGFyc2UgaW5wdXRcclxuICAgIGNvbnN0IHBhcnNlUmVzdWx0ID0gcGFyc2UoaW5wdXRBcmVhLnZhbHVlKTtcclxuICAgIC8vIGNyZWF0ZSBuZXcgU2ltdWxhdGlvbiB3aXRoIHBhcnNlZCBncmFwaCBhbmQgYSBtdWx0aXBsaWVyIGZvciB0aGUgY29zdCBvZiBsaW5rcyBpbiBzZWNvbmRzLlxyXG4gICAgY29uc3Qgc2ltdWxhdGlvbiA9IG5ldyBTaW11bGF0aW9uKHBhcnNlUmVzdWx0Lm5vZGVzLCArKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtdWx0JykgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUpO1xyXG4gICAgLy8gU3RhcnQgdGhlIHNpbXVsYXRpb24gdXNpbmcgbXkgb3duIHByb3RvY29sIGNhbGxlZCBDU1RQIENlbnRyYWxpemVkIFNwYW5uaW5nIFRyZWUgUHJvdG9jb2xcclxuICAgIHNpbXVsYXRpb24uc3RhcnRJbmRleGluZ0Zyb21SYW5kb21CcmlkZ2UoKS50aGVuKG1zdCA9PiB7XHJcbiAgICAgICAgLy8gd2hlbiBpdCBoYXMgYWxsIGluZm9ybWF0aW9uIG9mIHRoZSBuZXR3b3JrIGl0IHJldHVybnMgYSBtc3RcclxuICAgICAgICAvLyBhbmQgc2hhcmVzIGl0IHdpdGggYWxsIG90aGVyIGJyaWRnZXMgdGhlbiB3aGVyZSBwYXJ0IG9mIHRoZSBpbmRleGluZyBwcm9jZXNzLlxyXG4gICAgICAgIC8vIHNob3cgdGhlIG1zdCBpbiBzdHJpbmcgdmVyc2lvblxyXG4gICAgICAgIG91dHB1dEFyZWEudmFsdWUgPSBzdHJpbmdpZnkobXN0LCBwYXJzZVJlc3VsdC5ncmFwaE5hbWUpO1xyXG4gICAgfSlcclxufTtcclxuXHJcbi8vIGNhbGwgY2xpY2sgaW1wbCBvbiBzaW11bGF0aW9uQnV0dG9uIGNsaWNrXHJcbnNpbXVsYXRpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblNpbXVsYXRpb25DbGljayk7XHJcbiIsImltcG9ydCB7U3Bhbm5pbmdUcmVlTGlua30gZnJvbSBcIi4uL21vZGVscy9TcGFubmluZ1RyZWUvc3Bhbm5pbmdUcmVlTGlua1wiO1xyXG5pbXBvcnQge1NwYW5uaW5nVHJlZU5vZGV9IGZyb20gXCIuLi9tb2RlbHMvU3Bhbm5pbmdUcmVlL3NwYW5uaW5nVHJlZU5vZGVcIjtcclxuXHJcbi8vIHBhcnNlcyBhIHN0cmluZyB0byBTcGFubmluZ1RyZWVOb2RlcyArIHRoZSBuYW1lIG9mIHRoZSBncmFwaFxyXG5leHBvcnQgY29uc3QgcGFyc2U6IChpbnB1dDogc3RyaW5nKSA9PiB7Z3JhcGhOYW1lOiBzdHJpbmcsIG5vZGVzOiBTcGFubmluZ1RyZWVOb2RlW119ID1cclxuXHQoaW5wdXQ6IHN0cmluZykgPT4ge1xyXG5cdFx0Ly8gdGVtcG9yYXJ5IEFyciBmb3IgbGlua3MgYmVjYXVzZSB3ZSB3aWxsIGxhdGVyIGF0dGFjaCB0aGUgbGlua3MgdG8gaXRzIG5vZGVzLlxyXG5cdFx0Y29uc3QgdGVtcExpbmtzOiB7bm9kZXM6IHN0cmluZ1tdLCBjb3N0OiBudW1iZXJ9W10gPSBbXTtcclxuXHRcdGNvbnN0IG5vZGVzOiBTcGFubmluZ1RyZWVOb2RlW10gPSBbXTtcclxuXHJcblx0XHQvLyByZWdleCBmb3IgZ2V0dGluZyB0aGUgaW5mb3JtYXRpb25cclxuXHRcdGNvbnN0IGdyYXBoTmFtZSA9IGlucHV0Lm1hdGNoKC8oPzw9R3JhcGhbIF0pKFxcUyspL2cpWzBdO1xyXG5cdFx0Ly8gbWF0Y2hlczogd29yZCBpZiAnID0nIGlzIGFmdGVyIG9yIHZhbHVlIGlmICc9ICcgaXMgaW4gZnJvbnRcclxuXHRcdGNvbnN0IG5vZGVNYXRjaGVzID0gaW5wdXQubWF0Y2goL1teXFxzXSsoPz0gPSl8KD88PT0gKVsxLTldKi9nKTtcclxuXHRcdC8vIG1hdGNoZXM6IHdvcmRzIGlmICctJyBmb2xsb3dzIG9yIHdvcmQgaWYgJy0nIGlzIGluIGZyb250IG9yIHZhbHVlIGlmIDogaXMgaW4gZnJvbnRcclxuXHRcdGNvbnN0IGxpbmtNYXRjaGVzID0gaW5wdXQubWF0Y2goL1teXFxzXSsoPz0gLSl8W15cXHNdKyg/PSA6KXwoPzw9OiApWzAtOV0qL2cpO1xyXG5cdFx0Ly8gc28gZm9yIGVhY2ggbGluayB3ZSBnZXQgMyByZXN1bHRzXHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxpbmtNYXRjaGVzLmxlbmd0aDsgaSA9IGkgKyAzKSB7XHJcblx0XHRcdC8vIHB1c2ggZm91bmQgaW5mbyBhYm91dCBsaW5rXHJcblx0XHRcdHRlbXBMaW5rcy5wdXNoKHtcclxuXHRcdFx0XHRub2RlczogW2xpbmtNYXRjaGVzW2ldLCBsaW5rTWF0Y2hlc1tpICsgMV1dLFxyXG5cdFx0XHRcdGNvc3Q6ICtsaW5rTWF0Y2hlc1tpICsgMl0gLy8gc29tZSBsaXR0bGUgdHJpY2sgdG8gY2FzdCBhIHN0cmluZyB0byBudW1iZXIgKyc0JyA9PT0gNFxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdC8vIGZvciBlYWNoIG5vZGUgd2UgZ2V0IDIgcmVzdWx0c1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBub2RlTWF0Y2hlcy5sZW5ndGg7IGkgPSBpICsgMikge1xyXG5cdFx0XHQvLyBnZXQgbm9kZSBpbmZvXHJcblx0XHRcdGNvbnN0IG5hbWUgPSBub2RlTWF0Y2hlc1tpXTtcclxuXHRcdFx0Y29uc3QgdmFsdWUgPSArbm9kZU1hdGNoZXNbaSArIDFdO1xyXG5cdFx0XHQvLyBhZGQgbWF0Y2hpbmcgbGlua3MgYXMgU3Bhbm5pbmdUcmVlTGlua1xyXG5cdFx0XHRjb25zdCBsaW5rcyA9IHRlbXBMaW5rcy5maWx0ZXIobCA9PiBsLm5vZGVzLmZpbmRJbmRleChuID0+IG4gPT09IG5hbWUpICE9PSAtMSlcclxuXHRcdFx0XHQubWFwKGxpbmsgPT4gbmV3IFNwYW5uaW5nVHJlZUxpbmsobGluay5ub2Rlcy5maW5kKG4gPT4gbiAhPT0gbmFtZSksIGxpbmsuY29zdCkpO1xyXG5cdFx0XHQvLyBwdXNoIG5ldyBTcGFubmluZ1RyZWVOb2RlXHJcblx0XHRcdG5vZGVzLnB1c2gobmV3IFNwYW5uaW5nVHJlZU5vZGUobmFtZSwgdmFsdWUsIGxpbmtzKSk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRncmFwaE5hbWUsXHJcblx0XHRcdG5vZGVzXHJcblx0XHR9XHJcblx0fTtcclxuIiwiaW1wb3J0IHtNaW5pbWFsU3BhblRyZWV9IGZyb20gXCIuLi9tb2RlbHMvU3Bhbm5pbmdUcmVlL21pbmltYWxTcGFubmluZ1RyZWVcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBzdHJpbmdpZnk6IChtaW5pbWFsU3BhblRyZWU6IE1pbmltYWxTcGFuVHJlZSwgbmFtZTogc3RyaW5nKSA9PiBzdHJpbmcgPVxyXG5cdChtaW5pbWFsU3BhblRyZWUsIG5hbWU6IHN0cmluZykgPT4gYFxyXG5TcGFubmluZy1UcmVlIG9mICR7bmFtZX0ge1xyXG5cdFJvb3Q6ICR7bWluaW1hbFNwYW5UcmVlLnJvb3QubmFtZX07XHJcblx0JHttaW5pbWFsU3BhblRyZWUubGlua1RvU3RyaW5nKCl9XHJcbn1gO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9
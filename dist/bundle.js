!function(n){var t={};function e(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:r})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var o in n)e.d(r,o,function(t){return n[t]}.bind(null,o));return r},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=0)}([function(n,t,e){"use strict";e.r(t);var r=function(){return function(n,t){this.toNode=n,this.cost=t}}(),o=function(){return function(n,t,e){this.name=n,this.value=t,this.links=e}}(),i=function(){return function(n,t){this.nodes=n,this.cost=t}}(),s=function(){function n(n){this.shortestLinks=[],this.allNodes=[];for(var t=n.slice(),e=(t=t.sort(function(n,t){return n.cost-t.cost}).reverse()).flatMap(function(n){return n.nodes}),r=new Map,o=0,i=e;o<i.length;o++){var s=i[o];r.has(s.name)||(r.set(s.name,!0),this.allNodes.push(s))}for(this.root=this.allNodes.sort(function(n,t){return n.value-t.value})[0],console.log(t.slice());!this.allNodesAreConnected(this.allNodes);){var u=t.pop();if(this.shortestLinks.push(u),this.allNodesAreConnected(this.allNodes)){for(var c=void 0,a=c=this.shortestLinks.slice();c;)a=c,c=this.tryToRemove(c);a.length<this.shortestLinks.length&&(this.shortestLinks=a)}}console.log(this.shortestLinks)}return n.prototype.allNodesAreConnected=function(n,t){void 0===t&&(t=this.shortestLinks);for(var e=[],r=t.flatMap(function(n){return n.nodes}),o=new Map,i=0,s=r;i<s.length;i++){var u=s[i];o.has(u.name)||(o.set(u.name,!0),e.push(u))}var c,a=e.length===n.length;if(a){var h=this.allNodes.slice(),l=function(n){var e;e=n,h.splice(h.findIndex(function(n){return n.name===e.name}),1),function(n){return t.filter(function(t){return-1!==t.nodes.findIndex(function(t){return t.name===n.name})}).flatMap(function(t){return t.nodes.find(function(t){return t.name!==n.name})}).filter(function(n){return-1!==h.findIndex(function(t){return t.name===n.name})})}(n).forEach(function(n){return l(n)})};l(this.root),c=0===h.length}return a&&c},n.prototype.tryToRemove=function(n){for(var t,e=function(e){var o=n.slice();if(o.splice(o.findIndex(function(n){return n===e}),1),r.allNodesAreConnected(r.allNodes,o))return t=o,"break"},r=this,o=0,i=n;o<i.length;o++){if("break"===e(i[o]))break}return t},n.prototype.linkToString=function(){var n=this.shortestLinks.map(function(n){return new i(n.nodes.sort(function(n,t){return n.name<t.name?-1:n.name>t.name?1:0}),n.cost)}).sort(function(n,t){if(n.nodes[0].name<t.nodes[0].name)return-1;if(n.nodes[0].name>t.nodes[0].name)return 1;if(n.nodes[0].name===t.nodes[0].name){if(n.nodes[1].name<t.nodes[1].name)return-1;if(n.nodes[1].name>t.nodes[1].name)return 1}return 0}),t="";return n.forEach(function(n){t+=n.nodes[0].name+" - "+n.nodes[1].name+";\n\t"}),t},n.prototype.getRoutingTable=function(n){var t=this,e=[];return this.allNodes.filter(function(t){return t.name!==n}).forEach(function(r){e.push({target:r.name,nextHop:t.getNextHop(n,r.name)})}),e},n.prototype.getNextHop=function(n,t,e,r){void 0===r&&(r=[]),console.log(n,t,e),r.push(n);var o=this.shortestLinks.filter(function(t){return-1!==t.nodes.findIndex(function(t){return t.name===n})});if(-1!==o.findIndex(function(n){return-1!==n.nodes.findIndex(function(n){return n.name===t})}))return e||t;for(var i=0,s=o;i<s.length;i++){var u=s[i].nodes.find(function(t){return t.name!==n}).name;if(-1===r.indexOf(u)){var c=this.getNextHop(u,t,e||u,r.slice());if(c)return c}}},n}(),u=function(n,t,e,r){return new(e||(e=Promise))(function(o,i){function s(n){try{c(r.next(n))}catch(n){i(n)}}function u(n){try{c(r.throw(n))}catch(n){i(n)}}function c(n){n.done?o(n.value):new e(function(t){t(n.value)}).then(s,u)}c((r=r.apply(n,t||[])).next())})},c=function(n,t){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(n,s)}catch(n){i=[6,n],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},a=function(){function n(n,t,e,r){var o=this;this.rootOfIndexing=!1,this.returnTo=[],this.BLOCKED=function(){return!o.MST},this.DISCOVERED_LINKS=[],this.name=n,this.value=t,this.connection=e,this.connection.receive.subscribe(function(n){return o.receive(n)}),this.dumpChanges=function(){return r(o)}}return n.prototype.indexNetwork=function(){return u(this,void 0,void 0,function(){var n,t=this;return c(this,function(e){switch(e.label){case 0:return this.rootOfIndexing=!0,this.dumpChanges(),[4,this.connection.ping];case 1:return n=e.sent(),this.WAITING_FOR_BRIDGES=n,n.forEach(function(n){t.send({protocol:"CSTP",content:{message:"Dear Neighbor hear is my name and the package provides you the cost to me. Follow the CSTP.",from:{name:t.name,value:t.value}},target:n})}),[2]}})})},n.prototype.send=function(n){n.sender=this.name,this.connection.send.next(n)},n.prototype.handleCSTPPackage=function(n){var t,e=this;if(n.content.mst&&(n.content.mst=n.content.mst.slice(),this.MST=new s(n.content.mst),this.connection.finishedIndexing.next(this.MST),this.ROUTING_TABLE=this.MST.getRoutingTable(this.name),this.dumpChanges(),n.destination!==this.name&&(n.target=this.ROUTING_TABLE.find(function(t){return t.target===n.destination}).nextHop,this.send(n))),!(this.INDEXED||this.rootOfIndexing&&n.content.from)){if(console.log(this.name,"received pkg"),0!==this.DISCOVERED_LINKS.length||this.rootOfIndexing||(this.connection.ping.then(function(t){if(e.WAITING_FOR_BRIDGES=t.filter(function(t){return t!==n.content.from.name}),e.dumpChanges(),console.log(e.name," waiting for:",e.WAITING_FOR_BRIDGES),e.WAITING_FOR_BRIDGES.forEach(function(n){return e.send({protocol:"CSTP",content:{message:"Dear Neighbor hear is my name and the package provides you the cost to me. Follow the CSTP.",from:{name:e.name,value:e.value}},target:n})}),0===e.WAITING_FOR_BRIDGES.length){var r=e.DISCOVERED_LINKS[0].nodes.find(function(n){return n.name!==e.name});if(e.dumpChanges(),e.send({protocol:"CSTP",content:{message:"Dear Neighbor hear are my discovered links, you may concat them with yours and send them back!",discoveredLinks:e.DISCOVERED_LINKS},target:r.name}),e.INDEXED=!0,e.rootOfIndexing){var o=new s(e.DISCOVERED_LINKS);e.MST=o,e.ROUTING_TABLE=e.MST.getRoutingTable(e.name),e.connection.finishedIndexing.next(o)}else e.connection.finishedIndexing.next();e.dumpChanges()}}),this.DISCOVERED_LINKS.push({cost:n.cost,nodes:[{name:this.name,value:this.value},n.content.from]}),this.returnTo.push(n.content.from.name),this.dumpChanges(),console.log("returning from ",this.name,"to ",this.returnTo)),this.WAITING_FOR_BRIDGES&&n.content.discoveredLinks){var r=n.content.discoveredLinks[0].nodes.find(function(n){return n.name!==e.name});this.WAITING_FOR_BRIDGES.splice(this.WAITING_FOR_BRIDGES.findIndex(function(n){return n===r}),1),console.log(this.name," waiting for:",this.WAITING_FOR_BRIDGES),(t=this.DISCOVERED_LINKS).push.apply(t,n.content.discoveredLinks)}else this.WAITING_FOR_BRIDGES&&n.content.from&&(this.WAITING_FOR_BRIDGES.splice(this.WAITING_FOR_BRIDGES.findIndex(function(t){return t===n.content.from.name}),1),console.log(this.name," waiting for:",this.WAITING_FOR_BRIDGES),this.returnTo.push(n.content.from.name),console.log("returning from ",this.name,"to ",this.returnTo),this.DISCOVERED_LINKS.push({cost:n.cost,nodes:[{name:this.name,value:this.value},n.content.from]}));if(this.dumpChanges(),this.WAITING_FOR_BRIDGES&&0===this.WAITING_FOR_BRIDGES.length){if(console.log(this.name,"sending",this.DISCOVERED_LINKS),this.returnTo.forEach(function(n){e.send({protocol:"CSTP",content:{message:"Dear Neighbor hear are my discovered links, you may concat them with yours and send them back!",discoveredLinks:e.DISCOVERED_LINKS},target:n})}),this.INDEXED=!0,console.log("Node has finished ",this.name),this.rootOfIndexing){var o=[];this.DISCOVERED_LINKS.forEach(function(n){o.find(function(t){return-1!==n.nodes.findIndex(function(n){return n.name===t.nodes[0].name})&&-1!==n.nodes.findIndex(function(n){return n.name===t.nodes[1].name})})||o.push(n)}),console.log("dl",this.DISCOVERED_LINKS.map(function(n){return n.nodes}));var i=o.slice(),u=new s(o);this.MST=u,this.ROUTING_TABLE=this.MST.getRoutingTable(this.name),this.ROUTING_TABLE.forEach(function(n){e.send({protocol:"CSTP",content:{message:"Dear Neighbor hear is my name and the package provides you the cost to me. Follow the CSTP.",mst:i},target:n.nextHop,destination:n.target})}),this.connection.finishedIndexing.next(u)}else this.connection.finishedIndexing.next();this.dumpChanges()}}},n.prototype.receive=function(n){"CSTP"===n.protocol?this.handleCSTPPackage(n):this.handlePackage(n)},n.prototype.handlePackage=function(n){this.name===n.destination?alert(this.name+" received a pkg with: "+n.content):(n.target=this.ROUTING_TABLE.find(function(t){return t.target===n.destination}).nextHop,this.send(n))},n}(),h=function(n,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e])})(n,t)};function l(n,t){function e(){this.constructor=n}h(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}function f(n){return"function"==typeof n}var d=!1,p={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){n&&(new Error).stack;d=n},get useDeprecatedSynchronousErrorHandling(){return d}};function m(n){setTimeout(function(){throw n})}var b={closed:!0,next:function(n){},error:function(n){if(p.useDeprecatedSynchronousErrorHandling)throw n;m(n)},complete:function(){}},g=Array.isArray||function(n){return n&&"number"==typeof n.length};function y(n){return Error.call(this),this.message=n?n.length+" errors occurred during unsubscription:\n"+n.map(function(n,t){return t+1+") "+n.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=n,this}y.prototype=Object.create(Error.prototype);var v=y,E=function(){function n(n){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,n&&(this._unsubscribe=n)}var t;return n.prototype.unsubscribe=function(){var n,t=!1;if(!this.closed){var e=this._parent,r=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s,u=-1,c=r?r.length:0;e;)e.remove(this),e=++u<c&&r[u]||null;if(f(o))try{o.call(this)}catch(e){t=!0,n=e instanceof v?_(e.errors):[e]}if(g(i))for(u=-1,c=i.length;++u<c;){var a=i[u];if(null!==(s=a)&&"object"==typeof s)try{a.unsubscribe()}catch(e){t=!0,n=n||[],e instanceof v?n=n.concat(_(e.errors)):n.push(e)}}if(t)throw new v(n)}},n.prototype.add=function(t){var e=t;switch(typeof t){case"function":e=new n(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof n)){var r=e;(e=new n)._subscriptions=[r]}break;default:if(!t)return n.EMPTY;throw new Error("unrecognized teardown "+t+" added to Subscription.")}if(e._addParent(this)){var o=this._subscriptions;o?o.push(e):this._subscriptions=[e]}return e},n.prototype.remove=function(n){var t=this._subscriptions;if(t){var e=t.indexOf(n);-1!==e&&t.splice(e,1)}},n.prototype._addParent=function(n){var t=this._parent,e=this._parents;return t!==n&&(t?e?-1===e.indexOf(n)&&(e.push(n),!0):(this._parents=[n],!0):(this._parent=n,!0))},n.EMPTY=((t=new n).closed=!0,t),n}();function _(n){return n.reduce(function(n,t){return n.concat(t instanceof v?t.errors:t)},[])}var S="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),I=function(n){function t(e,r,o){var i=n.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=b;break;case 1:if(!e){i.destination=b;break}if("object"==typeof e){e instanceof t?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new w(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new w(i,e,r,o)}return i}return l(t,n),t.prototype[S]=function(){return this},t.create=function(n,e,r){var o=new t(n,e,r);return o.syncErrorThrowable=!1,o},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this))},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){this.destination.error(n),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var n=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=n,this._parents=t,this},t}(E),w=function(n){function t(t,e,r,o){var i,s=n.call(this)||this;s._parentSubscriber=t;var u=s;return f(e)?i=e:e&&(i=e.next,r=e.error,o=e.complete,e!==b&&(f((u=Object.create(e)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=i,s._error=r,s._complete=o,s}return l(t,n),t.prototype.next=function(n){if(!this.isStopped&&this._next){var t=this._parentSubscriber;p.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,n)&&this.unsubscribe():this.__tryOrUnsub(this._next,n)}},t.prototype.error=function(n){if(!this.isStopped){var t=this._parentSubscriber,e=p.useDeprecatedSynchronousErrorHandling;if(this._error)e&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,n),this.unsubscribe()):(this.__tryOrUnsub(this._error,n),this.unsubscribe());else if(t.syncErrorThrowable)e?(t.syncErrorValue=n,t.syncErrorThrown=!0):m(n),this.unsubscribe();else{if(this.unsubscribe(),e)throw n;m(n)}}},t.prototype.complete=function(){var n=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var e=function(){return n._complete.call(n._context)};p.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(n,t){try{n.call(this._context,t)}catch(n){if(this.unsubscribe(),p.useDeprecatedSynchronousErrorHandling)throw n;m(n)}},t.prototype.__tryOrSetError=function(n,t,e){if(!p.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,e)}catch(t){return p.useDeprecatedSynchronousErrorHandling?(n.syncErrorValue=t,n.syncErrorThrown=!0,!0):(m(t),!0)}return!1},t.prototype._unsubscribe=function(){var n=this._parentSubscriber;this._context=null,this._parentSubscriber=null,n.unsubscribe()},t}(I);var x="function"==typeof Symbol&&Symbol.observable||"@@observable";function T(){}function O(n){return n?1===n.length?n[0]:function(t){return n.reduce(function(n,t){return t(n)},t)}:T}var D=function(){function n(n){this._isScalar=!1,n&&(this._subscribe=n)}return n.prototype.lift=function(t){var e=new n;return e.source=this,e.operator=t,e},n.prototype.subscribe=function(n,t,e){var r=this.operator,o=function(n,t,e){if(n){if(n instanceof I)return n;if(n[S])return n[S]()}return n||t||e?new I(n,t,e):new I(b)}(n,t,e);if(r?o.add(r.call(o,this.source)):o.add(this.source||p.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),p.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},n.prototype._trySubscribe=function(n){try{return this._subscribe(n)}catch(t){p.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=t),!function(n){for(;n;){var t=n,e=t.closed,r=t.destination,o=t.isStopped;if(e||o)return!1;n=r&&r instanceof I?r:null}return!0}(n)?console.warn(t):n.error(t)}},n.prototype.forEach=function(n,t){var e=this;return new(t=N(t))(function(t,r){var o;o=e.subscribe(function(t){try{n(t)}catch(n){r(n),o&&o.unsubscribe()}},r,t)})},n.prototype._subscribe=function(n){var t=this.source;return t&&t.subscribe(n)},n.prototype[x]=function(){return this},n.prototype.pipe=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return 0===n.length?this:O(n)(this)},n.prototype.toPromise=function(n){var t=this;return new(n=N(n))(function(n,e){var r;t.subscribe(function(n){return r=n},function(n){return e(n)},function(){return n(r)})})},n.create=function(t){return new n(t)},n}();function N(n){if(n||(n=p.Promise||Promise),!n)throw new Error("no Promise impl found");return n}function k(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}k.prototype=Object.create(Error.prototype);var B=k,R=function(n){function t(t,e){var r=n.call(this)||this;return r.subject=t,r.subscriber=e,r.closed=!1,r}return l(t,n),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var n=this.subject,t=n.observers;if(this.subject=null,t&&0!==t.length&&!n.isStopped&&!n.closed){var e=t.indexOf(this.subscriber);-1!==e&&t.splice(e,1)}}},t}(E),C=function(n){function t(t){var e=n.call(this,t)||this;return e.destination=t,e}return l(t,n),t}(I),L=function(n){function t(){var t=n.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return l(t,n),t.prototype[S]=function(){return new C(this)},t.prototype.lift=function(n){var t=new P(this,this);return t.operator=n,t},t.prototype.next=function(n){if(this.closed)throw new B;if(!this.isStopped)for(var t=this.observers,e=t.length,r=t.slice(),o=0;o<e;o++)r[o].next(n)},t.prototype.error=function(n){if(this.closed)throw new B;this.hasError=!0,this.thrownError=n,this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),o=0;o<e;o++)r[o].error(n);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new B;this.isStopped=!0;for(var n=this.observers,t=n.length,e=n.slice(),r=0;r<t;r++)e[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new B;return n.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(n){if(this.closed)throw new B;return this.hasError?(n.error(this.thrownError),E.EMPTY):this.isStopped?(n.complete(),E.EMPTY):(this.observers.push(n),new R(this,n))},t.prototype.asObservable=function(){var n=new D;return n.source=this,n},t.create=function(n,t){return new P(n,t)},t}(D),P=function(n){function t(t,e){var r=n.call(this)||this;return r.destination=t,r.source=e,r}return l(t,n),t.prototype.next=function(n){var t=this.destination;t&&t.next&&t.next(n)},t.prototype.error=function(n){var t=this.destination;t&&t.error&&this.destination.error(n)},t.prototype.complete=function(){var n=this.destination;n&&n.complete&&this.destination.complete()},t.prototype._subscribe=function(n){return this.source?this.source.subscribe(n):E.EMPTY},t}(L),G=function(){return function(n){this.send=new L,this.receive=new L,this.finishedIndexing=new L,this.ping=new Promise(function(t){return t(n)})}}(),A=function(){return function(n,t,e,r){var o=this;this.protocol=n,this.content=t,this.target=e,this.destination=e;var i=r.find(function(n){return n.target===o.target});i||console.log("no"),this.target=i.nextHop}}(),M=function(n,t,e,r){return new(e||(e=Promise))(function(o,i){function s(n){try{c(r.next(n))}catch(n){i(n)}}function u(n){try{c(r.throw(n))}catch(n){i(n)}}function c(n){n.done?o(n.value):new e(function(t){t(n.value)}).then(s,u)}c((r=r.apply(n,t||[])).next())})},F=function(n,t){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(n,s)}catch(n){i=[6,n],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},j=function(){function n(n,t){void 0===t&&(t=.5);var e=this;this.nodes=n,this.multiForCostInSeconds=t,this.bridges=[],this.startIndexingFromRandomBridge=function(){return new Promise(function(n){return M(e,void 0,void 0,function(){var t;return F(this,function(e){return t=this.bridges[Math.round(Math.random()*this.bridges.length)],console.log(this.bridges,t),t.connection.finishedIndexing.subscribe(function(t){return n(t)}),t.indexNetwork().then(function(){return console.log("wtf")}),[2]})})})},this.id=0;var r=document.getElementById("container_target");r.childNodes.forEach(function(n){return n.remove()}),r.childNodes.forEach(function(n){return n.remove()}),r.childNodes.forEach(function(n){return n.remove()});r.insertAdjacentElement("beforeend",(new DOMParser).parseFromString('\n<div class="item" id="init_pkg">\n    <h3>Packages:</h3>\n    <div id="pkg_s_target">\n\n    </div>\n</div>\n',"text/html").getElementById("init_pkg")),n.forEach(function(n){var t=n.links.map(function(n){return n.toNode}),r=new G(t);e.bridges.push(new a(n.name,n.value,r,function(n){return e.dumpBridge(n)}))}),this.bridges.forEach(function(t){var r=n.find(function(n){return n.name===t.name}).links,o=r.map(function(n){return n.toNode});t.connection.send.subscribe(function(n){if(console.log(t.name+">>>"+n.target),o.find(function(t){return t===n.target})){n.cost=r.find(function(t){return t.toNode===n.target}).cost;var i=e.dumpPkg(n,t.name);setTimeout(function(){i(),e.bridges.find(function(t){return t.name===n.target}).connection.receive.next(n)},1e3*n.cost*e.multiForCostInSeconds)}})}),this.createDomBridges()}return n.prototype.dumpPkg=function(n,t){var e=document.getElementById("pkg_s_target"),r=this.id++;return e.insertAdjacentElement("beforeend",(new DOMParser).parseFromString(function(n,t){return'\n<div id="pkg_'+r+'">\n    '+t+" -> "+n.target+" : "+n.cost+"\n</div>\n"}(n,t),"text/html").getElementById("pkg_"+r)),function(){e.removeChild(document.getElementById("pkg_"+r))}},n.prototype.createDomBridges=function(){var n=document.getElementById("container_target");this.bridges.sort(function(n,t){return n.name<t.name?-1:n.name>t.name?1:0}).forEach(function(t){n.insertAdjacentElement("beforeend",(new DOMParser).parseFromString(function(n){return'\n<div class="item" id="bridge_'+n.value+'">\n    <h3>Bridge '+n.name+"</h3>\n</div>\n"}(t),"text/html").getElementById("bridge_"+t.value))})},n.prototype.dumpBridge=function(n){var t=this;if(-1===this.bridges.findIndex(function(n){return n.BLOCKED()})){var e=document.getElementById("pkg_test_target");e.insertAdjacentElement("beforeend",(new DOMParser).parseFromString('\n<div class="item" id="pkg-card" style="\n    display: flex;\n    flex-direction: column;\n    width: 200%;\n">\n    <h3>Send a sample package through with the new topology</h3>\n</div>\n',"text/html").getElementById("pkg-card")),e=document.getElementById("pkg-card");var r=this.bridges.map(function(n){return n.name}),o=function(n){return'\n<label id="l_'+n+'" for="'+n+'">Send '+n+':</label>\n<select id="'+n+'">\n    '+r.map(function(n){return'<option value="'+n+'">'+n+"</option>\n    "})+"\n</select>\n"},i=function(n){e.insertAdjacentElement("beforeend",(new DOMParser).parseFromString(o(n)+"<br>","text/html").getElementById("l_"+n)),e.insertAdjacentElement("beforeend",(new DOMParser).parseFromString(o(n),"text/html").getElementById(n))};i("from"),i("to");e.insertAdjacentElement("beforeend",(new DOMParser).parseFromString('\n<button id="test_send">Send</button>\n',"text/html").getElementById("test_send")),document.getElementById("test_send").addEventListener("click",function(){return function(){console.log("sending"),t.multiForCostInSeconds=+document.getElementById("mult").value;var n=document.getElementById("from").value,e=document.getElementById("to").value,r=t.bridges.find(function(t){return t.name===n}),o=new A("SOME_NORMAL","Greetings from"+r.name,e,r.ROUTING_TABLE);console.log("here",o),r.send(o)}()})}document.getElementById("bridge_"+n.value).replaceWith((new DOMParser).parseFromString(function(n){return'\n<div class="item" id="bridge_'+n.value+'" '+(n.BLOCKED()?"":'style="box-shadow: 5px 5px 4px #33b040 !important;"')+'>\n    <div style="width: 100%; height: 100%; overflow-y: auto">\n        <h3>Bridge '+n.name+"</h3>\n        "+(n.rootOfIndexing?"Indexing Root!":"")+"<br>\n        Known links: [<br><BLOCKQUOTE>"+n.DISCOVERED_LINKS.map(function(n){return n.nodes.map(function(n){return n.name}).join("-")+":"+n.cost}).join(",<br>")+"</BLOCKQUOTE><br>]<br>\n        "+(!n.rootOfIndexing&&n.INDEXED?"<br>Node has finished indexing!<br>Returning Data to: [<br><BLOCKQUOTE>"+n.returnTo.join(",<br>")+"</BLOCKQUOTE><br>]":"")+"\n        "+(n.rootOfIndexing&&n.INDEXED?"<br>Network has finished indexing!<br>MST generated.<br>Sending MST to: [<br><BLOCKQUOTE>"+n.MST.allNodes.map(function(n){return n.name}).filter(function(t){return t!==n.name}).join(",<br>")+"</BLOCKQUOTE><br>]":"")+"\n        "+(n.BLOCKED()?"":"<br>Received MST. Routing Table: [<br><BLOCKQUOTE>"+n.ROUTING_TABLE.map(function(n){return"->"+n.target+" via "+n.nextHop}).join(",<br>")+"</BLOCKQUOTE><br>]")+"\n    </div>\n</div>\n"}(n),"text/html").getElementById("bridge_"+n.value))},n}(),K=document.getElementById("textIn"),U=document.getElementById("textOut"),H=document.getElementById("simulate_btn");K.value="\nGraph mygraph {\n\t// Node\n\tA = 5;\n\tB = 1;\n\tC = 3;\n\tD = 7;\n\tE = 6;\n\tF = 4;\n\t\n\t// Links und zugeh. Kosten\n\tA - B : 10;\n\tA - C : 10;\n\tB - D : 15;\n\tB - E : 10;\n\tC - D : 3;\n\tC - E : 10;\n\tD - E : 2;\n\tD - F : 10;\n\tE - F : 2;\n}",console.log(K);H.addEventListener("click",function(){var n=function(n){for(var t=[],e=[],i=n.match(/(?<=Graph[ ])(\S+)/g)[0],s=n.match(/[^\s]+(?= =)|(?<== )[1-9]*/g),u=n.match(/[^\s]+(?= -)|[^\s]+(?= :)|(?<=: )[0-9]*/g),c=0;c<u.length;c+=3)t.push({nodes:[u[c],u[c+1]],cost:+u[c+2]});var a=function(n){var i=s[n],u=+s[n+1],c=t.filter(function(n){return-1!==n.nodes.findIndex(function(n){return n===i})}).map(function(n){return new r(n.nodes.find(function(n){return n!==i}),n.cost)});e.push(new o(i,u,c))};for(c=0;c<s.length;c+=2)a(c);return{graphName:i,nodes:e}}(K.value),t=new j(n.nodes,+document.getElementById("mult").value);console.log(t),t.startIndexingFromRandomBridge().then(function(t){var e;U.value=(e=t,"\nSpanning-Tree of "+n.graphName+" {\n\tRoot: "+e.root.name+";\n\t"+e.linkToString()+"\n}")})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9TcGFubmluZ1RyZWUvc3Bhbm5pbmdUcmVlTGluay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1NwYW5uaW5nVHJlZS9zcGFubmluZ1RyZWVOb2RlLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU2ltdWxhdGlvbi9TaW11bGF0aW9uTGluay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1NwYW5uaW5nVHJlZS9taW5pbWFsU3Bhbm5pbmdUcmVlLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU2ltdWxhdGlvbi9CcmlkZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL2lzRnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvY29uZmlnLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaG9zdFJlcG9ydEVycm9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL09ic2VydmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaXNBcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL1Vuc3Vic2NyaXB0aW9uRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvU3Vic2NyaXB0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaXNPYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvc3ltYm9sL3J4U3Vic2NyaWJlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9TdWJzY3JpYmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3N5bWJvbC9vYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvbm9vcC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL3BpcGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL3RvU3Vic2NyaWJlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL2NhblJlcG9ydEVycm9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvU3ViamVjdFN1YnNjcmlwdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9TdWJqZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU2ltdWxhdGlvbi9TaW11bGF0aW9uQ29ubmVjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1NpbXVsYXRpb24vU2ltdWxhdGlvblBhY2thZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9TaW11bGF0aW9uL1NpbXVsYXRpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhcnNlci9ncmFwaFBhcnNlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFyc2VyL21zdFN0cmluZ2lmeS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlNwYW5uaW5nVHJlZUxpbmsiLCJ0b05vZGUiLCJjb3N0IiwidGhpcyIsIlNwYW5uaW5nVHJlZU5vZGUiLCJsaW5rcyIsIlNpbXVsYXRpb25MaW5rIiwibm9kZXMiLCJtaW5pbWFsU3Bhbm5pbmdUcmVlX01pbmltYWxTcGFuVHJlZSIsIk1pbmltYWxTcGFuVHJlZSIsInNwYW5UcmVlTGlua3MiLCJzaG9ydGVzdExpbmtzIiwiYWxsTm9kZXMiLCJzbGljZSIsImFycmF5Iiwic29ydCIsImEiLCJiIiwicmV2ZXJzZSIsImZsYXRNYXAiLCJtYXAiLCJNYXAiLCJfaSIsImFycmF5XzEiLCJsZW5ndGgiLCJpdGVtIiwiaGFzIiwic2V0IiwicHVzaCIsInJvb3QiLCJjb25zb2xlIiwibG9nIiwiYWxsTm9kZXNBcmVDb25uZWN0ZWQiLCJpdGVtcyIsInBvcCIsInRlbXAiLCJsYXN0IiwidHJ5VG9SZW1vdmUiLCJyZXN1bHQiLCJhcnJheV8yIiwiYWxsTm9kZXNBcmVJbmNsdWRlZCIsIm5vZGVzVG9GaW5kXzEiLCJ0cmF2ZXJzZV8xIiwiY3VycmVudE5vZGUiLCJub2RlIiwic3BsaWNlIiwiZmluZEluZGV4IiwiZmlsdGVyIiwibGluayIsImZpbmQiLCJuMSIsImdldERpcmVjdENvbm5lY3RlZF8xIiwiZm9yRWFjaCIsIm5leHQiLCJyZXMiLCJzaW11bGF0aW9uTGlua3MiLCJ0aGlzXzEiLCJzaG9ydGVzdExpbmtzXzEiLCJsaW5rVG9TdHJpbmciLCJzb3J0ZWQiLCJyZXQiLCJnZXRSb3V0aW5nVGFibGUiLCJfdGhpcyIsInRhcmdldCIsIm5leHRIb3AiLCJnZXROZXh0SG9wIiwiZnJvbSIsInRvIiwiZG9udCIsInRhcmdldHMiLCJ0YXJnZXRzXzEiLCJpbmRleE9mIiwiQnJpZGdlX0JyaWRnZSIsIkJyaWRnZSIsImNvbm5lY3Rpb24iLCJkdW1wQ2hhbmdlcyIsInJvb3RPZkluZGV4aW5nIiwicmV0dXJuVG8iLCJCTE9DS0VEIiwiTVNUIiwiRElTQ09WRVJFRF9MSU5LUyIsInJlY2VpdmUiLCJzdWJzY3JpYmUiLCJwa2ciLCJpbmRleE5ldHdvcmsiLCJwaW5nIiwic2libGluZ3MiLCJfYSIsInNlbnQiLCJXQUlUSU5HX0ZPUl9CUklER0VTIiwic2VuZCIsInByb3RvY29sIiwiY29udGVudCIsIm1lc3NhZ2UiLCJzZW5kZXIiLCJoYW5kbGVDU1RQUGFja2FnZSIsIm1zdCIsImZpbmlzaGVkSW5kZXhpbmciLCJST1VUSU5HX1RBQkxFIiwiZGVzdGluYXRpb24iLCJJTkRFWEVEIiwidGhlbiIsImJyaWRnZXMiLCJkaXNjb3ZlcmVkTGlua3MiLCJuYW1lXzEiLCJhcHBseSIsImxpbmtzXzEiLCJsaW5rc01zdF8xIiwiaGFuZGxlUGFja2FnZSIsImFsZXJ0IiwiZXh0ZW5kU3RhdGljcyIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiQXJyYXkiLCJfX2V4dGVuZHMiLCJfXyIsImNvbnN0cnVjdG9yIiwiaXNGdW5jdGlvbiIsIngiLCJfZW5hYmxlX3N1cGVyX2dyb3NzX21vZGVfdGhhdF93aWxsX2NhdXNlX2JhZF90aGluZ3MiLCJjb25maWciLCJQcm9taXNlIiwidW5kZWZpbmVkIiwidXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyIsIkVycm9yIiwic3RhY2siLCJob3N0UmVwb3J0RXJyb3IiLCJlcnIiLCJzZXRUaW1lb3V0IiwiZW1wdHkiLCJjbG9zZWQiLCJlcnJvciIsImNvbXBsZXRlIiwiaXNBcnJheSIsIlVuc3Vic2NyaXB0aW9uRXJyb3JJbXBsIiwiZXJyb3JzIiwidG9TdHJpbmciLCJqb2luIiwiVW5zdWJzY3JpcHRpb25FcnJvciIsIlN1YnNjcmlwdGlvbl9TdWJzY3JpcHRpb24iLCJTdWJzY3JpcHRpb24iLCJ1bnN1YnNjcmliZSIsIl9wYXJlbnQiLCJfcGFyZW50cyIsIl9zdWJzY3JpcHRpb25zIiwiX3Vuc3Vic2NyaWJlIiwiaGFzRXJyb3JzIiwiaW5kZXgiLCJsZW4iLCJyZW1vdmUiLCJlIiwiZmxhdHRlblVuc3Vic2NyaXB0aW9uRXJyb3JzIiwic3ViIiwiY29uY2F0IiwiYWRkIiwidGVhcmRvd24iLCJzdWJzY3JpcHRpb24iLCJ0bXAiLCJFTVBUWSIsIl9hZGRQYXJlbnQiLCJzdWJzY3JpcHRpb25zIiwic3Vic2NyaXB0aW9uSW5kZXgiLCJwYXJlbnQiLCJyZWR1Y2UiLCJlcnJzIiwicnhTdWJzY3JpYmVyIiwiTWF0aCIsInJhbmRvbSIsIlN1YnNjcmliZXJfU3Vic2NyaWJlciIsIl9zdXBlciIsIlN1YnNjcmliZXIiLCJkZXN0aW5hdGlvbk9yTmV4dCIsInN5bmNFcnJvclZhbHVlIiwic3luY0Vycm9yVGhyb3duIiwic3luY0Vycm9yVGhyb3dhYmxlIiwiaXNTdG9wcGVkIiwiYXJndW1lbnRzIiwiU3Vic2NyaWJlcl9TYWZlU3Vic2NyaWJlciIsInN1YnNjcmliZXIiLCJfbmV4dCIsIl9lcnJvciIsIl9jb21wbGV0ZSIsIl91bnN1YnNjcmliZUFuZFJlY3ljbGUiLCJTYWZlU3Vic2NyaWJlciIsIl9wYXJlbnRTdWJzY3JpYmVyIiwib2JzZXJ2ZXJPck5leHQiLCJjb250ZXh0IiwiX2NvbnRleHQiLCJfX3RyeU9yU2V0RXJyb3IiLCJfX3RyeU9yVW5zdWIiLCJ3cmFwcGVkQ29tcGxldGUiLCJmbiIsIm9ic2VydmFibGVfb2JzZXJ2YWJsZSIsIm9ic2VydmFibGUiLCJub29wIiwicGlwZUZyb21BcnJheSIsImZucyIsImlucHV0IiwicHJldiIsIk9ic2VydmFibGVfT2JzZXJ2YWJsZSIsIk9ic2VydmFibGUiLCJfaXNTY2FsYXIiLCJfc3Vic2NyaWJlIiwibGlmdCIsIm9wZXJhdG9yIiwic291cmNlIiwic2luayIsIm5leHRPck9ic2VydmVyIiwidG9TdWJzY3JpYmVyIiwiX3RyeVN1YnNjcmliZSIsIm9ic2VydmVyIiwiY2xvc2VkXzEiLCJjYW5SZXBvcnRFcnJvciIsIndhcm4iLCJwcm9taXNlQ3RvciIsImdldFByb21pc2VDdG9yIiwicmVzb2x2ZSIsInJlamVjdCIsInBpcGUiLCJvcGVyYXRpb25zIiwidG9Qcm9taXNlIiwiT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JJbXBsIiwiT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IiLCJTdWJqZWN0U3Vic2NyaXB0aW9uX1N1YmplY3RTdWJzY3JpcHRpb24iLCJTdWJqZWN0U3Vic2NyaXB0aW9uIiwic3ViamVjdCIsIm9ic2VydmVycyIsInN1YnNjcmliZXJJbmRleCIsIlN1YmplY3RfU3ViamVjdFN1YnNjcmliZXIiLCJTdWJqZWN0U3Vic2NyaWJlciIsIlN1YmplY3RfU3ViamVjdCIsIlN1YmplY3QiLCJoYXNFcnJvciIsInRocm93bkVycm9yIiwiU3ViamVjdF9Bbm9ueW1vdXNTdWJqZWN0IiwiY29weSIsImFzT2JzZXJ2YWJsZSIsIkFub255bW91c1N1YmplY3QiLCJTaW11bGF0aW9uQ29ubmVjdGlvbl9TaW11bGF0aW9uQ29ubmVjdGlvbiIsInNpYmxpbmdCcmlkZ2VzIiwiU2ltdWxhdGlvblBhY2thZ2UiLCJyb3V0aW5nVGFibGUiLCJyb3V0aW5nVGFibGVFbnRyeSIsIlNpbXVsYXRpb25fU2ltdWxhdGlvbiIsIlNpbXVsYXRpb24iLCJtdWx0aUZvckNvc3RJblNlY29uZHMiLCJzdGFydEluZGV4aW5nRnJvbVJhbmRvbUJyaWRnZSIsIlNpbXVsYXRpb25fYXdhaXRlciIsImJyaWRnZSIsInJvdW5kIiwiaWQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2hpbGROb2RlcyIsImluc2VydEFkamFjZW50RWxlbWVudCIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsInNpYmxpbmdOb2RlcyIsImNvbm4iLCJkdW1wQnJpZGdlIiwiY2JfMSIsImR1bXBQa2ciLCJjcmVhdGVEb21CcmlkZ2VzIiwicGtnX3NfdGFyZ2V0IiwibnVtYmVyIiwicGtnVGVtcGxhdGUiLCJyZW1vdmVDaGlsZCIsImJyaWRnZVRlbXBsYXRlIiwidGFyZ2V0XzEiLCJ2YWx1ZXNfMSIsImRyb3Bkb3duVGVtcGxhdGVfMSIsInYiLCJkcm9wZG93biIsImFkZEV2ZW50TGlzdGVuZXIiLCJmcm9tTmFtZSIsInRvTmFtZSIsInNpbXVsYXRpb25QYWNrYWdlIiwic2VuZFBrZ18xIiwicmVwbGFjZVdpdGgiLCJpbnB1dEFyZWEiLCJvdXRwdXRBcmVhIiwic2ltdWxhdGlvbkJ1dHRvbiIsInBhcnNlUmVzdWx0IiwidGVtcExpbmtzIiwiZ3JhcGhOYW1lIiwibWF0Y2giLCJub2RlTWF0Y2hlcyIsImxpbmtNYXRjaGVzIiwicGFyc2UiLCJzaW11bGF0aW9uIiwibWluaW1hbFNwYW5UcmVlIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FO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Q29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgY2xhc3MgU3Bhbm5pbmdUcmVlTGluayB7XHJcblx0Y29uc3RydWN0b3IocHVibGljIHRvTm9kZTogc3RyaW5nLCBwdWJsaWMgY29zdDogbnVtYmVyKSB7XHJcblx0fVxyXG59XHJcbiIsImltcG9ydCB7U3Bhbm5pbmdUcmVlTGlua30gZnJvbSBcIi4vc3Bhbm5pbmdUcmVlTGlua1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNwYW5uaW5nVHJlZU5vZGUge1xyXG5cdGNvbnN0cnVjdG9yKHB1YmxpYyBuYW1lOiBzdHJpbmcsIHB1YmxpYyB2YWx1ZTogbnVtYmVyLCBwdWJsaWMgbGlua3M6IFNwYW5uaW5nVHJlZUxpbmtbXSkge1xyXG5cdH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgU2ltdWxhdGlvbkxpbmsge1xyXG5cdGNvbnN0cnVjdG9yKHB1YmxpYyBub2Rlczoge25hbWU6IHN0cmluZywgdmFsdWU6IG51bWJlcn1bXSwgcHVibGljIGNvc3Q6IG51bWJlcil7fVxyXG59XHJcbiIsImltcG9ydCB7U2ltdWxhdGlvbkxpbmt9IGZyb20gXCIuLi9TaW11bGF0aW9uL1NpbXVsYXRpb25MaW5rXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTWluaW1hbFNwYW5UcmVlIHtcclxuICAgIHB1YmxpYyBzaG9ydGVzdExpbmtzOiBTaW11bGF0aW9uTGlua1tdID0gW107XHJcbiAgICBwdWJsaWMgYWxsTm9kZXM6IHsgbmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyIH1bXSA9IFtdO1xyXG4gICAgcHVibGljIHJvb3Q6IHsgbmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyIH07XHJcblxyXG4gICAgYWxsTm9kZXNBcmVDb25uZWN0ZWQoYWxsTm9kZXMsIHNob3J0ZXN0TGlua3MgPSB0aGlzLnNob3J0ZXN0TGlua3MpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcclxuICAgICAgICBjb25zdCBhcnJheSA9IHNob3J0ZXN0TGlua3MuZmxhdE1hcChsID0+IGwubm9kZXMpO1xyXG4gICAgICAgIGNvbnN0IG1hcCA9IG5ldyBNYXAoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXJyYXkpIHtcclxuICAgICAgICAgICAgaWYgKCFtYXAuaGFzKGl0ZW0ubmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIG1hcC5zZXQoaXRlbS5uYW1lLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhbGxOb2Rlc0FyZUluY2x1ZGVkID0gcmVzdWx0Lmxlbmd0aCA9PT0gYWxsTm9kZXMubGVuZ3RoO1xyXG4gICAgICAgIGxldCBhbGxOb2Rlc0FyZUNvbm5lY3RlZDtcclxuICAgICAgICBpZiAoYWxsTm9kZXNBcmVJbmNsdWRlZCkge1xyXG4gICAgICAgICAgICBsZXQgbm9kZXNUb0ZpbmQgPSBbLi4udGhpcy5hbGxOb2Rlc107XHJcbiAgICAgICAgICAgIGNvbnN0IGFsbEZvdW5kID0gKCkgPT4gbm9kZXNUb0ZpbmQubGVuZ3RoID09PSAwO1xyXG4gICAgICAgICAgICBjb25zdCBnZXREaXJlY3RDb25uZWN0ZWQgPSAobm9kZSkgPT4gc2hvcnRlc3RMaW5rc1xyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihsaW5rID0+IGxpbmsubm9kZXMuZmluZEluZGV4KG4gPT4gbi5uYW1lID09PSBub2RlLm5hbWUpICE9PSAtMSlcclxuICAgICAgICAgICAgICAgIC5mbGF0TWFwKGxpbmsgPT4gbGluay5ub2Rlcy5maW5kKG4gPT4gbi5uYW1lICE9PSBub2RlLm5hbWUpKVxyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihuID0+IG5vZGVzVG9GaW5kLmZpbmRJbmRleChuMSA9PiBuMS5uYW1lID09PSBuLm5hbWUpICE9PSAtMSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZU5vZGUgPSAobm9kZSkgPT4gbm9kZXNUb0ZpbmQuc3BsaWNlKG5vZGVzVG9GaW5kLmZpbmRJbmRleChuID0+IG4ubmFtZSA9PT0gbm9kZS5uYW1lKSwgMSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyYXZlcnNlID0gKGN1cnJlbnROb2RlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVOb2RlKGN1cnJlbnROb2RlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3RlZCA9IGdldERpcmVjdENvbm5lY3RlZChjdXJyZW50Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0ZWQuZm9yRWFjaChuZXh0ID0+IHRyYXZlcnNlKG5leHQpKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdHJhdmVyc2UodGhpcy5yb290KTtcclxuICAgICAgICAgICAgYWxsTm9kZXNBcmVDb25uZWN0ZWQgPSBhbGxGb3VuZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYWxsTm9kZXNBcmVJbmNsdWRlZCAmJiBhbGxOb2Rlc0FyZUNvbm5lY3RlZDtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3BhblRyZWVMaW5rczogU2ltdWxhdGlvbkxpbmtbXSkge1xyXG5cclxuICAgICAgICBsZXQgbGlua3MgPSBbLi4uc3BhblRyZWVMaW5rc107XHJcbiAgICAgICAgbGlua3MgPSBsaW5rcy5zb3J0KChhLCBiKSA9PiBhLmNvc3QgLSBiLmNvc3QpLnJldmVyc2UoKTtcclxuXHJcbiAgICAgICAgY29uc3QgYXJyYXkgPSBsaW5rcy5mbGF0TWFwKGwgPT4gbC5ub2Rlcyk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1hcCA9IG5ldyBNYXAoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXJyYXkpIHtcclxuICAgICAgICAgICAgaWYgKCFtYXAuaGFzKGl0ZW0ubmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIG1hcC5zZXQoaXRlbS5uYW1lLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxsTm9kZXMucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJvb3QgPSB0aGlzLmFsbE5vZGVzLnNvcnQoKGEsIGIpID0+IGEudmFsdWUgLSBiLnZhbHVlKVswXTtcclxuICAgICAgICBjb25zb2xlLmxvZyhbLi4ubGlua3NdKTtcclxuICAgICAgICB3aGlsZSAoIXRoaXMuYWxsTm9kZXNBcmVDb25uZWN0ZWQodGhpcy5hbGxOb2RlcykpIHtcclxuICAgICAgICAgICAgbGV0IGl0ZW1zID0gbGlua3MucG9wKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvcnRlc3RMaW5rcy5wdXNoKGl0ZW1zKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsTm9kZXNBcmVDb25uZWN0ZWQodGhpcy5hbGxOb2RlcykpIHtcclxuICAgICAgICAgICAgICAgIGxldCB0ZW1wLCBsYXN0ID0gdGVtcCA9IFsuLi50aGlzLnNob3J0ZXN0TGlua3NdO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKCEhdGVtcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3QgPSB0ZW1wO1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXAgPSB0aGlzLnRyeVRvUmVtb3ZlKHRlbXApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGxhc3QubGVuZ3RoIDwgdGhpcy5zaG9ydGVzdExpbmtzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvcnRlc3RMaW5rcyA9IGxhc3Q7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5zaG9ydGVzdExpbmtzKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHRyeVRvUmVtb3ZlKHNob3J0ZXN0TGlua3MpIHtcclxuICAgICAgICBsZXQgcmVzO1xyXG4gICAgICAgIGZvciAoY29uc3QgbCBvZiBzaG9ydGVzdExpbmtzKSB7XHJcbiAgICAgICAgICAgIGxldCBzaW11bGF0aW9uTGlua3MgPSBbLi4uc2hvcnRlc3RMaW5rc107XHJcbiAgICAgICAgICAgIHNpbXVsYXRpb25MaW5rcy5zcGxpY2Uoc2ltdWxhdGlvbkxpbmtzLmZpbmRJbmRleChsaW5rID0+IGxpbmsgPT09IGwpLCAxKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsTm9kZXNBcmVDb25uZWN0ZWQodGhpcy5hbGxOb2Rlcywgc2ltdWxhdGlvbkxpbmtzKSkge1xyXG4gICAgICAgICAgICAgICAgcmVzID0gc2ltdWxhdGlvbkxpbmtzO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuXHJcbiAgICBsaW5rVG9TdHJpbmcoKSB7XHJcbiAgICAgICAgY29uc3Qgc29ydGVkID0gdGhpcy5zaG9ydGVzdExpbmtzLm1hcChsaW5rID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW11bGF0aW9uTGluayhsaW5rLm5vZGVzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYS5uYW1lIDwgYi5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEubmFtZSA+IGIubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgICAgICB9KSwgbGluay5jb3N0XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSkuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYS5ub2Rlc1swXS5uYW1lIDwgYi5ub2Rlc1swXS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGEubm9kZXNbMF0ubmFtZSA+IGIubm9kZXNbMF0ubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGEubm9kZXNbMF0ubmFtZSA9PT0gYi5ub2Rlc1swXS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYS5ub2Rlc1sxXS5uYW1lIDwgYi5ub2Rlc1sxXS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGEubm9kZXNbMV0ubmFtZSA+IGIubm9kZXNbMV0ubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCByZXQgPSBcIlwiO1xyXG4gICAgICAgIHNvcnRlZC5mb3JFYWNoKGxpbmsgPT4ge1xyXG4gICAgICAgICAgICByZXQgKz0gYCR7bGluay5ub2Rlc1swXS5uYW1lfSAtICR7bGluay5ub2Rlc1sxXS5uYW1lfTtcXG5cXHRgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgIH1cclxuXHJcbiAgICBnZXRSb3V0aW5nVGFibGUobmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgcmV0OiB7XHJcbiAgICAgICAgICAgIHRhcmdldDogc3RyaW5nLFxyXG4gICAgICAgICAgICBuZXh0SG9wOiBzdHJpbmdcclxuICAgICAgICB9W10gPSBbXTtcclxuICAgICAgICB0aGlzLmFsbE5vZGVzLmZpbHRlcihuID0+IG4ubmFtZSAhPT0gbmFtZSkuZm9yRWFjaChub2RlID0+IHtcclxuICAgICAgICAgICAgcmV0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiBub2RlLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBuZXh0SG9wOiB0aGlzLmdldE5leHRIb3AobmFtZSwgbm9kZS5uYW1lKVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXROZXh0SG9wKGZyb206IHN0cmluZywgdG86IHN0cmluZywgbmV4dEhvcD86IHN0cmluZywgZG9udDogc3RyaW5nW10gPSBbXSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGZyb20sIHRvLCBuZXh0SG9wKTtcclxuICAgICAgICBkb250LnB1c2goZnJvbSk7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0cyA9IHRoaXMuc2hvcnRlc3RMaW5rcy5maWx0ZXIobCA9PiBsLm5vZGVzLmZpbmRJbmRleChuID0+IG4ubmFtZSA9PT0gZnJvbSkgIT09IC0xKTtcclxuICAgICAgICBjb25zdCBjb250YWluc1RvID0gKCkgPT4gdGFyZ2V0cy5maW5kSW5kZXgodCA9PiB0Lm5vZGVzLmZpbmRJbmRleChuID0+IG4ubmFtZSA9PT0gdG8pICE9PSAtMSkgIT09IC0xO1xyXG4gICAgICAgIGlmIChjb250YWluc1RvKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuICFuZXh0SG9wID8gdG8gOiBuZXh0SG9wO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdGFyZ2V0IG9mIHRhcmdldHMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0YXJnZXQubm9kZXMuZmluZChuID0+IG4ubmFtZSAhPT0gZnJvbSkubmFtZTtcclxuICAgICAgICAgICAgICAgIGlmIChkb250LmluZGV4T2YobikgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0ID0gdGhpcy5nZXROZXh0SG9wKG4sIHRvLCAhbmV4dEhvcCA/IG4gOiBuZXh0SG9wLCBbLi4uZG9udF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghIXJldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7U2ltdWxhdGlvbkNvbm5lY3Rpb259IGZyb20gXCIuL1NpbXVsYXRpb25Db25uZWN0aW9uXCI7XHJcbmltcG9ydCB7U2ltdWxhdGlvblBhY2thZ2V9IGZyb20gXCIuL1NpbXVsYXRpb25QYWNrYWdlXCI7XHJcbmltcG9ydCB7TWluaW1hbFNwYW5UcmVlfSBmcm9tIFwiLi4vU3Bhbm5pbmdUcmVlL21pbmltYWxTcGFubmluZ1RyZWVcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUm91dGluZ1RhYmxlRW50cnkge1xyXG4gICAgdGFyZ2V0OiBzdHJpbmc7XHJcbiAgICBuZXh0SG9wOiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBCcmlkZ2Uge1xyXG4gICAgcHVibGljIHJvb3RPZkluZGV4aW5nID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgcmV0dXJuVG86IHN0cmluZ1tdID0gW107XHJcbiAgICAvLyBCcmlkZ2UgZGF0YVxyXG4gICAgcHVibGljIG5hbWU6IHN0cmluZztcclxuICAgIHB1YmxpYyB2YWx1ZTogbnVtYmVyO1xyXG5cclxuICAgIC8vIERhdGEgZGlzY292ZXJlZFxyXG4gICAgcHVibGljIE1TVDogTWluaW1hbFNwYW5UcmVlO1xyXG5cclxuICAgIC8vIGRhdGEgZm9yIENlbnRyYWxTcGFubmluZ1RyZWVQcm90b2NvbFxyXG4gICAgcHVibGljIElOREVYRUQ6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgQkxPQ0tFRDogKCkgPT4gYm9vbGVhbiA9ICgpID0+ICF0aGlzLk1TVDtcclxuICAgIHB1YmxpYyBESVNDT1ZFUkVEX0xJTktTOiB7XHJcbiAgICAgICAgbm9kZXM6IHsgbmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyIH1bXTsgLy8gbXkgbmFtZSBhbmQgYSBjb25uZWN0ZWQgYnJpZGdlcyBuYW1lXHJcbiAgICAgICAgY29zdDogbnVtYmVyOyAvLyBjb3N0IHRvIHJlYWNoIHRoZSBicmlkZ2VcclxuICAgIH1bXSA9IFtdO1xyXG4gICAgcHVibGljIFJPVVRJTkdfVEFCTEU6IFJvdXRpbmdUYWJsZUVudHJ5W107XHJcblxyXG4gICAgcHJpdmF0ZSBXQUlUSU5HX0ZPUl9CUklER0VTOiBzdHJpbmdbXTtcclxuXHJcbiAgICAvLyBzaW11bGF0aW9uIENvbm5lY3Rpb25cclxuICAgIHB1YmxpYyBjb25uZWN0aW9uOiBTaW11bGF0aW9uQ29ubmVjdGlvbjtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgZHVtcENoYW5nZXM6ICgpID0+IHZvaWQ7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIsIGNvbm5lY3Rpb246IFNpbXVsYXRpb25Db25uZWN0aW9uLCBkdW1wQ2hhbmdlczogKGIpID0+IHZvaWQpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5yZWNlaXZlLnN1YnNjcmliZSgocGtnKSA9PiB0aGlzLnJlY2VpdmUocGtnKSk7XHJcbiAgICAgICAgdGhpcy5kdW1wQ2hhbmdlcyA9ICgpID0+IGR1bXBDaGFuZ2VzKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBpbmRleE5ldHdvcmsoKSB7XHJcbiAgICAgICAgdGhpcy5yb290T2ZJbmRleGluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5kdW1wQ2hhbmdlcygpO1xyXG4gICAgICAgIGxldCBzaWJsaW5ncyA9IChhd2FpdCB0aGlzLmNvbm5lY3Rpb24ucGluZyk7XHJcbiAgICAgICAgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTID0gc2libGluZ3M7XHJcbiAgICAgICAgc2libGluZ3MuZm9yRWFjaCh0YXJnZXQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgcHJvdG9jb2w6ICdDU1RQJyxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRGVhciBOZWlnaGJvciBoZWFyIGlzIG15IG5hbWUgYW5kIHRoZSBwYWNrYWdlIHByb3ZpZGVzIHlvdSB0aGUgY29zdCB0byBtZS4gRm9sbG93IHRoZSBDU1RQLicsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbToge25hbWU6IHRoaXMubmFtZSwgdmFsdWU6IHRoaXMudmFsdWV9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgc2VuZChwa2c6IFNpbXVsYXRpb25QYWNrYWdlKSB7XHJcbiAgICAgICAgcGtnLnNlbmRlciA9IHRoaXMubmFtZTtcclxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24uc2VuZC5uZXh0KHBrZyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhhbmRsZUNTVFBQYWNrYWdlKHBrZzogU2ltdWxhdGlvblBhY2thZ2UpIHtcclxuICAgICAgICBpZihwa2cuY29udGVudC5tc3Qpe1xyXG4gICAgICAgICAgICBwa2cuY29udGVudC5tc3QgPSBbLi4ucGtnLmNvbnRlbnQubXN0XTtcclxuICAgICAgICAgICAgdGhpcy5NU1QgPSBuZXcgTWluaW1hbFNwYW5UcmVlKHBrZy5jb250ZW50Lm1zdCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbi5maW5pc2hlZEluZGV4aW5nLm5leHQodGhpcy5NU1QpO1xyXG4gICAgICAgICAgICB0aGlzLlJPVVRJTkdfVEFCTEUgPSB0aGlzLk1TVC5nZXRSb3V0aW5nVGFibGUodGhpcy5uYW1lKTtcclxuICAgICAgICAgICAgdGhpcy5kdW1wQ2hhbmdlcygpO1xyXG4gICAgICAgICAgICBpZihwa2cuZGVzdGluYXRpb24gIT09IHRoaXMubmFtZSl7XHJcbiAgICAgICAgICAgICAgICBwa2cudGFyZ2V0ID0gdGhpcy5ST1VUSU5HX1RBQkxFLmZpbmQoaSA9PiBpLnRhcmdldCA9PT0gcGtnLmRlc3RpbmF0aW9uKS5uZXh0SG9wO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kKHBrZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuSU5ERVhFRCB8fCB0aGlzLnJvb3RPZkluZGV4aW5nICYmICBwa2cuY29udGVudC5mcm9tKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5uYW1lLCAncmVjZWl2ZWQgcGtnJyk7XHJcbiAgICAgICAgaWYgKHRoaXMuRElTQ09WRVJFRF9MSU5LUy5sZW5ndGggPT09IDAgJiYgIXRoaXMucm9vdE9mSW5kZXhpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLnBpbmcudGhlbihicmlkZ2VzID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuV0FJVElOR19GT1JfQlJJREdFUyA9IGJyaWRnZXMuZmlsdGVyKG5hbWUgPT4gbmFtZSAhPT0gcGtnLmNvbnRlbnQuZnJvbS5uYW1lKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHVtcENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubmFtZSwgXCIgd2FpdGluZyBmb3I6XCIsIHRoaXMuV0FJVElOR19GT1JfQlJJREdFUyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMuZm9yRWFjaCh0YXJnZXQgPT4gdGhpcy5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICBwcm90b2NvbDogJ0NTVFAnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0RlYXIgTmVpZ2hib3IgaGVhciBpcyBteSBuYW1lIGFuZCB0aGUgcGFja2FnZSBwcm92aWRlcyB5b3UgdGhlIGNvc3QgdG8gbWUuIEZvbGxvdyB0aGUgQ1NUUC4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiB7bmFtZTogdGhpcy5uYW1lLCB2YWx1ZTogdGhpcy52YWx1ZX1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuV0FJVElOR19GT1JfQlJJREdFUy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXR1cm5UbyA9IHRoaXMuRElTQ09WRVJFRF9MSU5LU1swXS5ub2Rlcy5maW5kKG4gPT4gbi5uYW1lICE9PSB0aGlzLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHVtcENoYW5nZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2w6ICdDU1RQJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0RlYXIgTmVpZ2hib3IgaGVhciBhcmUgbXkgZGlzY292ZXJlZCBsaW5rcywgeW91IG1heSBjb25jYXQgdGhlbSB3aXRoIHlvdXJzIGFuZCBzZW5kIHRoZW0gYmFjayEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzY292ZXJlZExpbmtzOiB0aGlzLkRJU0NPVkVSRURfTElOS1NcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiByZXR1cm5Uby5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5JTkRFWEVEID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucm9vdE9mSW5kZXhpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLmZpbmlzaGVkSW5kZXhpbmcubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1zdCA9IG5ldyBNaW5pbWFsU3BhblRyZWUodGhpcy5ESVNDT1ZFUkVEX0xJTktTKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5NU1QgPSBtc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuUk9VVElOR19UQUJMRSA9IHRoaXMuTVNULmdldFJvdXRpbmdUYWJsZSh0aGlzLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uZmluaXNoZWRJbmRleGluZy5uZXh0KG1zdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHVtcENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuRElTQ09WRVJFRF9MSU5LUy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGNvc3Q6IHBrZy5jb3N0LFxyXG4gICAgICAgICAgICAgICAgbm9kZXM6IFt7bmFtZTogdGhpcy5uYW1lLCB2YWx1ZTogdGhpcy52YWx1ZX0sIHBrZy5jb250ZW50LmZyb21dXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnJldHVyblRvLnB1c2gocGtnLmNvbnRlbnQuZnJvbS5uYW1lKTtcclxuICAgICAgICAgICAgdGhpcy5kdW1wQ2hhbmdlcygpO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJyZXR1cm5pbmcgZnJvbSBcIiwgdGhpcy5uYW1lLCBcInRvIFwiLCB0aGlzLnJldHVyblRvKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMgJiYgISFwa2cuY29udGVudC5kaXNjb3ZlcmVkTGlua3MpIHtcclxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHBrZy5jb250ZW50LmRpc2NvdmVyZWRMaW5rc1swXS5ub2Rlcy5maW5kKG4gPT4gbi5uYW1lICE9PSB0aGlzLm5hbWUpO1xyXG4gICAgICAgICAgICB0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMuc3BsaWNlKHRoaXMuV0FJVElOR19GT1JfQlJJREdFUy5maW5kSW5kZXgobiA9PiBuID09PSBuYW1lKSwgMSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubmFtZSwgXCIgd2FpdGluZyBmb3I6XCIsIHRoaXMuV0FJVElOR19GT1JfQlJJREdFUyk7XHJcbiAgICAgICAgICAgIHRoaXMuRElTQ09WRVJFRF9MSU5LUy5wdXNoKC4uLnBrZy5jb250ZW50LmRpc2NvdmVyZWRMaW5rcyk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMgJiYgcGtnLmNvbnRlbnQuZnJvbSkge1xyXG4gICAgICAgICAgICB0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMuc3BsaWNlKHRoaXMuV0FJVElOR19GT1JfQlJJREdFUy5maW5kSW5kZXgobiA9PiBuID09PSBwa2cuY29udGVudC5mcm9tLm5hbWUpLCAxKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5uYW1lLCBcIiB3YWl0aW5nIGZvcjpcIiwgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTKTtcclxuICAgICAgICAgICAgdGhpcy5yZXR1cm5Uby5wdXNoKHBrZy5jb250ZW50LmZyb20ubmFtZSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmV0dXJuaW5nIGZyb20gXCIsIHRoaXMubmFtZSwgXCJ0byBcIiwgdGhpcy5yZXR1cm5Ubyk7XHJcbiAgICAgICAgICAgIHRoaXMuRElTQ09WRVJFRF9MSU5LUy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGNvc3Q6IHBrZy5jb3N0LFxyXG4gICAgICAgICAgICAgICAgbm9kZXM6IFt7bmFtZTogdGhpcy5uYW1lLCB2YWx1ZTogdGhpcy52YWx1ZX0sIHBrZy5jb250ZW50LmZyb21dXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmR1bXBDaGFuZ2VzKCk7XHJcblxyXG4gICAgICAgIGlmICghIXRoaXMuV0FJVElOR19GT1JfQlJJREdFUyAmJiB0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubmFtZSwgJ3NlbmRpbmcnLCB0aGlzLkRJU0NPVkVSRURfTElOS1MpO1xyXG4gICAgICAgICAgICB0aGlzLnJldHVyblRvLmZvckVhY2godGFyZ2V0ID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2w6ICdDU1RQJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdEZWFyIE5laWdoYm9yIGhlYXIgYXJlIG15IGRpc2NvdmVyZWQgbGlua3MsIHlvdSBtYXkgY29uY2F0IHRoZW0gd2l0aCB5b3VycyBhbmQgc2VuZCB0aGVtIGJhY2shJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzY292ZXJlZExpbmtzOiB0aGlzLkRJU0NPVkVSRURfTElOS1NcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLklOREVYRUQgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTm9kZSBoYXMgZmluaXNoZWQgJywgdGhpcy5uYW1lKTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnJvb3RPZkluZGV4aW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uZmluaXNoZWRJbmRleGluZy5uZXh0KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ESVNDT1ZFUkVEX0xJTktTLmZvckVhY2gobCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsaW5rcy5maW5kKGxpbmsgPT4gbC5ub2Rlcy5maW5kSW5kZXgobiA9PiBuLm5hbWUgPT09IGxpbmsubm9kZXNbMF0ubmFtZSkgIT09IC0xICYmIGwubm9kZXMuZmluZEluZGV4KG4gPT4gbi5uYW1lID09PSBsaW5rLm5vZGVzWzFdLm5hbWUpICE9PSAtMSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlua3MucHVzaChsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkbCcsIHRoaXMuRElTQ09WRVJFRF9MSU5LUy5tYXAobCA9PiBsLm5vZGVzKSk7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGlua3NNc3QgPSBbLi4ubGlua3NdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbXN0ID0gbmV3IE1pbmltYWxTcGFuVHJlZShsaW5rcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLk1TVCA9IG1zdDtcclxuICAgICAgICAgICAgICAgIHRoaXMuUk9VVElOR19UQUJMRSA9IHRoaXMuTVNULmdldFJvdXRpbmdUYWJsZSh0aGlzLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ST1VUSU5HX1RBQkxFLmZvckVhY2goKGl0ZW06Um91dGluZ1RhYmxlRW50cnkpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3RvY29sOiAnQ1NUUCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdEZWFyIE5laWdoYm9yIGhlYXIgaXMgbXkgbmFtZSBhbmQgdGhlIHBhY2thZ2UgcHJvdmlkZXMgeW91IHRoZSBjb3N0IHRvIG1lLiBGb2xsb3cgdGhlIENTVFAuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zdDogbGlua3NNc3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBpdGVtLm5leHRIb3AsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiBpdGVtLnRhcmdldFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uZmluaXNoZWRJbmRleGluZy5uZXh0KG1zdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5kdW1wQ2hhbmdlcygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVjZWl2ZShwa2c6IFNpbXVsYXRpb25QYWNrYWdlKSB7XHJcbiAgICAgICAgaWYgKHBrZy5wcm90b2NvbCA9PT0gJ0NTVFAnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQ1NUUFBhY2thZ2UocGtnKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVBhY2thZ2UocGtnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVQYWNrYWdlKHBrZzogU2ltdWxhdGlvblBhY2thZ2UpIHtcclxuICAgICAgICBpZih0aGlzLm5hbWUgPT09IHBrZy5kZXN0aW5hdGlvbil7XHJcbiAgICAgICAgICAgIGFsZXJ0KHRoaXMubmFtZSsgXCIgcmVjZWl2ZWQgYSBwa2cgd2l0aDogXCIgK3BrZy5jb250ZW50KTtcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIHBrZy50YXJnZXQgPSB0aGlzLlJPVVRJTkdfVEFCTEUuZmluZChpID0+IGkudGFyZ2V0ID09PSBwa2cuZGVzdGluYXRpb24pLm5leHRIb3A7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZChwa2cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApXHJcbiAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc0Z1bmN0aW9uLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xudmFyIF9lbmFibGVfc3VwZXJfZ3Jvc3NfbW9kZV90aGF0X3dpbGxfY2F1c2VfYmFkX3RoaW5ncyA9IGZhbHNlO1xuZXhwb3J0IHZhciBjb25maWcgPSB7XG4gICAgUHJvbWlzZTogdW5kZWZpbmVkLFxuICAgIHNldCB1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGVycm9yID0gLypAX19QVVJFX18qLyBuZXcgRXJyb3IoKTtcbiAgICAgICAgICAgIC8qQF9fUFVSRV9fKi8gY29uc29sZS53YXJuKCdERVBSRUNBVEVEISBSeEpTIHdhcyBzZXQgdG8gdXNlIGRlcHJlY2F0ZWQgc3luY2hyb25vdXMgZXJyb3IgaGFuZGxpbmcgYmVoYXZpb3IgYnkgY29kZSBhdDogXFxuJyArIGVycm9yLnN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChfZW5hYmxlX3N1cGVyX2dyb3NzX21vZGVfdGhhdF93aWxsX2NhdXNlX2JhZF90aGluZ3MpIHtcbiAgICAgICAgICAgIC8qQF9fUFVSRV9fKi8gY29uc29sZS5sb2coJ1J4SlM6IEJhY2sgdG8gYSBiZXR0ZXIgZXJyb3IgYmVoYXZpb3IuIFRoYW5rIHlvdS4gPDMnKTtcbiAgICAgICAgfVxuICAgICAgICBfZW5hYmxlX3N1cGVyX2dyb3NzX21vZGVfdGhhdF93aWxsX2NhdXNlX2JhZF90aGluZ3MgPSB2YWx1ZTtcbiAgICB9LFxuICAgIGdldCB1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKCkge1xuICAgICAgICByZXR1cm4gX2VuYWJsZV9zdXBlcl9ncm9zc19tb2RlX3RoYXRfd2lsbF9jYXVzZV9iYWRfdGhpbmdzO1xuICAgIH0sXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uZmlnLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhvc3RSZXBvcnRFcnJvcihlcnIpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgdGhyb3cgZXJyOyB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhvc3RSZXBvcnRFcnJvci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX2NvbmZpZyxfdXRpbF9ob3N0UmVwb3J0RXJyb3IgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHsgaG9zdFJlcG9ydEVycm9yIH0gZnJvbSAnLi91dGlsL2hvc3RSZXBvcnRFcnJvcic7XG5leHBvcnQgdmFyIGVtcHR5ID0ge1xuICAgIGNsb3NlZDogdHJ1ZSxcbiAgICBuZXh0OiBmdW5jdGlvbiAodmFsdWUpIHsgfSxcbiAgICBlcnJvcjogZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhvc3RSZXBvcnRFcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkgeyB9XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JzZXJ2ZXIuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgdmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IChmdW5jdGlvbiAoeCkgeyByZXR1cm4geCAmJiB0eXBlb2YgeC5sZW5ndGggPT09ICdudW1iZXInOyB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzQXJyYXkuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5mdW5jdGlvbiBVbnN1YnNjcmlwdGlvbkVycm9ySW1wbChlcnJvcnMpIHtcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICAgIHRoaXMubWVzc2FnZSA9IGVycm9ycyA/XG4gICAgICAgIGVycm9ycy5sZW5ndGggKyBcIiBlcnJvcnMgb2NjdXJyZWQgZHVyaW5nIHVuc3Vic2NyaXB0aW9uOlxcblwiICsgZXJyb3JzLm1hcChmdW5jdGlvbiAoZXJyLCBpKSB7IHJldHVybiBpICsgMSArIFwiKSBcIiArIGVyci50b1N0cmluZygpOyB9KS5qb2luKCdcXG4gICcpIDogJyc7XG4gICAgdGhpcy5uYW1lID0gJ1Vuc3Vic2NyaXB0aW9uRXJyb3InO1xuICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xuICAgIHJldHVybiB0aGlzO1xufVxuVW5zdWJzY3JpcHRpb25FcnJvckltcGwucHJvdG90eXBlID0gLypAX19QVVJFX18qLyBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG5leHBvcnQgdmFyIFVuc3Vic2NyaXB0aW9uRXJyb3IgPSBVbnN1YnNjcmlwdGlvbkVycm9ySW1wbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVVuc3Vic2NyaXB0aW9uRXJyb3IuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF91dGlsX2lzQXJyYXksX3V0aWxfaXNPYmplY3QsX3V0aWxfaXNGdW5jdGlvbixfdXRpbF9VbnN1YnNjcmlwdGlvbkVycm9yIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IGlzQXJyYXkgfSBmcm9tICcuL3V0aWwvaXNBcnJheSc7XG5pbXBvcnQgeyBpc09iamVjdCB9IGZyb20gJy4vdXRpbC9pc09iamVjdCc7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi91dGlsL2lzRnVuY3Rpb24nO1xuaW1wb3J0IHsgVW5zdWJzY3JpcHRpb25FcnJvciB9IGZyb20gJy4vdXRpbC9VbnN1YnNjcmlwdGlvbkVycm9yJztcbnZhciBTdWJzY3JpcHRpb24gPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uKHVuc3Vic2NyaWJlKSB7XG4gICAgICAgIHRoaXMuY2xvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3BhcmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3BhcmVudHMgPSBudWxsO1xuICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25zID0gbnVsbDtcbiAgICAgICAgaWYgKHVuc3Vic2NyaWJlKSB7XG4gICAgICAgICAgICB0aGlzLl91bnN1YnNjcmliZSA9IHVuc3Vic2NyaWJlO1xuICAgICAgICB9XG4gICAgfVxuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBoYXNFcnJvcnMgPSBmYWxzZTtcbiAgICAgICAgdmFyIGVycm9ycztcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIF9hID0gdGhpcywgX3BhcmVudCA9IF9hLl9wYXJlbnQsIF9wYXJlbnRzID0gX2EuX3BhcmVudHMsIF91bnN1YnNjcmliZSA9IF9hLl91bnN1YnNjcmliZSwgX3N1YnNjcmlwdGlvbnMgPSBfYS5fc3Vic2NyaXB0aW9ucztcbiAgICAgICAgdGhpcy5jbG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLl9wYXJlbnRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IG51bGw7XG4gICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICB2YXIgbGVuID0gX3BhcmVudHMgPyBfcGFyZW50cy5sZW5ndGggOiAwO1xuICAgICAgICB3aGlsZSAoX3BhcmVudCkge1xuICAgICAgICAgICAgX3BhcmVudC5yZW1vdmUodGhpcyk7XG4gICAgICAgICAgICBfcGFyZW50ID0gKytpbmRleCA8IGxlbiAmJiBfcGFyZW50c1tpbmRleF0gfHwgbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNGdW5jdGlvbihfdW5zdWJzY3JpYmUpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIF91bnN1YnNjcmliZS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBoYXNFcnJvcnMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IGUgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yID8gZmxhdHRlblVuc3Vic2NyaXB0aW9uRXJyb3JzKGUuZXJyb3JzKSA6IFtlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnJheShfc3Vic2NyaXB0aW9ucykpIHtcbiAgICAgICAgICAgIGluZGV4ID0gLTE7XG4gICAgICAgICAgICBsZW4gPSBfc3Vic2NyaXB0aW9ucy5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbikge1xuICAgICAgICAgICAgICAgIHZhciBzdWIgPSBfc3Vic2NyaXB0aW9uc1tpbmRleF07XG4gICAgICAgICAgICAgICAgaWYgKGlzT2JqZWN0KHN1YikpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Yi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNFcnJvcnMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzLmNvbmNhdChmbGF0dGVuVW5zdWJzY3JpcHRpb25FcnJvcnMoZS5lcnJvcnMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNFcnJvcnMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVbnN1YnNjcmlwdGlvbkVycm9yKGVycm9ycyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHRlYXJkb3duKSB7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0ZWFyZG93bjtcbiAgICAgICAgc3dpdGNoICh0eXBlb2YgdGVhcmRvd24pIHtcbiAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKHRlYXJkb3duKTtcbiAgICAgICAgICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbiA9PT0gdGhpcyB8fCBzdWJzY3JpcHRpb24uY2xvc2VkIHx8IHR5cGVvZiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCEoc3Vic2NyaXB0aW9uIGluc3RhbmNlb2YgU3Vic2NyaXB0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG1wID0gc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5fc3Vic2NyaXB0aW9ucyA9IFt0bXBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRlYXJkb3duKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb24uRU1QVFk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5yZWNvZ25pemVkIHRlYXJkb3duICcgKyB0ZWFyZG93biArICcgYWRkZWQgdG8gU3Vic2NyaXB0aW9uLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb24uX2FkZFBhcmVudCh0aGlzKSkge1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSB0aGlzLl9zdWJzY3JpcHRpb25zO1xuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMgPSBbc3Vic2NyaXB0aW9uXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb25zID0gdGhpcy5fc3Vic2NyaXB0aW9ucztcbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb25JbmRleCA9IHN1YnNjcmlwdGlvbnMuaW5kZXhPZihzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbkluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMuc3BsaWNlKHN1YnNjcmlwdGlvbkluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5fYWRkUGFyZW50ID0gZnVuY3Rpb24gKHBhcmVudCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBfcGFyZW50ID0gX2EuX3BhcmVudCwgX3BhcmVudHMgPSBfYS5fcGFyZW50cztcbiAgICAgICAgaWYgKF9wYXJlbnQgPT09IHBhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFfcGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLl9wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghX3BhcmVudHMpIHtcbiAgICAgICAgICAgIHRoaXMuX3BhcmVudHMgPSBbcGFyZW50XTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKF9wYXJlbnRzLmluZGV4T2YocGFyZW50KSA9PT0gLTEpIHtcbiAgICAgICAgICAgIF9wYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5FTVBUWSA9IChmdW5jdGlvbiAoZW1wdHkpIHtcbiAgICAgICAgZW1wdHkuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGVtcHR5O1xuICAgIH0obmV3IFN1YnNjcmlwdGlvbigpKSk7XG4gICAgcmV0dXJuIFN1YnNjcmlwdGlvbjtcbn0oKSk7XG5leHBvcnQgeyBTdWJzY3JpcHRpb24gfTtcbmZ1bmN0aW9uIGZsYXR0ZW5VbnN1YnNjcmlwdGlvbkVycm9ycyhlcnJvcnMpIHtcbiAgICByZXR1cm4gZXJyb3JzLnJlZHVjZShmdW5jdGlvbiAoZXJycywgZXJyKSB7IHJldHVybiBlcnJzLmNvbmNhdCgoZXJyIGluc3RhbmNlb2YgVW5zdWJzY3JpcHRpb25FcnJvcikgPyBlcnIuZXJyb3JzIDogZXJyKTsgfSwgW10pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3Vic2NyaXB0aW9uLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KHgpIHtcbiAgICByZXR1cm4geCAhPT0gbnVsbCAmJiB0eXBlb2YgeCA9PT0gJ29iamVjdCc7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc09iamVjdC5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCB2YXIgcnhTdWJzY3JpYmVyID0gdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgID8gLypAX19QVVJFX18qLyBTeW1ib2woJ3J4U3Vic2NyaWJlcicpXG4gICAgOiAnQEByeFN1YnNjcmliZXJfJyArIC8qQF9fUFVSRV9fKi8gTWF0aC5yYW5kb20oKTtcbmV4cG9ydCB2YXIgJCRyeFN1YnNjcmliZXIgPSByeFN1YnNjcmliZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yeFN1YnNjcmliZXIuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF91dGlsX2lzRnVuY3Rpb24sX09ic2VydmVyLF9TdWJzY3JpcHRpb24sX2ludGVybmFsX3N5bWJvbF9yeFN1YnNjcmliZXIsX2NvbmZpZyxfdXRpbF9ob3N0UmVwb3J0RXJyb3IgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGlzRnVuY3Rpb24gfSBmcm9tICcuL3V0aWwvaXNGdW5jdGlvbic7XG5pbXBvcnQgeyBlbXB0eSBhcyBlbXB0eU9ic2VydmVyIH0gZnJvbSAnLi9PYnNlcnZlcic7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICcuL1N1YnNjcmlwdGlvbic7XG5pbXBvcnQgeyByeFN1YnNjcmliZXIgYXMgcnhTdWJzY3JpYmVyU3ltYm9sIH0gZnJvbSAnLi4vaW50ZXJuYWwvc3ltYm9sL3J4U3Vic2NyaWJlcic7XG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgeyBob3N0UmVwb3J0RXJyb3IgfSBmcm9tICcuL3V0aWwvaG9zdFJlcG9ydEVycm9yJztcbnZhciBTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3Vic2NyaWJlcihkZXN0aW5hdGlvbk9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnN5bmNFcnJvclZhbHVlID0gbnVsbDtcbiAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3duID0gZmFsc2U7XG4gICAgICAgIF90aGlzLnN5bmNFcnJvclRocm93YWJsZSA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBlbXB0eU9ic2VydmVyO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIGlmICghZGVzdGluYXRpb25Pck5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBlbXB0eU9ic2VydmVyO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkZXN0aW5hdGlvbk9yTmV4dCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlc3RpbmF0aW9uT3JOZXh0IGluc3RhbmNlb2YgU3Vic2NyaWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gZGVzdGluYXRpb25Pck5leHQuc3luY0Vycm9yVGhyb3dhYmxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbk9yTmV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uT3JOZXh0LmFkZChfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zeW5jRXJyb3JUaHJvd2FibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBuZXcgU2FmZVN1YnNjcmliZXIoX3RoaXMsIGRlc3RpbmF0aW9uT3JOZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIF90aGlzLnN5bmNFcnJvclRocm93YWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBuZXcgU2FmZVN1YnNjcmliZXIoX3RoaXMsIGRlc3RpbmF0aW9uT3JOZXh0LCBlcnJvciwgY29tcGxldGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGVbcnhTdWJzY3JpYmVyU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG4gICAgU3Vic2NyaWJlci5jcmVhdGUgPSBmdW5jdGlvbiAobmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIHZhciBzdWJzY3JpYmVyID0gbmV3IFN1YnNjcmliZXIobmV4dCwgZXJyb3IsIGNvbXBsZXRlKTtcbiAgICAgICAgc3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmliZXI7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX25leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX2NvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUudW5zdWJzY3JpYmUuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZUFuZFJlY3ljbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIF9wYXJlbnQgPSBfYS5fcGFyZW50LCBfcGFyZW50cyA9IF9hLl9wYXJlbnRzO1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLl9wYXJlbnRzID0gbnVsbDtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSBfcGFyZW50O1xuICAgICAgICB0aGlzLl9wYXJlbnRzID0gX3BhcmVudHM7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgcmV0dXJuIFN1YnNjcmliZXI7XG59KFN1YnNjcmlwdGlvbikpO1xuZXhwb3J0IHsgU3Vic2NyaWJlciB9O1xudmFyIFNhZmVTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFNhZmVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNhZmVTdWJzY3JpYmVyKF9wYXJlbnRTdWJzY3JpYmVyLCBvYnNlcnZlck9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLl9wYXJlbnRTdWJzY3JpYmVyID0gX3BhcmVudFN1YnNjcmliZXI7XG4gICAgICAgIHZhciBuZXh0O1xuICAgICAgICB2YXIgY29udGV4dCA9IF90aGlzO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihvYnNlcnZlck9yTmV4dCkpIHtcbiAgICAgICAgICAgIG5leHQgPSBvYnNlcnZlck9yTmV4dDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvYnNlcnZlck9yTmV4dCkge1xuICAgICAgICAgICAgbmV4dCA9IG9ic2VydmVyT3JOZXh0Lm5leHQ7XG4gICAgICAgICAgICBlcnJvciA9IG9ic2VydmVyT3JOZXh0LmVycm9yO1xuICAgICAgICAgICAgY29tcGxldGUgPSBvYnNlcnZlck9yTmV4dC5jb21wbGV0ZTtcbiAgICAgICAgICAgIGlmIChvYnNlcnZlck9yTmV4dCAhPT0gZW1wdHlPYnNlcnZlcikge1xuICAgICAgICAgICAgICAgIGNvbnRleHQgPSBPYmplY3QuY3JlYXRlKG9ic2VydmVyT3JOZXh0KTtcbiAgICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjb250ZXh0LnVuc3Vic2NyaWJlKSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5hZGQoY29udGV4dC51bnN1YnNjcmliZS5iaW5kKGNvbnRleHQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGV4dC51bnN1YnNjcmliZSA9IF90aGlzLnVuc3Vic2NyaWJlLmJpbmQoX3RoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIF90aGlzLl9jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgX3RoaXMuX25leHQgPSBuZXh0O1xuICAgICAgICBfdGhpcy5fZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgX3RoaXMuX2NvbXBsZXRlID0gY29tcGxldGU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCAmJiB0aGlzLl9uZXh0KSB7XG4gICAgICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICAgICAgaWYgKCFjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyB8fCAhX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yVW5zdWIodGhpcy5fbmV4dCwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5fX3RyeU9yU2V0RXJyb3IoX3BhcmVudFN1YnNjcmliZXIsIHRoaXMuX25leHQsIHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICAgICAgdmFyIHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgPSBjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZztcbiAgICAgICAgICAgIGlmICh0aGlzLl9lcnJvcikge1xuICAgICAgICAgICAgICAgIGlmICghdXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyB8fCAhX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclVuc3ViKHRoaXMuX2Vycm9yLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JTZXRFcnJvcihfcGFyZW50U3Vic2NyaWJlciwgdGhpcy5fZXJyb3IsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIGlmICh1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaG9zdFJlcG9ydEVycm9yKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgICAgICAgICBfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JWYWx1ZSA9IGVycjtcbiAgICAgICAgICAgICAgICAgICAgX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGhvc3RSZXBvcnRFcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdmFyIF9wYXJlbnRTdWJzY3JpYmVyID0gdGhpcy5fcGFyZW50U3Vic2NyaWJlcjtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgIHZhciB3cmFwcGVkQ29tcGxldGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fY29tcGxldGUuY2FsbChfdGhpcy5fY29udGV4dCk7IH07XG4gICAgICAgICAgICAgICAgaWYgKCFjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyB8fCAhX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclVuc3ViKHdyYXBwZWRDb21wbGV0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclNldEVycm9yKF9wYXJlbnRTdWJzY3JpYmVyLCB3cmFwcGVkQ29tcGxldGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuX190cnlPclVuc3ViID0gZnVuY3Rpb24gKGZuLCB2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLl9jb250ZXh0LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgaWYgKGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaG9zdFJlcG9ydEVycm9yKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5fX3RyeU9yU2V0RXJyb3IgPSBmdW5jdGlvbiAocGFyZW50LCBmbiwgdmFsdWUpIHtcbiAgICAgICAgaWYgKCFjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdiYWQgY2FsbCcpO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMuX2NvbnRleHQsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQuc3luY0Vycm9yVmFsdWUgPSBlcnI7XG4gICAgICAgICAgICAgICAgcGFyZW50LnN5bmNFcnJvclRocm93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBob3N0UmVwb3J0RXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICB0aGlzLl9jb250ZXh0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcGFyZW50U3Vic2NyaWJlciA9IG51bGw7XG4gICAgICAgIF9wYXJlbnRTdWJzY3JpYmVyLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gU2FmZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXIpKTtcbmV4cG9ydCB7IFNhZmVTdWJzY3JpYmVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdWJzY3JpYmVyLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IHZhciBvYnNlcnZhYmxlID0gdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBTeW1ib2wub2JzZXJ2YWJsZSB8fCAnQEBvYnNlcnZhYmxlJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9ic2VydmFibGUuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgZnVuY3Rpb24gbm9vcCgpIHsgfVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bm9vcC5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX25vb3AgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgbm9vcCB9IGZyb20gJy4vbm9vcCc7XG5leHBvcnQgZnVuY3Rpb24gcGlwZSgpIHtcbiAgICB2YXIgZm5zID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgZm5zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBwaXBlRnJvbUFycmF5KGZucyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGlwZUZyb21BcnJheShmbnMpIHtcbiAgICBpZiAoIWZucykge1xuICAgICAgICByZXR1cm4gbm9vcDtcbiAgICB9XG4gICAgaWYgKGZucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIGZuc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHBpcGVkKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBmbnMucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBmbikgeyByZXR1cm4gZm4ocHJldik7IH0sIGlucHV0KTtcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwZS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX3V0aWxfY2FuUmVwb3J0RXJyb3IsX3V0aWxfdG9TdWJzY3JpYmVyLF9pbnRlcm5hbF9zeW1ib2xfb2JzZXJ2YWJsZSxfdXRpbF9waXBlLF9jb25maWcgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgY2FuUmVwb3J0RXJyb3IgfSBmcm9tICcuL3V0aWwvY2FuUmVwb3J0RXJyb3InO1xuaW1wb3J0IHsgdG9TdWJzY3JpYmVyIH0gZnJvbSAnLi91dGlsL3RvU3Vic2NyaWJlcic7XG5pbXBvcnQgeyBvYnNlcnZhYmxlIGFzIFN5bWJvbF9vYnNlcnZhYmxlIH0gZnJvbSAnLi4vaW50ZXJuYWwvc3ltYm9sL29ic2VydmFibGUnO1xuaW1wb3J0IHsgcGlwZUZyb21BcnJheSB9IGZyb20gJy4vdXRpbC9waXBlJztcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJy4vY29uZmlnJztcbnZhciBPYnNlcnZhYmxlID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE9ic2VydmFibGUoc3Vic2NyaWJlKSB7XG4gICAgICAgIHRoaXMuX2lzU2NhbGFyID0gZmFsc2U7XG4gICAgICAgIGlmIChzdWJzY3JpYmUpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1YnNjcmliZSA9IHN1YnNjcmliZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5saWZ0ID0gZnVuY3Rpb24gKG9wZXJhdG9yKSB7XG4gICAgICAgIHZhciBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoKTtcbiAgICAgICAgb2JzZXJ2YWJsZS5zb3VyY2UgPSB0aGlzO1xuICAgICAgICBvYnNlcnZhYmxlLm9wZXJhdG9yID0gb3BlcmF0b3I7XG4gICAgICAgIHJldHVybiBvYnNlcnZhYmxlO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIG9wZXJhdG9yID0gdGhpcy5vcGVyYXRvcjtcbiAgICAgICAgdmFyIHNpbmsgPSB0b1N1YnNjcmliZXIob2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgICAgIGlmIChvcGVyYXRvcikge1xuICAgICAgICAgICAgc2luay5hZGQob3BlcmF0b3IuY2FsbChzaW5rLCB0aGlzLnNvdXJjZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2luay5hZGQodGhpcy5zb3VyY2UgfHwgKGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nICYmICFzaW5rLnN5bmNFcnJvclRocm93YWJsZSkgP1xuICAgICAgICAgICAgICAgIHRoaXMuX3N1YnNjcmliZShzaW5rKSA6XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJ5U3Vic2NyaWJlKHNpbmspKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgIGlmIChzaW5rLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgIHNpbmsuc3luY0Vycm9yVGhyb3dhYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKHNpbmsuc3luY0Vycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IHNpbmsuc3luY0Vycm9yVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaW5rO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3RyeVN1YnNjcmliZSA9IGZ1bmN0aW9uIChzaW5rKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaWJlKHNpbmspO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgICAgIHNpbmsuc3luY0Vycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzaW5rLnN5bmNFcnJvclZhbHVlID0gZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhblJlcG9ydEVycm9yKHNpbmspKSB7XG4gICAgICAgICAgICAgICAgc2luay5lcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAobmV4dCwgcHJvbWlzZUN0b3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcHJvbWlzZUN0b3IgPSBnZXRQcm9taXNlQ3Rvcihwcm9taXNlQ3Rvcik7XG4gICAgICAgIHJldHVybiBuZXcgcHJvbWlzZUN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBuZXh0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCByZWplY3QsIHJlc29sdmUpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5zb3VyY2U7XG4gICAgICAgIHJldHVybiBzb3VyY2UgJiYgc291cmNlLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlW1N5bWJvbF9vYnNlcnZhYmxlXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb3BlcmF0aW9ucyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgb3BlcmF0aW9uc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcGVyYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBpcGVGcm9tQXJyYXkob3BlcmF0aW9ucykodGhpcyk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS50b1Byb21pc2UgPSBmdW5jdGlvbiAocHJvbWlzZUN0b3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcHJvbWlzZUN0b3IgPSBnZXRQcm9taXNlQ3Rvcihwcm9taXNlQ3Rvcik7XG4gICAgICAgIHJldHVybiBuZXcgcHJvbWlzZUN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICAgICAgX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh4KSB7IHJldHVybiB2YWx1ZSA9IHg7IH0sIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIHJlamVjdChlcnIpOyB9LCBmdW5jdGlvbiAoKSB7IHJldHVybiByZXNvbHZlKHZhbHVlKTsgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlKSB7XG4gICAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShzdWJzY3JpYmUpO1xuICAgIH07XG4gICAgcmV0dXJuIE9ic2VydmFibGU7XG59KCkpO1xuZXhwb3J0IHsgT2JzZXJ2YWJsZSB9O1xuZnVuY3Rpb24gZ2V0UHJvbWlzZUN0b3IocHJvbWlzZUN0b3IpIHtcbiAgICBpZiAoIXByb21pc2VDdG9yKSB7XG4gICAgICAgIHByb21pc2VDdG9yID0gY29uZmlnLlByb21pc2UgfHwgUHJvbWlzZTtcbiAgICB9XG4gICAgaWYgKCFwcm9taXNlQ3Rvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIFByb21pc2UgaW1wbCBmb3VuZCcpO1xuICAgIH1cbiAgICByZXR1cm4gcHJvbWlzZUN0b3I7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYnNlcnZhYmxlLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfU3Vic2NyaWJlcixfc3ltYm9sX3J4U3Vic2NyaWJlcixfT2JzZXJ2ZXIgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgU3Vic2NyaWJlciB9IGZyb20gJy4uL1N1YnNjcmliZXInO1xuaW1wb3J0IHsgcnhTdWJzY3JpYmVyIGFzIHJ4U3Vic2NyaWJlclN5bWJvbCB9IGZyb20gJy4uL3N5bWJvbC9yeFN1YnNjcmliZXInO1xuaW1wb3J0IHsgZW1wdHkgYXMgZW1wdHlPYnNlcnZlciB9IGZyb20gJy4uL09ic2VydmVyJztcbmV4cG9ydCBmdW5jdGlvbiB0b1N1YnNjcmliZXIobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgIGlmIChuZXh0T3JPYnNlcnZlcikge1xuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgaW5zdGFuY2VvZiBTdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV4dE9yT2JzZXJ2ZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyW3J4U3Vic2NyaWJlclN5bWJvbF0pIHtcbiAgICAgICAgICAgIHJldHVybiBuZXh0T3JPYnNlcnZlcltyeFN1YnNjcmliZXJTeW1ib2xdKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFuZXh0T3JPYnNlcnZlciAmJiAhZXJyb3IgJiYgIWNvbXBsZXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3Vic2NyaWJlcihlbXB0eU9ic2VydmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVyKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9TdWJzY3JpYmVyLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfU3Vic2NyaWJlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBTdWJzY3JpYmVyIH0gZnJvbSAnLi4vU3Vic2NyaWJlcic7XG5leHBvcnQgZnVuY3Rpb24gY2FuUmVwb3J0RXJyb3Iob2JzZXJ2ZXIpIHtcbiAgICB3aGlsZSAob2JzZXJ2ZXIpIHtcbiAgICAgICAgdmFyIF9hID0gb2JzZXJ2ZXIsIGNsb3NlZF8xID0gX2EuY2xvc2VkLCBkZXN0aW5hdGlvbiA9IF9hLmRlc3RpbmF0aW9uLCBpc1N0b3BwZWQgPSBfYS5pc1N0b3BwZWQ7XG4gICAgICAgIGlmIChjbG9zZWRfMSB8fCBpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZXN0aW5hdGlvbiAmJiBkZXN0aW5hdGlvbiBpbnN0YW5jZW9mIFN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIG9ic2VydmVyID0gZGVzdGluYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYnNlcnZlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYW5SZXBvcnRFcnJvci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmZ1bmN0aW9uIE9iamVjdFVuc3Vic2NyaWJlZEVycm9ySW1wbCgpIHtcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICAgIHRoaXMubWVzc2FnZSA9ICdvYmplY3QgdW5zdWJzY3JpYmVkJztcbiAgICB0aGlzLm5hbWUgPSAnT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3InO1xuICAgIHJldHVybiB0aGlzO1xufVxuT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JJbXBsLnByb3RvdHlwZSA9IC8qQF9fUFVSRV9fKi8gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuZXhwb3J0IHZhciBPYmplY3RVbnN1YnNjcmliZWRFcnJvciA9IE9iamVjdFVuc3Vic2NyaWJlZEVycm9ySW1wbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9iamVjdFVuc3Vic2NyaWJlZEVycm9yLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfU3Vic2NyaXB0aW9uIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICcuL1N1YnNjcmlwdGlvbic7XG52YXIgU3ViamVjdFN1YnNjcmlwdGlvbiA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhTdWJqZWN0U3Vic2NyaXB0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YmplY3RTdWJzY3JpcHRpb24oc3ViamVjdCwgc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5zdWJqZWN0ID0gc3ViamVjdDtcbiAgICAgICAgX3RoaXMuc3Vic2NyaWJlciA9IHN1YnNjcmliZXI7XG4gICAgICAgIF90aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN1YmplY3RTdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsb3NlZCA9IHRydWU7XG4gICAgICAgIHZhciBzdWJqZWN0ID0gdGhpcy5zdWJqZWN0O1xuICAgICAgICB2YXIgb2JzZXJ2ZXJzID0gc3ViamVjdC5vYnNlcnZlcnM7XG4gICAgICAgIHRoaXMuc3ViamVjdCA9IG51bGw7XG4gICAgICAgIGlmICghb2JzZXJ2ZXJzIHx8IG9ic2VydmVycy5sZW5ndGggPT09IDAgfHwgc3ViamVjdC5pc1N0b3BwZWQgfHwgc3ViamVjdC5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3Vic2NyaWJlckluZGV4ID0gb2JzZXJ2ZXJzLmluZGV4T2YodGhpcy5zdWJzY3JpYmVyKTtcbiAgICAgICAgaWYgKHN1YnNjcmliZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIG9ic2VydmVycy5zcGxpY2Uoc3Vic2NyaWJlckluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFN1YmplY3RTdWJzY3JpcHRpb247XG59KFN1YnNjcmlwdGlvbikpO1xuZXhwb3J0IHsgU3ViamVjdFN1YnNjcmlwdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ViamVjdFN1YnNjcmlwdGlvbi5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX09ic2VydmFibGUsX1N1YnNjcmliZXIsX1N1YnNjcmlwdGlvbixfdXRpbF9PYmplY3RVbnN1YnNjcmliZWRFcnJvcixfU3ViamVjdFN1YnNjcmlwdGlvbixfaW50ZXJuYWxfc3ltYm9sX3J4U3Vic2NyaWJlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4vT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBTdWJzY3JpYmVyIH0gZnJvbSAnLi9TdWJzY3JpYmVyJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yIH0gZnJvbSAnLi91dGlsL09iamVjdFVuc3Vic2NyaWJlZEVycm9yJztcbmltcG9ydCB7IFN1YmplY3RTdWJzY3JpcHRpb24gfSBmcm9tICcuL1N1YmplY3RTdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgcnhTdWJzY3JpYmVyIGFzIHJ4U3Vic2NyaWJlclN5bWJvbCB9IGZyb20gJy4uL2ludGVybmFsL3N5bWJvbC9yeFN1YnNjcmliZXInO1xudmFyIFN1YmplY3RTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFN1YmplY3RTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YmplY3RTdWJzY3JpYmVyKGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBTdWJqZWN0U3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcikpO1xuZXhwb3J0IHsgU3ViamVjdFN1YnNjcmliZXIgfTtcbnZhciBTdWJqZWN0ID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFN1YmplY3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3ViamVjdCgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMub2JzZXJ2ZXJzID0gW107XG4gICAgICAgIF90aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMudGhyb3duRXJyb3IgPSBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN1YmplY3QucHJvdG90eXBlW3J4U3Vic2NyaWJlclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3ViamVjdFN1YnNjcmliZXIodGhpcyk7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5saWZ0ID0gZnVuY3Rpb24gKG9wZXJhdG9yKSB7XG4gICAgICAgIHZhciBzdWJqZWN0ID0gbmV3IEFub255bW91c1N1YmplY3QodGhpcywgdGhpcyk7XG4gICAgICAgIHN1YmplY3Qub3BlcmF0b3IgPSBvcGVyYXRvcjtcbiAgICAgICAgcmV0dXJuIHN1YmplY3Q7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdmFyIG9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzO1xuICAgICAgICAgICAgdmFyIGxlbiA9IG9ic2VydmVycy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgY29weSA9IG9ic2VydmVycy5zbGljZSgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNvcHlbaV0ubmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3RVbnN1YnNjcmliZWRFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICB0aGlzLnRocm93bkVycm9yID0gZXJyO1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVycztcbiAgICAgICAgdmFyIGxlbiA9IG9ic2VydmVycy5sZW5ndGg7XG4gICAgICAgIHZhciBjb3B5ID0gb2JzZXJ2ZXJzLnNsaWNlKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNvcHlbaV0uZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB2YXIgb2JzZXJ2ZXJzID0gdGhpcy5vYnNlcnZlcnM7XG4gICAgICAgIHZhciBsZW4gPSBvYnNlcnZlcnMubGVuZ3RoO1xuICAgICAgICB2YXIgY29weSA9IG9ic2VydmVycy5zbGljZSgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjb3B5W2ldLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBudWxsO1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuX3RyeVN1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlLmNhbGwodGhpcywgc3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3RVbnN1YnNjcmliZWRFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaGFzRXJyb3IpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IodGhpcy50aHJvd25FcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gU3Vic2NyaXB0aW9uLkVNUFRZO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gU3Vic2NyaXB0aW9uLkVNUFRZO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChzdWJzY3JpYmVyKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3ViamVjdFN1YnNjcmlwdGlvbih0aGlzLCBzdWJzY3JpYmVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuYXNPYnNlcnZhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlKCk7XG4gICAgICAgIG9ic2VydmFibGUuc291cmNlID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGU7XG4gICAgfTtcbiAgICBTdWJqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChkZXN0aW5hdGlvbiwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBuZXcgQW5vbnltb3VzU3ViamVjdChkZXN0aW5hdGlvbiwgc291cmNlKTtcbiAgICB9O1xuICAgIHJldHVybiBTdWJqZWN0O1xufShPYnNlcnZhYmxlKSk7XG5leHBvcnQgeyBTdWJqZWN0IH07XG52YXIgQW5vbnltb3VzU3ViamVjdCA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhBbm9ueW1vdXNTdWJqZWN0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFub255bW91c1N1YmplY3QoZGVzdGluYXRpb24sIHNvdXJjZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgICAgICBfdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICBpZiAoZGVzdGluYXRpb24gJiYgZGVzdGluYXRpb24ubmV4dCkge1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFub255bW91c1N1YmplY3QucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICBpZiAoZGVzdGluYXRpb24gJiYgZGVzdGluYXRpb24uZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGlmIChkZXN0aW5hdGlvbiAmJiBkZXN0aW5hdGlvbi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBbm9ueW1vdXNTdWJqZWN0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlO1xuICAgICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFN1YnNjcmlwdGlvbi5FTVBUWTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEFub255bW91c1N1YmplY3Q7XG59KFN1YmplY3QpKTtcbmV4cG9ydCB7IEFub255bW91c1N1YmplY3QgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YmplY3QuanMubWFwXG4iLCJpbXBvcnQge1NpbXVsYXRpb25QYWNrYWdlfSBmcm9tIFwiLi9TaW11bGF0aW9uUGFja2FnZVwiO1xyXG5pbXBvcnQge1N1YmplY3R9IGZyb20gXCJyeGpzXCI7XHJcbmltcG9ydCB7TWluaW1hbFNwYW5UcmVlfSBmcm9tIFwiLi4vU3Bhbm5pbmdUcmVlL21pbmltYWxTcGFubmluZ1RyZWVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTaW11bGF0aW9uQ29ubmVjdGlvbntcclxuXHRwdWJsaWMgc2VuZDogU3ViamVjdDxTaW11bGF0aW9uUGFja2FnZT4gPSBuZXcgU3ViamVjdDxTaW11bGF0aW9uUGFja2FnZT4oKTtcclxuXHRwdWJsaWMgcmVjZWl2ZTogU3ViamVjdDxTaW11bGF0aW9uUGFja2FnZT4gPSBuZXcgU3ViamVjdDxTaW11bGF0aW9uUGFja2FnZT4oKTtcclxuXHRwdWJsaWMgcGluZzogUHJvbWlzZTxzdHJpbmdbXT47XHJcblx0Y29uc3RydWN0b3Ioc2libGluZ0JyaWRnZXM6IHN0cmluZ1tdKXtcclxuXHRcdHRoaXMucGluZyA9IG5ldyBQcm9taXNlPHN0cmluZ1tdPihyZXNvbHZlID0+IHJlc29sdmUoc2libGluZ0JyaWRnZXMpKTtcclxuXHR9XHJcblx0cHVibGljIGZpbmlzaGVkSW5kZXhpbmc6IFN1YmplY3Q8TWluaW1hbFNwYW5UcmVlfGFueT4gPSBuZXcgU3ViamVjdCgpO1xyXG59XHJcbiIsImltcG9ydCB7Um91dGluZ1RhYmxlRW50cnl9IGZyb20gXCIuL0JyaWRnZVwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBTaW11bGF0aW9uUGFja2FnZSB7XHJcbiAgICBwcm90b2NvbDogc3RyaW5nLFxyXG4gICAgY29udGVudDogYW55LFxyXG4gICAgdGFyZ2V0OiBzdHJpbmcsXHJcbiAgICBkZXN0aW5hdGlvbj86IHN0cmluZyxcclxuICAgIGNvc3Q/OiBudW1iZXJcclxuICAgIHNlbmRlcj86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNpbXVsYXRpb25QYWNrYWdlIGltcGxlbWVudHMgU2ltdWxhdGlvblBhY2thZ2Uge1xyXG4gICAgY29zdD86IG51bWJlcjtcclxuICAgIGRlc3RpbmF0aW9uPzogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBwcm90b2NvbDogc3RyaW5nLCBwdWJsaWMgY29udGVudDogYW55LCBwdWJsaWMgdGFyZ2V0OiBzdHJpbmcsIHJvdXRpbmdUYWJsZTogUm91dGluZ1RhYmxlRW50cnlbXSkge1xyXG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24gPSB0YXJnZXQ7XHJcbiAgICAgICAgbGV0IHJvdXRpbmdUYWJsZUVudHJ5ID0gcm91dGluZ1RhYmxlLmZpbmQoaSA9PiBpLnRhcmdldCA9PT0gdGhpcy50YXJnZXQpO1xyXG4gICAgICAgIGlmKCFyb3V0aW5nVGFibGVFbnRyeSl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdubycpO1xyXG4gICAgICAgICAgICBkZWJ1Z2dlcjtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gcm91dGluZ1RhYmxlRW50cnkubmV4dEhvcDtcclxuICAgIH1cclxufVxyXG5cclxuIiwiaW1wb3J0IHtTcGFubmluZ1RyZWVOb2RlfSBmcm9tIFwiLi4vU3Bhbm5pbmdUcmVlL3NwYW5uaW5nVHJlZU5vZGVcIjtcclxuaW1wb3J0IHtCcmlkZ2V9IGZyb20gXCIuL0JyaWRnZVwiO1xyXG5pbXBvcnQge1NpbXVsYXRpb25Db25uZWN0aW9ufSBmcm9tIFwiLi9TaW11bGF0aW9uQ29ubmVjdGlvblwiO1xyXG5pbXBvcnQge1NpbXVsYXRpb25QYWNrYWdlfSBmcm9tIFwiLi9TaW11bGF0aW9uUGFja2FnZVwiO1xyXG5pbXBvcnQge01pbmltYWxTcGFuVHJlZX0gZnJvbSBcIi4uL1NwYW5uaW5nVHJlZS9taW5pbWFsU3Bhbm5pbmdUcmVlXCI7XHJcbmltcG9ydCB7U3Bhbm5pbmdUcmVlTGlua30gZnJvbSBcIi4uL1NwYW5uaW5nVHJlZS9zcGFubmluZ1RyZWVMaW5rXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU2ltdWxhdGlvbiB7XHJcbiAgICBwdWJsaWMgYnJpZGdlczogQnJpZGdlW10gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgbm9kZXM6IFNwYW5uaW5nVHJlZU5vZGVbXSwgcHJpdmF0ZSBtdWx0aUZvckNvc3RJblNlY29uZHMgPSAwLjUpIHtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyX3RhcmdldCcpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICAgIHRhcmdldC5jaGlsZE5vZGVzLmZvckVhY2gobiA9PiBuLnJlbW92ZSgpKTtcclxuICAgICAgICB0YXJnZXQuY2hpbGROb2Rlcy5mb3JFYWNoKG4gPT4gbi5yZW1vdmUoKSk7XHJcbiAgICAgICAgdGFyZ2V0LmNoaWxkTm9kZXMuZm9yRWFjaChuID0+IG4ucmVtb3ZlKCkpO1xyXG4gICAgICAgIGNvbnN0IGluaXRpYWxQYWNrYWdlc1RlbXBsYXRlID0gYFxyXG48ZGl2IGNsYXNzPVwiaXRlbVwiIGlkPVwiaW5pdF9wa2dcIj5cclxuICAgIDxoMz5QYWNrYWdlczo8L2gzPlxyXG4gICAgPGRpdiBpZD1cInBrZ19zX3RhcmdldFwiPlxyXG5cclxuICAgIDwvZGl2PlxyXG48L2Rpdj5cclxuYDtcclxuICAgICAgICB0YXJnZXQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlZW5kXCIsIG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoaW5pdGlhbFBhY2thZ2VzVGVtcGxhdGUsIFwidGV4dC9odG1sXCIpLmdldEVsZW1lbnRCeUlkKGBpbml0X3BrZ2ApKTtcclxuICAgICAgICBub2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xyXG4gICAgICAgICAgICBsZXQgc2libGluZ05vZGVzID0gbm9kZS5saW5rcy5tYXAobCA9PiBsLnRvTm9kZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbm4gPSBuZXcgU2ltdWxhdGlvbkNvbm5lY3Rpb24oc2libGluZ05vZGVzKTtcclxuICAgICAgICAgICAgdGhpcy5icmlkZ2VzLnB1c2gobmV3IEJyaWRnZShub2RlLm5hbWUsIG5vZGUudmFsdWUsIGNvbm4sIChicmlkZ2UpID0+IHRoaXMuZHVtcEJyaWRnZShicmlkZ2UpKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gYWxsb3cgY29tbXVuaWNhdGlvbiBiZXR3ZWVuIGRpcmVjdCBjb25uZWN0ZWQgYnJpZGdlc1xyXG4gICAgICAgIHRoaXMuYnJpZGdlcy5mb3JFYWNoKGJyaWRnZSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBsaW5rczogU3Bhbm5pbmdUcmVlTGlua1tdID0gbm9kZXMuZmluZChuID0+IG4ubmFtZSA9PT0gYnJpZGdlLm5hbWUpLmxpbmtzO1xyXG4gICAgICAgICAgICBsZXQgc2libGluZ05vZGVzID0gbGlua3MubWFwKGwgPT4gbC50b05vZGUpO1xyXG4gICAgICAgICAgICBicmlkZ2UuY29ubmVjdGlvbi5zZW5kLnN1YnNjcmliZSgocGtnOiBTaW11bGF0aW9uUGFja2FnZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCR7YnJpZGdlLm5hbWV9Pj4+JHtwa2cudGFyZ2V0fWApO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbm5lY3RlZE5vZGUgPSBzaWJsaW5nTm9kZXMuZmluZChuID0+IG4gPT09IHBrZy50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCEhY29ubmVjdGVkTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBrZy5jb3N0ID0gbGlua3MuZmluZChsID0+IGwudG9Ob2RlID09PSBwa2cudGFyZ2V0KS5jb3N0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNiID0gdGhpcy5kdW1wUGtnKHBrZywgYnJpZGdlLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2IoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnJpZGdlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKGIgPT4gYi5uYW1lID09PSBwa2cudGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25uZWN0aW9uLnJlY2VpdmUubmV4dChwa2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwa2cuY29zdCAqIDEwMDAgKiB0aGlzLm11bHRpRm9yQ29zdEluU2Vjb25kcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlRG9tQnJpZGdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGFydEluZGV4aW5nRnJvbVJhbmRvbUJyaWRnZTogKCkgPT4gUHJvbWlzZTxNaW5pbWFsU3BhblRyZWU+ID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxNaW5pbWFsU3BhblRyZWU+KGFzeW5jIHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBicmlkZ2UgPSB0aGlzLmJyaWRnZXNbTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogdGhpcy5icmlkZ2VzLmxlbmd0aCldO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmJyaWRnZXMsIGJyaWRnZSk7XHJcbiAgICAgICAgICAgIGJyaWRnZS5jb25uZWN0aW9uLmZpbmlzaGVkSW5kZXhpbmcuc3Vic2NyaWJlKChtc3QpID0+IHJlc29sdmUobXN0KSk7XHJcbiAgICAgICAgICAgIGJyaWRnZS5pbmRleE5ldHdvcmsoKS50aGVuKCgpID0+IGNvbnNvbGUubG9nKCd3dGYnKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcHJpdmF0ZSBpZCA9IDA7XHJcblxyXG4gICAgcHJpdmF0ZSBkdW1wUGtnKHBrZzogU2ltdWxhdGlvblBhY2thZ2UsIGZyb206IHN0cmluZyk6ICgpID0+IHZvaWQge1xyXG5cclxuICAgICAgICBjb25zdCBwa2dfc190YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGtnX3NfdGFyZ2V0JykgYXMgSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICAgICAgIGxldCBudW1iZXIgPSB0aGlzLmlkKys7XHJcbiAgICAgICAgY29uc3QgcGtnVGVtcGxhdGUgPSAocGtnOiBTaW11bGF0aW9uUGFja2FnZSwgZnJvbTogc3RyaW5nKSA9PiBgXHJcbjxkaXYgaWQ9XCJwa2dfJHtudW1iZXJ9XCI+XHJcbiAgICAke2Zyb219IC0+ICR7cGtnLnRhcmdldH0gOiAke3BrZy5jb3N0fVxyXG48L2Rpdj5cclxuYDtcclxuICAgICAgICBwa2dfc190YXJnZXQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlZW5kXCIsIG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcocGtnVGVtcGxhdGUocGtnLCBmcm9tKSwgXCJ0ZXh0L2h0bWxcIikuZ2V0RWxlbWVudEJ5SWQoYHBrZ18ke251bWJlcn1gKSk7XHJcbiAgICAgICAgLy9wa2dfc190YXJnZXQuKG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcocGtnVGVtcGxhdGUocGtnLCBmcm9tKSwgXCJ0ZXh0L2h0bWxcIikuZ2V0RWxlbWVudEJ5SWQoYHBrZ18ke251bWJlcn1gKSk7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgcGtnX3NfdGFyZ2V0LnJlbW92ZUNoaWxkKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwa2dfJHtudW1iZXJ9YCkpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlRG9tQnJpZGdlcygpIHtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyX3RhcmdldCcpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IGJyaWRnZVRlbXBsYXRlID0gKGJyaWRnZTogQnJpZGdlKSA9PiBgXHJcbjxkaXYgY2xhc3M9XCJpdGVtXCIgaWQ9XCJicmlkZ2VfJHticmlkZ2UudmFsdWV9XCI+XHJcbiAgICA8aDM+QnJpZGdlICR7YnJpZGdlLm5hbWV9PC9oMz5cclxuPC9kaXY+XHJcbmA7XHJcbiAgICAgICAgdGhpcy5icmlkZ2VzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgaWYgKGEubmFtZSA8IGIubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhLm5hbWUgPiBiLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH0pLmZvckVhY2goYnJpZGdlID0+IHtcclxuICAgICAgICAgICAgdGFyZ2V0Lmluc2VydEFkamFjZW50RWxlbWVudChcImJlZm9yZWVuZFwiLCBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGJyaWRnZVRlbXBsYXRlKGJyaWRnZSksIFwidGV4dC9odG1sXCIpLmdldEVsZW1lbnRCeUlkKGBicmlkZ2VfJHticmlkZ2UudmFsdWV9YCkpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZHVtcEJyaWRnZShicmlkZ2U6IEJyaWRnZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmJyaWRnZXMuZmluZEluZGV4KGIgPT4gYi5CTE9DS0VEKCkpID09PSAtMSkge1xyXG4gICAgICAgICAgICBsZXQgdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BrZ190ZXN0X3RhcmdldCcpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY2FyZCA9IGBcclxuPGRpdiBjbGFzcz1cIml0ZW1cIiBpZD1cInBrZy1jYXJkXCIgc3R5bGU9XCJcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgd2lkdGg6IDIwMCU7XHJcblwiPlxyXG4gICAgPGgzPlNlbmQgYSBzYW1wbGUgcGFja2FnZSB0aHJvdWdoIHdpdGggdGhlIG5ldyB0b3BvbG9neTwvaDM+XHJcbjwvZGl2PlxyXG5gO1xyXG4gICAgICAgICAgICB0YXJnZXQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlZW5kXCIsIG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoY2FyZCwgXCJ0ZXh0L2h0bWxcIikuZ2V0RWxlbWVudEJ5SWQoJ3BrZy1jYXJkJykpO1xyXG4gICAgICAgICAgICB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGtnLWNhcmQnKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWVzID0gdGhpcy5icmlkZ2VzLm1hcChiID0+IGIubmFtZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRyb3Bkb3duVGVtcGxhdGUgPSAoaWQ6IHN0cmluZykgPT4gYFxyXG48bGFiZWwgaWQ9XCJsXyR7aWR9XCIgZm9yPVwiJHtpZH1cIj5TZW5kICR7aWR9OjwvbGFiZWw+XHJcbjxzZWxlY3QgaWQ9XCIke2lkfVwiPlxyXG4gICAgJHt2YWx1ZXMubWFwKHYgPT4gYDxvcHRpb24gdmFsdWU9XCIke3Z9XCI+JHt2fTwvb3B0aW9uPlxyXG4gICAgYCl9XHJcbjwvc2VsZWN0PlxyXG5gO1xyXG4gICAgICAgICAgICBsZXQgZHJvcGRvd24gPSAoaWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0Lmluc2VydEFkamFjZW50RWxlbWVudChcImJlZm9yZWVuZFwiLCBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGRyb3Bkb3duVGVtcGxhdGUoaWQpICsgYDxicj5gLCBcInRleHQvaHRtbFwiKS5nZXRFbGVtZW50QnlJZChgbF8ke2lkfWApKTtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJiZWZvcmVlbmRcIiwgbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhkcm9wZG93blRlbXBsYXRlKGlkKSwgXCJ0ZXh0L2h0bWxcIikuZ2V0RWxlbWVudEJ5SWQoaWQpKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZHJvcGRvd24oJ2Zyb20nKTtcclxuICAgICAgICAgICAgZHJvcGRvd24oJ3RvJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IGBcclxuPGJ1dHRvbiBpZD1cInRlc3Rfc2VuZFwiPlNlbmQ8L2J1dHRvbj5cclxuYDtcclxuICAgICAgICAgICAgY29uc3Qgc2VuZFBrZyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzZW5kaW5nJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm11bHRpRm9yQ29zdEluU2Vjb25kcyA9ICsoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ211bHQnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZyb21OYW1lID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmcm9tJykgYXMgSFRNTFNlbGVjdEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdG9OYW1lID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0bycpIGFzIEhUTUxTZWxlY3RFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGxldCBmaW5kID0gdGhpcy5icmlkZ2VzLmZpbmQoYiA9PiBiLm5hbWUgPT09IGZyb21OYW1lKTtcclxuICAgICAgICAgICAgICAgIGxldCBzaW11bGF0aW9uUGFja2FnZSA9IG5ldyBTaW11bGF0aW9uUGFja2FnZSgnU09NRV9OT1JNQUwnLCBcIkdyZWV0aW5ncyBmcm9tXCIgKyBmaW5kLm5hbWUsIHRvTmFtZSwgZmluZC5ST1VUSU5HX1RBQkxFKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoZXJlJywgc2ltdWxhdGlvblBhY2thZ2UpO1xyXG4gICAgICAgICAgICAgICAgZmluZC5zZW5kKHNpbXVsYXRpb25QYWNrYWdlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGFyZ2V0Lmluc2VydEFkamFjZW50RWxlbWVudChcImJlZm9yZWVuZFwiLCBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGJ1dHRvbiwgXCJ0ZXh0L2h0bWxcIikuZ2V0RWxlbWVudEJ5SWQoJ3Rlc3Rfc2VuZCcpKTtcclxuICAgICAgICAgICAgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXN0X3NlbmQnKSBhcyBIVE1MQnV0dG9uRWxlbWVudCkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBzZW5kUGtnKCkpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGJyaWRnZVRlbXBsYXRlID0gKGJyaWRnZTogQnJpZGdlKSA9PiBgXHJcbjxkaXYgY2xhc3M9XCJpdGVtXCIgaWQ9XCJicmlkZ2VfJHticmlkZ2UudmFsdWV9XCIgJHshYnJpZGdlLkJMT0NLRUQoKSA/IGBzdHlsZT1cImJveC1zaGFkb3c6IDVweCA1cHggNHB4ICMzM2IwNDAgIWltcG9ydGFudDtcImAgOiAnJ30+XHJcbiAgICA8ZGl2IHN0eWxlPVwid2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgb3ZlcmZsb3cteTogYXV0b1wiPlxyXG4gICAgICAgIDxoMz5CcmlkZ2UgJHticmlkZ2UubmFtZX08L2gzPlxyXG4gICAgICAgICR7YnJpZGdlLnJvb3RPZkluZGV4aW5nID8gJ0luZGV4aW5nIFJvb3QhJyA6ICcnfTxicj5cclxuICAgICAgICBLbm93biBsaW5rczogWzxicj48QkxPQ0tRVU9URT4ke2JyaWRnZS5ESVNDT1ZFUkVEX0xJTktTLm1hcChsID0+IGwubm9kZXMubWFwKG4gPT4gbi5uYW1lKS5qb2luKCctJykgKyAnOicgKyBsLmNvc3QpLmpvaW4oJyw8YnI+Jyl9PC9CTE9DS1FVT1RFPjxicj5dPGJyPlxyXG4gICAgICAgICR7IWJyaWRnZS5yb290T2ZJbmRleGluZyAmJiBicmlkZ2UuSU5ERVhFRCA/IGA8YnI+Tm9kZSBoYXMgZmluaXNoZWQgaW5kZXhpbmchPGJyPlJldHVybmluZyBEYXRhIHRvOiBbPGJyPjxCTE9DS1FVT1RFPiR7YnJpZGdlLnJldHVyblRvLmpvaW4oJyw8YnI+Jyl9PC9CTE9DS1FVT1RFPjxicj5dYCA6ICcnfVxyXG4gICAgICAgICR7YnJpZGdlLnJvb3RPZkluZGV4aW5nICYmIGJyaWRnZS5JTkRFWEVEID8gYDxicj5OZXR3b3JrIGhhcyBmaW5pc2hlZCBpbmRleGluZyE8YnI+TVNUIGdlbmVyYXRlZC48YnI+U2VuZGluZyBNU1QgdG86IFs8YnI+PEJMT0NLUVVPVEU+JHticmlkZ2UuTVNULmFsbE5vZGVzLm1hcChuID0+IG4ubmFtZSkuZmlsdGVyKHMgPT4gcyAhPT0gYnJpZGdlLm5hbWUpLmpvaW4oJyw8YnI+Jyl9PC9CTE9DS1FVT1RFPjxicj5dYCA6ICcnfVxyXG4gICAgICAgICR7IWJyaWRnZS5CTE9DS0VEKCkgPyBgPGJyPlJlY2VpdmVkIE1TVC4gUm91dGluZyBUYWJsZTogWzxicj48QkxPQ0tRVU9URT4ke2JyaWRnZS5ST1VUSU5HX1RBQkxFLm1hcChpID0+IGAtPiR7aS50YXJnZXR9IHZpYSAke2kubmV4dEhvcH1gKS5qb2luKCcsPGJyPicpfTwvQkxPQ0tRVU9URT48YnI+XWAgOiAnJ31cclxuICAgIDwvZGl2PlxyXG48L2Rpdj5cclxuYDtcclxuICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBicmlkZ2VfJHticmlkZ2UudmFsdWV9YCk7XHJcbiAgICAgICAgZWwucmVwbGFjZVdpdGgobmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhicmlkZ2VUZW1wbGF0ZShicmlkZ2UpLCBcInRleHQvaHRtbFwiKS5nZXRFbGVtZW50QnlJZChgYnJpZGdlXyR7YnJpZGdlLnZhbHVlfWApKVxyXG4gICAgfVxyXG5cclxufVxyXG4iLCIgICAgLy8gcmVmZXJlbmNlcyB0byB0aGUgZG9tXHJcbmltcG9ydCB7cGFyc2UsIHN0cmluZ2lmeX0gZnJvbSBcIi4vcGFyc2VyXCI7XHJcbmltcG9ydCB7U2ltdWxhdGlvbn0gZnJvbSBcIi4vbW9kZWxzL1NpbXVsYXRpb24vU2ltdWxhdGlvblwiO1xyXG5pbXBvcnQge1NpbXVsYXRpb25QYWNrYWdlfSBmcm9tIFwiLi9tb2RlbHMvU2ltdWxhdGlvbi9TaW11bGF0aW9uUGFja2FnZVwiO1xyXG5cclxuY29uc3QgaW5wdXRBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RleHRJbicpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XHJcbmNvbnN0IG91dHB1dEFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGV4dE91dCcpIGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQ7XHJcbmNvbnN0IHNpbXVsYXRpb25CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2ltdWxhdGVfYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcblxyXG5cclxuXHJcbmNvbnN0IHNpbXBsZVRlc3QgPSBgXHJcbkdyYXBoIG15Z3JhcGgge1xyXG5cdC8vIE5vZGVcclxuXHRBID0gMjtcclxuXHRCID0gMTtcclxuXHRDID0gMztcclxuXHRcclxuXHQvLyBMaW5rcyB1bmQgenVnZWguIEtvc3RlblxyXG5cdEEgLSBCIDogMTtcclxuXHRBIC0gQyA6IDE7XHJcblx0QyAtIEIgOiAyO1xyXG59YDtcclxuY29uc3QgdGVzdCA9IGBcclxuR3JhcGggbXlncmFwaCB7XHJcblx0Ly8gTm9kZVxyXG5cdEEgPSA1O1xyXG5cdEIgPSAxO1xyXG5cdEMgPSAzO1xyXG5cdEQgPSA3O1xyXG5cdEUgPSA2O1xyXG5cdEYgPSA0O1xyXG5cdFxyXG5cdC8vIExpbmtzIHVuZCB6dWdlaC4gS29zdGVuXHJcblx0QSAtIEIgOiAxMDtcclxuXHRBIC0gQyA6IDEwO1xyXG5cdEIgLSBEIDogMTU7XHJcblx0QiAtIEUgOiAxMDtcclxuXHRDIC0gRCA6IDM7XHJcblx0QyAtIEUgOiAxMDtcclxuXHREIC0gRSA6IDI7XHJcblx0RCAtIEYgOiAxMDtcclxuXHRFIC0gRiA6IDI7XHJcbn1gO1xyXG5pbnB1dEFyZWEudmFsdWUgPSB0ZXN0O1xyXG5jb25zb2xlLmxvZyhpbnB1dEFyZWEpO1xyXG4vLyBjbGljayBpbXBsXHJcbmNvbnN0IG9uU2ltdWxhdGlvbkNsaWNrID0gKCkgPT4ge1xyXG4gICAgY29uc3QgcGFyc2VSZXN1bHQgPSBwYXJzZShpbnB1dEFyZWEudmFsdWUpO1xyXG4gICAgY29uc3Qgc2ltdWxhdGlvbiA9IG5ldyBTaW11bGF0aW9uKHBhcnNlUmVzdWx0Lm5vZGVzLCArKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtdWx0JykgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUpO1xyXG4gICAgY29uc29sZS5sb2coc2ltdWxhdGlvbik7XHJcbiAgICBzaW11bGF0aW9uLnN0YXJ0SW5kZXhpbmdGcm9tUmFuZG9tQnJpZGdlKCkudGhlbihtc3QgPT4ge1xyXG4gICAgICAgIG91dHB1dEFyZWEudmFsdWUgPSBzdHJpbmdpZnkobXN0LCBwYXJzZVJlc3VsdC5ncmFwaE5hbWUpO1xyXG4gICAgfSlcclxufTtcclxuXHJcbi8vIGNhbGwgY2xpY2sgaW1wbCBvbiBzaW11bGF0aW9uQnV0dG9uIGNsaWNrXHJcbnNpbXVsYXRpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvblNpbXVsYXRpb25DbGljayk7XHJcbiIsImltcG9ydCB7U3Bhbm5pbmdUcmVlTGlua30gZnJvbSBcIi4uL21vZGVscy9TcGFubmluZ1RyZWUvc3Bhbm5pbmdUcmVlTGlua1wiO1xyXG5pbXBvcnQge1NwYW5uaW5nVHJlZU5vZGV9IGZyb20gXCIuLi9tb2RlbHMvU3Bhbm5pbmdUcmVlL3NwYW5uaW5nVHJlZU5vZGVcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBwYXJzZTogKGlucHV0OiBzdHJpbmcpID0+IHtncmFwaE5hbWU6IHN0cmluZywgbm9kZXM6IFNwYW5uaW5nVHJlZU5vZGVbXX0gPVxyXG5cdChpbnB1dDogc3RyaW5nKSA9PiB7XHJcblx0XHRjb25zdCB0ZW1wTGlua3M6IHtub2Rlczogc3RyaW5nW10sIGNvc3Q6IG51bWJlcn1bXSA9IFtdO1xyXG5cdFx0Y29uc3Qgbm9kZXM6IFNwYW5uaW5nVHJlZU5vZGVbXSA9IFtdO1xyXG5cdFx0Y29uc3QgZ3JhcGhOYW1lID0gaW5wdXQubWF0Y2goLyg/PD1HcmFwaFsgXSkoXFxTKykvZylbMF07XHJcblx0XHRjb25zdCBub2RlTWF0Y2hlcyA9IGlucHV0Lm1hdGNoKC9bXlxcc10rKD89ID0pfCg/PD09IClbMS05XSovZyk7XHJcblx0XHRjb25zdCBsaW5rTWF0Y2hlcyA9IGlucHV0Lm1hdGNoKC9bXlxcc10rKD89IC0pfFteXFxzXSsoPz0gOil8KD88PTogKVswLTldKi9nKTtcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGlua01hdGNoZXMubGVuZ3RoOyBpID0gaSArIDMpIHtcclxuXHRcdFx0dGVtcExpbmtzLnB1c2goe1xyXG5cdFx0XHRcdG5vZGVzOiBbbGlua01hdGNoZXNbaV0sIGxpbmtNYXRjaGVzW2kgKyAxXV0sXHJcblx0XHRcdFx0Y29zdDogK2xpbmtNYXRjaGVzW2kgKyAyXSAvLyBzb21lIGxpdHRsZSB0cmljayB0byBjYXN0IGEgc3RyaW5nIHRvIG51bWJlciArJzQnID09PSA0XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBub2RlTWF0Y2hlcy5sZW5ndGg7IGkgPSBpICsgMikge1xyXG5cdFx0XHRjb25zdCBuYW1lID0gbm9kZU1hdGNoZXNbaV07XHJcblx0XHRcdGNvbnN0IHZhbHVlID0gK25vZGVNYXRjaGVzW2kgKyAxXTtcclxuXHRcdFx0Y29uc3QgbGlua3MgPSB0ZW1wTGlua3MuZmlsdGVyKGwgPT4gbC5ub2Rlcy5maW5kSW5kZXgobiA9PiBuID09PSBuYW1lKSAhPT0gLTEpXHJcblx0XHRcdFx0Lm1hcChsaW5rID0+IG5ldyBTcGFubmluZ1RyZWVMaW5rKGxpbmsubm9kZXMuZmluZChuID0+IG4gIT09IG5hbWUpLCBsaW5rLmNvc3QpKTtcclxuXHRcdFx0bm9kZXMucHVzaChuZXcgU3Bhbm5pbmdUcmVlTm9kZShuYW1lLCB2YWx1ZSwgbGlua3MpKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGdyYXBoTmFtZSxcclxuXHRcdFx0bm9kZXNcclxuXHRcdH1cclxuXHR9O1xyXG4iLCJpbXBvcnQge01pbmltYWxTcGFuVHJlZX0gZnJvbSBcIi4uL21vZGVscy9TcGFubmluZ1RyZWUvbWluaW1hbFNwYW5uaW5nVHJlZVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHN0cmluZ2lmeTogKG1pbmltYWxTcGFuVHJlZTogTWluaW1hbFNwYW5UcmVlLCBuYW1lOiBzdHJpbmcpID0+IHN0cmluZyA9XHJcblx0KG1pbmltYWxTcGFuVHJlZSwgbmFtZTogc3RyaW5nKSA9PiBgXHJcblNwYW5uaW5nLVRyZWUgb2YgJHtuYW1lfSB7XHJcblx0Um9vdDogJHttaW5pbWFsU3BhblRyZWUucm9vdC5uYW1lfTtcclxuXHQke21pbmltYWxTcGFuVHJlZS5saW5rVG9TdHJpbmcoKX1cclxufWA7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=
!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=0)}([function(t,n,e){"use strict";e.r(n);var r=function(){return function(t,n){this.toNode=t,this.cost=n}}(),o=function(){return function(t,n,e){this.name=t,this.value=n,this.links=e}}(),i=function(){return function(t,n){this.nodes=t,this.cost=n}}(),s=function(){function t(t){this.shortestLinks=[],this.allNodes=[];for(var n=t.slice(),e=(n=n.sort(function(t,n){return t.cost-n.cost}).reverse()).flatMap(function(t){return t.nodes}),r=new Map,o=0,i=e;o<i.length;o++){var s=i[o];r.has(s.name)||(r.set(s.name,!0),this.allNodes.push(s))}for(this.root=this.allNodes.sort(function(t,n){return t.value-n.value})[0];!this.allNodesAreConnected(this.allNodes);)this.shortestLinks.push(n.pop());this.shortestLinks.length}return t.prototype.getNextNodeWhenGoing=function(t,n){return this.getNextStep(t,n)},t.prototype.getNextStep=function(t,n,e,r){if(t.name===n.name)return e;for(var o=0,i=this.shortestLinks.filter(function(n){return-1!==n.nodes.findIndex(function(n){return n.name===t.name})}).map(function(n){return n.nodes.find(function(n){return n.name!==t.name})}).filter(function(t){return!r||t.name!==r});o<i.length;o++){var s=i[o],u=void 0;if(u=e?this.getNextStep(s,n,e,t):this.getNextStep(s,n,s,t))return u}},t.prototype.allNodesAreConnected=function(t){for(var n=[],e=this.shortestLinks.flatMap(function(t){return t.nodes}),r=new Map,o=0,i=e;o<i.length;o++){var s=i[o];r.has(s.name)||(r.set(s.name,!0),n.push(s))}var u=n.length===t.length;if(u){var c=this.shortestLinks[0].nodes[0];this.getConnectedNodes(c);this.allNodes}return u&&!0},t.prototype.getConnectedNodes=function(t,n){var e=this;return void 0===n&&(n=[]),this.shortestLinks.filter(function(e){return-1!==e.nodes.findIndex(function(e){return e.name===t.name&&-1===n.findIndex(function(t){return t.name===e.name})})}).forEach(function(r){var o=r.nodes.find(function(n){return n.name!==t.name});n.push(o),n.push.apply(n,e.getConnectedNodes(o))}),n},t.prototype.linkToString=function(){var t=this.shortestLinks.map(function(t){return new i(t.nodes.sort(function(t,n){return t.name<n.name?-1:t.name>n.name?1:0}),t.cost)}).sort(function(t,n){if(t.nodes[0].name<n.nodes[0].name)return-1;if(t.nodes[0].name>n.nodes[0].name)return 1;if(t.nodes[0].name===n.nodes[0].name){if(t.nodes[1].name<n.nodes[1].name)return-1;if(t.nodes[1].name>n.nodes[1].name)return 1}return 0}),n="";return t.forEach(function(t){n+=t.nodes[0].name+" - "+t.nodes[1].name+";\n\t"}),n},t}(),u=function(t,n,e,r){return new(e||(e=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(s,u)}c((r=r.apply(t,n||[])).next())})},c=function(t,n){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(t,s)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},a=function(){function t(t,n,e){var r=this;this.rootOfIndexing=!1,this.returnTo=[],this.DISCOVERED_LINKS=[],this.name=t,this.value=n,this.connection=e,this.connection.receive.subscribe(function(t){return r.receive(t)})}return t.prototype.indexNetwork=function(){return u(this,void 0,void 0,function(){var t,n=this;return c(this,function(e){switch(e.label){case 0:return this.rootOfIndexing=!0,[4,this.connection.ping];case 1:return t=e.sent(),this.WAITING_FOR_BRIDGES=t,t.forEach(function(t){n.send({protocol:"CSTP",content:{message:"Dear Neighbor hear is my name and the package provides you the cost to me. Follow the CSTP.",from:{name:n.name,value:n.value}},target:t})}),[2]}})})},t.prototype.send=function(t){this.connection.send.next(t)},t.prototype.handleCSTPPackage=function(t){var n,e=this;if(!this.INDEXED){if(console.log(this.name,"received pkg"),0!==this.DISCOVERED_LINKS.length||this.rootOfIndexing||(this.connection.ping.then(function(n){if(e.WAITING_FOR_BRIDGES=n.filter(function(n){return n!==t.content.from.name}),console.log(e.name," waiting for:",e.WAITING_FOR_BRIDGES),e.WAITING_FOR_BRIDGES.forEach(function(t){return e.send({protocol:"CSTP",content:{message:"Dear Neighbor hear is my name and the package provides you the cost to me. Follow the CSTP.",from:{name:e.name,value:e.value}},target:t})}),0===e.WAITING_FOR_BRIDGES.length){var r=e.DISCOVERED_LINKS[0].nodes.find(function(t){return t.name!==e.name});if(e.send({protocol:"CSTP",content:{message:"Dear Neighbor hear are my discovered links, you may concat them with yours and send them back!",discoveredLinks:e.DISCOVERED_LINKS},target:r.name}),e.INDEXED=!0,e.rootOfIndexing){var o=new s(e.DISCOVERED_LINKS);e.connection.finishedIndexing.next(o)}else e.connection.finishedIndexing.next()}}),this.DISCOVERED_LINKS.push({cost:t.cost,nodes:[{name:this.name,value:this.value},t.content.from]}),this.returnTo.push(t.content.from.name),console.log("returning from ",this.name,"to ",this.returnTo)),this.WAITING_FOR_BRIDGES&&t.content.discoveredLinks){var r=t.content.discoveredLinks[0].nodes.find(function(t){return t.name!==e.name});this.WAITING_FOR_BRIDGES.splice(this.WAITING_FOR_BRIDGES.findIndex(function(t){return t===r}),1),console.log(this.name," waiting for:",this.WAITING_FOR_BRIDGES),(n=this.DISCOVERED_LINKS).push.apply(n,t.content.discoveredLinks)}else this.WAITING_FOR_BRIDGES&&t.content.from&&(this.WAITING_FOR_BRIDGES.splice(this.WAITING_FOR_BRIDGES.findIndex(function(n){return n===t.content.from.name}),1),console.log(this.name," waiting for:",this.WAITING_FOR_BRIDGES),this.returnTo.push(t.content.from.name),console.log("returning from ",this.name,"to ",this.returnTo),this.DISCOVERED_LINKS.push({cost:t.cost,nodes:[{name:this.name,value:this.value},t.content.from]}));if(this.WAITING_FOR_BRIDGES&&0===this.WAITING_FOR_BRIDGES.length)if(this.returnTo.forEach(function(t){e.send({protocol:"CSTP",content:{message:"Dear Neighbor hear are my discovered links, you may concat them with yours and send them back!",discoveredLinks:e.DISCOVERED_LINKS},target:t})}),this.INDEXED=!0,console.log("Node has finished ",this.name),this.rootOfIndexing){var o=[];this.DISCOVERED_LINKS.forEach(function(t){o.find(function(n){return-1!==t.nodes.findIndex(function(t){return t.name===n.nodes[0].name})&&-1!==t.nodes.findIndex(function(t){return t.name===n.nodes[1].name})})||o.push(t)});var i=new s(o);this.connection.finishedIndexing.next(i)}else this.connection.finishedIndexing.next()}},t.prototype.receive=function(t){"CSTP"===t.protocol&&this.handleCSTPPackage(t)},t}(),h=function(t,n){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function f(t,n){function e(){this.constructor=t}h(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}function l(t){return"function"==typeof t}var p=!1,d={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;p=t},get useDeprecatedSynchronousErrorHandling(){return p}};function b(t){setTimeout(function(){throw t})}var y={closed:!0,next:function(t){},error:function(t){if(d.useDeprecatedSynchronousErrorHandling)throw t;b(t)},complete:function(){}},m=Array.isArray||function(t){return t&&"number"==typeof t.length};function v(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,n){return n+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}v.prototype=Object.create(Error.prototype);var g=v,_=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var n;return t.prototype.unsubscribe=function(){var t,n=!1;if(!this.closed){var e=this._parent,r=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s,u=-1,c=r?r.length:0;e;)e.remove(this),e=++u<c&&r[u]||null;if(l(o))try{o.call(this)}catch(e){n=!0,t=e instanceof g?E(e.errors):[e]}if(m(i))for(u=-1,c=i.length;++u<c;){var a=i[u];if(null!==(s=a)&&"object"==typeof s)try{a.unsubscribe()}catch(e){n=!0,t=t||[],e instanceof g?t=t.concat(E(e.errors)):t.push(e)}}if(n)throw new g(t)}},t.prototype.add=function(n){var e=n;switch(typeof n){case"function":e=new t(n);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof t)){var r=e;(e=new t)._subscriptions=[r]}break;default:if(!n)return t.EMPTY;throw new Error("unrecognized teardown "+n+" added to Subscription.")}if(e._addParent(this)){var o=this._subscriptions;o?o.push(e):this._subscriptions=[e]}return e},t.prototype.remove=function(t){var n=this._subscriptions;if(n){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}},t.prototype._addParent=function(t){var n=this._parent,e=this._parents;return n!==t&&(n?e?-1===e.indexOf(t)&&(e.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))},t.EMPTY=((n=new t).closed=!0,n),t}();function E(t){return t.reduce(function(t,n){return t.concat(n instanceof g?n.errors:n)},[])}var w="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),S=function(t){function n(e,r,o){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=y;break;case 1:if(!e){i.destination=y;break}if("object"==typeof e){e instanceof n?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new I(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new I(i,e,r,o)}return i}return f(n,t),n.prototype[w]=function(){return this},n.create=function(t,e,r){var o=new n(t,e,r);return o.syncErrorThrowable=!1,o},n.prototype.next=function(t){this.isStopped||this._next(t)},n.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},n.prototype._next=function(t){this.destination.next(t)},n.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},n.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},n.prototype._unsubscribeAndRecycle=function(){var t=this._parent,n=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=n,this},n}(_),I=function(t){function n(n,e,r,o){var i,s=t.call(this)||this;s._parentSubscriber=n;var u=s;return l(e)?i=e:e&&(i=e.next,r=e.error,o=e.complete,e!==y&&(l((u=Object.create(e)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=i,s._error=r,s._complete=o,s}return f(n,t),n.prototype.next=function(t){if(!this.isStopped&&this._next){var n=this._parentSubscriber;d.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},n.prototype.error=function(t){if(!this.isStopped){var n=this._parentSubscriber,e=d.useDeprecatedSynchronousErrorHandling;if(this._error)e&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)e?(n.syncErrorValue=t,n.syncErrorThrown=!0):b(t),this.unsubscribe();else{if(this.unsubscribe(),e)throw t;b(t)}}},n.prototype.complete=function(){var t=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var e=function(){return t._complete.call(t._context)};d.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?(this.__tryOrSetError(n,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},n.prototype.__tryOrUnsub=function(t,n){try{t.call(this._context,n)}catch(t){if(this.unsubscribe(),d.useDeprecatedSynchronousErrorHandling)throw t;b(t)}},n.prototype.__tryOrSetError=function(t,n,e){if(!d.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,e)}catch(n){return d.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=n,t.syncErrorThrown=!0,!0):(b(n),!0)}return!1},n.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},n}(S);var x="function"==typeof Symbol&&Symbol.observable||"@@observable";function T(){}function N(t){return t?1===t.length?t[0]:function(n){return t.reduce(function(t,n){return n(t)},n)}:T}var O=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(n){var e=new t;return e.source=this,e.operator=n,e},t.prototype.subscribe=function(t,n,e){var r=this.operator,o=function(t,n,e){if(t){if(t instanceof S)return t;if(t[w])return t[w]()}return t||n||e?new S(t,n,e):new S(y)}(t,n,e);if(r?o.add(r.call(o,this.source)):o.add(this.source||d.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),d.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){d.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=n),!function(t){for(;t;){var n=t,e=n.closed,r=n.destination,o=n.isStopped;if(e||o)return!1;t=r&&r instanceof S?r:null}return!0}(t)?console.warn(n):t.error(n)}},t.prototype.forEach=function(t,n){var e=this;return new(n=D(n))(function(n,r){var o;o=e.subscribe(function(n){try{t(n)}catch(t){r(t),o&&o.unsubscribe()}},r,n)})},t.prototype._subscribe=function(t){var n=this.source;return n&&n.subscribe(t)},t.prototype[x]=function(){return this},t.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0===t.length?this:N(t)(this)},t.prototype.toPromise=function(t){var n=this;return new(t=D(t))(function(t,e){var r;n.subscribe(function(t){return r=t},function(t){return e(t)},function(){return t(r)})})},t.create=function(n){return new t(n)},t}();function D(t){if(t||(t=d.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function k(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}k.prototype=Object.create(Error.prototype);var R=k,G=function(t){function n(n,e){var r=t.call(this)||this;return r.subject=n,r.subscriber=e,r.closed=!1,r}return f(n,t),n.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,n=t.observers;if(this.subject=null,n&&0!==n.length&&!t.isStopped&&!t.closed){var e=n.indexOf(this.subscriber);-1!==e&&n.splice(e,1)}}},n}(_),P=function(t){function n(n){var e=t.call(this,n)||this;return e.destination=n,e}return f(n,t),n}(S),C=function(t){function n(){var n=t.call(this)||this;return n.observers=[],n.closed=!1,n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return f(n,t),n.prototype[w]=function(){return new P(this)},n.prototype.lift=function(t){var n=new L(this,this);return n.operator=t,n},n.prototype.next=function(t){if(this.closed)throw new R;if(!this.isStopped)for(var n=this.observers,e=n.length,r=n.slice(),o=0;o<e;o++)r[o].next(t)},n.prototype.error=function(t){if(this.closed)throw new R;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var n=this.observers,e=n.length,r=n.slice(),o=0;o<e;o++)r[o].error(t);this.observers.length=0},n.prototype.complete=function(){if(this.closed)throw new R;this.isStopped=!0;for(var t=this.observers,n=t.length,e=t.slice(),r=0;r<n;r++)e[r].complete();this.observers.length=0},n.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},n.prototype._trySubscribe=function(n){if(this.closed)throw new R;return t.prototype._trySubscribe.call(this,n)},n.prototype._subscribe=function(t){if(this.closed)throw new R;return this.hasError?(t.error(this.thrownError),_.EMPTY):this.isStopped?(t.complete(),_.EMPTY):(this.observers.push(t),new G(this,t))},n.prototype.asObservable=function(){var t=new O;return t.source=this,t},n.create=function(t,n){return new L(t,n)},n}(O),L=function(t){function n(n,e){var r=t.call(this)||this;return r.destination=n,r.source=e,r}return f(n,t),n.prototype.next=function(t){var n=this.destination;n&&n.next&&n.next(t)},n.prototype.error=function(t){var n=this.destination;n&&n.error&&this.destination.error(t)},n.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},n.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):_.EMPTY},n}(C),A=function(){return function(t){this.send=new C,this.receive=new C,this.finishedIndexing=new C,this.ping=new Promise(function(n){return n(t)})}}(),B=function(t,n,e,r){return new(e||(e=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(s,u)}c((r=r.apply(t,n||[])).next())})},j=function(t,n){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(t,s)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},F=function(){return function(t){var n=this;this.nodes=t,this.bridges=[],this.startIndexingFromRandomBridge=function(){return new Promise(function(t){return B(n,void 0,void 0,function(){var n;return j(this,function(e){return n=this.bridges[Math.round(Math.random()*this.bridges.length)],console.log(this.bridges,n),n.connection.finishedIndexing.subscribe(function(n){return t(n)}),n.indexNetwork().then(function(){return console.log("wtf")}),[2]})})})},t.forEach(function(t){var e=t.links.map(function(t){return t.toNode}),r=new A(e);n.bridges.push(new a(t.name,t.value,r))}),this.bridges.forEach(function(e){var r=t.find(function(t){return t.name===e.name}).links,o=r.map(function(t){return t.toNode});e.connection.send.subscribe(function(t){console.log(e.name+">>>"+t.target),o.find(function(n){return n===t.target})&&(t.cost=r.find(function(n){return n.toNode===t.target}).cost,setTimeout(function(){return n.bridges.find(function(n){return n.name===t.target}).connection.receive.next(t)},1e3*t.cost))})})}}(),M=document.getElementById("textIn"),W=document.getElementById("textOut"),V=document.getElementById("simulate_btn");M.value="\nGraph mygraph {\n\t// Node\n\tA = 2;\n\tB = 1;\n\tC = 3;\n\t\n\t// Links und zugeh. Kosten\n\tA - B : 1;\n\tA - C : 1;\n\tC - B : 2;\n}",console.log(M);V.addEventListener("click",function(){var t=function(t){for(var n=[],e=[],i=t.match(/(?<=Graph[ ])(\S+)/g)[0],s=t.match(/[^\s]+(?= =)|(?<== )[1-9]*/g),u=t.match(/[^\s]+(?= -)|[^\s]+(?= :)|(?<=: )[0-9]*/g),c=0;c<u.length;c+=3)n.push({nodes:[u[c],u[c+1]],cost:+u[c+2]});var a=function(t){var i=s[t],u=+s[t+1],c=n.filter(function(t){return-1!==t.nodes.findIndex(function(t){return t===i})}).map(function(t){return new r(t.nodes.find(function(t){return t!==i}),t.cost)});e.push(new o(i,u,c))};for(c=0;c<s.length;c+=2)a(c);return{graphName:i,nodes:e}}(M.value),n=new F(t.nodes);console.log(n),n.startIndexingFromRandomBridge().then(function(n){var e;W.value=(e=n,"\nSpanning-Tree of "+t.graphName+" {\n\tRoot: "+e.root.name+";\n\t"+e.linkToString()+"\n}")})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9TcGFubmluZ1RyZWUvc3Bhbm5pbmdUcmVlTGluay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1NwYW5uaW5nVHJlZS9zcGFubmluZ1RyZWVOb2RlLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU2ltdWxhdGlvbi9TaW11bGF0aW9uTGluay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1NwYW5uaW5nVHJlZS9taW5pbWFsU3Bhbm5pbmdUcmVlLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU2ltdWxhdGlvbi9CcmlkZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL2lzRnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvY29uZmlnLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaG9zdFJlcG9ydEVycm9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL09ic2VydmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaXNBcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL1Vuc3Vic2NyaXB0aW9uRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvU3Vic2NyaXB0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaXNPYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvc3ltYm9sL3J4U3Vic2NyaWJlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9TdWJzY3JpYmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3N5bWJvbC9vYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvbm9vcC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL3BpcGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL3RvU3Vic2NyaWJlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL2NhblJlcG9ydEVycm9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvU3ViamVjdFN1YnNjcmlwdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9TdWJqZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU2ltdWxhdGlvbi9TaW11bGF0aW9uQ29ubmVjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1NpbXVsYXRpb24vU2ltdWxhdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFyc2VyL2dyYXBoUGFyc2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9wYXJzZXIvbXN0U3RyaW5naWZ5LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiU3Bhbm5pbmdUcmVlTGluayIsInRvTm9kZSIsImNvc3QiLCJ0aGlzIiwiU3Bhbm5pbmdUcmVlTm9kZSIsImxpbmtzIiwiU2ltdWxhdGlvbkxpbmsiLCJub2RlcyIsIm1pbmltYWxTcGFubmluZ1RyZWVfTWluaW1hbFNwYW5UcmVlIiwiTWluaW1hbFNwYW5UcmVlIiwic3BhblRyZWVMaW5rcyIsInNob3J0ZXN0TGlua3MiLCJhbGxOb2RlcyIsInNsaWNlIiwiYXJyYXkiLCJzb3J0IiwiYSIsImIiLCJyZXZlcnNlIiwiZmxhdE1hcCIsIm1hcCIsIk1hcCIsIl9pIiwiYXJyYXlfMSIsImxlbmd0aCIsIml0ZW0iLCJoYXMiLCJzZXQiLCJwdXNoIiwicm9vdCIsImFsbE5vZGVzQXJlQ29ubmVjdGVkIiwicG9wIiwiZ2V0TmV4dE5vZGVXaGVuR29pbmciLCJmcm9tIiwidG8iLCJnZXROZXh0U3RlcCIsInBvc3NpYmxlUmV0IiwibGFzdEZyb20iLCJub2Rlc18xIiwiZmlsdGVyIiwiZmluZEluZGV4Iiwic2libGluZ0xpbmsiLCJmaW5kIiwibm9kZSIsInJldCIsInJlc3VsdCIsImFycmF5XzIiLCJhbGxOb2Rlc0FyZUluY2x1ZGVkIiwidGVtcE5vZGUiLCJnZXRDb25uZWN0ZWROb2RlcyIsInJlcyIsIl90aGlzIiwiZm9yRWFjaCIsIm5vZGUxIiwiYXBwbHkiLCJsaW5rVG9TdHJpbmciLCJzb3J0ZWQiLCJsaW5rIiwiQnJpZGdlX0JyaWRnZSIsIkJyaWRnZSIsImNvbm5lY3Rpb24iLCJyb290T2ZJbmRleGluZyIsInJldHVyblRvIiwiRElTQ09WRVJFRF9MSU5LUyIsInJlY2VpdmUiLCJzdWJzY3JpYmUiLCJwa2ciLCJpbmRleE5ldHdvcmsiLCJwaW5nIiwic2libGluZ3MiLCJfYSIsInNlbnQiLCJXQUlUSU5HX0ZPUl9CUklER0VTIiwidGFyZ2V0Iiwic2VuZCIsInByb3RvY29sIiwiY29udGVudCIsIm1lc3NhZ2UiLCJuZXh0IiwiaGFuZGxlQ1NUUFBhY2thZ2UiLCJJTkRFWEVEIiwiY29uc29sZSIsImxvZyIsInRoZW4iLCJicmlkZ2VzIiwiZGlzY292ZXJlZExpbmtzIiwibXN0IiwiZmluaXNoZWRJbmRleGluZyIsIm5hbWVfMSIsInNwbGljZSIsImxpbmtzXzEiLCJleHRlbmRTdGF0aWNzIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsIl9fZXh0ZW5kcyIsIl9fIiwiY29uc3RydWN0b3IiLCJpc0Z1bmN0aW9uIiwieCIsIl9lbmFibGVfc3VwZXJfZ3Jvc3NfbW9kZV90aGF0X3dpbGxfY2F1c2VfYmFkX3RoaW5ncyIsImNvbmZpZyIsIlByb21pc2UiLCJ1bmRlZmluZWQiLCJ1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nIiwiRXJyb3IiLCJzdGFjayIsImhvc3RSZXBvcnRFcnJvciIsImVyciIsInNldFRpbWVvdXQiLCJlbXB0eSIsImNsb3NlZCIsImVycm9yIiwiY29tcGxldGUiLCJpc0FycmF5IiwiVW5zdWJzY3JpcHRpb25FcnJvckltcGwiLCJlcnJvcnMiLCJ0b1N0cmluZyIsImpvaW4iLCJVbnN1YnNjcmlwdGlvbkVycm9yIiwiU3Vic2NyaXB0aW9uX1N1YnNjcmlwdGlvbiIsIlN1YnNjcmlwdGlvbiIsInVuc3Vic2NyaWJlIiwiX3BhcmVudCIsIl9wYXJlbnRzIiwiX3N1YnNjcmlwdGlvbnMiLCJfdW5zdWJzY3JpYmUiLCJoYXNFcnJvcnMiLCJpbmRleCIsImxlbiIsInJlbW92ZSIsImUiLCJmbGF0dGVuVW5zdWJzY3JpcHRpb25FcnJvcnMiLCJzdWIiLCJjb25jYXQiLCJhZGQiLCJ0ZWFyZG93biIsInN1YnNjcmlwdGlvbiIsInRtcCIsIkVNUFRZIiwiX2FkZFBhcmVudCIsInN1YnNjcmlwdGlvbnMiLCJzdWJzY3JpcHRpb25JbmRleCIsImluZGV4T2YiLCJwYXJlbnQiLCJyZWR1Y2UiLCJlcnJzIiwicnhTdWJzY3JpYmVyIiwiTWF0aCIsInJhbmRvbSIsIlN1YnNjcmliZXJfU3Vic2NyaWJlciIsIl9zdXBlciIsIlN1YnNjcmliZXIiLCJkZXN0aW5hdGlvbk9yTmV4dCIsInN5bmNFcnJvclZhbHVlIiwic3luY0Vycm9yVGhyb3duIiwic3luY0Vycm9yVGhyb3dhYmxlIiwiaXNTdG9wcGVkIiwiYXJndW1lbnRzIiwiZGVzdGluYXRpb24iLCJTdWJzY3JpYmVyX1NhZmVTdWJzY3JpYmVyIiwic3Vic2NyaWJlciIsIl9uZXh0IiwiX2Vycm9yIiwiX2NvbXBsZXRlIiwiX3Vuc3Vic2NyaWJlQW5kUmVjeWNsZSIsIlNhZmVTdWJzY3JpYmVyIiwiX3BhcmVudFN1YnNjcmliZXIiLCJvYnNlcnZlck9yTmV4dCIsImNvbnRleHQiLCJfY29udGV4dCIsIl9fdHJ5T3JTZXRFcnJvciIsIl9fdHJ5T3JVbnN1YiIsIndyYXBwZWRDb21wbGV0ZSIsImZuIiwib2JzZXJ2YWJsZV9vYnNlcnZhYmxlIiwib2JzZXJ2YWJsZSIsIm5vb3AiLCJwaXBlRnJvbUFycmF5IiwiZm5zIiwiaW5wdXQiLCJwcmV2IiwiT2JzZXJ2YWJsZV9PYnNlcnZhYmxlIiwiT2JzZXJ2YWJsZSIsIl9pc1NjYWxhciIsIl9zdWJzY3JpYmUiLCJsaWZ0Iiwib3BlcmF0b3IiLCJzb3VyY2UiLCJzaW5rIiwibmV4dE9yT2JzZXJ2ZXIiLCJ0b1N1YnNjcmliZXIiLCJfdHJ5U3Vic2NyaWJlIiwib2JzZXJ2ZXIiLCJjbG9zZWRfMSIsImNhblJlcG9ydEVycm9yIiwid2FybiIsInByb21pc2VDdG9yIiwiZ2V0UHJvbWlzZUN0b3IiLCJyZXNvbHZlIiwicmVqZWN0IiwicGlwZSIsIm9wZXJhdGlvbnMiLCJ0b1Byb21pc2UiLCJPYmplY3RVbnN1YnNjcmliZWRFcnJvckltcGwiLCJPYmplY3RVbnN1YnNjcmliZWRFcnJvciIsIlN1YmplY3RTdWJzY3JpcHRpb25fU3ViamVjdFN1YnNjcmlwdGlvbiIsIlN1YmplY3RTdWJzY3JpcHRpb24iLCJzdWJqZWN0Iiwib2JzZXJ2ZXJzIiwic3Vic2NyaWJlckluZGV4IiwiU3ViamVjdF9TdWJqZWN0U3Vic2NyaWJlciIsIlN1YmplY3RTdWJzY3JpYmVyIiwiU3ViamVjdF9TdWJqZWN0IiwiU3ViamVjdCIsImhhc0Vycm9yIiwidGhyb3duRXJyb3IiLCJTdWJqZWN0X0Fub255bW91c1N1YmplY3QiLCJjb3B5IiwiYXNPYnNlcnZhYmxlIiwiQW5vbnltb3VzU3ViamVjdCIsIlNpbXVsYXRpb25Db25uZWN0aW9uX1NpbXVsYXRpb25Db25uZWN0aW9uIiwic2libGluZ0JyaWRnZXMiLCJTaW11bGF0aW9uX1NpbXVsYXRpb24iLCJzdGFydEluZGV4aW5nRnJvbVJhbmRvbUJyaWRnZSIsIlNpbXVsYXRpb25fYXdhaXRlciIsImJyaWRnZSIsInJvdW5kIiwic2libGluZ05vZGVzIiwiY29ubiIsImlucHV0QXJlYSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJvdXRwdXRBcmVhIiwic2ltdWxhdGlvbkJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJwYXJzZVJlc3VsdCIsInRlbXBMaW5rcyIsImdyYXBoTmFtZSIsIm1hdGNoIiwibm9kZU1hdGNoZXMiLCJsaW5rTWF0Y2hlcyIsInBhcnNlIiwic2ltdWxhdGlvbiIsIm1pbmltYWxTcGFuVHJlZSJdLCJtYXBw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Q0FDTjhRLFVBQVNBLEVBQ1R2TyxNQUFLQSxHRG9CZ0IyTyxDQUFNWixFQUFVclAsT0FDOUJrUSxFQUFhLElBQUlwQixFQUFXYSxFQUFZck8sT0FDOUMwRSxRQUFRQyxJQUFJaUssR0FDWkEsRUFBV25CLGdDQUFnQzdJLEtBQUssU0FBQUcsR0U3Q25ELElBQUM4SixFRjhDTVgsRUFBV3hQLE9FOUNqQm1RLEVGOENtQzlKLEVFOUNELHNCRjhDTXNKLEVBQVlFLFVFN0MvQixlQUNkTSxFQUFnQnZOLEtBQUt0RCxLQUFJLFFBQy9CNlEsRUFBZ0I3TCxlQUFjIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBjbGFzcyBTcGFubmluZ1RyZWVMaW5rIHtcclxuXHRjb25zdHJ1Y3RvcihwdWJsaWMgdG9Ob2RlOiBzdHJpbmcsIHB1YmxpYyBjb3N0OiBudW1iZXIpIHtcclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHtTcGFubmluZ1RyZWVMaW5rfSBmcm9tIFwiLi9zcGFubmluZ1RyZWVMaW5rXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU3Bhbm5pbmdUcmVlTm9kZSB7XHJcblx0Y29uc3RydWN0b3IocHVibGljIG5hbWU6IHN0cmluZywgcHVibGljIHZhbHVlOiBudW1iZXIsIHB1YmxpYyBsaW5rczogU3Bhbm5pbmdUcmVlTGlua1tdKSB7XHJcblx0fVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBTaW11bGF0aW9uTGluayB7XHJcblx0Y29uc3RydWN0b3IocHVibGljIG5vZGVzOiB7bmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyfVtdLCBwdWJsaWMgY29zdDogbnVtYmVyKXt9XHJcbn1cclxuIiwiaW1wb3J0IHtTaW11bGF0aW9uTGlua30gZnJvbSBcIi4uL1NpbXVsYXRpb24vU2ltdWxhdGlvbkxpbmtcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNaW5pbWFsU3BhblRyZWUge1xyXG4gICAgcHVibGljIHNob3J0ZXN0TGlua3M6IFNpbXVsYXRpb25MaW5rW10gPSBbXTtcclxuICAgIHB1YmxpYyBhbGxOb2RlczogeyBuYW1lOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIgfVtdID0gW107XHJcbiAgICBwdWJsaWMgcm9vdDogeyBuYW1lOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIgfTtcclxuXHJcbiAgICBnZXROZXh0Tm9kZVdoZW5Hb2luZyhmcm9tLCB0bykge1xyXG4gICAgICAgIGxldCBuZXh0U3RlcCA9IHRoaXMuZ2V0TmV4dFN0ZXAoZnJvbSwgdG8pO1xyXG4gICAgICAgIHJldHVybiBuZXh0U3RlcDtcclxuICAgIH1cclxuXHJcbiAgICBnZXROZXh0U3RlcChmcm9tLCB0bywgcG9zc2libGVSZXQ/LCBsYXN0RnJvbT8pIHtcclxuICAgICAgICBpZiAoZnJvbS5uYW1lID09PSB0by5uYW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwb3NzaWJsZVJldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG5vZGVzID0gdGhpcy5zaG9ydGVzdExpbmtzLmZpbHRlcihsID0+IGwubm9kZXMuZmluZEluZGV4KG4gPT4gbi5uYW1lID09PSBmcm9tLm5hbWUpICE9PSAtMSlcclxuICAgICAgICAgICAgLm1hcChzaWJsaW5nTGluayA9PiBzaWJsaW5nTGluay5ub2Rlcy5maW5kKG4gPT4gbi5uYW1lICE9PSBmcm9tLm5hbWUpKS5maWx0ZXIobiA9PiAhbGFzdEZyb20gPyB0cnVlIDogbi5uYW1lICE9PSBsYXN0RnJvbSk7XHJcbiAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIG5vZGVzKSB7XHJcbiAgICAgICAgICAgIGxldCByZXQ7XHJcbiAgICAgICAgICAgIGlmICghcG9zc2libGVSZXQpIHtcclxuICAgICAgICAgICAgICAgIHJldCA9IHRoaXMuZ2V0TmV4dFN0ZXAobm9kZSwgdG8sIG5vZGUsIGZyb20pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0ID0gdGhpcy5nZXROZXh0U3RlcChub2RlLCB0bywgcG9zc2libGVSZXQsIGZyb20pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghIXJldCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhbGxOb2Rlc0FyZUNvbm5lY3RlZChhbGxOb2Rlcykge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGFycmF5ID0gdGhpcy5zaG9ydGVzdExpbmtzLmZsYXRNYXAobCA9PiBsLm5vZGVzKTtcclxuICAgICAgICBjb25zdCBtYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFycmF5KSB7XHJcbiAgICAgICAgICAgIGlmICghbWFwLmhhcyhpdGVtLm5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBtYXAuc2V0KGl0ZW0ubmFtZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYWxsTm9kZXNBcmVJbmNsdWRlZCA9IHJlc3VsdC5sZW5ndGggPT09IGFsbE5vZGVzLmxlbmd0aDtcclxuICAgICAgICBsZXQgYWxsTm9kZXNBcmVDb25uZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmIChhbGxOb2Rlc0FyZUluY2x1ZGVkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRlbXBOb2RlID0gdGhpcy5zaG9ydGVzdExpbmtzWzBdLm5vZGVzWzBdO1xyXG4gICAgICAgICAgICBjb25zdCBub2RlcyA9IHRoaXMuZ2V0Q29ubmVjdGVkTm9kZXModGVtcE5vZGUpO1xyXG4gICAgICAgICAgICBpZihub2RlcyA9PSB0aGlzLmFsbE5vZGVzKXtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFsbE5vZGVzQXJlSW5jbHVkZWQgJiYgYWxsTm9kZXNBcmVDb25uZWN0ZWQ7XHJcbiAgICB9O1xyXG4gICAgcHJpdmF0ZSBnZXRDb25uZWN0ZWROb2Rlcyhub2RlLCByZXMgPSBbXSkge1xyXG4gICAgICAgIGNvbnN0IGxpbmtzID0gdGhpcy5zaG9ydGVzdExpbmtzLmZpbHRlcihsID0+IGwubm9kZXMuZmluZEluZGV4KG4gPT4gbi5uYW1lID09PSBub2RlLm5hbWUgJiYgcmVzLmZpbmRJbmRleChub2RlID0+IG5vZGUubmFtZSA9PT0gbi5uYW1lKSA9PT0gLTEpICE9PSAtMSk7XHJcbiAgICAgICAgbGlua3MuZm9yRWFjaChsID0+IHtcclxuICAgICAgICAgICAgbGV0IG5vZGUxID0gbC5ub2Rlcy5maW5kKG4gPT4gbi5uYW1lICE9PSBub2RlLm5hbWUpO1xyXG4gICAgICAgICAgICByZXMucHVzaChub2RlMSk7XHJcbiAgICAgICAgICAgIHJlcy5wdXNoKC4uLnRoaXMuZ2V0Q29ubmVjdGVkTm9kZXMobm9kZTEpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNwYW5UcmVlTGlua3M6IFNpbXVsYXRpb25MaW5rW10pIHtcclxuXHJcbiAgICAgICAgbGV0IGxpbmtzID0gWy4uLnNwYW5UcmVlTGlua3NdO1xyXG4gICAgICAgIGxpbmtzID0gbGlua3Muc29ydCgoYSwgYikgPT4gYS5jb3N0IC0gYi5jb3N0KS5yZXZlcnNlKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGFycmF5ID0gbGlua3MuZmxhdE1hcChsID0+IGwubm9kZXMpO1xyXG5cclxuICAgICAgICBjb25zdCBtYXAgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGFycmF5KSB7XHJcbiAgICAgICAgICAgIGlmICghbWFwLmhhcyhpdGVtLm5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBtYXAuc2V0KGl0ZW0ubmFtZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsbE5vZGVzLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yb290ID0gdGhpcy5hbGxOb2Rlcy5zb3J0KChhLCBiKSA9PiBhLnZhbHVlIC0gYi52YWx1ZSlbMF07XHJcblxyXG4gICAgICAgIHdoaWxlICghdGhpcy5hbGxOb2Rlc0FyZUNvbm5lY3RlZCh0aGlzLmFsbE5vZGVzKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3J0ZXN0TGlua3MucHVzaChsaW5rcy5wb3AoKSlcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvcnRlc3RMaW5rcy5sZW5ndGggPCA1KSB7XHJcbiAgICAgICAgICAgIGRlYnVnZ2VyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsaW5rVG9TdHJpbmcoKSB7XHJcbiAgICAgICAgY29uc3Qgc29ydGVkID0gdGhpcy5zaG9ydGVzdExpbmtzLm1hcChsaW5rID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW11bGF0aW9uTGluayhsaW5rLm5vZGVzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYS5uYW1lIDwgYi5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEubmFtZSA+IGIubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgICAgICB9KSwgbGluay5jb3N0XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSkuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYS5ub2Rlc1swXS5uYW1lIDwgYi5ub2Rlc1swXS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGEubm9kZXNbMF0ubmFtZSA+IGIubm9kZXNbMF0ubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGEubm9kZXNbMF0ubmFtZSA9PT0gYi5ub2Rlc1swXS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYS5ub2Rlc1sxXS5uYW1lIDwgYi5ub2Rlc1sxXS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGEubm9kZXNbMV0ubmFtZSA+IGIubm9kZXNbMV0ubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCByZXQgPSBcIlwiO1xyXG4gICAgICAgIHNvcnRlZC5mb3JFYWNoKGxpbmsgPT4ge1xyXG4gICAgICAgICAgICByZXQgKz0gYCR7bGluay5ub2Rlc1swXS5uYW1lfSAtICR7bGluay5ub2Rlc1sxXS5uYW1lfTtcXG5cXHRgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IHtTaW11bGF0aW9uQ29ubmVjdGlvbn0gZnJvbSBcIi4vU2ltdWxhdGlvbkNvbm5lY3Rpb25cIjtcclxuaW1wb3J0IHtTaW11bGF0aW9uUGFja2FnZX0gZnJvbSBcIi4vU2ltdWxhdGlvblBhY2thZ2VcIjtcclxuaW1wb3J0IHtNaW5pbWFsU3BhblRyZWV9IGZyb20gXCIuLi9TcGFubmluZ1RyZWUvbWluaW1hbFNwYW5uaW5nVHJlZVwiO1xyXG5pbXBvcnQge3RyeVJlc29sdmVQYWNrYWdlfSBmcm9tIFwidHNsaW50L2xpYi91dGlsc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJyaWRnZSB7XHJcbiAgICBwcml2YXRlIHJvb3RPZkluZGV4aW5nID0gZmFsc2U7XHJcbiAgICBwcml2YXRlIHJldHVyblRvOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgLy8gQnJpZGdlIGRhdGFcclxuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgdmFsdWU6IG51bWJlcjtcclxuXHJcbiAgICAvLyBEYXRhIGRpc2NvdmVyZWRcclxuICAgIHB1YmxpYyBrbm93bl9ST09UX0lEPzogc3RyaW5nO1xyXG4gICAgcHVibGljIGtub3duX05FWFRfSE9QX1RPX1JPT1Q/OiBzdHJpbmc7XHJcbiAgICBwdWJsaWMga25vd25fQ09TVF9UT19ST09UPzogbnVtYmVyO1xyXG5cclxuICAgIC8vIGRhdGEgZm9yIENlbnRyYWxTcGFubmluZ1RyZWVQcm90b2NvbFxyXG4gICAgcHVibGljIElOREVYRUQ6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgRElTQ09WRVJFRF9MSU5LUzoge1xyXG4gICAgICAgIG5vZGVzOiB7IG5hbWU6IHN0cmluZywgdmFsdWU6IG51bWJlciB9W107IC8vIG15IG5hbWUgYW5kIGEgY29ubmVjdGVkIGJyaWRnZXMgbmFtZVxyXG4gICAgICAgIGNvc3Q6IG51bWJlcjsgLy8gY29zdCB0byByZWFjaCB0aGUgYnJpZGdlXHJcbiAgICB9W10gPSBbXTtcclxuXHJcbiAgICBwcml2YXRlIFdBSVRJTkdfRk9SX0JSSURHRVM6IHN0cmluZ1tdO1xyXG5cclxuICAgIC8vIHNpbXVsYXRpb24gQ29ubmVjdGlvblxyXG4gICAgcHVibGljIGNvbm5lY3Rpb246IFNpbXVsYXRpb25Db25uZWN0aW9uO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgdmFsdWU6IG51bWJlciwgY29ubmVjdGlvbjogU2ltdWxhdGlvbkNvbm5lY3Rpb24pIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5yZWNlaXZlLnN1YnNjcmliZSgocGtnKSA9PiB0aGlzLnJlY2VpdmUocGtnKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGluZGV4TmV0d29yaygpIHtcclxuICAgICAgICB0aGlzLnJvb3RPZkluZGV4aW5nID0gdHJ1ZTtcclxuICAgICAgICBsZXQgc2libGluZ3MgPSAoYXdhaXQgdGhpcy5jb25uZWN0aW9uLnBpbmcpO1xyXG4gICAgICAgIHRoaXMuV0FJVElOR19GT1JfQlJJREdFUyA9IHNpYmxpbmdzO1xyXG4gICAgICAgIHNpYmxpbmdzLmZvckVhY2godGFyZ2V0ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kKHtcclxuICAgICAgICAgICAgICAgIHByb3RvY29sOiAnQ1NUUCcsXHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0RlYXIgTmVpZ2hib3IgaGVhciBpcyBteSBuYW1lIGFuZCB0aGUgcGFja2FnZSBwcm92aWRlcyB5b3UgdGhlIGNvc3QgdG8gbWUuIEZvbGxvdyB0aGUgQ1NUUC4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IHtuYW1lOiB0aGlzLm5hbWUsIHZhbHVlOiB0aGlzLnZhbHVlfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRhcmdldFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcHVibGljIHNlbmQocGtnOiBTaW11bGF0aW9uUGFja2FnZSkge1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5zZW5kLm5leHQocGtnKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaGFuZGxlQ1NUUFBhY2thZ2UocGtnOiBTaW11bGF0aW9uUGFja2FnZSkge1xyXG4gICAgICAgIGlmKHRoaXMuSU5ERVhFRClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMubmFtZSwgJ3JlY2VpdmVkIHBrZycpO1xyXG4gICAgICAgIGlmICh0aGlzLkRJU0NPVkVSRURfTElOS1MubGVuZ3RoID09PSAwICYmICF0aGlzLnJvb3RPZkluZGV4aW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbi5waW5nLnRoZW4oYnJpZGdlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMgPSBicmlkZ2VzLmZpbHRlcihuYW1lID0+IG5hbWUgIT09IHBrZy5jb250ZW50LmZyb20ubmFtZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm5hbWUsIFwiIHdhaXRpbmcgZm9yOlwiLCB0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTLmZvckVhY2godGFyZ2V0ID0+IHRoaXMuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2w6ICdDU1RQJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdEZWFyIE5laWdoYm9yIGhlYXIgaXMgbXkgbmFtZSBhbmQgdGhlIHBhY2thZ2UgcHJvdmlkZXMgeW91IHRoZSBjb3N0IHRvIG1lLiBGb2xsb3cgdGhlIENTVFAuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbToge25hbWU6IHRoaXMubmFtZSwgdmFsdWU6IHRoaXMudmFsdWV9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmV0dXJuVG8gPSB0aGlzLkRJU0NPVkVSRURfTElOS1NbMF0ubm9kZXMuZmluZChuID0+IG4ubmFtZSAhPT0gdGhpcy5uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm90b2NvbDogJ0NTVFAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRGVhciBOZWlnaGJvciBoZWFyIGFyZSBteSBkaXNjb3ZlcmVkIGxpbmtzLCB5b3UgbWF5IGNvbmNhdCB0aGVtIHdpdGggeW91cnMgYW5kIHNlbmQgdGhlbSBiYWNrIScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNjb3ZlcmVkTGlua3M6IHRoaXMuRElTQ09WRVJFRF9MSU5LU1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHJldHVyblRvLm5hbWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLklOREVYRUQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5yb290T2ZJbmRleGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uZmluaXNoZWRJbmRleGluZy5uZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbXN0ID0gbmV3IE1pbmltYWxTcGFuVHJlZSh0aGlzLkRJU0NPVkVSRURfTElOS1MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uZmluaXNoZWRJbmRleGluZy5uZXh0KG1zdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5ESVNDT1ZFUkVEX0xJTktTLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgY29zdDogcGtnLmNvc3QsXHJcbiAgICAgICAgICAgICAgICBub2RlczogW3tuYW1lOiB0aGlzLm5hbWUsIHZhbHVlOiB0aGlzLnZhbHVlfSwgcGtnLmNvbnRlbnQuZnJvbV1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMucmV0dXJuVG8ucHVzaChwa2cuY29udGVudC5mcm9tLm5hbWUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInJldHVybmluZyBmcm9tIFwiLCB0aGlzLm5hbWUsIFwidG8gXCIsIHRoaXMucmV0dXJuVG8pO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuV0FJVElOR19GT1JfQlJJREdFUyAmJiAhIXBrZy5jb250ZW50LmRpc2NvdmVyZWRMaW5rcykge1xyXG4gICAgICAgICAgICBjb25zdCBuYW1lID0gcGtnLmNvbnRlbnQuZGlzY292ZXJlZExpbmtzWzBdLm5vZGVzLmZpbmQobiA9PiBuLm5hbWUgIT09IHRoaXMubmFtZSk7XHJcbiAgICAgICAgICAgIHRoaXMuV0FJVElOR19GT1JfQlJJREdFUy5zcGxpY2UodGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTLmZpbmRJbmRleChuID0+IG4gPT09IG5hbWUpLCAxKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5uYW1lLCBcIiB3YWl0aW5nIGZvcjpcIiwgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTKTtcclxuICAgICAgICAgICAgdGhpcy5ESVNDT1ZFUkVEX0xJTktTLnB1c2goLi4ucGtnLmNvbnRlbnQuZGlzY292ZXJlZExpbmtzKTtcclxuICAgICAgICB9IGVsc2UgaWYodGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTICYmIHBrZy5jb250ZW50LmZyb20pe1xyXG4gICAgICAgICAgICB0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMuc3BsaWNlKHRoaXMuV0FJVElOR19GT1JfQlJJREdFUy5maW5kSW5kZXgobiA9PiBuID09PSBwa2cuY29udGVudC5mcm9tLm5hbWUpLCAxKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5uYW1lLCBcIiB3YWl0aW5nIGZvcjpcIiwgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTKTtcclxuICAgICAgICAgICAgdGhpcy5yZXR1cm5Uby5wdXNoKHBrZy5jb250ZW50LmZyb20ubmFtZSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmV0dXJuaW5nIGZyb20gXCIsIHRoaXMubmFtZSwgXCJ0byBcIiwgdGhpcy5yZXR1cm5Ubyk7XHJcbiAgICAgICAgICAgIHRoaXMuRElTQ09WRVJFRF9MSU5LUy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGNvc3Q6IHBrZy5jb3N0LFxyXG4gICAgICAgICAgICAgICAgbm9kZXM6IFt7bmFtZTogdGhpcy5uYW1lLCB2YWx1ZTogdGhpcy52YWx1ZX0sIHBrZy5jb250ZW50LmZyb21dXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoISF0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMgJiYgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnJldHVyblRvLmZvckVhY2godGFyZ2V0ID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2w6ICdDU1RQJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdEZWFyIE5laWdoYm9yIGhlYXIgYXJlIG15IGRpc2NvdmVyZWQgbGlua3MsIHlvdSBtYXkgY29uY2F0IHRoZW0gd2l0aCB5b3VycyBhbmQgc2VuZCB0aGVtIGJhY2shJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzY292ZXJlZExpbmtzOiB0aGlzLkRJU0NPVkVSRURfTElOS1NcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLklOREVYRUQgPSB0cnVlO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTm9kZSBoYXMgZmluaXNoZWQgJywgdGhpcy5uYW1lKTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnJvb3RPZkluZGV4aW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uZmluaXNoZWRJbmRleGluZy5uZXh0KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5rcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ESVNDT1ZFUkVEX0xJTktTLmZvckVhY2gobCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIWxpbmtzLmZpbmQobGluayA9PiBsLm5vZGVzLmZpbmRJbmRleChuID0+IG4ubmFtZSA9PT0gbGluay5ub2Rlc1swXS5uYW1lKSAhPT0gLTEgJiYgbC5ub2Rlcy5maW5kSW5kZXgobiA9PiBuLm5hbWUgPT09IGxpbmsubm9kZXNbMV0ubmFtZSkgIT09IC0xKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtzLnB1c2gobCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtc3QgPSBuZXcgTWluaW1hbFNwYW5UcmVlKGxpbmtzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbi5maW5pc2hlZEluZGV4aW5nLm5leHQobXN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVjZWl2ZShwa2c6IFNpbXVsYXRpb25QYWNrYWdlKSB7XHJcbiAgICAgICAgaWYgKHBrZy5wcm90b2NvbCA9PT0gJ0NTVFAnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQ1NUUFBhY2thZ2UocGtnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG5MaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2VcclxudGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGVcclxuTGljZW5zZSBhdCBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuXHJcblRISVMgQ09ERSBJUyBQUk9WSURFRCBPTiBBTiAqQVMgSVMqIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcclxuS0lORCwgRUlUSEVSIEVYUFJFU1MgT1IgSU1QTElFRCwgSU5DTFVESU5HIFdJVEhPVVQgTElNSVRBVElPTiBBTlkgSU1QTElFRFxyXG5XQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgVElUTEUsIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLFxyXG5NRVJDSEFOVEFCTElUWSBPUiBOT04tSU5GUklOR0VNRU5ULlxyXG5cclxuU2VlIHRoZSBBcGFjaGUgVmVyc2lvbiAyLjAgTGljZW5zZSBmb3Igc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zXHJcbmFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIGlmIChlLmluZGV4T2YocFtpXSkgPCAwKVxyXG4gICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgIHJldHVybiB0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcGFyYW0ocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwga2V5KSB7IGRlY29yYXRvcih0YXJnZXQsIGtleSwgcGFyYW1JbmRleCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHJlc3VsdC52YWx1ZSk7IH0pLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIGV4cG9ydHMpIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgcmVzdWx0LmRlZmF1bHQgPSBtb2Q7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgZnVuY3Rpb24gaXNGdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNGdW5jdGlvbi5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbnZhciBfZW5hYmxlX3N1cGVyX2dyb3NzX21vZGVfdGhhdF93aWxsX2NhdXNlX2JhZF90aGluZ3MgPSBmYWxzZTtcbmV4cG9ydCB2YXIgY29uZmlnID0ge1xuICAgIFByb21pc2U6IHVuZGVmaW5lZCxcbiAgICBzZXQgdXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBlcnJvciA9IC8qQF9fUFVSRV9fKi8gbmV3IEVycm9yKCk7XG4gICAgICAgICAgICAvKkBfX1BVUkVfXyovIGNvbnNvbGUud2FybignREVQUkVDQVRFRCEgUnhKUyB3YXMgc2V0IHRvIHVzZSBkZXByZWNhdGVkIHN5bmNocm9ub3VzIGVycm9yIGhhbmRsaW5nIGJlaGF2aW9yIGJ5IGNvZGUgYXQ6IFxcbicgKyBlcnJvci5zdGFjayk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoX2VuYWJsZV9zdXBlcl9ncm9zc19tb2RlX3RoYXRfd2lsbF9jYXVzZV9iYWRfdGhpbmdzKSB7XG4gICAgICAgICAgICAvKkBfX1BVUkVfXyovIGNvbnNvbGUubG9nKCdSeEpTOiBCYWNrIHRvIGEgYmV0dGVyIGVycm9yIGJlaGF2aW9yLiBUaGFuayB5b3UuIDwzJyk7XG4gICAgICAgIH1cbiAgICAgICAgX2VuYWJsZV9zdXBlcl9ncm9zc19tb2RlX3RoYXRfd2lsbF9jYXVzZV9iYWRfdGhpbmdzID0gdmFsdWU7XG4gICAgfSxcbiAgICBnZXQgdXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZygpIHtcbiAgICAgICAgcmV0dXJuIF9lbmFibGVfc3VwZXJfZ3Jvc3NfbW9kZV90aGF0X3dpbGxfY2F1c2VfYmFkX3RoaW5ncztcbiAgICB9LFxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNvbmZpZy5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCBmdW5jdGlvbiBob3N0UmVwb3J0RXJyb3IoZXJyKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHRocm93IGVycjsgfSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ob3N0UmVwb3J0RXJyb3IuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9jb25maWcsX3V0aWxfaG9zdFJlcG9ydEVycm9yIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJy4vY29uZmlnJztcbmltcG9ydCB7IGhvc3RSZXBvcnRFcnJvciB9IGZyb20gJy4vdXRpbC9ob3N0UmVwb3J0RXJyb3InO1xuZXhwb3J0IHZhciBlbXB0eSA9IHtcbiAgICBjbG9zZWQ6IHRydWUsXG4gICAgbmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7IH0sXG4gICAgZXJyb3I6IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBob3N0UmVwb3J0RXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHsgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmVyLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggJiYgdHlwZW9mIHgubGVuZ3RoID09PSAnbnVtYmVyJzsgfSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc0FycmF5LmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZnVuY3Rpb24gVW5zdWJzY3JpcHRpb25FcnJvckltcGwoZXJyb3JzKSB7XG4gICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgICB0aGlzLm1lc3NhZ2UgPSBlcnJvcnMgP1xuICAgICAgICBlcnJvcnMubGVuZ3RoICsgXCIgZXJyb3JzIG9jY3VycmVkIGR1cmluZyB1bnN1YnNjcmlwdGlvbjpcXG5cIiArIGVycm9ycy5tYXAoZnVuY3Rpb24gKGVyciwgaSkgeyByZXR1cm4gaSArIDEgKyBcIikgXCIgKyBlcnIudG9TdHJpbmcoKTsgfSkuam9pbignXFxuICAnKSA6ICcnO1xuICAgIHRoaXMubmFtZSA9ICdVbnN1YnNjcmlwdGlvbkVycm9yJztcbiAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcbiAgICByZXR1cm4gdGhpcztcbn1cblVuc3Vic2NyaXB0aW9uRXJyb3JJbXBsLnByb3RvdHlwZSA9IC8qQF9fUFVSRV9fKi8gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuZXhwb3J0IHZhciBVbnN1YnNjcmlwdGlvbkVycm9yID0gVW5zdWJzY3JpcHRpb25FcnJvckltcGw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1VbnN1YnNjcmlwdGlvbkVycm9yLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfdXRpbF9pc0FycmF5LF91dGlsX2lzT2JqZWN0LF91dGlsX2lzRnVuY3Rpb24sX3V0aWxfVW5zdWJzY3JpcHRpb25FcnJvciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBpc0FycmF5IH0gZnJvbSAnLi91dGlsL2lzQXJyYXknO1xuaW1wb3J0IHsgaXNPYmplY3QgfSBmcm9tICcuL3V0aWwvaXNPYmplY3QnO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vdXRpbC9pc0Z1bmN0aW9uJztcbmltcG9ydCB7IFVuc3Vic2NyaXB0aW9uRXJyb3IgfSBmcm9tICcuL3V0aWwvVW5zdWJzY3JpcHRpb25FcnJvcic7XG52YXIgU3Vic2NyaXB0aW9uID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFN1YnNjcmlwdGlvbih1bnN1YnNjcmliZSkge1xuICAgICAgICB0aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLl9wYXJlbnRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IG51bGw7XG4gICAgICAgIGlmICh1bnN1YnNjcmliZSkge1xuICAgICAgICAgICAgdGhpcy5fdW5zdWJzY3JpYmUgPSB1bnN1YnNjcmliZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaGFzRXJyb3JzID0gZmFsc2U7XG4gICAgICAgIHZhciBlcnJvcnM7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIF9wYXJlbnQgPSBfYS5fcGFyZW50LCBfcGFyZW50cyA9IF9hLl9wYXJlbnRzLCBfdW5zdWJzY3JpYmUgPSBfYS5fdW5zdWJzY3JpYmUsIF9zdWJzY3JpcHRpb25zID0gX2EuX3N1YnNjcmlwdGlvbnM7XG4gICAgICAgIHRoaXMuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcGFyZW50cyA9IG51bGw7XG4gICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMgPSBudWxsO1xuICAgICAgICB2YXIgaW5kZXggPSAtMTtcbiAgICAgICAgdmFyIGxlbiA9IF9wYXJlbnRzID8gX3BhcmVudHMubGVuZ3RoIDogMDtcbiAgICAgICAgd2hpbGUgKF9wYXJlbnQpIHtcbiAgICAgICAgICAgIF9wYXJlbnQucmVtb3ZlKHRoaXMpO1xuICAgICAgICAgICAgX3BhcmVudCA9ICsraW5kZXggPCBsZW4gJiYgX3BhcmVudHNbaW5kZXhdIHx8IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oX3Vuc3Vic2NyaWJlKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBfdW5zdWJzY3JpYmUuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaGFzRXJyb3JzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBlcnJvcnMgPSBlIGluc3RhbmNlb2YgVW5zdWJzY3JpcHRpb25FcnJvciA/IGZsYXR0ZW5VbnN1YnNjcmlwdGlvbkVycm9ycyhlLmVycm9ycykgOiBbZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzQXJyYXkoX3N1YnNjcmlwdGlvbnMpKSB7XG4gICAgICAgICAgICBpbmRleCA9IC0xO1xuICAgICAgICAgICAgbGVuID0gX3N1YnNjcmlwdGlvbnMubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKCsraW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgICAgICB2YXIgc3ViID0gX3N1YnNjcmlwdGlvbnNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGlmIChpc09iamVjdChzdWIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWIudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFzRXJyb3JzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycyB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgVW5zdWJzY3JpcHRpb25FcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycyA9IGVycm9ycy5jb25jYXQoZmxhdHRlblVuc3Vic2NyaXB0aW9uRXJyb3JzKGUuZXJyb3JzKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaGFzRXJyb3JzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVW5zdWJzY3JpcHRpb25FcnJvcihlcnJvcnMpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICh0ZWFyZG93bikge1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGVhcmRvd247XG4gICAgICAgIHN3aXRjaCAodHlwZW9mIHRlYXJkb3duKSB7XG4gICAgICAgICAgICBjYXNlICdmdW5jdGlvbic6XG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbih0ZWFyZG93bik7XG4gICAgICAgICAgICBjYXNlICdvYmplY3QnOlxuICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24gPT09IHRoaXMgfHwgc3Vic2NyaXB0aW9uLmNsb3NlZCB8fCB0eXBlb2Ygc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICghKHN1YnNjcmlwdGlvbiBpbnN0YW5jZW9mIFN1YnNjcmlwdGlvbikpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRtcCA9IHN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24uX3N1YnNjcmlwdGlvbnMgPSBbdG1wXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0ZWFyZG93bikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3Vic2NyaXB0aW9uLkVNUFRZO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VucmVjb2duaXplZCB0ZWFyZG93biAnICsgdGVhcmRvd24gKyAnIGFkZGVkIHRvIFN1YnNjcmlwdGlvbi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc3Vic2NyaXB0aW9uLl9hZGRQYXJlbnQodGhpcykpIHtcbiAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb25zID0gdGhpcy5fc3Vic2NyaXB0aW9ucztcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9ucy5wdXNoKHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25zID0gW3N1YnNjcmlwdGlvbl07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKHN1YnNjcmlwdGlvbikge1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IHRoaXMuX3N1YnNjcmlwdGlvbnM7XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uSW5kZXggPSBzdWJzY3JpcHRpb25zLmluZGV4T2Yoc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb25JbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25zLnNwbGljZShzdWJzY3JpcHRpb25JbmRleCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuX2FkZFBhcmVudCA9IGZ1bmN0aW9uIChwYXJlbnQpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgX3BhcmVudCA9IF9hLl9wYXJlbnQsIF9wYXJlbnRzID0gX2EuX3BhcmVudHM7XG4gICAgICAgIGlmIChfcGFyZW50ID09PSBwYXJlbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghX3BhcmVudCkge1xuICAgICAgICAgICAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIV9wYXJlbnRzKSB7XG4gICAgICAgICAgICB0aGlzLl9wYXJlbnRzID0gW3BhcmVudF07XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChfcGFyZW50cy5pbmRleE9mKHBhcmVudCkgPT09IC0xKSB7XG4gICAgICAgICAgICBfcGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBTdWJzY3JpcHRpb24uRU1QVFkgPSAoZnVuY3Rpb24gKGVtcHR5KSB7XG4gICAgICAgIGVtcHR5LmNsb3NlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiBlbXB0eTtcbiAgICB9KG5ldyBTdWJzY3JpcHRpb24oKSkpO1xuICAgIHJldHVybiBTdWJzY3JpcHRpb247XG59KCkpO1xuZXhwb3J0IHsgU3Vic2NyaXB0aW9uIH07XG5mdW5jdGlvbiBmbGF0dGVuVW5zdWJzY3JpcHRpb25FcnJvcnMoZXJyb3JzKSB7XG4gICAgcmV0dXJuIGVycm9ycy5yZWR1Y2UoZnVuY3Rpb24gKGVycnMsIGVycikgeyByZXR1cm4gZXJycy5jb25jYXQoKGVyciBpbnN0YW5jZW9mIFVuc3Vic2NyaXB0aW9uRXJyb3IpID8gZXJyLmVycm9ycyA6IGVycik7IH0sIFtdKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YnNjcmlwdGlvbi5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh4KSB7XG4gICAgcmV0dXJuIHggIT09IG51bGwgJiYgdHlwZW9mIHggPT09ICdvYmplY3QnO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNPYmplY3QuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgdmFyIHJ4U3Vic2NyaWJlciA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbidcbiAgICA/IC8qQF9fUFVSRV9fKi8gU3ltYm9sKCdyeFN1YnNjcmliZXInKVxuICAgIDogJ0BAcnhTdWJzY3JpYmVyXycgKyAvKkBfX1BVUkVfXyovIE1hdGgucmFuZG9tKCk7XG5leHBvcnQgdmFyICQkcnhTdWJzY3JpYmVyID0gcnhTdWJzY3JpYmVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnhTdWJzY3JpYmVyLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfdXRpbF9pc0Z1bmN0aW9uLF9PYnNlcnZlcixfU3Vic2NyaXB0aW9uLF9pbnRlcm5hbF9zeW1ib2xfcnhTdWJzY3JpYmVyLF9jb25maWcsX3V0aWxfaG9zdFJlcG9ydEVycm9yIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi91dGlsL2lzRnVuY3Rpb24nO1xuaW1wb3J0IHsgZW1wdHkgYXMgZW1wdHlPYnNlcnZlciB9IGZyb20gJy4vT2JzZXJ2ZXInO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAnLi9TdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgcnhTdWJzY3JpYmVyIGFzIHJ4U3Vic2NyaWJlclN5bWJvbCB9IGZyb20gJy4uL2ludGVybmFsL3N5bWJvbC9yeFN1YnNjcmliZXInO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHsgaG9zdFJlcG9ydEVycm9yIH0gZnJvbSAnLi91dGlsL2hvc3RSZXBvcnRFcnJvcic7XG52YXIgU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YnNjcmliZXIoZGVzdGluYXRpb25Pck5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5zeW5jRXJyb3JWYWx1ZSA9IG51bGw7XG4gICAgICAgIF90aGlzLnN5bmNFcnJvclRocm93biA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5zeW5jRXJyb3JUaHJvd2FibGUgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHN3aXRjaCAoYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZW1wdHlPYnNlcnZlcjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICBpZiAoIWRlc3RpbmF0aW9uT3JOZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZW1wdHlPYnNlcnZlcjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGVzdGluYXRpb25Pck5leHQgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXN0aW5hdGlvbk9yTmV4dCBpbnN0YW5jZW9mIFN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnN5bmNFcnJvclRocm93YWJsZSA9IGRlc3RpbmF0aW9uT3JOZXh0LnN5bmNFcnJvclRocm93YWJsZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb25Pck5leHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbk9yTmV4dC5hZGQoX3RoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gbmV3IFNhZmVTdWJzY3JpYmVyKF90aGlzLCBkZXN0aW5hdGlvbk9yTmV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBfdGhpcy5zeW5jRXJyb3JUaHJvd2FibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gbmV3IFNhZmVTdWJzY3JpYmVyKF90aGlzLCBkZXN0aW5hdGlvbk9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN1YnNjcmliZXIucHJvdG90eXBlW3J4U3Vic2NyaWJlclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9O1xuICAgIFN1YnNjcmliZXIuY3JlYXRlID0gZnVuY3Rpb24gKG5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIgc3Vic2NyaWJlciA9IG5ldyBTdWJzY3JpYmVyKG5leHQsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgICAgIHN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBzdWJzY3JpYmVyO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLl9uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX2Vycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICBfc3VwZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fbmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX2Vycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl9jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmVBbmRSZWN5Y2xlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBfcGFyZW50ID0gX2EuX3BhcmVudCwgX3BhcmVudHMgPSBfYS5fcGFyZW50cztcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcGFyZW50cyA9IG51bGw7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gX3BhcmVudDtcbiAgICAgICAgdGhpcy5fcGFyZW50cyA9IF9wYXJlbnRzO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIHJldHVybiBTdWJzY3JpYmVyO1xufShTdWJzY3JpcHRpb24pKTtcbmV4cG9ydCB7IFN1YnNjcmliZXIgfTtcbnZhciBTYWZlU3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhTYWZlU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTYWZlU3Vic2NyaWJlcihfcGFyZW50U3Vic2NyaWJlciwgb2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5fcGFyZW50U3Vic2NyaWJlciA9IF9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICB2YXIgbmV4dDtcbiAgICAgICAgdmFyIGNvbnRleHQgPSBfdGhpcztcbiAgICAgICAgaWYgKGlzRnVuY3Rpb24ob2JzZXJ2ZXJPck5leHQpKSB7XG4gICAgICAgICAgICBuZXh0ID0gb2JzZXJ2ZXJPck5leHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob2JzZXJ2ZXJPck5leHQpIHtcbiAgICAgICAgICAgIG5leHQgPSBvYnNlcnZlck9yTmV4dC5uZXh0O1xuICAgICAgICAgICAgZXJyb3IgPSBvYnNlcnZlck9yTmV4dC5lcnJvcjtcbiAgICAgICAgICAgIGNvbXBsZXRlID0gb2JzZXJ2ZXJPck5leHQuY29tcGxldGU7XG4gICAgICAgICAgICBpZiAob2JzZXJ2ZXJPck5leHQgIT09IGVtcHR5T2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gT2JqZWN0LmNyZWF0ZShvYnNlcnZlck9yTmV4dCk7XG4gICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oY29udGV4dC51bnN1YnNjcmliZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYWRkKGNvbnRleHQudW5zdWJzY3JpYmUuYmluZChjb250ZXh0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnRleHQudW5zdWJzY3JpYmUgPSBfdGhpcy51bnN1YnNjcmliZS5iaW5kKF90aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIF90aGlzLl9uZXh0ID0gbmV4dDtcbiAgICAgICAgX3RoaXMuX2Vycm9yID0gZXJyb3I7XG4gICAgICAgIF90aGlzLl9jb21wbGV0ZSA9IGNvbXBsZXRlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQgJiYgdGhpcy5fbmV4dCkge1xuICAgICAgICAgICAgdmFyIF9wYXJlbnRTdWJzY3JpYmVyID0gdGhpcy5fcGFyZW50U3Vic2NyaWJlcjtcbiAgICAgICAgICAgIGlmICghY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgfHwgIV9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclVuc3ViKHRoaXMuX25leHQsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuX190cnlPclNldEVycm9yKF9wYXJlbnRTdWJzY3JpYmVyLCB0aGlzLl9uZXh0LCB2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdmFyIF9wYXJlbnRTdWJzY3JpYmVyID0gdGhpcy5fcGFyZW50U3Vic2NyaWJlcjtcbiAgICAgICAgICAgIHZhciB1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nID0gY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmc7XG4gICAgICAgICAgICBpZiAodGhpcy5fZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgfHwgIV9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JVbnN1Yih0aGlzLl9lcnJvciwgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yU2V0RXJyb3IoX3BhcmVudFN1YnNjcmliZXIsIHRoaXMuX2Vycm9yLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIV9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICBpZiAodXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhvc3RSZXBvcnRFcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVmFsdWUgPSBlcnI7XG4gICAgICAgICAgICAgICAgICAgIF9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBob3N0UmVwb3J0RXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHZhciBfcGFyZW50U3Vic2NyaWJlciA9IHRoaXMuX3BhcmVudFN1YnNjcmliZXI7XG4gICAgICAgICAgICBpZiAodGhpcy5fY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgd3JhcHBlZENvbXBsZXRlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuX2NvbXBsZXRlLmNhbGwoX3RoaXMuX2NvbnRleHQpOyB9O1xuICAgICAgICAgICAgICAgIGlmICghY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgfHwgIV9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JVbnN1Yih3cmFwcGVkQ29tcGxldGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JTZXRFcnJvcihfcGFyZW50U3Vic2NyaWJlciwgd3JhcHBlZENvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLl9fdHJ5T3JVbnN1YiA9IGZ1bmN0aW9uIChmbiwgdmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcy5fY29udGV4dCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGhvc3RSZXBvcnRFcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuX190cnlPclNldEVycm9yID0gZnVuY3Rpb24gKHBhcmVudCwgZm4sIHZhbHVlKSB7XG4gICAgICAgIGlmICghY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYmFkIGNhbGwnKTtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLl9jb250ZXh0LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgaWYgKGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50LnN5bmNFcnJvclZhbHVlID0gZXJyO1xuICAgICAgICAgICAgICAgIHBhcmVudC5zeW5jRXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaG9zdFJlcG9ydEVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9wYXJlbnRTdWJzY3JpYmVyID0gdGhpcy5fcGFyZW50U3Vic2NyaWJlcjtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3BhcmVudFN1YnNjcmliZXIgPSBudWxsO1xuICAgICAgICBfcGFyZW50U3Vic2NyaWJlci51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgcmV0dXJuIFNhZmVTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyKSk7XG5leHBvcnQgeyBTYWZlU3Vic2NyaWJlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3Vic2NyaWJlci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCB2YXIgb2JzZXJ2YWJsZSA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLm9ic2VydmFibGUgfHwgJ0BAb2JzZXJ2YWJsZSc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1vYnNlcnZhYmxlLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vb3AoKSB7IH1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW5vb3AuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9ub29wIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IG5vb3AgfSBmcm9tICcuL25vb3AnO1xuZXhwb3J0IGZ1bmN0aW9uIHBpcGUoKSB7XG4gICAgdmFyIGZucyA9IFtdO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgIGZuc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgIH1cbiAgICByZXR1cm4gcGlwZUZyb21BcnJheShmbnMpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBpcGVGcm9tQXJyYXkoZm5zKSB7XG4gICAgaWYgKCFmbnMpIHtcbiAgICAgICAgcmV0dXJuIG5vb3A7XG4gICAgfVxuICAgIGlmIChmbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiBmbnNbMF07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiBwaXBlZChpbnB1dCkge1xuICAgICAgICByZXR1cm4gZm5zLnJlZHVjZShmdW5jdGlvbiAocHJldiwgZm4pIHsgcmV0dXJuIGZuKHByZXYpOyB9LCBpbnB1dCk7XG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBpcGUuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF91dGlsX2NhblJlcG9ydEVycm9yLF91dGlsX3RvU3Vic2NyaWJlcixfaW50ZXJuYWxfc3ltYm9sX29ic2VydmFibGUsX3V0aWxfcGlwZSxfY29uZmlnIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IGNhblJlcG9ydEVycm9yIH0gZnJvbSAnLi91dGlsL2NhblJlcG9ydEVycm9yJztcbmltcG9ydCB7IHRvU3Vic2NyaWJlciB9IGZyb20gJy4vdXRpbC90b1N1YnNjcmliZXInO1xuaW1wb3J0IHsgb2JzZXJ2YWJsZSBhcyBTeW1ib2xfb2JzZXJ2YWJsZSB9IGZyb20gJy4uL2ludGVybmFsL3N5bWJvbC9vYnNlcnZhYmxlJztcbmltcG9ydCB7IHBpcGVGcm9tQXJyYXkgfSBmcm9tICcuL3V0aWwvcGlwZSc7XG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICcuL2NvbmZpZyc7XG52YXIgT2JzZXJ2YWJsZSA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBPYnNlcnZhYmxlKHN1YnNjcmliZSkge1xuICAgICAgICB0aGlzLl9pc1NjYWxhciA9IGZhbHNlO1xuICAgICAgICBpZiAoc3Vic2NyaWJlKSB7XG4gICAgICAgICAgICB0aGlzLl9zdWJzY3JpYmUgPSBzdWJzY3JpYmU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUubGlmdCA9IGZ1bmN0aW9uIChvcGVyYXRvcikge1xuICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlKCk7XG4gICAgICAgIG9ic2VydmFibGUuc291cmNlID0gdGhpcztcbiAgICAgICAgb2JzZXJ2YWJsZS5vcGVyYXRvciA9IG9wZXJhdG9yO1xuICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uIChvYnNlcnZlck9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIHZhciBvcGVyYXRvciA9IHRoaXMub3BlcmF0b3I7XG4gICAgICAgIHZhciBzaW5rID0gdG9TdWJzY3JpYmVyKG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGUpO1xuICAgICAgICBpZiAob3BlcmF0b3IpIHtcbiAgICAgICAgICAgIHNpbmsuYWRkKG9wZXJhdG9yLmNhbGwoc2luaywgdGhpcy5zb3VyY2UpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNpbmsuYWRkKHRoaXMuc291cmNlIHx8IChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyAmJiAhc2luay5zeW5jRXJyb3JUaHJvd2FibGUpID9cbiAgICAgICAgICAgICAgICB0aGlzLl9zdWJzY3JpYmUoc2luaykgOlxuICAgICAgICAgICAgICAgIHRoaXMuX3RyeVN1YnNjcmliZShzaW5rKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICBpZiAoc2luay5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICBzaW5rLnN5bmNFcnJvclRocm93YWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChzaW5rLnN5bmNFcnJvclRocm93bikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBzaW5rLnN5bmNFcnJvclZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2luaztcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLl90cnlTdWJzY3JpYmUgPSBmdW5jdGlvbiAoc2luaykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZShzaW5rKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgICBzaW5rLnN5bmNFcnJvclRocm93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2luay5zeW5jRXJyb3JWYWx1ZSA9IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjYW5SZXBvcnRFcnJvcihzaW5rKSkge1xuICAgICAgICAgICAgICAgIHNpbmsuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24gKG5leHQsIHByb21pc2VDdG9yKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHByb21pc2VDdG9yID0gZ2V0UHJvbWlzZUN0b3IocHJvbWlzZUN0b3IpO1xuICAgICAgICByZXR1cm4gbmV3IHByb21pc2VDdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb247XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgcmVqZWN0LCByZXNvbHZlKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlO1xuICAgICAgICByZXR1cm4gc291cmNlICYmIHNvdXJjZS5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZVtTeW1ib2xfb2JzZXJ2YWJsZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUucGlwZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9wZXJhdGlvbnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIG9wZXJhdGlvbnNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3BlcmF0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwaXBlRnJvbUFycmF5KG9wZXJhdGlvbnMpKHRoaXMpO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUudG9Qcm9taXNlID0gZnVuY3Rpb24gKHByb21pc2VDdG9yKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHByb21pc2VDdG9yID0gZ2V0UHJvbWlzZUN0b3IocHJvbWlzZUN0b3IpO1xuICAgICAgICByZXR1cm4gbmV3IHByb21pc2VDdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZTtcbiAgICAgICAgICAgIF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAoeCkgeyByZXR1cm4gdmFsdWUgPSB4OyB9LCBmdW5jdGlvbiAoZXJyKSB7IHJldHVybiByZWplY3QoZXJyKTsgfSwgZnVuY3Rpb24gKCkgeyByZXR1cm4gcmVzb2x2ZSh2YWx1ZSk7IH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUuY3JlYXRlID0gZnVuY3Rpb24gKHN1YnNjcmliZSkge1xuICAgICAgICByZXR1cm4gbmV3IE9ic2VydmFibGUoc3Vic2NyaWJlKTtcbiAgICB9O1xuICAgIHJldHVybiBPYnNlcnZhYmxlO1xufSgpKTtcbmV4cG9ydCB7IE9ic2VydmFibGUgfTtcbmZ1bmN0aW9uIGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKSB7XG4gICAgaWYgKCFwcm9taXNlQ3Rvcikge1xuICAgICAgICBwcm9taXNlQ3RvciA9IGNvbmZpZy5Qcm9taXNlIHx8IFByb21pc2U7XG4gICAgfVxuICAgIGlmICghcHJvbWlzZUN0b3IpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdubyBQcm9taXNlIGltcGwgZm91bmQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHByb21pc2VDdG9yO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JzZXJ2YWJsZS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX1N1YnNjcmliZXIsX3N5bWJvbF9yeFN1YnNjcmliZXIsX09ic2VydmVyIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IFN1YnNjcmliZXIgfSBmcm9tICcuLi9TdWJzY3JpYmVyJztcbmltcG9ydCB7IHJ4U3Vic2NyaWJlciBhcyByeFN1YnNjcmliZXJTeW1ib2wgfSBmcm9tICcuLi9zeW1ib2wvcnhTdWJzY3JpYmVyJztcbmltcG9ydCB7IGVtcHR5IGFzIGVtcHR5T2JzZXJ2ZXIgfSBmcm9tICcuLi9PYnNlcnZlcic7XG5leHBvcnQgZnVuY3Rpb24gdG9TdWJzY3JpYmVyKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcbiAgICBpZiAobmV4dE9yT2JzZXJ2ZXIpIHtcbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyIGluc3RhbmNlb2YgU3Vic2NyaWJlcikge1xuICAgICAgICAgICAgcmV0dXJuIG5leHRPck9ic2VydmVyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlcltyeFN1YnNjcmliZXJTeW1ib2xdKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV4dE9yT2JzZXJ2ZXJbcnhTdWJzY3JpYmVyU3ltYm9sXSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICghbmV4dE9yT2JzZXJ2ZXIgJiYgIWVycm9yICYmICFjb21wbGV0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IFN1YnNjcmliZXIoZW1wdHlPYnNlcnZlcik7XG4gICAgfVxuICAgIHJldHVybiBuZXcgU3Vic2NyaWJlcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRvU3Vic2NyaWJlci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX1N1YnNjcmliZXIgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgU3Vic2NyaWJlciB9IGZyb20gJy4uL1N1YnNjcmliZXInO1xuZXhwb3J0IGZ1bmN0aW9uIGNhblJlcG9ydEVycm9yKG9ic2VydmVyKSB7XG4gICAgd2hpbGUgKG9ic2VydmVyKSB7XG4gICAgICAgIHZhciBfYSA9IG9ic2VydmVyLCBjbG9zZWRfMSA9IF9hLmNsb3NlZCwgZGVzdGluYXRpb24gPSBfYS5kZXN0aW5hdGlvbiwgaXNTdG9wcGVkID0gX2EuaXNTdG9wcGVkO1xuICAgICAgICBpZiAoY2xvc2VkXzEgfHwgaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZGVzdGluYXRpb24gJiYgZGVzdGluYXRpb24gaW5zdGFuY2VvZiBTdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICBvYnNlcnZlciA9IGRlc3RpbmF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y2FuUmVwb3J0RXJyb3IuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5mdW5jdGlvbiBPYmplY3RVbnN1YnNjcmliZWRFcnJvckltcGwoKSB7XG4gICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgICB0aGlzLm1lc3NhZ2UgPSAnb2JqZWN0IHVuc3Vic2NyaWJlZCc7XG4gICAgdGhpcy5uYW1lID0gJ09iamVjdFVuc3Vic2NyaWJlZEVycm9yJztcbiAgICByZXR1cm4gdGhpcztcbn1cbk9iamVjdFVuc3Vic2NyaWJlZEVycm9ySW1wbC5wcm90b3R5cGUgPSAvKkBfX1BVUkVfXyovIE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbmV4cG9ydCB2YXIgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IgPSBPYmplY3RVbnN1YnNjcmliZWRFcnJvckltcGw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYmplY3RVbnN1YnNjcmliZWRFcnJvci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX1N1YnNjcmlwdGlvbiBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAnLi9TdWJzY3JpcHRpb24nO1xudmFyIFN1YmplY3RTdWJzY3JpcHRpb24gPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoU3ViamVjdFN1YnNjcmlwdGlvbiwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdWJqZWN0U3Vic2NyaXB0aW9uKHN1YmplY3QsIHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc3ViamVjdCA9IHN1YmplY3Q7XG4gICAgICAgIF90aGlzLnN1YnNjcmliZXIgPSBzdWJzY3JpYmVyO1xuICAgICAgICBfdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdWJqZWN0U3Vic2NyaXB0aW9uLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbG9zZWQgPSB0cnVlO1xuICAgICAgICB2YXIgc3ViamVjdCA9IHRoaXMuc3ViamVjdDtcbiAgICAgICAgdmFyIG9ic2VydmVycyA9IHN1YmplY3Qub2JzZXJ2ZXJzO1xuICAgICAgICB0aGlzLnN1YmplY3QgPSBudWxsO1xuICAgICAgICBpZiAoIW9ic2VydmVycyB8fCBvYnNlcnZlcnMubGVuZ3RoID09PSAwIHx8IHN1YmplY3QuaXNTdG9wcGVkIHx8IHN1YmplY3QuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHN1YnNjcmliZXJJbmRleCA9IG9ic2VydmVycy5pbmRleE9mKHRoaXMuc3Vic2NyaWJlcik7XG4gICAgICAgIGlmIChzdWJzY3JpYmVySW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBvYnNlcnZlcnMuc3BsaWNlKHN1YnNjcmliZXJJbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBTdWJqZWN0U3Vic2NyaXB0aW9uO1xufShTdWJzY3JpcHRpb24pKTtcbmV4cG9ydCB7IFN1YmplY3RTdWJzY3JpcHRpb24gfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YmplY3RTdWJzY3JpcHRpb24uanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9PYnNlcnZhYmxlLF9TdWJzY3JpYmVyLF9TdWJzY3JpcHRpb24sX3V0aWxfT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IsX1N1YmplY3RTdWJzY3JpcHRpb24sX2ludGVybmFsX3N5bWJvbF9yeFN1YnNjcmliZXIgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICcuL09ic2VydmFibGUnO1xuaW1wb3J0IHsgU3Vic2NyaWJlciB9IGZyb20gJy4vU3Vic2NyaWJlcic7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICcuL1N1YnNjcmlwdGlvbic7XG5pbXBvcnQgeyBPYmplY3RVbnN1YnNjcmliZWRFcnJvciB9IGZyb20gJy4vdXRpbC9PYmplY3RVbnN1YnNjcmliZWRFcnJvcic7XG5pbXBvcnQgeyBTdWJqZWN0U3Vic2NyaXB0aW9uIH0gZnJvbSAnLi9TdWJqZWN0U3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IHJ4U3Vic2NyaWJlciBhcyByeFN1YnNjcmliZXJTeW1ib2wgfSBmcm9tICcuLi9pbnRlcm5hbC9zeW1ib2wvcnhTdWJzY3JpYmVyJztcbnZhciBTdWJqZWN0U3Vic2NyaWJlciA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhTdWJqZWN0U3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdWJqZWN0U3Vic2NyaWJlcihkZXN0aW5hdGlvbikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBkZXN0aW5hdGlvbikgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICByZXR1cm4gU3ViamVjdFN1YnNjcmliZXI7XG59KFN1YnNjcmliZXIpKTtcbmV4cG9ydCB7IFN1YmplY3RTdWJzY3JpYmVyIH07XG52YXIgU3ViamVjdCA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhTdWJqZWN0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YmplY3QoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLm9ic2VydmVycyA9IFtdO1xuICAgICAgICBfdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmhhc0Vycm9yID0gZmFsc2U7XG4gICAgICAgIF90aGlzLnRocm93bkVycm9yID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdWJqZWN0LnByb3RvdHlwZVtyeFN1YnNjcmliZXJTeW1ib2xdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IFN1YmplY3RTdWJzY3JpYmVyKHRoaXMpO1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUubGlmdCA9IGZ1bmN0aW9uIChvcGVyYXRvcikge1xuICAgICAgICB2YXIgc3ViamVjdCA9IG5ldyBBbm9ueW1vdXNTdWJqZWN0KHRoaXMsIHRoaXMpO1xuICAgICAgICBzdWJqZWN0Lm9wZXJhdG9yID0gb3BlcmF0b3I7XG4gICAgICAgIHJldHVybiBzdWJqZWN0O1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3RVbnN1YnNjcmliZWRFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVycztcbiAgICAgICAgICAgIHZhciBsZW4gPSBvYnNlcnZlcnMubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGNvcHkgPSBvYnNlcnZlcnMuc2xpY2UoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb3B5W2ldLm5leHQodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgdGhpcy50aHJvd25FcnJvciA9IGVycjtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB2YXIgb2JzZXJ2ZXJzID0gdGhpcy5vYnNlcnZlcnM7XG4gICAgICAgIHZhciBsZW4gPSBvYnNlcnZlcnMubGVuZ3RoO1xuICAgICAgICB2YXIgY29weSA9IG9ic2VydmVycy5zbGljZSgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjb3B5W2ldLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3RVbnN1YnNjcmliZWRFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIG9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzO1xuICAgICAgICB2YXIgbGVuID0gb2JzZXJ2ZXJzLmxlbmd0aDtcbiAgICAgICAgdmFyIGNvcHkgPSBvYnNlcnZlcnMuc2xpY2UoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY29weVtpXS5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA9IDA7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmNsb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gbnVsbDtcbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLl90cnlTdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3RVbnN1YnNjcmliZWRFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIF9zdXBlci5wcm90b3R5cGUuX3RyeVN1YnNjcmliZS5jYWxsKHRoaXMsIHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmVycm9yKHRoaXMudGhyb3duRXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIFN1YnNjcmlwdGlvbi5FTVBUWTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIFN1YnNjcmlwdGlvbi5FTVBUWTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2goc3Vic2NyaWJlcik7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFN1YmplY3RTdWJzY3JpcHRpb24odGhpcywgc3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLmFzT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZSgpO1xuICAgICAgICBvYnNlcnZhYmxlLnNvdXJjZSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBvYnNlcnZhYmxlO1xuICAgIH07XG4gICAgU3ViamVjdC5jcmVhdGUgPSBmdW5jdGlvbiAoZGVzdGluYXRpb24sIHNvdXJjZSkge1xuICAgICAgICByZXR1cm4gbmV3IEFub255bW91c1N1YmplY3QoZGVzdGluYXRpb24sIHNvdXJjZSk7XG4gICAgfTtcbiAgICByZXR1cm4gU3ViamVjdDtcbn0oT2JzZXJ2YWJsZSkpO1xuZXhwb3J0IHsgU3ViamVjdCB9O1xudmFyIEFub255bW91c1N1YmplY3QgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoQW5vbnltb3VzU3ViamVjdCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBBbm9ueW1vdXNTdWJqZWN0KGRlc3RpbmF0aW9uLCBzb3VyY2UpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgX3RoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIEFub255bW91c1N1YmplY3QucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgaWYgKGRlc3RpbmF0aW9uICYmIGRlc3RpbmF0aW9uLm5leHQpIHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLm5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBbm9ueW1vdXNTdWJqZWN0LnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgaWYgKGRlc3RpbmF0aW9uICYmIGRlc3RpbmF0aW9uLmVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFub255bW91c1N1YmplY3QucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICBpZiAoZGVzdGluYXRpb24gJiYgZGVzdGluYXRpb24uY29tcGxldGUpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLnNvdXJjZTtcbiAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb24uRU1QVFk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBBbm9ueW1vdXNTdWJqZWN0O1xufShTdWJqZWN0KSk7XG5leHBvcnQgeyBBbm9ueW1vdXNTdWJqZWN0IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdWJqZWN0LmpzLm1hcFxuIiwiaW1wb3J0IHtTaW11bGF0aW9uUGFja2FnZX0gZnJvbSBcIi4vU2ltdWxhdGlvblBhY2thZ2VcIjtcclxuaW1wb3J0IHtTdWJqZWN0fSBmcm9tIFwicnhqc1wiO1xyXG5pbXBvcnQge01pbmltYWxTcGFuVHJlZX0gZnJvbSBcIi4uL1NwYW5uaW5nVHJlZS9taW5pbWFsU3Bhbm5pbmdUcmVlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU2ltdWxhdGlvbkNvbm5lY3Rpb257XHJcblx0cHVibGljIHNlbmQ6IFN1YmplY3Q8U2ltdWxhdGlvblBhY2thZ2U+ID0gbmV3IFN1YmplY3Q8U2ltdWxhdGlvblBhY2thZ2U+KCk7XHJcblx0cHVibGljIHJlY2VpdmU6IFN1YmplY3Q8U2ltdWxhdGlvblBhY2thZ2U+ID0gbmV3IFN1YmplY3Q8U2ltdWxhdGlvblBhY2thZ2U+KCk7XHJcblx0cHVibGljIHBpbmc6IFByb21pc2U8c3RyaW5nW10+O1xyXG5cdGNvbnN0cnVjdG9yKHNpYmxpbmdCcmlkZ2VzOiBzdHJpbmdbXSl7XHJcblx0XHR0aGlzLnBpbmcgPSBuZXcgUHJvbWlzZTxzdHJpbmdbXT4ocmVzb2x2ZSA9PiByZXNvbHZlKHNpYmxpbmdCcmlkZ2VzKSk7XHJcblx0fVxyXG5cdHB1YmxpYyBmaW5pc2hlZEluZGV4aW5nOiBTdWJqZWN0PE1pbmltYWxTcGFuVHJlZXxhbnk+ID0gbmV3IFN1YmplY3QoKTtcclxufVxyXG4iLCJpbXBvcnQge1NwYW5uaW5nVHJlZU5vZGV9IGZyb20gXCIuLi9TcGFubmluZ1RyZWUvc3Bhbm5pbmdUcmVlTm9kZVwiO1xyXG5pbXBvcnQge0JyaWRnZX0gZnJvbSBcIi4vQnJpZGdlXCI7XHJcbmltcG9ydCB7U2ltdWxhdGlvbkNvbm5lY3Rpb259IGZyb20gXCIuL1NpbXVsYXRpb25Db25uZWN0aW9uXCI7XHJcbmltcG9ydCB7U2ltdWxhdGlvblBhY2thZ2V9IGZyb20gXCIuL1NpbXVsYXRpb25QYWNrYWdlXCI7XHJcbmltcG9ydCB7TWluaW1hbFNwYW5UcmVlfSBmcm9tIFwiLi4vU3Bhbm5pbmdUcmVlL21pbmltYWxTcGFubmluZ1RyZWVcIjtcclxuaW1wb3J0IHtTcGFubmluZ1RyZWVMaW5rfSBmcm9tIFwiLi4vU3Bhbm5pbmdUcmVlL3NwYW5uaW5nVHJlZUxpbmtcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTaW11bGF0aW9uIHtcclxuICAgIHB1YmxpYyBicmlkZ2VzOiBCcmlkZ2VbXSA9IFtdO1xyXG4gICAgY29uc3RydWN0b3IocHVibGljIG5vZGVzOiBTcGFubmluZ1RyZWVOb2RlW10pIHtcclxuICAgICAgICBub2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xyXG4gICAgICAgICAgICBsZXQgc2libGluZ05vZGVzID0gbm9kZS5saW5rcy5tYXAobCA9PiBsLnRvTm9kZSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbm4gPSBuZXcgU2ltdWxhdGlvbkNvbm5lY3Rpb24oc2libGluZ05vZGVzKTtcclxuICAgICAgICAgICAgdGhpcy5icmlkZ2VzLnB1c2gobmV3IEJyaWRnZShub2RlLm5hbWUsIG5vZGUudmFsdWUsIGNvbm4pKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBhbGxvdyBjb21tdW5pY2F0aW9uIGJldHdlZW4gZGlyZWN0IGNvbm5lY3RlZCBicmlkZ2VzXHJcbiAgICAgICAgdGhpcy5icmlkZ2VzLmZvckVhY2goYnJpZGdlID0+IHtcclxuICAgICAgICAgICAgbGV0IGxpbmtzOiBTcGFubmluZ1RyZWVMaW5rW10gPSBub2Rlcy5maW5kKG4gPT4gbi5uYW1lID09PSBicmlkZ2UubmFtZSkubGlua3M7XHJcbiAgICAgICAgICAgIGxldCBzaWJsaW5nTm9kZXMgPSBsaW5rcy5tYXAobCA9PiBsLnRvTm9kZSk7XHJcbiAgICAgICAgICAgIGJyaWRnZS5jb25uZWN0aW9uLnNlbmQuc3Vic2NyaWJlKChwa2c6IFNpbXVsYXRpb25QYWNrYWdlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgJHticmlkZ2UubmFtZX0+Pj4ke3BrZy50YXJnZXR9YCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY29ubmVjdGVkTm9kZSA9IHNpYmxpbmdOb2Rlcy5maW5kKG4gPT4gbiA9PT0gcGtnLnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoISFjb25uZWN0ZWROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGtnLmNvc3QgPSBsaW5rcy5maW5kKGwgPT4gbC50b05vZGUgPT09IHBrZy50YXJnZXQpLmNvc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnJpZGdlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoYiA9PiBiLm5hbWUgPT09IHBrZy50YXJnZXQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29ubmVjdGlvbi5yZWNlaXZlLm5leHQocGtnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGtnLmNvc3QqMTAwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGFydEluZGV4aW5nRnJvbVJhbmRvbUJyaWRnZTogKCkgPT4gUHJvbWlzZTxNaW5pbWFsU3BhblRyZWU+ID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxNaW5pbWFsU3BhblRyZWU+KGFzeW5jIHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBicmlkZ2UgPSB0aGlzLmJyaWRnZXNbTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogdGhpcy5icmlkZ2VzLmxlbmd0aCldO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmJyaWRnZXMsIGJyaWRnZSk7XHJcbiAgICAgICAgICAgIGJyaWRnZS5jb25uZWN0aW9uLmZpbmlzaGVkSW5kZXhpbmcuc3Vic2NyaWJlKChtc3QpID0+IHJlc29sdmUobXN0KSk7XHJcbiAgICAgICAgICAgIGJyaWRnZS5pbmRleE5ldHdvcmsoKS50aGVuKCgpPT4gY29uc29sZS5sb2coJ3d0ZicpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCIvLyByZWZlcmVuY2VzIHRvIHRoZSBkb21cclxuaW1wb3J0IHtwYXJzZSwgc3RyaW5naWZ5fSBmcm9tIFwiLi9wYXJzZXJcIjtcclxuaW1wb3J0IHtTaW11bGF0aW9ufSBmcm9tIFwiLi9tb2RlbHMvU2ltdWxhdGlvbi9TaW11bGF0aW9uXCI7XHJcblxyXG5jb25zdCBpbnB1dEFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGV4dEluJykgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcclxuY29uc3Qgb3V0cHV0QXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXh0T3V0JykgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcclxuY29uc3Qgc2ltdWxhdGlvbkJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW11bGF0ZV9idG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHJcbmNvbnN0IHNpbXBsZVRlc3QgPSBgXHJcbkdyYXBoIG15Z3JhcGgge1xyXG5cdC8vIE5vZGVcclxuXHRBID0gMjtcclxuXHRCID0gMTtcclxuXHRDID0gMztcclxuXHRcclxuXHQvLyBMaW5rcyB1bmQgenVnZWguIEtvc3RlblxyXG5cdEEgLSBCIDogMTtcclxuXHRBIC0gQyA6IDE7XHJcblx0QyAtIEIgOiAyO1xyXG59YDtcclxuY29uc3QgdGVzdCA9IGBcclxuR3JhcGggbXlncmFwaCB7XHJcblx0Ly8gTm9kZVxyXG5cdEEgPSA1O1xyXG5cdEIgPSAxO1xyXG5cdEMgPSAzO1xyXG5cdEQgPSA3O1xyXG5cdEUgPSA2O1xyXG5cdEYgPSA0O1xyXG5cdFxyXG5cdC8vIExpbmtzIHVuZCB6dWdlaC4gS29zdGVuXHJcblx0QSAtIEIgOiAxMDtcclxuXHRBIC0gQyA6IDEwO1xyXG5cdEIgLSBEIDogMTU7XHJcblx0QiAtIEUgOiAxMDtcclxuXHRDIC0gRCA6IDM7XHJcblx0QyAtIEUgOiAxMDtcclxuXHREIC0gRSA6IDI7XHJcblx0RCAtIEYgOiAxMDtcclxuXHRFIC0gRiA6IDI7XHJcbn1gO1xyXG5pbnB1dEFyZWEudmFsdWUgPSBzaW1wbGVUZXN0O1xyXG5jb25zb2xlLmxvZyhpbnB1dEFyZWEpO1xyXG4vLyBjbGljayBpbXBsXHJcbmNvbnN0IG9uU2ltdWxhdGlvbkNsaWNrID0gKCkgPT4ge1xyXG4gICAgY29uc3QgcGFyc2VSZXN1bHQgPSBwYXJzZShpbnB1dEFyZWEudmFsdWUpO1xyXG4gICAgY29uc3Qgc2ltdWxhdGlvbiA9IG5ldyBTaW11bGF0aW9uKHBhcnNlUmVzdWx0Lm5vZGVzKTtcclxuICAgIGNvbnNvbGUubG9nKHNpbXVsYXRpb24pO1xyXG4gICAgc2ltdWxhdGlvbi5zdGFydEluZGV4aW5nRnJvbVJhbmRvbUJyaWRnZSgpLnRoZW4obXN0ID0+IHtcclxuICAgICAgICBvdXRwdXRBcmVhLnZhbHVlID0gc3RyaW5naWZ5KG1zdCwgcGFyc2VSZXN1bHQuZ3JhcGhOYW1lKTtcclxuICAgIH0pXHJcbn07XHJcblxyXG4vLyBjYWxsIGNsaWNrIGltcGwgb24gc2ltdWxhdGlvbkJ1dHRvbiBjbGlja1xyXG5zaW11bGF0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25TaW11bGF0aW9uQ2xpY2spO1xyXG4iLCJpbXBvcnQge1NwYW5uaW5nVHJlZUxpbmt9IGZyb20gXCIuLi9tb2RlbHMvU3Bhbm5pbmdUcmVlL3NwYW5uaW5nVHJlZUxpbmtcIjtcclxuaW1wb3J0IHtTcGFubmluZ1RyZWVOb2RlfSBmcm9tIFwiLi4vbW9kZWxzL1NwYW5uaW5nVHJlZS9zcGFubmluZ1RyZWVOb2RlXCI7XHJcblxyXG5leHBvcnQgY29uc3QgcGFyc2U6IChpbnB1dDogc3RyaW5nKSA9PiB7Z3JhcGhOYW1lOiBzdHJpbmcsIG5vZGVzOiBTcGFubmluZ1RyZWVOb2RlW119ID1cclxuXHQoaW5wdXQ6IHN0cmluZykgPT4ge1xyXG5cdFx0Y29uc3QgdGVtcExpbmtzOiB7bm9kZXM6IHN0cmluZ1tdLCBjb3N0OiBudW1iZXJ9W10gPSBbXTtcclxuXHRcdGNvbnN0IG5vZGVzOiBTcGFubmluZ1RyZWVOb2RlW10gPSBbXTtcclxuXHRcdGNvbnN0IGdyYXBoTmFtZSA9IGlucHV0Lm1hdGNoKC8oPzw9R3JhcGhbIF0pKFxcUyspL2cpWzBdO1xyXG5cdFx0Y29uc3Qgbm9kZU1hdGNoZXMgPSBpbnB1dC5tYXRjaCgvW15cXHNdKyg/PSA9KXwoPzw9PSApWzEtOV0qL2cpO1xyXG5cdFx0Y29uc3QgbGlua01hdGNoZXMgPSBpbnB1dC5tYXRjaCgvW15cXHNdKyg/PSAtKXxbXlxcc10rKD89IDopfCg/PD06IClbMC05XSovZyk7XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxpbmtNYXRjaGVzLmxlbmd0aDsgaSA9IGkgKyAzKSB7XHJcblx0XHRcdHRlbXBMaW5rcy5wdXNoKHtcclxuXHRcdFx0XHRub2RlczogW2xpbmtNYXRjaGVzW2ldLCBsaW5rTWF0Y2hlc1tpICsgMV1dLFxyXG5cdFx0XHRcdGNvc3Q6ICtsaW5rTWF0Y2hlc1tpICsgMl0gLy8gc29tZSBsaXR0bGUgdHJpY2sgdG8gY2FzdCBhIHN0cmluZyB0byBudW1iZXIgKyc0JyA9PT0gNFxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZU1hdGNoZXMubGVuZ3RoOyBpID0gaSArIDIpIHtcclxuXHRcdFx0Y29uc3QgbmFtZSA9IG5vZGVNYXRjaGVzW2ldO1xyXG5cdFx0XHRjb25zdCB2YWx1ZSA9ICtub2RlTWF0Y2hlc1tpICsgMV07XHJcblx0XHRcdGNvbnN0IGxpbmtzID0gdGVtcExpbmtzLmZpbHRlcihsID0+IGwubm9kZXMuZmluZEluZGV4KG4gPT4gbiA9PT0gbmFtZSkgIT09IC0xKVxyXG5cdFx0XHRcdC5tYXAobGluayA9PiBuZXcgU3Bhbm5pbmdUcmVlTGluayhsaW5rLm5vZGVzLmZpbmQobiA9PiBuICE9PSBuYW1lKSwgbGluay5jb3N0KSk7XHJcblx0XHRcdG5vZGVzLnB1c2gobmV3IFNwYW5uaW5nVHJlZU5vZGUobmFtZSwgdmFsdWUsIGxpbmtzKSk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRncmFwaE5hbWUsXHJcblx0XHRcdG5vZGVzXHJcblx0XHR9XHJcblx0fTtcclxuIiwiaW1wb3J0IHtNaW5pbWFsU3BhblRyZWV9IGZyb20gXCIuLi9tb2RlbHMvU3Bhbm5pbmdUcmVlL21pbmltYWxTcGFubmluZ1RyZWVcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBzdHJpbmdpZnk6IChtaW5pbWFsU3BhblRyZWU6IE1pbmltYWxTcGFuVHJlZSwgbmFtZTogc3RyaW5nKSA9PiBzdHJpbmcgPVxyXG5cdChtaW5pbWFsU3BhblRyZWUsIG5hbWU6IHN0cmluZykgPT4gYFxyXG5TcGFubmluZy1UcmVlIG9mICR7bmFtZX0ge1xyXG5cdFJvb3Q6ICR7bWluaW1hbFNwYW5UcmVlLnJvb3QubmFtZX07XHJcblx0JHttaW5pbWFsU3BhblRyZWUubGlua1RvU3RyaW5nKCl9XHJcbn1gO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9
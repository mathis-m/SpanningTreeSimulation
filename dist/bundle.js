!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=1)}([function(t,n,e){var r,o,i;o=[t,n],void 0===(i="function"==typeof(r=function(t,n){"use strict";function e(t,n,e){this._parent=new Array(t),this._rank=new Array(t),this._numSubsets=t,this._subsetProps=new Array(t),this._subsetPropsReducer=n;var r=void 0;r="[object Function]"==Object.prototype.toString.call(e)?e:function(){return e};for(var o=0;o<t;o++)this._parent[o]=o,this._rank[o]=0,this._subsetProps[o]=Object.assign({},r(o))}Object.defineProperty(n,"__esModule",{value:!0}),e.prototype.find=function(t){return this._parent[t]!==t&&(this._parent[t]=this.find(this._parent[t])),this._parent[t]},e.prototype.isConnected=function(t,n){return this.find(t)===this.find(n)},e.prototype.union=function(t,n,e){var r=this.find(t),o=this.find(n);return r===o?r:this._rank[r]<this._rank[o]?(this._parent[r]=o,this._numSubsets-=1,this._subsetPropsReducer&&(this._subsetProps[o]=this._subsetPropsReducer(this._subsetProps[o],this._subsetProps[r],e),this._subsetProps[r]=null),o):(this._parent[o]=r,this._numSubsets-=1,this._subsetPropsReducer&&(this._subsetProps[r]=this._subsetPropsReducer(this._subsetProps[r],this._subsetProps[o],e),this._subsetProps[o]=null),this._rank[r]===this._rank[o]&&(this._rank[r]+=1),r)},e.prototype.subsets=function(){for(var t={},n=0;n<this._parent.length;n++){var e=this.find(n);t.hasOwnProperty(e)||(t[e]=[]),t[e].push(n)}return Object.keys(t).map(function(n){return t[n]}).map(function(t){return t.sort()}).sort(function(t,n){return t[0]-n[0]})},e.prototype.subset=function(t){for(var n=this.find(t),e=[],r=0;r<this._parent.length;r++)this.find(r)===n&&e.push(r);return e.sort(),e},e.prototype.numSubsets=function(){return this._numSubsets},e.prototype.subsetProps=function(t){return this._subsetProps[this.find(t)]},n.default=e,t.exports=n.default})?r.apply(n,o):r)||(t.exports=i)},function(t,n,e){"use strict";e.r(n);var r=function(){return function(t,n){this.toNode=t,this.cost=n}}(),o=function(){return function(t,n,e){this.name=t,this.value=n,this.links=e}}(),i=function(){return function(t,n){this.nodes=t,this.cost=n}}(),s=e(0),u=function(){function t(t){this.shortestLinks=[],this.allNodes=[];for(var n=t.slice(),e=(n=n.sort(function(t,n){return t.cost-n.cost}).reverse()).flatMap(function(t){return t.nodes}),r=new Map,o=0,i=e;o<i.length;o++){var s=i[o];r.has(s.name)||(r.set(s.name,!0),this.allNodes.push(s))}this.root=this.allNodes.sort(function(t,n){return t.value-n.value})[0],this.shortestLinks=this.kruskal(n,n.length)}return t.prototype.getRoutingTable=function(t,n){var e,r,o,i,s,u=this,c=this.allNodes.map(function(t){return t.value}),a=this.shortestLinks.map(function(t){return t.nodes.map(function(t){return t.value})}),h=function(t){return a.filter(function(n){return-1!==n.indexOf(t)}).map(function(n){return n.find(function(n){return n!==t})})},f=function(t,n){var e=h(t).filter(function(t){return t!==n});return e.concat(e.flatMap(function(n){return f(n,t)}))};return(e=this.allNodes.find(function(n){return n.name===t}).value,r=this.allNodes.find(function(t){return t.name===n}).value,o=c.slice().filter(function(t){return t!==e}),i=[],s=e,h(e).filter(function(t){return t!==r}).forEach(function(t){i.push({target:t,nextHop:t});var n=f(t,s);n.forEach(function(n){return i.push({target:n,nextHop:t})}),o=o.filter(function(e){return e!==t&&-1===n.indexOf(e)})}),o.forEach(function(t){return i.push({target:t,nextHop:r})}),i).map(function(t){return console.log(t),{target:u.allNodes.find(function(n){return n.value===t.target}).name,nextHop:u.allNodes.find(function(n){return n.value===t.nextHop}).name}})},t.prototype.kruskal=function(t,n){for(var e=this,r=new s(this.allNodes.length),o=function(t){return t.nodes.map(function(t){return e.allNodes.findIndex(function(n){return n.name===t.name})})},i=[];t.length>0;){var u=t.pop();r.isConnected.apply(r,o(u))||(r.union.apply(r,o(u)),i.push(u))}return i},t.prototype.linkToString=function(){var t=this.shortestLinks.map(function(t){return new i(t.nodes.sort(function(t,n){return t.name<n.name?-1:t.name>n.name?1:0}),t.cost)}).sort(function(t,n){if(t.nodes[0].name<n.nodes[0].name)return-1;if(t.nodes[0].name>n.nodes[0].name)return 1;if(t.nodes[0].name===n.nodes[0].name){if(t.nodes[1].name<n.nodes[1].name)return-1;if(t.nodes[1].name>n.nodes[1].name)return 1}return 0}),n="";return t.forEach(function(t){n+=t.nodes[0].name+" - "+t.nodes[1].name+";\n\t"}),n},t}(),c=function(t,n,e,r){return new(e||(e=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(s,u)}c((r=r.apply(t,n||[])).next())})},a=function(t,n){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(t,s)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},h=function(){function t(t,n,e,r){var o=this;this.BLOCKED=function(){return!o.MST},this.DISCOVERED_LINKS=[],this.rootOfIndexing=!1,this.returnTo=[],this.name=t,this.value=n,this.connection=e,this.connection.receive.subscribe(function(t){return o.receive(t)}),this.dumpChanges=function(){return r(o)}}return t.prototype.indexNetwork=function(){return c(this,void 0,void 0,function(){var t,n=this;return a(this,function(e){switch(e.label){case 0:return this.rootOfIndexing=!0,this.dumpChanges(),[4,this.connection.ping];case 1:return t=e.sent(),this.WAITING_FOR_BRIDGES=t,t.forEach(function(t){n.send({protocol:"CSTP",content:{message:"Dear Neighbor hear is my name and the package provides you the cost to me. Follow the CSTP.",from:{name:n.name,value:n.value}},target:t})}),[2]}})})},t.prototype.send=function(t){t.sender=this.name,this.connection.send.next(t)},t.prototype.receive=function(t){"CSTP"===t.protocol?this.handleCSTPPackage(t).then(function(){}):this.handlePackage(t)},t.prototype.handlePackage=function(t){this.name===t.destination?alert(this.name+" received a pkg with: "+t.content):(t.target=this.ROUTING_TABLE.find(function(n){return n.target===t.destination}).nextHop,this.send(t))},t.prototype.handleCSTPPackage=function(t){return c(this,void 0,void 0,function(){var n,e;return a(this,function(r){switch(r.label){case 0:return 3!==(n=this.buildCase(t.content)).id?[3,1]:(this.handleCase3(t,n),this.dumpChanges(),[3,4]);case 1:return this.INDEXED||1===n.id&&this.WAITING_FOR_BRIDGES&&-1===this.WAITING_FOR_BRIDGES.indexOf(n.content.name)?[2]:!(e=0===this.DISCOVERED_LINKS.length)||this.rootOfIndexing||1!==n.id?[3,3]:(this.addLink({cost:t.cost,nodes:[{name:this.name,value:this.value},n.content]}),[4,this.spread(t)]);case 2:r.sent(),this.dumpChanges(),r.label=3;case 3:(1===n.id&&!e||2===n.id)&&(this.handleReturnedInfoFromSpread(n,t),this.dumpChanges()),1!==n.id||this.rootOfIndexing||(e?this.returnTo.push(n.content.name):(console.log(this.name,">",n.content.name),this.send({protocol:"CSTP",content:{message:"Dear Neighbor hear is my name and the package provides you the cost to me. Follow the CSTP.",discoveredLinks:[{cost:t.cost,nodes:[{name:this.name,value:this.value},n.content]}]},target:n.content.name})),this.dumpChanges()),this.WAITING_FOR_BRIDGES&&0===this.WAITING_FOR_BRIDGES.length&&(this.handleSpreadFinished(t.sender),this.dumpChanges()),r.label=4;case 4:return[2]}})})},t.prototype.addLink=function(t){var n,e=this;console.log(void 0===t.length),void 0===t.length&&(t=[t]),(n=this.DISCOVERED_LINKS).push.apply(n,t.filter(function(t){return!e.checkLinkKnown(t.nodes.map(function(t){return t.name}))}))},t.prototype.checkLinkKnown=function(t){return t[0]===t[1]||-1!==this.DISCOVERED_LINKS.findIndex(function(n){return-1!==n.nodes.findIndex(function(n){return n.name===t[0]})&&-1!==n.nodes.findIndex(function(n){return n.name===t[1]})})},t.prototype.buildCase=function(t){var n=[t.from,t.discoveredLinks,t.mst],e=n.findIndex(function(t){return!0==!!t})+1;return{id:e,content:t=n[e-1]}},t.prototype.handleCase3=function(t,n){this.finishMST(n.content,t.sender),t.destination!==this.name&&(t.target=this.ROUTING_TABLE.find(function(n){return n.target===t.destination}).nextHop,this.send(t))},t.prototype.spread=function(t){return c(this,void 0,void 0,function(){var n,e=this;return a(this,function(r){switch(r.label){case 0:return[4,this.connection.ping];case 1:return n=r.sent(),this.WAITING_FOR_BRIDGES=n.filter(function(n){return n!==t.content.from.name}),this.WAITING_FOR_BRIDGES.forEach(function(t){return e.send({protocol:"CSTP",content:{message:"Dear Neighbor hear is my name and the package provides you the cost to me. Follow the CSTP.",from:{name:e.name,value:e.value}},target:t})}),[2]}})})},t.prototype.handleReturnedInfoFromSpread=function(t,n){"C"===this.name&&console.log("asdasd",this.WAITING_FOR_BRIDGES,t,n);var e=this.WAITING_FOR_BRIDGES.findIndex(function(t){return t===n.sender});-1!==e&&this.WAITING_FOR_BRIDGES.splice(e,1);var r=t.content;1===t.id?r=[{cost:n.cost,nodes:[{name:this.name,value:this.value},r]}]:-1===r[r.length-1].cost&&(r[r.length-1].cost=n.cost,r[r.length-1].nodes.push({name:this.name,value:this.value})),this.addLink(r.slice())},t.prototype.finishMST=function(t,n){var e=new u(t);this.MST=e,this.ROUTING_TABLE=this.MST.getRoutingTable(this.name,n),this.connection.finishedIndexing.next(e)},t.prototype.handleSpreadFinished=function(t){this.sendDiscoveredLinksBack(),this.INDEXED=!0,this.rootOfIndexing?this.shareMst(t):this.connection.finishedIndexing.next()},t.prototype.shareMst=function(t){var n=this,e=this.getLinks();this.finishMST(e,t),this.ROUTING_TABLE.forEach(function(t){n.send({protocol:"CSTP",content:{message:"Dear Neighbor hear is my name and the package provides you the cost to me. Follow the CSTP.",mst:e},target:t.nextHop,destination:t.target})})},t.prototype.getLinks=function(){var t=[];return this.DISCOVERED_LINKS.forEach(function(n){t.find(function(t){return-1!==n.nodes.findIndex(function(n){return n.name===t.nodes[0].name})&&-1!==n.nodes.findIndex(function(n){return n.name===t.nodes[1].name})})||t.push(n)}),t.slice()},t.prototype.sendDiscoveredLinksBack=function(){var t=this;this.returnTo.forEach(function(n){t.send({protocol:"CSTP",content:{message:"Dear Neighbor hear are my discovered links, you may concat them with yours and send them back!",discoveredLinks:t.DISCOVERED_LINKS.concat([{cost:-1,nodes:[{name:t.name,value:t.value}]}])},target:n})})},t}(),f=function(t,n){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function d(t,n){function e(){this.constructor=t}f(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}function l(t){return"function"==typeof t}var p=!1,b={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;p=t},get useDeprecatedSynchronousErrorHandling(){return p}};function m(t){setTimeout(function(){throw t})}var y={closed:!0,next:function(t){},error:function(t){if(b.useDeprecatedSynchronousErrorHandling)throw t;m(t)},complete:function(){}},v=Array.isArray||function(t){return t&&"number"==typeof t.length};function g(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(t,n){return n+1+") "+t.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}g.prototype=Object.create(Error.prototype);var _=g,E=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var n;return t.prototype.unsubscribe=function(){var t,n=!1;if(!this.closed){var e=this._parent,r=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s,u=-1,c=r?r.length:0;e;)e.remove(this),e=++u<c&&r[u]||null;if(l(o))try{o.call(this)}catch(e){n=!0,t=e instanceof _?w(e.errors):[e]}if(v(i))for(u=-1,c=i.length;++u<c;){var a=i[u];if(null!==(s=a)&&"object"==typeof s)try{a.unsubscribe()}catch(e){n=!0,t=t||[],e instanceof _?t=t.concat(w(e.errors)):t.push(e)}}if(n)throw new _(t)}},t.prototype.add=function(n){var e=n;switch(typeof n){case"function":e=new t(n);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof t)){var r=e;(e=new t)._subscriptions=[r]}break;default:if(!n)return t.EMPTY;throw new Error("unrecognized teardown "+n+" added to Subscription.")}if(e._addParent(this)){var o=this._subscriptions;o?o.push(e):this._subscriptions=[e]}return e},t.prototype.remove=function(t){var n=this._subscriptions;if(n){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}},t.prototype._addParent=function(t){var n=this._parent,e=this._parents;return n!==t&&(n?e?-1===e.indexOf(t)&&(e.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))},t.EMPTY=((n=new t).closed=!0,n),t}();function w(t){return t.reduce(function(t,n){return t.concat(n instanceof _?n.errors:n)},[])}var S="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),x=function(t){function n(e,r,o){var i=t.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=y;break;case 1:if(!e){i.destination=y;break}if("object"==typeof e){e instanceof n?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new I(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new I(i,e,r,o)}return i}return d(n,t),n.prototype[S]=function(){return this},n.create=function(t,e,r){var o=new n(t,e,r);return o.syncErrorThrowable=!1,o},n.prototype.next=function(t){this.isStopped||this._next(t)},n.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},n.prototype._next=function(t){this.destination.next(t)},n.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},n.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},n.prototype._unsubscribeAndRecycle=function(){var t=this._parent,n=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=n,this},n}(E),I=function(t){function n(n,e,r,o){var i,s=t.call(this)||this;s._parentSubscriber=n;var u=s;return l(e)?i=e:e&&(i=e.next,r=e.error,o=e.complete,e!==y&&(l((u=Object.create(e)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=i,s._error=r,s._complete=o,s}return d(n,t),n.prototype.next=function(t){if(!this.isStopped&&this._next){var n=this._parentSubscriber;b.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},n.prototype.error=function(t){if(!this.isStopped){var n=this._parentSubscriber,e=b.useDeprecatedSynchronousErrorHandling;if(this._error)e&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)e?(n.syncErrorValue=t,n.syncErrorThrown=!0):m(t),this.unsubscribe();else{if(this.unsubscribe(),e)throw t;m(t)}}},n.prototype.complete=function(){var t=this;if(!this.isStopped){var n=this._parentSubscriber;if(this._complete){var e=function(){return t._complete.call(t._context)};b.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?(this.__tryOrSetError(n,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},n.prototype.__tryOrUnsub=function(t,n){try{t.call(this._context,n)}catch(t){if(this.unsubscribe(),b.useDeprecatedSynchronousErrorHandling)throw t;m(t)}},n.prototype.__tryOrSetError=function(t,n,e){if(!b.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,e)}catch(n){return b.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=n,t.syncErrorThrown=!0,!0):(m(n),!0)}return!1},n.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},n}(x);var O="function"==typeof Symbol&&Symbol.observable||"@@observable";function T(){}function k(t){return t?1===t.length?t[0]:function(n){return t.reduce(function(t,n){return n(t)},n)}:T}var D=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(n){var e=new t;return e.source=this,e.operator=n,e},t.prototype.subscribe=function(t,n,e){var r=this.operator,o=function(t,n,e){if(t){if(t instanceof x)return t;if(t[S])return t[S]()}return t||n||e?new x(t,n,e):new x(y)}(t,n,e);if(r?o.add(r.call(o,this.source)):o.add(this.source||b.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),b.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){b.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=n),!function(t){for(;t;){var n=t,e=n.closed,r=n.destination,o=n.isStopped;if(e||o)return!1;t=r&&r instanceof x?r:null}return!0}(t)?console.warn(n):t.error(n)}},t.prototype.forEach=function(t,n){var e=this;return new(n=P(n))(function(n,r){var o;o=e.subscribe(function(n){try{t(n)}catch(t){r(t),o&&o.unsubscribe()}},r,n)})},t.prototype._subscribe=function(t){var n=this.source;return n&&n.subscribe(t)},t.prototype[O]=function(){return this},t.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 0===t.length?this:k(t)(this)},t.prototype.toPromise=function(t){var n=this;return new(t=P(t))(function(t,e){var r;n.subscribe(function(t){return r=t},function(t){return e(t)},function(){return t(r)})})},t.create=function(n){return new t(n)},t}();function P(t){if(t||(t=b.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function B(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}B.prototype=Object.create(Error.prototype);var N=B,C=function(t){function n(n,e){var r=t.call(this)||this;return r.subject=n,r.subscriber=e,r.closed=!1,r}return d(n,t),n.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,n=t.observers;if(this.subject=null,n&&0!==n.length&&!t.isStopped&&!t.closed){var e=n.indexOf(this.subscriber);-1!==e&&n.splice(e,1)}}},n}(E),R=function(t){function n(n){var e=t.call(this,n)||this;return e.destination=n,e}return d(n,t),n}(x),L=function(t){function n(){var n=t.call(this)||this;return n.observers=[],n.closed=!1,n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return d(n,t),n.prototype[S]=function(){return new R(this)},n.prototype.lift=function(t){var n=new j(this,this);return n.operator=t,n},n.prototype.next=function(t){if(this.closed)throw new N;if(!this.isStopped)for(var n=this.observers,e=n.length,r=n.slice(),o=0;o<e;o++)r[o].next(t)},n.prototype.error=function(t){if(this.closed)throw new N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var n=this.observers,e=n.length,r=n.slice(),o=0;o<e;o++)r[o].error(t);this.observers.length=0},n.prototype.complete=function(){if(this.closed)throw new N;this.isStopped=!0;for(var t=this.observers,n=t.length,e=t.slice(),r=0;r<n;r++)e[r].complete();this.observers.length=0},n.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},n.prototype._trySubscribe=function(n){if(this.closed)throw new N;return t.prototype._trySubscribe.call(this,n)},n.prototype._subscribe=function(t){if(this.closed)throw new N;return this.hasError?(t.error(this.thrownError),E.EMPTY):this.isStopped?(t.complete(),E.EMPTY):(this.observers.push(t),new C(this,t))},n.prototype.asObservable=function(){var t=new D;return t.source=this,t},n.create=function(t,n){return new j(t,n)},n}(D),j=function(t){function n(n,e){var r=t.call(this)||this;return r.destination=n,r.source=e,r}return d(n,t),n.prototype.next=function(t){var n=this.destination;n&&n.next&&n.next(t)},n.prototype.error=function(t){var n=this.destination;n&&n.error&&this.destination.error(t)},n.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},n.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):E.EMPTY},n}(L),M=function(){return function(t){this.send=new L,this.receive=new L,this.finishedIndexing=new L,this.ping=new Promise(function(n){return n(t)})}}(),A=function(){return function(t,n,e,r){var o=this;this.protocol=t,this.content=n,this.target=e,this.destination=e;var i=r.find(function(t){return t.target===o.target});this.target=i.nextHop}}(),F=function(){var t=document.getElementById("container_target");t.childNodes.forEach(function(t){return t.remove()}),t.childNodes.forEach(function(t){return t.remove()}),t.childNodes.forEach(function(t){return t.remove()});t.insertAdjacentElement("beforeend",(new DOMParser).parseFromString('\n<div class="item" id="init_pkg" style="display: flex">\n    <div style="height: 100%; width: 90%; justify-self: center; align-self: center">\n        <h3>Packages:</h3>\n        <div id="pkg_s_target">\n    </div>\n</div>\n    \n</div>\n',"text/html").getElementById("init_pkg"))},G=function(t){var n=document.getElementById("container_target");t.sort(function(t,n){return t.name<n.name?-1:t.name>n.name?1:0}).forEach(function(t){n.insertAdjacentElement("beforeend",(new DOMParser).parseFromString(function(t){return'\n<div class="item">\n    <div class="item-content" id="bridge_'+t.value+'">\n        <h3>Bridge '+t.name+"</h3>\n    <div>\n</div>\n"}(t),"text/html").getElementById("bridge_"+t.value))})},K=0,H=function(t,n){var e=document.getElementById("pkg_s_target"),r=K++;return e.insertAdjacentElement("beforeend",(new DOMParser).parseFromString(function(t,n){return'\n<div id="pkg_'+r+'">\n    '+n+" -> "+t.target+" : "+t.cost+"\n</div>\n"}(t,n),"text/html").getElementById("pkg_"+r)),function(){e.removeChild(document.getElementById("pkg_"+r))}},U=function(t,n){if(-1===n.findIndex(function(t){return t.BLOCKED()})){var e=document.getElementById("pkg_test_target");e.insertAdjacentElement("beforeend",(new DOMParser).parseFromString('\n<div class="item" id="pkg-card" style="\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n">\n    <h3>Send a sample package through with the new topology</h3>\n</div>\n',"text/html").getElementById("pkg-card")),e=document.getElementById("pkg-card");var r=n.map(function(t){return t.name}),o=function(t){return'\n<label id="l_'+t+'" for="'+t+'">Send '+t+':</label>\n<select id="'+t+'">\n    '+r.map(function(t){return'<option value="'+t+'">'+t+"</option>\n    "})+"\n</select>\n"},i=function(t){e.insertAdjacentElement("beforeend",(new DOMParser).parseFromString(o(t)+"<br>","text/html").getElementById("l_"+t)),e.insertAdjacentElement("beforeend",(new DOMParser).parseFromString(o(t),"text/html").getElementById(t))};i("from"),i("to");e.insertAdjacentElement("beforeend",(new DOMParser).parseFromString('\n<button id="test_send">Send</button>\n',"text/html").getElementById("test_send")),document.getElementById("test_send").addEventListener("click",function(){return t=document.getElementById("from").value,e=document.getElementById("to").value,r=n.find(function(n){return n.name===t}),o=new A("SOME_NORMAL","Greetings from"+r.name,e,r.ROUTING_TABLE),void r.send(o);var t,e,r,o})}document.getElementById("bridge_"+t.value).replaceWith((new DOMParser).parseFromString(function(t){return'\n<div class="item" id="bridge_'+t.value+'">\n    <div class="item-content" style="width: 80%; height: 100%; overflow-y: auto; overflow-x: hidden; '+(t.BLOCKED()?"":"box-shadow: 5px 5px 4px #33b040 !important;")+'">\n        <h3>Bridge '+t.name+"</h3>\n        "+(t.rootOfIndexing?"Indexing Root!":"")+"<br>\n        Known links: [<br><BLOCKQUOTE>"+t.DISCOVERED_LINKS.map(function(t){return t.nodes.map(function(t){return t.name}).join("-")+":"+t.cost}).join(",<br>")+"</BLOCKQUOTE><br>]<br>\n        Returning Data to: [<br><BLOCKQUOTE>"+t.returnTo.join(",<br>")+"</BLOCKQUOTE><br>]<br>\n        "+(!t.rootOfIndexing&&t.INDEXED?"<br>Node has finished indexing!<br>Returning Data to "+t.returnTo.join(",<br>"):"")+"<br>\n        "+(t.rootOfIndexing&&t.INDEXED?"<br>Network has finished indexing!<br>MST generated.<br>Sending MST to: [<br><BLOCKQUOTE>"+t.MST.allNodes.map(function(t){return t.name}).filter(function(n){return n!==t.name}).join(",<br>")+"</BLOCKQUOTE><br>]":"")+"\n        "+(t.BLOCKED()?"":"<br>Received MST. Routing Table: [<br><BLOCKQUOTE>"+t.ROUTING_TABLE.map(function(t){return"->"+t.target+" via "+t.nextHop}).join(",<br>")+"</BLOCKQUOTE><br>]")+"\n    </div>\n</div>\n"}(t),"text/html").getElementById("bridge_"+t.value))},V=function(t,n,e,r){return new(e||(e=Promise))(function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){t.done?o(t.value):new e(function(n){n(t.value)}).then(s,u)}c((r=r.apply(t,n||[])).next())})},W=function(t,n){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(t,s)}catch(t){i=[6,t],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},Q=function(){return function(t,n){void 0===n&&(n=.5);var e=this;this.nodes=t,this.multiForCostInSeconds=n,this.bridges=[],this.startIndexingFromRandomBridge=function(){return new Promise(function(t){return V(e,void 0,void 0,function(){var n,e;return W(this,function(r){switch(r.label){case 0:return(n=Math.round(Math.random()*this.bridges.length))<0&&n>this.bridges.length-1&&(n=0),(e=this.bridges[n]).connection.finishedIndexing.subscribe(function(n){return t(n)}),[4,e.indexNetwork()];case 1:return r.sent(),[2]}})})})},F(),t.forEach(function(t){var n=t.links.map(function(t){return t.toNode}),r=new M(n);e.bridges.push(new h(t.name,t.value,r,function(t){return U(t,e.bridges)}))}),this.bridges.forEach(function(n){var r=t.find(function(t){return t.name===n.name}).links,o=r.map(function(t){return t.toNode});n.connection.send.subscribe(function(t){if(o.find(function(n){return n===t.target})){t.cost=r.find(function(n){return n.toNode===t.target}).cost;var i=H(t,n.name);setTimeout(function(){i(),e.bridges.find(function(n){return n.name===t.target}).connection.receive.next(t)},1e3*t.cost*e.multiForCostInSeconds)}})}),G(this.bridges)}}(),Y=document.getElementById("textIn"),X=document.getElementById("textOut"),z=document.getElementById("simulate_btn");Y.value="\nGraph mygraph {\n\t// Node\n\tA = 5;\n\tB = 1;\n\tC = 3;\n\tD = 7;\n\tE = 6;\n\tF = 4;\n\t\n\t// Links und zugeh. Kosten\n\tA - B : 10;\n\tA - C : 10;\n\tB - D : 15;\n\tB - E : 10;\n\tC - D : 3;\n\tC - E : 10;\n\tD - E : 2;\n\tD - F : 10;\n\tE - F : 2;\n}";z.addEventListener("click",function(){var t=function(t){for(var n=[],e=[],i=t.match(/(?<=Graph[ ])(\S+)/g)[0],s=t.match(/[^\s]+(?= =)|(?<== )[1-9]*/g),u=t.match(/[^\s]+(?= -)|[^\s]+(?= :)|(?<=: )[0-9]*/g),c=0;c<u.length;c+=3)n.push({nodes:[u[c],u[c+1]],cost:+u[c+2]});var a=function(t){var i=s[t],u=+s[t+1],c=n.filter(function(t){return-1!==t.nodes.findIndex(function(t){return t===i})}).map(function(t){return new r(t.nodes.find(function(t){return t!==i}),t.cost)});e.push(new o(i,u,c))};for(c=0;c<s.length;c+=2)a(c);return{graphName:i,nodes:e}}(Y.value);new Q(t.nodes,+document.getElementById("mult").value).startIndexingFromRandomBridge().then(function(n){var e;X.value=(e=n,"\nSpanning-Tree of "+t.graphName+" {\n\tRoot: "+e.root.name+";\n\t"+e.linkToString()+"\n}")})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Rpc2pvaW50L2xpYi9kaXNqb2ludC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1NwYW5uaW5nVHJlZS9zcGFubmluZ1RyZWVMaW5rLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU3Bhbm5pbmdUcmVlL3NwYW5uaW5nVHJlZU5vZGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9TaW11bGF0aW9uL1NpbXVsYXRpb25MaW5rLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU3Bhbm5pbmdUcmVlL21pbmltYWxTcGFubmluZ1RyZWUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9TaW11bGF0aW9uL0JyaWRnZS50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaXNGdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9jb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9ob3N0UmVwb3J0RXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvT2JzZXJ2ZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9pc0FycmF5LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvVW5zdWJzY3JpcHRpb25FcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9TdWJzY3JpcHRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9pc09iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9zeW1ib2wvcnhTdWJzY3JpYmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL1N1YnNjcmliZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvc3ltYm9sL29ic2VydmFibGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9ub29wLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvcGlwZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9PYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvdG9TdWJzY3JpYmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvY2FuUmVwb3J0RXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvdXRpbC9PYmplY3RVbnN1YnNjcmliZWRFcnJvci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9TdWJqZWN0U3Vic2NyaXB0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL1N1YmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9TaW11bGF0aW9uL1NpbXVsYXRpb25Db25uZWN0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU2ltdWxhdGlvbi9TaW11bGF0aW9uUGFja2FnZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL3ZpZXcvU2ltdWxhdGlvblZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9TaW11bGF0aW9uL1NpbXVsYXRpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21haW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BhcnNlci9ncmFwaFBhcnNlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFyc2VyL21zdFN0cmluZ2lmeS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9fV0VCUEFDS19BTURfREVGSU5FX0ZBQ1RPUllfXyIsIl9fV0VCUEFDS19BTURfREVGSU5FX0FSUkFZX18iLCJfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyIsInVuZGVmaW5lZCIsImUiLCJ0aGlzIiwiX3BhcmVudCIsIkFycmF5IiwiX3JhbmsiLCJfbnVtU3Vic2V0cyIsIl9zdWJzZXRQcm9wcyIsIl9zdWJzZXRQcm9wc1JlZHVjZXIiLCJ0b1N0cmluZyIsImFzc2lnbiIsImZpbmQiLCJpc0Nvbm5lY3RlZCIsInVuaW9uIiwic3Vic2V0cyIsImxlbmd0aCIsInB1c2giLCJrZXlzIiwibWFwIiwic29ydCIsInN1YnNldCIsIm51bVN1YnNldHMiLCJzdWJzZXRQcm9wcyIsImRlZmF1bHQiLCJhcHBseSIsIlNwYW5uaW5nVHJlZUxpbmsiLCJ0b05vZGUiLCJjb3N0IiwiU3Bhbm5pbmdUcmVlTm9kZSIsImxpbmtzIiwiU2ltdWxhdGlvbkxpbmsiLCJub2RlcyIsIm1pbmltYWxTcGFubmluZ1RyZWVfTWluaW1hbFNwYW5UcmVlIiwiTWluaW1hbFNwYW5UcmVlIiwic3BhblRyZWVMaW5rcyIsInNob3J0ZXN0TGlua3MiLCJhbGxOb2RlcyIsInNsaWNlIiwiYXJyYXkiLCJhIiwiYiIsInJldmVyc2UiLCJmbGF0TWFwIiwiTWFwIiwiX2kiLCJhcnJheV8xIiwiaXRlbSIsImhhcyIsInNldCIsInJvb3QiLCJrcnVza2FsIiwiZ2V0Um91dGluZ1RhYmxlIiwic2VuZGVyT2ZQa2ciLCJmb3JOb2RlIiwiZGlzRmF2b3VyZWROZXh0IiwicmVzIiwibm90IiwiX3RoaXMiLCJub2RlIiwibGluayIsImdldENvbm5lY3RlZCIsImZpbHRlciIsImluZGV4T2YiLCJnZXRBbGxOb2Rlc0JlaGluZCIsImV4Y2x1ZGUiLCJjb25uTm9kZXMiLCJjb25jYXQiLCJmb3JFYWNoIiwidGFyZ2V0IiwibmV4dEhvcCIsInRlbXAiLCJjb25zb2xlIiwibG9nIiwibGlua1NldCIsImRpc2pvaW50IiwiZ2V0SW5kZXhlcyIsIm5vIiwiZmluZEluZGV4IiwibXN0TGlua3MiLCJwb3AiLCJsaW5rVG9TdHJpbmciLCJzb3J0ZWQiLCJyZXQiLCJCcmlkZ2VfQnJpZGdlIiwiQnJpZGdlIiwiY29ubmVjdGlvbiIsImR1bXBDaGFuZ2VzIiwiQkxPQ0tFRCIsIk1TVCIsIkRJU0NPVkVSRURfTElOS1MiLCJyb290T2ZJbmRleGluZyIsInJldHVyblRvIiwicmVjZWl2ZSIsInN1YnNjcmliZSIsInBrZyIsImluZGV4TmV0d29yayIsInBpbmciLCJzaWJsaW5ncyIsIl9hIiwic2VudCIsIldBSVRJTkdfRk9SX0JSSURHRVMiLCJzZW5kIiwicHJvdG9jb2wiLCJjb250ZW50IiwibWVzc2FnZSIsImZyb20iLCJzZW5kZXIiLCJuZXh0IiwiaGFuZGxlQ1NUUFBhY2thZ2UiLCJ0aGVuIiwiaGFuZGxlUGFja2FnZSIsImRlc3RpbmF0aW9uIiwiYWxlcnQiLCJST1VUSU5HX1RBQkxFIiwiY3N0cENhc2UiLCJidWlsZENhc2UiLCJpZCIsImhhbmRsZUNhc2UzIiwiSU5ERVhFRCIsImZpcnN0IiwiYWRkTGluayIsInNwcmVhZCIsImhhbmRsZVJldHVybmVkSW5mb0Zyb21TcHJlYWQiLCJkaXNjb3ZlcmVkTGlua3MiLCJoYW5kbGVTcHJlYWRGaW5pc2hlZCIsImNoZWNrTGlua0tub3duIiwiQ0FTRV9DU1RQIiwibXN0IiwiZmluaXNoTVNUIiwiY29ubmVjdGVkQnJpZGdlcyIsInN0YXJ0Iiwic3BsaWNlIiwiZmluaXNoZWRJbmRleGluZyIsInNlbmREaXNjb3ZlcmVkTGlua3NCYWNrIiwic2hhcmVNc3QiLCJsaW5rc01zdCIsImdldExpbmtzIiwiZXh0ZW5kU3RhdGljcyIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiX19leHRlbmRzIiwiX18iLCJjb25zdHJ1Y3RvciIsImlzRnVuY3Rpb24iLCJ4IiwiX2VuYWJsZV9zdXBlcl9ncm9zc19tb2RlX3RoYXRfd2lsbF9jYXVzZV9iYWRfdGhpbmdzIiwiY29uZmlnIiwiUHJvbWlzZSIsInVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmciLCJFcnJvciIsInN0YWNrIiwiaG9zdFJlcG9ydEVycm9yIiwiZXJyIiwic2V0VGltZW91dCIsImVtcHR5IiwiY2xvc2VkIiwiZXJyb3IiLCJjb21wbGV0ZSIsImlzQXJyYXkiLCJVbnN1YnNjcmlwdGlvbkVycm9ySW1wbCIsImVycm9ycyIsImpvaW4iLCJVbnN1YnNjcmlwdGlvbkVycm9yIiwiU3Vic2NyaXB0aW9uX1N1YnNjcmlwdGlvbiIsIlN1YnNjcmlwdGlvbiIsInVuc3Vic2NyaWJlIiwiX3BhcmVudHMiLCJfc3Vic2NyaXB0aW9ucyIsIl91bnN1YnNjcmliZSIsImhhc0Vycm9ycyIsImluZGV4IiwibGVuIiwicmVtb3ZlIiwiZmxhdHRlblVuc3Vic2NyaXB0aW9uRXJyb3JzIiwic3ViIiwiYWRkIiwidGVhcmRvd24iLCJzdWJzY3JpcHRpb24iLCJ0bXAiLCJFTVBUWSIsIl9hZGRQYXJlbnQiLCJzdWJzY3JpcHRpb25zIiwic3Vic2NyaXB0aW9uSW5kZXgiLCJwYXJlbnQiLCJyZWR1Y2UiLCJlcnJzIiwicnhTdWJzY3JpYmVyIiwiTWF0aCIsInJhbmRvbSIsIlN1YnNjcmliZXJfU3Vic2NyaWJlciIsIl9zdXBlciIsIlN1YnNjcmliZXIiLCJkZXN0aW5hdGlvbk9yTmV4dCIsInN5bmNFcnJvclZhbHVlIiwic3luY0Vycm9yVGhyb3duIiwic3luY0Vycm9yVGhyb3dhYmxlIiwiaXNTdG9wcGVkIiwiYXJndW1lbnRzIiwiU3Vic2NyaWJlcl9TYWZlU3Vic2NyaWJlciIsInN1YnNjcmliZXIiLCJfbmV4dCIsIl9lcnJvciIsIl9jb21wbGV0ZSIsIl91bnN1YnNjcmliZUFuZFJlY3ljbGUiLCJTYWZlU3Vic2NyaWJlciIsIl9wYXJlbnRTdWJzY3JpYmVyIiwib2JzZXJ2ZXJPck5leHQiLCJjb250ZXh0IiwiX2NvbnRleHQiLCJfX3RyeU9yU2V0RXJyb3IiLCJfX3RyeU9yVW5zdWIiLCJ3cmFwcGVkQ29tcGxldGUiLCJmbiIsIm9ic2VydmFibGVfb2JzZXJ2YWJsZSIsIm9ic2VydmFibGUiLCJub29wIiwicGlwZUZyb21BcnJheSIsImZucyIsImlucHV0IiwicHJldiIsIk9ic2VydmFibGVfT2JzZXJ2YWJsZSIsIk9ic2VydmFibGUiLCJfaXNTY2FsYXIiLCJfc3Vic2NyaWJlIiwibGlmdCIsIm9wZXJhdG9yIiwic291cmNlIiwic2luayIsIm5leHRPck9ic2VydmVyIiwidG9TdWJzY3JpYmVyIiwiX3RyeVN1YnNjcmliZSIsIm9ic2VydmVyIiwiY2xvc2VkXzEiLCJjYW5SZXBvcnRFcnJvciIsIndhcm4iLCJwcm9taXNlQ3RvciIsImdldFByb21pc2VDdG9yIiwicmVzb2x2ZSIsInJlamVjdCIsInBpcGUiLCJvcGVyYXRpb25zIiwidG9Qcm9taXNlIiwiT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JJbXBsIiwiT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IiLCJTdWJqZWN0U3Vic2NyaXB0aW9uX1N1YmplY3RTdWJzY3JpcHRpb24iLCJTdWJqZWN0U3Vic2NyaXB0aW9uIiwic3ViamVjdCIsIm9ic2VydmVycyIsInN1YnNjcmliZXJJbmRleCIsIlN1YmplY3RfU3ViamVjdFN1YnNjcmliZXIiLCJTdWJqZWN0U3Vic2NyaWJlciIsIlN1YmplY3RfU3ViamVjdCIsIlN1YmplY3QiLCJoYXNFcnJvciIsInRocm93bkVycm9yIiwiU3ViamVjdF9Bbm9ueW1vdXNTdWJqZWN0IiwiY29weSIsImFzT2JzZXJ2YWJsZSIsIkFub255bW91c1N1YmplY3QiLCJTaW11bGF0aW9uQ29ubmVjdGlvbl9TaW11bGF0aW9uQ29ubmVjdGlvbiIsInNpYmxpbmdCcmlkZ2VzIiwiU2ltdWxhdGlvblBhY2thZ2UiLCJyb3V0aW5nVGFibGUiLCJyb3V0aW5nVGFibGVFbnRyeSIsImluaXQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2hpbGROb2RlcyIsImluc2VydEFkamFjZW50RWxlbWVudCIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsImNyZWF0ZURvbUJyaWRnZXMiLCJicmlkZ2VzIiwiYnJpZGdlIiwiYnJpZGdlVGVtcGxhdGUiLCJkdW1wUGtnIiwicGtnX3NfdGFyZ2V0IiwibnVtYmVyIiwicGtnVGVtcGxhdGUiLCJyZW1vdmVDaGlsZCIsImR1bXBCcmlkZ2UiLCJ0YXJnZXRfMSIsInZhbHVlc18xIiwiZHJvcGRvd25UZW1wbGF0ZV8xIiwidiIsImRyb3Bkb3duIiwiYWRkRXZlbnRMaXN0ZW5lciIsImZyb21OYW1lIiwidG9OYW1lIiwic2ltdWxhdGlvblBhY2thZ2UiLCJyZXBsYWNlV2l0aCIsIlNpbXVsYXRpb25fU2ltdWxhdGlvbiIsIm11bHRpRm9yQ29zdEluU2Vjb25kcyIsInN0YXJ0SW5kZXhpbmdGcm9tUmFuZG9tQnJpZGdlIiwiU2ltdWxhdGlvbl9hd2FpdGVyIiwicm5kbSIsInJvdW5kIiwic2libGluZ05vZGVzIiwiY29ubiIsImNiXzEiLCJpbnB1dEFyZWEiLCJvdXRwdXRBcmVhIiwic2ltdWxhdGlvbkJ1dHRvbiIsInBhcnNlUmVzdWx0IiwidGVtcExpbmtzIiwiZ3JhcGhOYW1lIiwibWF0Y2giLCJub2RlTWF0Y2hlcyIsImxpbmtNYXRjaGVzIiwibmFtZV8xIiwicGFyc2UiLCJtaW5pbWFsU3BhblRyZWUiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQTFCLEVBQUFrQixFQUFBTyxHQUNB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LEdBQVEsV0FBSWxDLEVBQWlCa0MsRUFBSzVCLE1BQU1wQixLQUFLLFNBQUFyQixHQUFLLE9BQUFBLElBQU0rVCxJQUFPMVAsRUFBS2hDLFFBRTFFSSxFQUFNZixLQUFLLElBQUlZLEVBQWlCeVIsRUFBTXZVLEVBQU8rQyxLQVI5QyxJQUFTaEUsRUFBSSxFQUFHQSxFQUFJc1YsRUFBWXBTLE9BQVFsRCxHQUFRLElBQXZDQSxHQVVULE1BQU8sQ0FDTm9WLFVBQVNBLEVBQ1RsUixNQUFLQSxHRGFnQnVSLENBQU1WLEVBQVU5VCxPQUVqQixJQUFJcVQsRUFBV1ksRUFBWWhSLE9BQVMwTyxTQUFTQyxlQUFlLFFBQTZCNVIsT0FFakd1VCxnQ0FBZ0N4TCxLQUFLLFNBQUFrQixHRW5EbkQsSUFBQ3dMLEVGdURNVixFQUFXL1QsT0V2RGpCeVUsRUZ1RG1DeEwsRUV2REQsc0JGdURNZ0wsRUFBWUUsVUV0RC9CLGVBQ2RNLEVBQWdCdFEsS0FBSzdFLEtBQUksUUFDL0JtVixFQUFnQnZPLGVBQWMiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiIWZ1bmN0aW9uKHQscyl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kKWRlZmluZShbXCJtb2R1bGVcIixcImV4cG9ydHNcIl0scyk7ZWxzZSBpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgZXhwb3J0cylzKG1vZHVsZSxleHBvcnRzKTtlbHNle3ZhciBlPXtleHBvcnRzOnt9fTtzKGUsZS5leHBvcnRzKSx0LmRpc2pvaW50PWUuZXhwb3J0c319KHRoaXMsZnVuY3Rpb24odCxzKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBlKHQscyxlKXt0aGlzLl9wYXJlbnQ9bmV3IEFycmF5KHQpLHRoaXMuX3Jhbms9bmV3IEFycmF5KHQpLHRoaXMuX251bVN1YnNldHM9dCx0aGlzLl9zdWJzZXRQcm9wcz1uZXcgQXJyYXkodCksdGhpcy5fc3Vic2V0UHJvcHNSZWR1Y2VyPXM7dmFyIHI9dm9pZCAwO3I9XCJbb2JqZWN0IEZ1bmN0aW9uXVwiPT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSk/ZTpmdW5jdGlvbigpe3JldHVybiBlfTtmb3IodmFyIG49MDtuPHQ7bisrKXRoaXMuX3BhcmVudFtuXT1uLHRoaXMuX3Jhbmtbbl09MCx0aGlzLl9zdWJzZXRQcm9wc1tuXT1PYmplY3QuYXNzaWduKHt9LHIobikpfU9iamVjdC5kZWZpbmVQcm9wZXJ0eShzLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pLGUucHJvdG90eXBlLmZpbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3BhcmVudFt0XSE9PXQmJih0aGlzLl9wYXJlbnRbdF09dGhpcy5maW5kKHRoaXMuX3BhcmVudFt0XSkpLHRoaXMuX3BhcmVudFt0XX0sZS5wcm90b3R5cGUuaXNDb25uZWN0ZWQ9ZnVuY3Rpb24odCxzKXtyZXR1cm4gdGhpcy5maW5kKHQpPT09dGhpcy5maW5kKHMpfSxlLnByb3RvdHlwZS51bmlvbj1mdW5jdGlvbih0LHMsZSl7dmFyIHI9dGhpcy5maW5kKHQpLG49dGhpcy5maW5kKHMpO3JldHVybiByPT09bj9yOnRoaXMuX3Jhbmtbcl08dGhpcy5fcmFua1tuXT8odGhpcy5fcGFyZW50W3JdPW4sdGhpcy5fbnVtU3Vic2V0cy09MSx0aGlzLl9zdWJzZXRQcm9wc1JlZHVjZXImJih0aGlzLl9zdWJzZXRQcm9wc1tuXT10aGlzLl9zdWJzZXRQcm9wc1JlZHVjZXIodGhpcy5fc3Vic2V0UHJvcHNbbl0sdGhpcy5fc3Vic2V0UHJvcHNbcl0sZSksdGhpcy5fc3Vic2V0UHJvcHNbcl09bnVsbCksbik6KHRoaXMuX3BhcmVudFtuXT1yLHRoaXMuX251bVN1YnNldHMtPTEsdGhpcy5fc3Vic2V0UHJvcHNSZWR1Y2VyJiYodGhpcy5fc3Vic2V0UHJvcHNbcl09dGhpcy5fc3Vic2V0UHJvcHNSZWR1Y2VyKHRoaXMuX3N1YnNldFByb3BzW3JdLHRoaXMuX3N1YnNldFByb3BzW25dLGUpLHRoaXMuX3N1YnNldFByb3BzW25dPW51bGwpLHRoaXMuX3Jhbmtbcl09PT10aGlzLl9yYW5rW25dJiYodGhpcy5fcmFua1tyXSs9MSkscil9LGUucHJvdG90eXBlLnN1YnNldHM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9e30scz0wO3M8dGhpcy5fcGFyZW50Lmxlbmd0aDtzKyspe3ZhciBlPXRoaXMuZmluZChzKTt0Lmhhc093blByb3BlcnR5KGUpfHwodFtlXT1bXSksdFtlXS5wdXNoKHMpfXJldHVybiBPYmplY3Qua2V5cyh0KS5tYXAoZnVuY3Rpb24ocyl7cmV0dXJuIHRbc119KS5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuc29ydCgpfSkuc29ydChmdW5jdGlvbih0LHMpe3JldHVybiB0WzBdLXNbMF19KX0sZS5wcm90b3R5cGUuc3Vic2V0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgcz10aGlzLmZpbmQodCksZT1bXSxyPTA7cjx0aGlzLl9wYXJlbnQubGVuZ3RoO3IrKyl0aGlzLmZpbmQocik9PT1zJiZlLnB1c2gocik7cmV0dXJuIGUuc29ydCgpLGV9LGUucHJvdG90eXBlLm51bVN1YnNldHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbnVtU3Vic2V0c30sZS5wcm90b3R5cGUuc3Vic2V0UHJvcHM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3N1YnNldFByb3BzW3RoaXMuZmluZCh0KV19LHMuZGVmYXVsdD1lLHQuZXhwb3J0cz1zLmRlZmF1bHR9KTtcbiIsImV4cG9ydCBjbGFzcyBTcGFubmluZ1RyZWVMaW5rIHtcclxuXHRjb25zdHJ1Y3RvcihwdWJsaWMgdG9Ob2RlOiBzdHJpbmcsIHB1YmxpYyBjb3N0OiBudW1iZXIpIHtcclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHtTcGFubmluZ1RyZWVMaW5rfSBmcm9tIFwiLi9zcGFubmluZ1RyZWVMaW5rXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU3Bhbm5pbmdUcmVlTm9kZSB7XHJcblx0Y29uc3RydWN0b3IocHVibGljIG5hbWU6IHN0cmluZywgcHVibGljIHZhbHVlOiBudW1iZXIsIHB1YmxpYyBsaW5rczogU3Bhbm5pbmdUcmVlTGlua1tdKSB7XHJcblx0fVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBTaW11bGF0aW9uTGluayB7XHJcblx0Y29uc3RydWN0b3IocHVibGljIG5vZGVzOiB7bmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyfVtdLCBwdWJsaWMgY29zdDogbnVtYmVyKXt9XHJcbn1cclxuIiwiaW1wb3J0IHtTaW11bGF0aW9uTGlua30gZnJvbSBcIi4uL1NpbXVsYXRpb24vU2ltdWxhdGlvbkxpbmtcIjtcclxuaW1wb3J0ICogYXMgRGlzam9pbnRTZXQgZnJvbSBcImRpc2pvaW50XCI7XHJcbmltcG9ydCB7Um91dGluZ1RhYmxlRW50cnl9IGZyb20gXCIuLi9TaW11bGF0aW9uL0JyaWRnZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIE1pbmltYWxTcGFuVHJlZSB7XHJcblxyXG4gICAgLy8gdG9wb2xvZ3lcclxuICAgIHB1YmxpYyBzaG9ydGVzdExpbmtzOiBTaW11bGF0aW9uTGlua1tdID0gW107XHJcbiAgICBwdWJsaWMgYWxsTm9kZXM6IHsgbmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyIH1bXSA9IFtdO1xyXG4gICAgcHVibGljIHJvb3Q6IHsgbmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyIH07XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3BhblRyZWVMaW5rczogU2ltdWxhdGlvbkxpbmtbXSkge1xyXG4gICAgICAgIC8vIHNvcnQgbGlua3Mgc2hvcnRlc3QgbGFzdFxyXG4gICAgICAgIGxldCBsaW5rcyA9IFsuLi5zcGFuVHJlZUxpbmtzXTtcclxuICAgICAgICBsaW5rcyA9IGxpbmtzLnNvcnQoKGEsIGIpID0+IGEuY29zdCAtIGIuY29zdCkucmV2ZXJzZSgpO1xyXG5cclxuICAgICAgICBjb25zdCBhcnJheSA9IGxpbmtzLmZsYXRNYXAobCA9PiBsLm5vZGVzKTtcclxuICAgICAgICAvLyBmaW5kIGFsbCBOb2Rlc1xyXG4gICAgICAgIGNvbnN0IG1hcCA9IG5ldyBNYXAoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXJyYXkpIHtcclxuICAgICAgICAgICAgaWYgKCFtYXAuaGFzKGl0ZW0ubmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIG1hcC5zZXQoaXRlbS5uYW1lLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxsTm9kZXMucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBmaW5kIHJvb3RcclxuICAgICAgICB0aGlzLnJvb3QgPSB0aGlzLmFsbE5vZGVzLnNvcnQoKGEsIGIpID0+IGEudmFsdWUgLSBiLnZhbHVlKVswXTtcclxuICAgICAgICAvLyBmaW5kIG1zdCB1c2luZyBrcnVza2FsIGltcGwgd2l0aCBkaXNqb2ludCBzZXRcclxuICAgICAgICB0aGlzLnNob3J0ZXN0TGlua3MgPSB0aGlzLmtydXNrYWwobGlua3MsIGxpbmtzLmxlbmd0aCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gYnVpbGRzIHJvdXRpbmcgdGFibGUgZm9yIFtuYW1lXSwgdG8gb3B0aW1pemUgcHJvdmlkZSBsYXN0IHNlbmRlcjtcclxuICAgIGdldFJvdXRpbmdUYWJsZShuYW1lOiBzdHJpbmcsIHNlbmRlck9mUGtnOiBzdHJpbmcpOiBSb3V0aW5nVGFibGVFbnRyeVtdIHtcclxuICAgICAgICAvLyBhbGwgbm9kZXMgYXMgbnVtYmVyIGFyclxyXG4gICAgICAgIGNvbnN0IGFsbE5vZGVzID0gdGhpcy5hbGxOb2Rlcy5tYXAobm9kZSA9PiBub2RlLnZhbHVlKTtcclxuICAgICAgICAvLyBhbGwgbGlua3MgYXMgbnVtYmVyIGFyclxyXG4gICAgICAgIGNvbnN0IGxpbmtzID0gdGhpcy5zaG9ydGVzdExpbmtzLm1hcChsaW5rID0+IGxpbmsubm9kZXMubWFwKG5vZGUgPT4gbm9kZS52YWx1ZSkpO1xyXG4gICAgICAgIC8vIGdldHMgY29ubmVjdGVkIG5vZGVzIG9mIG5vZGVcclxuICAgICAgICBjb25zdCBnZXRDb25uZWN0ZWQgPSAobm9kZTogbnVtYmVyKSA9PiBsaW5rcy5maWx0ZXIobCA9PiBsLmluZGV4T2Yobm9kZSkgIT09IC0xKS5tYXAobCA9PiBsLmZpbmQobiA9PiBuICE9PSBub2RlKSk7XHJcbiAgICAgICAgLy8gcmV0dXJucyBhcnIgb2YgYWxsIG5vZGVzIGJlaGluZCBbbm9kZV0gZXhjbHVkZWQgdGhvc2UgdGhhdCBhcmUgYmVoaW5kIFtleGNsdWRlXVxyXG4gICAgICAgIGNvbnN0IGdldEFsbE5vZGVzQmVoaW5kID0gKG5vZGU6IG51bWJlciwgZXhjbHVkZTogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCByZXQgPSBbXTtcclxuICAgICAgICAgICAgLy8gZmluZCBjb25uZWN0ZWQgbm9kZXNcclxuICAgICAgICAgICAgY29uc3QgY29ubk5vZGVzID0gZ2V0Q29ubmVjdGVkKG5vZGUpLmZpbHRlcihuID0+IG4gIT09IGV4Y2x1ZGUpO1xyXG4gICAgICAgICAgICAvLyByZXR1cm4gY29ubmVjdGVkIG5vZGVzIGFuZCB0aG9zZSB0aGF0IGFyZSBjb25uZWN0ZWQgd2l0aCB0aGF0IGNvbm5lY3RlZCBub2Rlc1xyXG4gICAgICAgICAgICByZXR1cm4gWy4uLmNvbm5Ob2RlcywgLi4uY29ubk5vZGVzLmZsYXRNYXAobiA9PiBnZXRBbGxOb2Rlc0JlaGluZChuLCBub2RlKSldO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IGJ1aWxkUm91dGluZ1RhYmxlID0gKGZvck5vZGU6IG51bWJlciwgZGlzRmF2b3VyZWROZXh0OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgbGV0IG5vZGVzID0gWy4uLmFsbE5vZGVzXS5maWx0ZXIobiA9PiBuICE9PSBmb3JOb2RlKTtcclxuICAgICAgICAgICAgY29uc3QgcmVzID0gW107XHJcbiAgICAgICAgICAgIGNvbnN0IG5vdCA9IGZvck5vZGU7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbm5Ob2RlcyA9IGdldENvbm5lY3RlZChmb3JOb2RlKS5maWx0ZXIobiA9PiBuICE9PSBkaXNGYXZvdXJlZE5leHQpO1xyXG4gICAgICAgICAgICBjb25uTm9kZXMuZm9yRWFjaChub2RlID0+IHtcclxuICAgICAgICAgICAgICAgIHJlcy5wdXNoKHt0YXJnZXQ6IG5vZGUsIG5leHRIb3A6IG5vZGV9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSBnZXRBbGxOb2Rlc0JlaGluZChub2RlLCBub3QpO1xyXG4gICAgICAgICAgICAgICAgdGVtcC5mb3JFYWNoKG4gPT4gcmVzLnB1c2goe3RhcmdldDogbiwgbmV4dEhvcDogbm9kZX0pKTtcclxuICAgICAgICAgICAgICAgIG5vZGVzID0gbm9kZXMuZmlsdGVyKG4gPT4gbiAhPT0gbm9kZSAmJiB0ZW1wLmluZGV4T2YobikgPT09IC0xKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5vZGVzLmZvckVhY2gobiA9PiByZXMucHVzaCh7dGFyZ2V0OiBuLCBuZXh0SG9wOiBkaXNGYXZvdXJlZE5leHR9KSk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gYnVpbGRSb3V0aW5nVGFibGUodGhpcy5hbGxOb2Rlcy5maW5kKG4gPT4gbi5uYW1lID09PSBuYW1lKS52YWx1ZSwgdGhpcy5hbGxOb2Rlcy5maW5kKG4gPT4gbi5uYW1lID09PSBzZW5kZXJPZlBrZykudmFsdWUpXHJcbiAgICAgICAgICAgIC5tYXAoZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoe1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0OiB0aGlzLmFsbE5vZGVzLmZpbmQobiA9PiBuLnZhbHVlID09PSBlLnRhcmdldCkubmFtZSxcclxuICAgICAgICAgICAgICAgIG5leHRIb3A6IHRoaXMuYWxsTm9kZXMuZmluZChuID0+IG4udmFsdWUgPT09IGUubmV4dEhvcCkubmFtZVxyXG4gICAgICAgICAgICB9KX0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUga3J1c2thbChsaW5rczogU2ltdWxhdGlvbkxpbmtbXSwgbjogbnVtYmVyKTogU2ltdWxhdGlvbkxpbmtbXSB7XHJcbiAgICAgICAgLy8gbWFrZSBuZXcgZGlzam9pbnQgc2V0IHdpdGggc2l6ZSBvZiBub2RlcyBjb3VudFxyXG4gICAgICAgIGNvbnN0IGxpbmtTZXQgPSBuZXcgRGlzam9pbnRTZXQodGhpcy5hbGxOb2Rlcy5sZW5ndGgpO1xyXG4gICAgICAgIC8vIHV0aWxcclxuICAgICAgICBjb25zdCBnZXRJbmRleGVzID0gKGxpbmspID0+IGxpbmsubm9kZXMubWFwKG5vID0+IHRoaXMuYWxsTm9kZXMuZmluZEluZGV4KG5vZGUgPT4gbm9kZS5uYW1lID09PSBuby5uYW1lKSk7XHJcbiAgICAgICAgLy8gc28gZmFyIHNob3J0ZXN0IGxpbmtzIHdpdGhvdXQgbG9vcFxyXG4gICAgICAgIGNvbnN0IG1zdExpbmtzOiBTaW11bGF0aW9uTGlua1tdID0gW107XHJcbiAgICAgICAgd2hpbGUgKGxpbmtzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgbGluayA9IGxpbmtzLnBvcCgpO1xyXG4gICAgICAgICAgICBpZiAoIWxpbmtTZXQuaXNDb25uZWN0ZWQoLi4uZ2V0SW5kZXhlcyhsaW5rKSkpIHtcclxuICAgICAgICAgICAgICAgIGxpbmtTZXQudW5pb24oLi4uZ2V0SW5kZXhlcyhsaW5rKSk7XHJcbiAgICAgICAgICAgICAgICBtc3RMaW5rcy5wdXNoKGxpbmspO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtc3RMaW5rcztcclxuICAgIH1cclxuXHJcbiAgICAvLyBmb3Igdmlld1xyXG4gICAgbGlua1RvU3RyaW5nKCkge1xyXG4gICAgICAgIGNvbnN0IHNvcnRlZCA9IHRoaXMuc2hvcnRlc3RMaW5rcy5tYXAobGluayA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2ltdWxhdGlvbkxpbmsobGluay5ub2Rlcy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEubmFtZSA8IGIubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhLm5hbWUgPiBiLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgfSksIGxpbmsuY29zdFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgaWYgKGEubm9kZXNbMF0ubmFtZSA8IGIubm9kZXNbMF0ubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhLm5vZGVzWzBdLm5hbWUgPiBiLm5vZGVzWzBdLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhLm5vZGVzWzBdLm5hbWUgPT09IGIubm9kZXNbMF0ubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGEubm9kZXNbMV0ubmFtZSA8IGIubm9kZXNbMV0ubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChhLm5vZGVzWzFdLm5hbWUgPiBiLm5vZGVzWzFdLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgcmV0ID0gXCJcIjtcclxuICAgICAgICBzb3J0ZWQuZm9yRWFjaChsaW5rID0+IHtcclxuICAgICAgICAgICAgcmV0ICs9IGAke2xpbmsubm9kZXNbMF0ubmFtZX0gLSAke2xpbmsubm9kZXNbMV0ubmFtZX07XFxuXFx0YFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHtTaW11bGF0aW9uQ29ubmVjdGlvbn0gZnJvbSBcIi4vU2ltdWxhdGlvbkNvbm5lY3Rpb25cIjtcclxuaW1wb3J0IHtTaW11bGF0aW9uUGFja2FnZX0gZnJvbSBcIi4vU2ltdWxhdGlvblBhY2thZ2VcIjtcclxuaW1wb3J0IHtNaW5pbWFsU3BhblRyZWV9IGZyb20gXCIuLi9TcGFubmluZ1RyZWUvbWluaW1hbFNwYW5uaW5nVHJlZVwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSb3V0aW5nVGFibGVFbnRyeSB7XHJcbiAgICB0YXJnZXQ6IHN0cmluZztcclxuICAgIG5leHRIb3A6IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEJyaWRnZSB7XHJcbiAgICAvLyBCcmlkZ2UgZGF0YVxyXG4gICAgcHVibGljIG5hbWU6IHN0cmluZztcclxuICAgIHB1YmxpYyB2YWx1ZTogbnVtYmVyO1xyXG5cclxuICAgIC8vIERhdGEgZGlzY292ZXJlZFxyXG4gICAgcHVibGljIE1TVDogTWluaW1hbFNwYW5UcmVlO1xyXG5cclxuICAgIC8vIGRhdGEgZm9yIENlbnRyYWxTcGFubmluZ1RyZWVQcm90b2NvbFxyXG4gICAgcHVibGljIElOREVYRUQ6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgQkxPQ0tFRDogKCkgPT4gYm9vbGVhbiA9ICgpID0+ICF0aGlzLk1TVDtcclxuICAgIHB1YmxpYyBESVNDT1ZFUkVEX0xJTktTOiB7XHJcbiAgICAgICAgbm9kZXM6IHsgbmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyIH1bXTsgLy8gbXkgbmFtZSBhbmQgYSBjb25uZWN0ZWQgYnJpZGdlcyBuYW1lXHJcbiAgICAgICAgY29zdDogbnVtYmVyOyAvLyBjb3N0IHRvIHJlYWNoIHRoZSBicmlkZ2VcclxuICAgIH1bXSA9IFtdO1xyXG4gICAgcHVibGljIFJPVVRJTkdfVEFCTEU6IFJvdXRpbmdUYWJsZUVudHJ5W107XHJcblxyXG4gICAgcHJpdmF0ZSBXQUlUSU5HX0ZPUl9CUklER0VTOiBzdHJpbmdbXTtcclxuXHJcbiAgICAvLyBmb3Igdmlld1xyXG4gICAgcHVibGljIHJvb3RPZkluZGV4aW5nID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgcmV0dXJuVG86IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgLy8gc2ltdWxhdGlvbiBDb25uZWN0aW9uXHJcbiAgICBwdWJsaWMgY29ubmVjdGlvbjogU2ltdWxhdGlvbkNvbm5lY3Rpb247XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGR1bXBDaGFuZ2VzOiAoKSA9PiB2b2lkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgdmFsdWU6IG51bWJlciwgY29ubmVjdGlvbjogU2ltdWxhdGlvbkNvbm5lY3Rpb24sIGR1bXBDaGFuZ2VzOiAoYikgPT4gdm9pZCkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XHJcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLnJlY2VpdmUuc3Vic2NyaWJlKChwa2cpID0+IHRoaXMucmVjZWl2ZShwa2cpKTtcclxuICAgICAgICB0aGlzLmR1bXBDaGFuZ2VzID0gKCkgPT4gZHVtcENoYW5nZXModGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGluZGV4TmV0d29yaygpIHtcclxuICAgICAgICB0aGlzLnJvb3RPZkluZGV4aW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmR1bXBDaGFuZ2VzKCk7XHJcbiAgICAgICAgbGV0IHNpYmxpbmdzID0gKGF3YWl0IHRoaXMuY29ubmVjdGlvbi5waW5nKTtcclxuICAgICAgICB0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMgPSBzaWJsaW5ncztcclxuICAgICAgICBzaWJsaW5ncy5mb3JFYWNoKHRhcmdldCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICBwcm90b2NvbDogJ0NTVFAnLFxyXG4gICAgICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdEZWFyIE5laWdoYm9yIGhlYXIgaXMgbXkgbmFtZSBhbmQgdGhlIHBhY2thZ2UgcHJvdmlkZXMgeW91IHRoZSBjb3N0IHRvIG1lLiBGb2xsb3cgdGhlIENTVFAuJyxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiB7bmFtZTogdGhpcy5uYW1lLCB2YWx1ZTogdGhpcy52YWx1ZX1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0YXJnZXRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlbmQocGtnOiBTaW11bGF0aW9uUGFja2FnZSkge1xyXG4gICAgICAgIHBrZy5zZW5kZXIgPSB0aGlzLm5hbWU7XHJcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLnNlbmQubmV4dChwa2cpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWNlaXZlKHBrZzogU2ltdWxhdGlvblBhY2thZ2UpIHtcclxuICAgICAgICBpZiAocGtnLnByb3RvY29sID09PSAnQ1NUUCcpIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVDU1RQUGFja2FnZShwa2cpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVBhY2thZ2UocGtnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBoYW5kbGVQYWNrYWdlKHBrZzogU2ltdWxhdGlvblBhY2thZ2UpIHtcclxuICAgICAgICBpZiAodGhpcy5uYW1lID09PSBwa2cuZGVzdGluYXRpb24pIHtcclxuICAgICAgICAgICAgYWxlcnQodGhpcy5uYW1lICsgXCIgcmVjZWl2ZWQgYSBwa2cgd2l0aDogXCIgKyBwa2cuY29udGVudCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGtnLnRhcmdldCA9IHRoaXMuUk9VVElOR19UQUJMRS5maW5kKGkgPT4gaS50YXJnZXQgPT09IHBrZy5kZXN0aW5hdGlvbikubmV4dEhvcDtcclxuICAgICAgICAgICAgdGhpcy5zZW5kKHBrZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBoYW5kbGVDU1RQUGFja2FnZShwa2c6IFNpbXVsYXRpb25QYWNrYWdlKSB7XHJcbiAgICAgICAgY29uc3QgY3N0cENhc2UgPSB0aGlzLmJ1aWxkQ2FzZShwa2cuY29udGVudCk7XHJcbiAgICAgICAgLy8gaWYgbXN0IHNoYXJlIGJ1aWxkIG1zdCBhbmQgcm91dGluZyB0YWJsZVxyXG4gICAgICAgIGlmIChjc3RwQ2FzZS5pZCA9PT0gMykge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUNhc2UzKHBrZywgY3N0cENhc2UpO1xyXG4gICAgICAgICAgICB0aGlzLmR1bXBDaGFuZ2VzKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuSU5ERVhFRCB8fCBjc3RwQ2FzZS5pZCA9PT0gMSAmJiB0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMgJiYgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTLmluZGV4T2YoY3N0cENhc2UuY29udGVudC5uYW1lKSA9PT0gLTEpXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAvLyBpZiBjYXNlIDEgYW5kIGZpcnN0IEluY29taW5nIHBrZyBhbmQgbm90IHJvb3Qgb2YgaW5kZXhpbmdcclxuICAgICAgICAgICAgbGV0IGZpcnN0ID0gdGhpcy5ESVNDT1ZFUkVEX0xJTktTLmxlbmd0aCA9PT0gMDtcclxuICAgICAgICAgICAgaWYgKGZpcnN0ICYmICF0aGlzLnJvb3RPZkluZGV4aW5nICYmIGNzdHBDYXNlLmlkID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBzcHJlYWQgdG8gYWxsIGRpcmVjdCBjb25uZWN0ZWQgYnJpZGdlcyBleGNlcHQgd2hlcmUgdGhlIHBrZyBjYW1lIGZyb20uXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZExpbmsoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvc3Q6IHBrZy5jb3N0LFxyXG4gICAgICAgICAgICAgICAgICAgIG5vZGVzOiBbe25hbWU6IHRoaXMubmFtZSwgdmFsdWU6IHRoaXMudmFsdWV9LCBjc3RwQ2FzZS5jb250ZW50XVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgIC8qIHRoaXMuRElTQ09WRVJFRF9MSU5LUy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBjb3N0OiBwa2cuY29zdCxcclxuICAgICAgICAgICAgICAgICAgICBub2RlczogW3tuYW1lOiB0aGlzLm5hbWUsIHZhbHVlOiB0aGlzLnZhbHVlfSwgY3N0cENhc2UuY29udGVudF1cclxuICAgICAgICAgICAgICAgIH0pOyovXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNwcmVhZChwa2cpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kdW1wQ2hhbmdlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGlmIHBhY2thZ2UgY29udGFpbnMgbGluayhzKSBpbmZvIGFuZCB3YWl0aW5nIGZvciB0aGF0IGJyaWRnZVxyXG4gICAgICAgICAgICBpZiAoKChjc3RwQ2FzZS5pZCA9PT0gMSAmJiAhZmlyc3QpIHx8IGNzdHBDYXNlLmlkID09PSAyKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVSZXR1cm5lZEluZm9Gcm9tU3ByZWFkKGNzdHBDYXNlLCBwa2cpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kdW1wQ2hhbmdlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGFkZCBuZXcgcmV0dXJuaW5nIHRvIGJyaWRnZVxyXG4gICAgICAgICAgICBpZiAoY3N0cENhc2UuaWQgPT09IDEgJiYgIXRoaXMucm9vdE9mSW5kZXhpbmcpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmV0dXJuVG8ucHVzaChjc3RwQ2FzZS5jb250ZW50Lm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm5hbWUsICc+JywgY3N0cENhc2UuY29udGVudC5uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm90b2NvbDogJ0NTVFAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRGVhciBOZWlnaGJvciBoZWFyIGlzIG15IG5hbWUgYW5kIHRoZSBwYWNrYWdlIHByb3ZpZGVzIHlvdSB0aGUgY29zdCB0byBtZS4gRm9sbG93IHRoZSBDU1RQLicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNjb3ZlcmVkTGlua3M6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29zdDogcGtnLmNvc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXM6IFt7bmFtZTogdGhpcy5uYW1lLCB2YWx1ZTogdGhpcy52YWx1ZX0sIGNzdHBDYXNlLmNvbnRlbnRdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IGNzdHBDYXNlLmNvbnRlbnQubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5kdW1wQ2hhbmdlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGlmIGFsbCBkaXJlY3QgY29ubmVjdGlvbiBhcmUga25vd25cclxuICAgICAgICAgICAgaWYgKCEhdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTICYmIHRoaXMuV0FJVElOR19GT1JfQlJJREdFUy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlU3ByZWFkRmluaXNoZWQocGtnLnNlbmRlcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmR1bXBDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGFkZExpbmsobGlua3Mpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGxpbmtzLmxlbmd0aCA9PT0gdW5kZWZpbmVkKTtcclxuICAgICAgICBpZihsaW5rcy5sZW5ndGggPT09IHVuZGVmaW5lZCl7XHJcbiAgICAgICAgICAgIGxpbmtzID0gW2xpbmtzXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ESVNDT1ZFUkVEX0xJTktTLnB1c2goLi4ubGlua3MuZmlsdGVyKGwgPT4gIXRoaXMuY2hlY2tMaW5rS25vd24obC5ub2Rlcy5tYXAobiA9PiBuLm5hbWUpKSkpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBjaGVja0xpbmtLbm93bihub2Rlczogc3RyaW5nW10pe1xyXG4gICAgICAgIGlmKG5vZGVzWzBdID09PSBub2Rlc1sxXSl7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5ESVNDT1ZFUkVEX0xJTktTLmZpbmRJbmRleChsID0+IGwubm9kZXMuZmluZEluZGV4KG4gPT4gbi5uYW1lID09PSBub2Rlc1swXSkgIT09IC0xICYmIGwubm9kZXMuZmluZEluZGV4KG4gPT4gbi5uYW1lID09PSBub2Rlc1sxXSkgIT09IC0xKSAhPT0gLTFcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGJ1aWxkQ2FzZShjb250ZW50OiBhbnkpIHtcclxuICAgICAgICBjb25zdCBDQVNFX0NTVFAgPSBbXHJcbiAgICAgICAgICAgIC8vIGluIGNhc2UuLi5cclxuICAgICAgICAgICAgY29udGVudC5mcm9tLCAvLyAgLi4uLi4uLi4uLi4uLjEgdGhlIHBhY2thZ2UgY29udGFpbnMgYSBzaW5nbGUgZGlzY292ZXJlZCBsaW5rIChvdXRnb2luZyBDU1RQIHRvIHJlcXVlc3QgYSBzcHJlYWQpXHJcbiAgICAgICAgICAgIGNvbnRlbnQuZGlzY292ZXJlZExpbmtzLCAvLyAuLi4yIHRoZSBwYWNrYWdlIGlzIGEgUmV0dXJuIGZyb20gYSByZXF1ZXN0ZWQgc3ByZWFkIChtdWx0aXBsZSBkaXNjb3ZlcmVkIGxpbmtzKVxyXG4gICAgICAgICAgICBjb250ZW50Lm1zdCwgLy8gICAuLi4uLi4uLi4uLi4uMyB0aGUgcGFja2FnZSBjb250YWlucyB0aGUgZnVsbCBzZXQgb2YgbGlua3MgdG8gY3JlYXRlIHRoZSBtc3RcclxuICAgICAgICBdO1xyXG4gICAgICAgIGNvbnN0IGlkID0gQ0FTRV9DU1RQLmZpbmRJbmRleChjID0+ICEhYyA9PT0gdHJ1ZSkgKyAxO1xyXG4gICAgICAgIGNvbnRlbnQgPSBDQVNFX0NTVFBbaWQgLSAxXTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgY29udGVudFxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaGFuZGxlQ2FzZTMocGtnOiBTaW11bGF0aW9uUGFja2FnZSwgY3N0cENhc2UpIHtcclxuICAgICAgICB0aGlzLmZpbmlzaE1TVChjc3RwQ2FzZS5jb250ZW50LCBwa2cuc2VuZGVyKTtcclxuICAgICAgICAvLyBpZiB0aGlzIGJyaWRnZSBpc24ndCB0aGUgZGVzdGluYXRpb24gb2YgdGhlIHBrZ1xyXG4gICAgICAgIGlmIChwa2cuZGVzdGluYXRpb24gIT09IHRoaXMubmFtZSkge1xyXG4gICAgICAgICAgICAvLyBzZW5kIHBrZyB0dG8gbmV4dEhvcFxyXG4gICAgICAgICAgICBwa2cudGFyZ2V0ID0gdGhpcy5ST1VUSU5HX1RBQkxFLmZpbmQoaSA9PiBpLnRhcmdldCA9PT0gcGtnLmRlc3RpbmF0aW9uKS5uZXh0SG9wO1xyXG4gICAgICAgICAgICB0aGlzLnNlbmQocGtnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIHNwcmVhZChwa2c6IFNpbXVsYXRpb25QYWNrYWdlKSB7XHJcbiAgICAgICAgLy8gdGhlcmVmb3JlIHdlIG5lZWQgdG8ga25vdyBhbGwgY29ubmVjdGVkIEJyaWRnZXNcclxuICAgICAgICBjb25zdCBjb25uZWN0ZWRCcmlkZ2VzID0gYXdhaXQgdGhpcy5jb25uZWN0aW9uLnBpbmc7XHJcbiAgICAgICAgLy8gYW5kIHdlIG5lZWQgdG8gc2F2ZSB0aGVtXHJcbiAgICAgICAgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTID0gY29ubmVjdGVkQnJpZGdlcy5maWx0ZXIobmFtZSA9PiBuYW1lICE9PSBwa2cuY29udGVudC5mcm9tLm5hbWUpO1xyXG4gICAgICAgIC8vIHNwcmVhZFxyXG4gICAgICAgIHRoaXMuV0FJVElOR19GT1JfQlJJREdFUy5mb3JFYWNoKHRhcmdldCA9PiB0aGlzLnNlbmQoe1xyXG4gICAgICAgICAgICBwcm90b2NvbDogJ0NTVFAnLFxyXG4gICAgICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRGVhciBOZWlnaGJvciBoZWFyIGlzIG15IG5hbWUgYW5kIHRoZSBwYWNrYWdlIHByb3ZpZGVzIHlvdSB0aGUgY29zdCB0byBtZS4gRm9sbG93IHRoZSBDU1RQLicsXHJcbiAgICAgICAgICAgICAgICBmcm9tOiB7bmFtZTogdGhpcy5uYW1lLCB2YWx1ZTogdGhpcy52YWx1ZX1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGFyZ2V0XHJcbiAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaGFuZGxlUmV0dXJuZWRJbmZvRnJvbVNwcmVhZChjc3RwQ2FzZSwgcGtnKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubmFtZSA9PT0gJ0MnKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhc2Rhc2QnLCB0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMsIGNzdHBDYXNlLCBwa2cpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMuZmluZEluZGV4KG4gPT4gbiA9PT0gcGtnLnNlbmRlcik7XHJcbiAgICAgICAgaWYoc3RhcnQgIT09IC0xKXtcclxuICAgICAgICAgICAgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTLnNwbGljZShzdGFydCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHJlbW92ZSBzZW5kZXIgZnJvbSB3YWl0aW5nIGZvclxyXG4gICAgICAgIGxldCB0ID0gY3N0cENhc2UuY29udGVudDtcclxuICAgICAgICBpZiAoY3N0cENhc2UuaWQgPT09IDEpIHtcclxuICAgICAgICAgICAgdCA9IFt7XHJcbiAgICAgICAgICAgICAgICBjb3N0OiBwa2cuY29zdCxcclxuICAgICAgICAgICAgICAgIG5vZGVzOiBbe25hbWU6IHRoaXMubmFtZSwgdmFsdWU6IHRoaXMudmFsdWV9LCB0XVxyXG4gICAgICAgICAgICB9XTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRbdC5sZW5ndGggLSAxXS5jb3N0ID09PSAtMSkge1xyXG4gICAgICAgICAgICB0W3QubGVuZ3RoIC0gMV0uY29zdCA9IHBrZy5jb3N0O1xyXG4gICAgICAgICAgICB0W3QubGVuZ3RoIC0gMV0ubm9kZXMucHVzaCh7bmFtZTogdGhpcy5uYW1lLCB2YWx1ZTogdGhpcy52YWx1ZX0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBzYXZlIGxpbmsocylcclxuICAgICAgICB0aGlzLmFkZExpbmsoWy4uLnRdKTtcclxuICAgICAgICAvL3RoaXMuRElTQ09WRVJFRF9MSU5LUy5wdXNoKC4uLnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZmluaXNoTVNUKGxpbmtzLCBzZW5kZXIpIHtcclxuICAgICAgICBjb25zdCBtc3QgPSBuZXcgTWluaW1hbFNwYW5UcmVlKGxpbmtzKTtcclxuICAgICAgICB0aGlzLk1TVCA9IG1zdDtcclxuICAgICAgICB0aGlzLlJPVVRJTkdfVEFCTEUgPSB0aGlzLk1TVC5nZXRSb3V0aW5nVGFibGUodGhpcy5uYW1lLCBzZW5kZXIpO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5maW5pc2hlZEluZGV4aW5nLm5leHQobXN0KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGhhbmRsZVNwcmVhZEZpbmlzaGVkKHNlbmRlcikge1xyXG4gICAgICAgIHRoaXMuc2VuZERpc2NvdmVyZWRMaW5rc0JhY2soKTtcclxuICAgICAgICB0aGlzLklOREVYRUQgPSB0cnVlO1xyXG4gICAgICAgIGlmICghdGhpcy5yb290T2ZJbmRleGluZykge1xyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uZmluaXNoZWRJbmRleGluZy5uZXh0KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zaGFyZU1zdChzZW5kZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNoYXJlTXN0KHNlbmRlcikge1xyXG4gICAgICAgIGxldCBsaW5rc01zdCA9IHRoaXMuZ2V0TGlua3MoKTtcclxuICAgICAgICB0aGlzLmZpbmlzaE1TVChsaW5rc01zdCwgc2VuZGVyKTtcclxuICAgICAgICB0aGlzLlJPVVRJTkdfVEFCTEUuZm9yRWFjaCgoaXRlbTogUm91dGluZ1RhYmxlRW50cnkpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kKHtcclxuICAgICAgICAgICAgICAgIHByb3RvY29sOiAnQ1NUUCcsXHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0RlYXIgTmVpZ2hib3IgaGVhciBpcyBteSBuYW1lIGFuZCB0aGUgcGFja2FnZSBwcm92aWRlcyB5b3UgdGhlIGNvc3QgdG8gbWUuIEZvbGxvdyB0aGUgQ1NUUC4nLFxyXG4gICAgICAgICAgICAgICAgICAgIG1zdDogbGlua3NNc3RcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IGl0ZW0ubmV4dEhvcCxcclxuICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uOiBpdGVtLnRhcmdldFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldExpbmtzKCkge1xyXG4gICAgICAgIGNvbnN0IGxpbmtzID0gW107XHJcbiAgICAgICAgdGhpcy5ESVNDT1ZFUkVEX0xJTktTLmZvckVhY2gobCA9PiB7XHJcbiAgICAgICAgICAgIGlmICghbGlua3MuZmluZChsaW5rID0+IGwubm9kZXMuZmluZEluZGV4KG4gPT4gbi5uYW1lID09PSBsaW5rLm5vZGVzWzBdLm5hbWUpICE9PSAtMSAmJiBsLm5vZGVzLmZpbmRJbmRleChuID0+IG4ubmFtZSA9PT0gbGluay5ub2Rlc1sxXS5uYW1lKSAhPT0gLTEpKSB7XHJcbiAgICAgICAgICAgICAgICBsaW5rcy5wdXNoKGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIFsuLi5saW5rc107XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZW5kRGlzY292ZXJlZExpbmtzQmFjaygpIHtcclxuXHJcbiAgICAgICAgdGhpcy5yZXR1cm5Uby5mb3JFYWNoKHRhcmdldCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICBwcm90b2NvbDogJ0NTVFAnLFxyXG4gICAgICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdEZWFyIE5laWdoYm9yIGhlYXIgYXJlIG15IGRpc2NvdmVyZWQgbGlua3MsIHlvdSBtYXkgY29uY2F0IHRoZW0gd2l0aCB5b3VycyBhbmQgc2VuZCB0aGVtIGJhY2shJyxcclxuICAgICAgICAgICAgICAgICAgICBkaXNjb3ZlcmVkTGlua3M6IFsuLi50aGlzLkRJU0NPVkVSRURfTElOS1MsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29zdDogLTEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzOiBbe25hbWU6IHRoaXMubmFtZSwgdmFsdWU6IHRoaXMudmFsdWV9XVxyXG4gICAgICAgICAgICAgICAgICAgIH1dXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiIsIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMClcclxuICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzRnVuY3Rpb24uanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG52YXIgX2VuYWJsZV9zdXBlcl9ncm9zc19tb2RlX3RoYXRfd2lsbF9jYXVzZV9iYWRfdGhpbmdzID0gZmFsc2U7XG5leHBvcnQgdmFyIGNvbmZpZyA9IHtcbiAgICBQcm9taXNlOiB1bmRlZmluZWQsXG4gICAgc2V0IHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSAvKkBfX1BVUkVfXyovIG5ldyBFcnJvcigpO1xuICAgICAgICAgICAgLypAX19QVVJFX18qLyBjb25zb2xlLndhcm4oJ0RFUFJFQ0FURUQhIFJ4SlMgd2FzIHNldCB0byB1c2UgZGVwcmVjYXRlZCBzeW5jaHJvbm91cyBlcnJvciBoYW5kbGluZyBiZWhhdmlvciBieSBjb2RlIGF0OiBcXG4nICsgZXJyb3Iuc3RhY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKF9lbmFibGVfc3VwZXJfZ3Jvc3NfbW9kZV90aGF0X3dpbGxfY2F1c2VfYmFkX3RoaW5ncykge1xuICAgICAgICAgICAgLypAX19QVVJFX18qLyBjb25zb2xlLmxvZygnUnhKUzogQmFjayB0byBhIGJldHRlciBlcnJvciBiZWhhdmlvci4gVGhhbmsgeW91LiA8MycpO1xuICAgICAgICB9XG4gICAgICAgIF9lbmFibGVfc3VwZXJfZ3Jvc3NfbW9kZV90aGF0X3dpbGxfY2F1c2VfYmFkX3RoaW5ncyA9IHZhbHVlO1xuICAgIH0sXG4gICAgZ2V0IHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcoKSB7XG4gICAgICAgIHJldHVybiBfZW5hYmxlX3N1cGVyX2dyb3NzX21vZGVfdGhhdF93aWxsX2NhdXNlX2JhZF90aGluZ3M7XG4gICAgfSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25maWcuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgZnVuY3Rpb24gaG9zdFJlcG9ydEVycm9yKGVycikge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyB0aHJvdyBlcnI7IH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aG9zdFJlcG9ydEVycm9yLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfY29uZmlnLF91dGlsX2hvc3RSZXBvcnRFcnJvciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgeyBob3N0UmVwb3J0RXJyb3IgfSBmcm9tICcuL3V0aWwvaG9zdFJlcG9ydEVycm9yJztcbmV4cG9ydCB2YXIgZW1wdHkgPSB7XG4gICAgY2xvc2VkOiB0cnVlLFxuICAgIG5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkgeyB9LFxuICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaG9zdFJlcG9ydEVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7IH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYnNlcnZlci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCB2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4ICYmIHR5cGVvZiB4Lmxlbmd0aCA9PT0gJ251bWJlcic7IH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNBcnJheS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmZ1bmN0aW9uIFVuc3Vic2NyaXB0aW9uRXJyb3JJbXBsKGVycm9ycykge1xuICAgIEVycm9yLmNhbGwodGhpcyk7XG4gICAgdGhpcy5tZXNzYWdlID0gZXJyb3JzID9cbiAgICAgICAgZXJyb3JzLmxlbmd0aCArIFwiIGVycm9ycyBvY2N1cnJlZCBkdXJpbmcgdW5zdWJzY3JpcHRpb246XFxuXCIgKyBlcnJvcnMubWFwKGZ1bmN0aW9uIChlcnIsIGkpIHsgcmV0dXJuIGkgKyAxICsgXCIpIFwiICsgZXJyLnRvU3RyaW5nKCk7IH0pLmpvaW4oJ1xcbiAgJykgOiAnJztcbiAgICB0aGlzLm5hbWUgPSAnVW5zdWJzY3JpcHRpb25FcnJvcic7XG4gICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XG4gICAgcmV0dXJuIHRoaXM7XG59XG5VbnN1YnNjcmlwdGlvbkVycm9ySW1wbC5wcm90b3R5cGUgPSAvKkBfX1BVUkVfXyovIE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbmV4cG9ydCB2YXIgVW5zdWJzY3JpcHRpb25FcnJvciA9IFVuc3Vic2NyaXB0aW9uRXJyb3JJbXBsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VW5zdWJzY3JpcHRpb25FcnJvci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX3V0aWxfaXNBcnJheSxfdXRpbF9pc09iamVjdCxfdXRpbF9pc0Z1bmN0aW9uLF91dGlsX1Vuc3Vic2NyaXB0aW9uRXJyb3IgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgaXNBcnJheSB9IGZyb20gJy4vdXRpbC9pc0FycmF5JztcbmltcG9ydCB7IGlzT2JqZWN0IH0gZnJvbSAnLi91dGlsL2lzT2JqZWN0JztcbmltcG9ydCB7IGlzRnVuY3Rpb24gfSBmcm9tICcuL3V0aWwvaXNGdW5jdGlvbic7XG5pbXBvcnQgeyBVbnN1YnNjcmlwdGlvbkVycm9yIH0gZnJvbSAnLi91dGlsL1Vuc3Vic2NyaXB0aW9uRXJyb3InO1xudmFyIFN1YnNjcmlwdGlvbiA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdWJzY3JpcHRpb24odW5zdWJzY3JpYmUpIHtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcGFyZW50cyA9IG51bGw7XG4gICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMgPSBudWxsO1xuICAgICAgICBpZiAodW5zdWJzY3JpYmUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlID0gdW5zdWJzY3JpYmU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGhhc0Vycm9ycyA9IGZhbHNlO1xuICAgICAgICB2YXIgZXJyb3JzO1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX2EgPSB0aGlzLCBfcGFyZW50ID0gX2EuX3BhcmVudCwgX3BhcmVudHMgPSBfYS5fcGFyZW50cywgX3Vuc3Vic2NyaWJlID0gX2EuX3Vuc3Vic2NyaWJlLCBfc3Vic2NyaXB0aW9ucyA9IF9hLl9zdWJzY3JpcHRpb25zO1xuICAgICAgICB0aGlzLmNsb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX3BhcmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3BhcmVudHMgPSBudWxsO1xuICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25zID0gbnVsbDtcbiAgICAgICAgdmFyIGluZGV4ID0gLTE7XG4gICAgICAgIHZhciBsZW4gPSBfcGFyZW50cyA/IF9wYXJlbnRzLmxlbmd0aCA6IDA7XG4gICAgICAgIHdoaWxlIChfcGFyZW50KSB7XG4gICAgICAgICAgICBfcGFyZW50LnJlbW92ZSh0aGlzKTtcbiAgICAgICAgICAgIF9wYXJlbnQgPSArK2luZGV4IDwgbGVuICYmIF9wYXJlbnRzW2luZGV4XSB8fCBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKF91bnN1YnNjcmliZSkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgX3Vuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGhhc0Vycm9ycyA9IHRydWU7XG4gICAgICAgICAgICAgICAgZXJyb3JzID0gZSBpbnN0YW5jZW9mIFVuc3Vic2NyaXB0aW9uRXJyb3IgPyBmbGF0dGVuVW5zdWJzY3JpcHRpb25FcnJvcnMoZS5lcnJvcnMpIDogW2VdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FycmF5KF9zdWJzY3JpcHRpb25zKSkge1xuICAgICAgICAgICAgaW5kZXggPSAtMTtcbiAgICAgICAgICAgIGxlbiA9IF9zdWJzY3JpcHRpb25zLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN1YiA9IF9zdWJzY3JpcHRpb25zW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoaXNPYmplY3Qoc3ViKSkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ViLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0Vycm9ycyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMgfHwgW107XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFVuc3Vic2NyaXB0aW9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMuY29uY2F0KGZsYXR0ZW5VbnN1YnNjcmlwdGlvbkVycm9ycyhlLmVycm9ycykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0Vycm9ycykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3Vic2NyaXB0aW9uRXJyb3IoZXJyb3JzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodGVhcmRvd24pIHtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHRlYXJkb3duO1xuICAgICAgICBzd2l0Y2ggKHR5cGVvZiB0ZWFyZG93bikge1xuICAgICAgICAgICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24odGVhcmRvd24pO1xuICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uID09PSB0aGlzIHx8IHN1YnNjcmlwdGlvbi5jbG9zZWQgfHwgdHlwZW9mIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIShzdWJzY3JpcHRpb24gaW5zdGFuY2VvZiBTdWJzY3JpcHRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSBzdWJzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLl9zdWJzY3JpcHRpb25zID0gW3RtcF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIGlmICghdGVhcmRvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN1YnNjcmlwdGlvbi5FTVBUWTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bnJlY29nbml6ZWQgdGVhcmRvd24gJyArIHRlYXJkb3duICsgJyBhZGRlZCB0byBTdWJzY3JpcHRpb24uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbi5fYWRkUGFyZW50KHRoaXMpKSB7XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IHRoaXMuX3N1YnNjcmlwdGlvbnM7XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IFtzdWJzY3JpcHRpb25dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgfTtcbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSB0aGlzLl9zdWJzY3JpcHRpb25zO1xuICAgICAgICBpZiAoc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbkluZGV4ID0gc3Vic2NyaXB0aW9ucy5pbmRleE9mKHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9ucy5zcGxpY2Uoc3Vic2NyaXB0aW9uSW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLl9hZGRQYXJlbnQgPSBmdW5jdGlvbiAocGFyZW50KSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIF9wYXJlbnQgPSBfYS5fcGFyZW50LCBfcGFyZW50cyA9IF9hLl9wYXJlbnRzO1xuICAgICAgICBpZiAoX3BhcmVudCA9PT0gcGFyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIV9wYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFfcGFyZW50cykge1xuICAgICAgICAgICAgdGhpcy5fcGFyZW50cyA9IFtwYXJlbnRdO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoX3BhcmVudHMuaW5kZXhPZihwYXJlbnQpID09PSAtMSkge1xuICAgICAgICAgICAgX3BhcmVudHMucHVzaChwYXJlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uLkVNUFRZID0gKGZ1bmN0aW9uIChlbXB0eSkge1xuICAgICAgICBlbXB0eS5jbG9zZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgfShuZXcgU3Vic2NyaXB0aW9uKCkpKTtcbiAgICByZXR1cm4gU3Vic2NyaXB0aW9uO1xufSgpKTtcbmV4cG9ydCB7IFN1YnNjcmlwdGlvbiB9O1xuZnVuY3Rpb24gZmxhdHRlblVuc3Vic2NyaXB0aW9uRXJyb3JzKGVycm9ycykge1xuICAgIHJldHVybiBlcnJvcnMucmVkdWNlKGZ1bmN0aW9uIChlcnJzLCBlcnIpIHsgcmV0dXJuIGVycnMuY29uY2F0KChlcnIgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yKSA/IGVyci5lcnJvcnMgOiBlcnIpOyB9LCBbXSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdWJzY3JpcHRpb24uanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QoeCkge1xuICAgIHJldHVybiB4ICE9PSBudWxsICYmIHR5cGVvZiB4ID09PSAnb2JqZWN0Jztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzT2JqZWN0LmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IHZhciByeFN1YnNjcmliZXIgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nXG4gICAgPyAvKkBfX1BVUkVfXyovIFN5bWJvbCgncnhTdWJzY3JpYmVyJylcbiAgICA6ICdAQHJ4U3Vic2NyaWJlcl8nICsgLypAX19QVVJFX18qLyBNYXRoLnJhbmRvbSgpO1xuZXhwb3J0IHZhciAkJHJ4U3Vic2NyaWJlciA9IHJ4U3Vic2NyaWJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ4U3Vic2NyaWJlci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX3V0aWxfaXNGdW5jdGlvbixfT2JzZXJ2ZXIsX1N1YnNjcmlwdGlvbixfaW50ZXJuYWxfc3ltYm9sX3J4U3Vic2NyaWJlcixfY29uZmlnLF91dGlsX2hvc3RSZXBvcnRFcnJvciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vdXRpbC9pc0Z1bmN0aW9uJztcbmltcG9ydCB7IGVtcHR5IGFzIGVtcHR5T2JzZXJ2ZXIgfSBmcm9tICcuL09ic2VydmVyJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IHJ4U3Vic2NyaWJlciBhcyByeFN1YnNjcmliZXJTeW1ib2wgfSBmcm9tICcuLi9pbnRlcm5hbC9zeW1ib2wvcnhTdWJzY3JpYmVyJztcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJy4vY29uZmlnJztcbmltcG9ydCB7IGhvc3RSZXBvcnRFcnJvciB9IGZyb20gJy4vdXRpbC9ob3N0UmVwb3J0RXJyb3InO1xudmFyIFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc3luY0Vycm9yVmFsdWUgPSBudWxsO1xuICAgICAgICBfdGhpcy5zeW5jRXJyb3JUaHJvd24gPSBmYWxzZTtcbiAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGVtcHR5T2JzZXJ2ZXI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgaWYgKCFkZXN0aW5hdGlvbk9yTmV4dCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGVtcHR5T2JzZXJ2ZXI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRlc3RpbmF0aW9uT3JOZXh0ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVzdGluYXRpb25Pck5leHQgaW5zdGFuY2VvZiBTdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zeW5jRXJyb3JUaHJvd2FibGUgPSBkZXN0aW5hdGlvbk9yTmV4dC5zeW5jRXJyb3JUaHJvd2FibGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uT3JOZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb25Pck5leHQuYWRkKF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnN5bmNFcnJvclRocm93YWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IG5ldyBTYWZlU3Vic2NyaWJlcihfdGhpcywgZGVzdGluYXRpb25Pck5leHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IG5ldyBTYWZlU3Vic2NyaWJlcihfdGhpcywgZGVzdGluYXRpb25Pck5leHQsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZVtyeFN1YnNjcmliZXJTeW1ib2xdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfTtcbiAgICBTdWJzY3JpYmVyLmNyZWF0ZSA9IGZ1bmN0aW9uIChuZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIHN1YnNjcmliZXIgPSBuZXcgU3Vic2NyaWJlcihuZXh0LCBlcnJvciwgY29tcGxldGUpO1xuICAgICAgICBzdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gc3Vic2NyaWJlcjtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdGhpcy5fbmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51bnN1YnNjcmliZS5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlQW5kUmVjeWNsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgX3BhcmVudCA9IF9hLl9wYXJlbnQsIF9wYXJlbnRzID0gX2EuX3BhcmVudHM7XG4gICAgICAgIHRoaXMuX3BhcmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3BhcmVudHMgPSBudWxsO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRoaXMuY2xvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3BhcmVudCA9IF9wYXJlbnQ7XG4gICAgICAgIHRoaXMuX3BhcmVudHMgPSBfcGFyZW50cztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gU3Vic2NyaWJlcjtcbn0oU3Vic2NyaXB0aW9uKSk7XG5leHBvcnQgeyBTdWJzY3JpYmVyIH07XG52YXIgU2FmZVN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoU2FmZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2FmZVN1YnNjcmliZXIoX3BhcmVudFN1YnNjcmliZXIsIG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuX3BhcmVudFN1YnNjcmliZXIgPSBfcGFyZW50U3Vic2NyaWJlcjtcbiAgICAgICAgdmFyIG5leHQ7XG4gICAgICAgIHZhciBjb250ZXh0ID0gX3RoaXM7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKG9ic2VydmVyT3JOZXh0KSkge1xuICAgICAgICAgICAgbmV4dCA9IG9ic2VydmVyT3JOZXh0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9ic2VydmVyT3JOZXh0KSB7XG4gICAgICAgICAgICBuZXh0ID0gb2JzZXJ2ZXJPck5leHQubmV4dDtcbiAgICAgICAgICAgIGVycm9yID0gb2JzZXJ2ZXJPck5leHQuZXJyb3I7XG4gICAgICAgICAgICBjb21wbGV0ZSA9IG9ic2VydmVyT3JOZXh0LmNvbXBsZXRlO1xuICAgICAgICAgICAgaWYgKG9ic2VydmVyT3JOZXh0ICE9PSBlbXB0eU9ic2VydmVyKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dCA9IE9iamVjdC5jcmVhdGUob2JzZXJ2ZXJPck5leHQpO1xuICAgICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRleHQudW5zdWJzY3JpYmUpKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZChjb250ZXh0LnVuc3Vic2NyaWJlLmJpbmQoY29udGV4dCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250ZXh0LnVuc3Vic2NyaWJlID0gX3RoaXMudW5zdWJzY3JpYmUuYmluZChfdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuX2NvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICBfdGhpcy5fbmV4dCA9IG5leHQ7XG4gICAgICAgIF90aGlzLl9lcnJvciA9IGVycm9yO1xuICAgICAgICBfdGhpcy5fY29tcGxldGUgPSBjb21wbGV0ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkICYmIHRoaXMuX25leHQpIHtcbiAgICAgICAgICAgIHZhciBfcGFyZW50U3Vic2NyaWJlciA9IHRoaXMuX3BhcmVudFN1YnNjcmliZXI7XG4gICAgICAgICAgICBpZiAoIWNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nIHx8ICFfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JVbnN1Yih0aGlzLl9uZXh0LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLl9fdHJ5T3JTZXRFcnJvcihfcGFyZW50U3Vic2NyaWJlciwgdGhpcy5fbmV4dCwgdmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHZhciBfcGFyZW50U3Vic2NyaWJlciA9IHRoaXMuX3BhcmVudFN1YnNjcmliZXI7XG4gICAgICAgICAgICB2YXIgdXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyA9IGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2Vycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nIHx8ICFfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yVW5zdWIodGhpcy5fZXJyb3IsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclNldEVycm9yKF9wYXJlbnRTdWJzY3JpYmVyLCB0aGlzLl9lcnJvciwgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBob3N0UmVwb3J0RXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIF9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclZhbHVlID0gZXJyO1xuICAgICAgICAgICAgICAgICAgICBfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaG9zdFJlcG9ydEVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZWRDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl9jb21wbGV0ZS5jYWxsKF90aGlzLl9jb250ZXh0KTsgfTtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nIHx8ICFfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yVW5zdWIod3JhcHBlZENvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yU2V0RXJyb3IoX3BhcmVudFN1YnNjcmliZXIsIHdyYXBwZWRDb21wbGV0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5fX3RyeU9yVW5zdWIgPSBmdW5jdGlvbiAoZm4sIHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMuX2NvbnRleHQsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBob3N0UmVwb3J0RXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLl9fdHJ5T3JTZXRFcnJvciA9IGZ1bmN0aW9uIChwYXJlbnQsIGZuLCB2YWx1ZSkge1xuICAgICAgICBpZiAoIWNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2JhZCBjYWxsJyk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcy5fY29udGV4dCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgICAgIHBhcmVudC5zeW5jRXJyb3JWYWx1ZSA9IGVycjtcbiAgICAgICAgICAgICAgICBwYXJlbnQuc3luY0Vycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGhvc3RSZXBvcnRFcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfcGFyZW50U3Vic2NyaWJlciA9IHRoaXMuX3BhcmVudFN1YnNjcmliZXI7XG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSBudWxsO1xuICAgICAgICB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyID0gbnVsbDtcbiAgICAgICAgX3BhcmVudFN1YnNjcmliZXIudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIHJldHVybiBTYWZlU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcikpO1xuZXhwb3J0IHsgU2FmZVN1YnNjcmliZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YnNjcmliZXIuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgdmFyIG9ic2VydmFibGUgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5vYnNlcnZhYmxlIHx8ICdAQG9ic2VydmFibGUnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JzZXJ2YWJsZS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCBmdW5jdGlvbiBub29wKCkgeyB9XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ub29wLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfbm9vcCBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBub29wIH0gZnJvbSAnLi9ub29wJztcbmV4cG9ydCBmdW5jdGlvbiBwaXBlKCkge1xuICAgIHZhciBmbnMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBmbnNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuIHBpcGVGcm9tQXJyYXkoZm5zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwaXBlRnJvbUFycmF5KGZucykge1xuICAgIGlmICghZm5zKSB7XG4gICAgICAgIHJldHVybiBub29wO1xuICAgIH1cbiAgICBpZiAoZm5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gZm5zWzBdO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gcGlwZWQoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGZucy5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIGZuKSB7IHJldHVybiBmbihwcmV2KTsgfSwgaW5wdXQpO1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1waXBlLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfdXRpbF9jYW5SZXBvcnRFcnJvcixfdXRpbF90b1N1YnNjcmliZXIsX2ludGVybmFsX3N5bWJvbF9vYnNlcnZhYmxlLF91dGlsX3BpcGUsX2NvbmZpZyBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBjYW5SZXBvcnRFcnJvciB9IGZyb20gJy4vdXRpbC9jYW5SZXBvcnRFcnJvcic7XG5pbXBvcnQgeyB0b1N1YnNjcmliZXIgfSBmcm9tICcuL3V0aWwvdG9TdWJzY3JpYmVyJztcbmltcG9ydCB7IG9ic2VydmFibGUgYXMgU3ltYm9sX29ic2VydmFibGUgfSBmcm9tICcuLi9pbnRlcm5hbC9zeW1ib2wvb2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBwaXBlRnJvbUFycmF5IH0gZnJvbSAnLi91dGlsL3BpcGUnO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xudmFyIE9ic2VydmFibGUgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT2JzZXJ2YWJsZShzdWJzY3JpYmUpIHtcbiAgICAgICAgdGhpcy5faXNTY2FsYXIgPSBmYWxzZTtcbiAgICAgICAgaWYgKHN1YnNjcmliZSkge1xuICAgICAgICAgICAgdGhpcy5fc3Vic2NyaWJlID0gc3Vic2NyaWJlO1xuICAgICAgICB9XG4gICAgfVxuICAgIE9ic2VydmFibGUucHJvdG90eXBlLmxpZnQgPSBmdW5jdGlvbiAob3BlcmF0b3IpIHtcbiAgICAgICAgdmFyIG9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZSgpO1xuICAgICAgICBvYnNlcnZhYmxlLnNvdXJjZSA9IHRoaXM7XG4gICAgICAgIG9ic2VydmFibGUub3BlcmF0b3IgPSBvcGVyYXRvcjtcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGU7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAob2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIgb3BlcmF0b3IgPSB0aGlzLm9wZXJhdG9yO1xuICAgICAgICB2YXIgc2luayA9IHRvU3Vic2NyaWJlcihvYnNlcnZlck9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKTtcbiAgICAgICAgaWYgKG9wZXJhdG9yKSB7XG4gICAgICAgICAgICBzaW5rLmFkZChvcGVyYXRvci5jYWxsKHNpbmssIHRoaXMuc291cmNlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzaW5rLmFkZCh0aGlzLnNvdXJjZSB8fCAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgJiYgIXNpbmsuc3luY0Vycm9yVGhyb3dhYmxlKSA/XG4gICAgICAgICAgICAgICAgdGhpcy5fc3Vic2NyaWJlKHNpbmspIDpcbiAgICAgICAgICAgICAgICB0aGlzLl90cnlTdWJzY3JpYmUoc2luaykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgaWYgKHNpbmsuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICAgICAgc2luay5zeW5jRXJyb3JUaHJvd2FibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoc2luay5zeW5jRXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgc2luay5zeW5jRXJyb3JWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNpbms7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlID0gZnVuY3Rpb24gKHNpbmspIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmUoc2luayk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgaWYgKGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgICAgc2luay5zeW5jRXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNpbmsuc3luY0Vycm9yVmFsdWUgPSBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2FuUmVwb3J0RXJyb3Ioc2luaykpIHtcbiAgICAgICAgICAgICAgICBzaW5rLmVycm9yKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChuZXh0LCBwcm9taXNlQ3Rvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBwcm9taXNlQ3RvciA9IGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKTtcbiAgICAgICAgcmV0dXJuIG5ldyBwcm9taXNlQ3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQodmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHJlamVjdCwgcmVzb2x2ZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLnNvdXJjZTtcbiAgICAgICAgcmV0dXJuIHNvdXJjZSAmJiBzb3VyY2Uuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGVbU3ltYm9sX29ic2VydmFibGVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvcGVyYXRpb25zID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBvcGVyYXRpb25zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wZXJhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGlwZUZyb21BcnJheShvcGVyYXRpb25zKSh0aGlzKTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnRvUHJvbWlzZSA9IGZ1bmN0aW9uIChwcm9taXNlQ3Rvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBwcm9taXNlQ3RvciA9IGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKTtcbiAgICAgICAgcmV0dXJuIG5ldyBwcm9taXNlQ3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgICAgICBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHZhbHVlID0geDsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gcmVqZWN0KGVycik7IH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc29sdmUodmFsdWUpOyB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKHN1YnNjcmliZSk7XG4gICAgfTtcbiAgICByZXR1cm4gT2JzZXJ2YWJsZTtcbn0oKSk7XG5leHBvcnQgeyBPYnNlcnZhYmxlIH07XG5mdW5jdGlvbiBnZXRQcm9taXNlQ3Rvcihwcm9taXNlQ3Rvcikge1xuICAgIGlmICghcHJvbWlzZUN0b3IpIHtcbiAgICAgICAgcHJvbWlzZUN0b3IgPSBjb25maWcuUHJvbWlzZSB8fCBQcm9taXNlO1xuICAgIH1cbiAgICBpZiAoIXByb21pc2VDdG9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignbm8gUHJvbWlzZSBpbXBsIGZvdW5kJyk7XG4gICAgfVxuICAgIHJldHVybiBwcm9taXNlQ3Rvcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmFibGUuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9TdWJzY3JpYmVyLF9zeW1ib2xfcnhTdWJzY3JpYmVyLF9PYnNlcnZlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBTdWJzY3JpYmVyIH0gZnJvbSAnLi4vU3Vic2NyaWJlcic7XG5pbXBvcnQgeyByeFN1YnNjcmliZXIgYXMgcnhTdWJzY3JpYmVyU3ltYm9sIH0gZnJvbSAnLi4vc3ltYm9sL3J4U3Vic2NyaWJlcic7XG5pbXBvcnQgeyBlbXB0eSBhcyBlbXB0eU9ic2VydmVyIH0gZnJvbSAnLi4vT2JzZXJ2ZXInO1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3Vic2NyaWJlcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgaWYgKG5leHRPck9ic2VydmVyKSB7XG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciBpbnN0YW5jZW9mIFN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXh0T3JPYnNlcnZlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXJbcnhTdWJzY3JpYmVyU3ltYm9sXSkge1xuICAgICAgICAgICAgcmV0dXJuIG5leHRPck9ic2VydmVyW3J4U3Vic2NyaWJlclN5bWJvbF0oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIW5leHRPck9ic2VydmVyICYmICFlcnJvciAmJiAhY29tcGxldGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVyKGVtcHR5T2JzZXJ2ZXIpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFN1YnNjcmliZXIobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b1N1YnNjcmliZXIuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9TdWJzY3JpYmVyIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IFN1YnNjcmliZXIgfSBmcm9tICcuLi9TdWJzY3JpYmVyJztcbmV4cG9ydCBmdW5jdGlvbiBjYW5SZXBvcnRFcnJvcihvYnNlcnZlcikge1xuICAgIHdoaWxlIChvYnNlcnZlcikge1xuICAgICAgICB2YXIgX2EgPSBvYnNlcnZlciwgY2xvc2VkXzEgPSBfYS5jbG9zZWQsIGRlc3RpbmF0aW9uID0gX2EuZGVzdGluYXRpb24sIGlzU3RvcHBlZCA9IF9hLmlzU3RvcHBlZDtcbiAgICAgICAgaWYgKGNsb3NlZF8xIHx8IGlzU3RvcHBlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlc3RpbmF0aW9uICYmIGRlc3RpbmF0aW9uIGluc3RhbmNlb2YgU3Vic2NyaWJlcikge1xuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9ic2VydmVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhblJlcG9ydEVycm9yLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZnVuY3Rpb24gT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JJbXBsKCkge1xuICAgIEVycm9yLmNhbGwodGhpcyk7XG4gICAgdGhpcy5tZXNzYWdlID0gJ29iamVjdCB1bnN1YnNjcmliZWQnO1xuICAgIHRoaXMubmFtZSA9ICdPYmplY3RVbnN1YnNjcmliZWRFcnJvcic7XG4gICAgcmV0dXJuIHRoaXM7XG59XG5PYmplY3RVbnN1YnNjcmliZWRFcnJvckltcGwucHJvdG90eXBlID0gLypAX19QVVJFX18qLyBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG5leHBvcnQgdmFyIE9iamVjdFVuc3Vic2NyaWJlZEVycm9yID0gT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JJbXBsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpcHRpb24gUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3Vic2NyaXB0aW9uJztcbnZhciBTdWJqZWN0U3Vic2NyaXB0aW9uID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFN1YmplY3RTdWJzY3JpcHRpb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3ViamVjdFN1YnNjcmlwdGlvbihzdWJqZWN0LCBzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnN1YmplY3QgPSBzdWJqZWN0O1xuICAgICAgICBfdGhpcy5zdWJzY3JpYmVyID0gc3Vic2NyaWJlcjtcbiAgICAgICAgX3RoaXMuY2xvc2VkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU3ViamVjdFN1YnNjcmlwdGlvbi5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgdmFyIHN1YmplY3QgPSB0aGlzLnN1YmplY3Q7XG4gICAgICAgIHZhciBvYnNlcnZlcnMgPSBzdWJqZWN0Lm9ic2VydmVycztcbiAgICAgICAgdGhpcy5zdWJqZWN0ID0gbnVsbDtcbiAgICAgICAgaWYgKCFvYnNlcnZlcnMgfHwgb2JzZXJ2ZXJzLmxlbmd0aCA9PT0gMCB8fCBzdWJqZWN0LmlzU3RvcHBlZCB8fCBzdWJqZWN0LmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdWJzY3JpYmVySW5kZXggPSBvYnNlcnZlcnMuaW5kZXhPZih0aGlzLnN1YnNjcmliZXIpO1xuICAgICAgICBpZiAoc3Vic2NyaWJlckluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXJzLnNwbGljZShzdWJzY3JpYmVySW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU3ViamVjdFN1YnNjcmlwdGlvbjtcbn0oU3Vic2NyaXB0aW9uKSk7XG5leHBvcnQgeyBTdWJqZWN0U3Vic2NyaXB0aW9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdWJqZWN0U3Vic2NyaXB0aW9uLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfT2JzZXJ2YWJsZSxfU3Vic2NyaWJlcixfU3Vic2NyaXB0aW9uLF91dGlsX09iamVjdFVuc3Vic2NyaWJlZEVycm9yLF9TdWJqZWN0U3Vic2NyaXB0aW9uLF9pbnRlcm5hbF9zeW1ib2xfcnhTdWJzY3JpYmVyIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi9PYnNlcnZhYmxlJztcbmltcG9ydCB7IFN1YnNjcmliZXIgfSBmcm9tICcuL1N1YnNjcmliZXInO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAnLi9TdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IgfSBmcm9tICcuL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3InO1xuaW1wb3J0IHsgU3ViamVjdFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3ViamVjdFN1YnNjcmlwdGlvbic7XG5pbXBvcnQgeyByeFN1YnNjcmliZXIgYXMgcnhTdWJzY3JpYmVyU3ltYm9sIH0gZnJvbSAnLi4vaW50ZXJuYWwvc3ltYm9sL3J4U3Vic2NyaWJlcic7XG52YXIgU3ViamVjdFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoU3ViamVjdFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3ViamVjdFN1YnNjcmliZXIoZGVzdGluYXRpb24pIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFN1YmplY3RTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyKSk7XG5leHBvcnQgeyBTdWJqZWN0U3Vic2NyaWJlciB9O1xudmFyIFN1YmplY3QgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoU3ViamVjdCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdWJqZWN0KCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICAgICAgX3RoaXMuY2xvc2VkID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5oYXNFcnJvciA9IGZhbHNlO1xuICAgICAgICBfdGhpcy50aHJvd25FcnJvciA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU3ViamVjdC5wcm90b3R5cGVbcnhTdWJzY3JpYmVyU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdWJqZWN0U3Vic2NyaWJlcih0aGlzKTtcbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLmxpZnQgPSBmdW5jdGlvbiAob3BlcmF0b3IpIHtcbiAgICAgICAgdmFyIHN1YmplY3QgPSBuZXcgQW5vbnltb3VzU3ViamVjdCh0aGlzLCB0aGlzKTtcbiAgICAgICAgc3ViamVjdC5vcGVyYXRvciA9IG9wZXJhdG9yO1xuICAgICAgICByZXR1cm4gc3ViamVjdDtcbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB2YXIgb2JzZXJ2ZXJzID0gdGhpcy5vYnNlcnZlcnM7XG4gICAgICAgICAgICB2YXIgbGVuID0gb2JzZXJ2ZXJzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBjb3B5ID0gb2JzZXJ2ZXJzLnNsaWNlKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29weVtpXS5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWU7XG4gICAgICAgIHRoaXMudGhyb3duRXJyb3IgPSBlcnI7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIG9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzO1xuICAgICAgICB2YXIgbGVuID0gb2JzZXJ2ZXJzLmxlbmd0aDtcbiAgICAgICAgdmFyIGNvcHkgPSBvYnNlcnZlcnMuc2xpY2UoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY29weVtpXS5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA9IDA7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVycztcbiAgICAgICAgdmFyIGxlbiA9IG9ic2VydmVycy5sZW5ndGg7XG4gICAgICAgIHZhciBjb3B5ID0gb2JzZXJ2ZXJzLnNsaWNlKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNvcHlbaV0uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm9ic2VydmVycyA9IG51bGw7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLl90cnlTdWJzY3JpYmUuY2FsbCh0aGlzLCBzdWJzY3JpYmVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5oYXNFcnJvcikge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcih0aGlzLnRocm93bkVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb24uRU1QVFk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb24uRU1QVFk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdWJqZWN0U3Vic2NyaXB0aW9uKHRoaXMsIHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5hc09ic2VydmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoKTtcbiAgICAgICAgb2JzZXJ2YWJsZS5zb3VyY2UgPSB0aGlzO1xuICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZTtcbiAgICB9O1xuICAgIFN1YmplY3QuY3JlYXRlID0gZnVuY3Rpb24gKGRlc3RpbmF0aW9uLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNTdWJqZWN0KGRlc3RpbmF0aW9uLCBzb3VyY2UpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1YmplY3Q7XG59KE9ic2VydmFibGUpKTtcbmV4cG9ydCB7IFN1YmplY3QgfTtcbnZhciBBbm9ueW1vdXNTdWJqZWN0ID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKEFub255bW91c1N1YmplY3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQW5vbnltb3VzU3ViamVjdChkZXN0aW5hdGlvbiwgc291cmNlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgICAgIF90aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBBbm9ueW1vdXNTdWJqZWN0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGlmIChkZXN0aW5hdGlvbiAmJiBkZXN0aW5hdGlvbi5uZXh0KSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGlmIChkZXN0aW5hdGlvbiAmJiBkZXN0aW5hdGlvbi5lcnJvcikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBbm9ueW1vdXNTdWJqZWN0LnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgaWYgKGRlc3RpbmF0aW9uICYmIGRlc3RpbmF0aW9uLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFub255bW91c1N1YmplY3QucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5zb3VyY2U7XG4gICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gU3Vic2NyaXB0aW9uLkVNUFRZO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQW5vbnltb3VzU3ViamVjdDtcbn0oU3ViamVjdCkpO1xuZXhwb3J0IHsgQW5vbnltb3VzU3ViamVjdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ViamVjdC5qcy5tYXBcbiIsImltcG9ydCB7U2ltdWxhdGlvblBhY2thZ2V9IGZyb20gXCIuL1NpbXVsYXRpb25QYWNrYWdlXCI7XHJcbmltcG9ydCB7U3ViamVjdH0gZnJvbSBcInJ4anNcIjtcclxuaW1wb3J0IHtNaW5pbWFsU3BhblRyZWV9IGZyb20gXCIuLi9TcGFubmluZ1RyZWUvbWluaW1hbFNwYW5uaW5nVHJlZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNpbXVsYXRpb25Db25uZWN0aW9ue1xyXG5cdC8vIGEgQnJpZGdlIGNhbiBkbyBjb25uLnNlbmQubmV4dChwa2cpXHJcblx0Ly8gYW5kIHRoZSBzaW11bGF0aW9uIGRvZXMgY29ubi5zZW5kLnN1YnNjcmliZSBhbmQgcHJvdmlkZXMgYSBoYW5kbGVyIHRoYXQgb25seSBhbGxvd3MgdG8gc2VuZCB0byBkaXJlY3QgY29ubmVjdGVkIGJyaWRnZXNcclxuXHRwdWJsaWMgc2VuZDogU3ViamVjdDxTaW11bGF0aW9uUGFja2FnZT4gPSBuZXcgU3ViamVjdDxTaW11bGF0aW9uUGFja2FnZT4oKTtcclxuXHQvLyBhIEJyaWRnZSBjYW4gc3Vic2NyaWJlIHRvIHRoZSByZWNlaXZlIFN1YmplY3QgYW5kIHRoZSBjYiBnZXRzIGNhbGxlZCBpZiB0aGUgc2ltdWxhdGlvbiByZWRpcmVjdHMgdGhhdCBzZW5kLm5leHQgZnJvbSBhIG90aGVyIGJyaWRnZSB0byB5b3VcclxuXHRwdWJsaWMgcmVjZWl2ZTogU3ViamVjdDxTaW11bGF0aW9uUGFja2FnZT4gPSBuZXcgU3ViamVjdDxTaW11bGF0aW9uUGFja2FnZT4oKTtcclxuXHQvLyByZXR1cm5zIGRpcmVjdCBDb25uZWN0ZWQgQnJpZGdlc1xyXG5cdHB1YmxpYyBwaW5nOiBQcm9taXNlPHN0cmluZ1tdPjtcclxuXHRjb25zdHJ1Y3RvcihzaWJsaW5nQnJpZGdlczogc3RyaW5nW10pe1xyXG5cdFx0dGhpcy5waW5nID0gbmV3IFByb21pc2U8c3RyaW5nW10+KHJlc29sdmUgPT4gcmVzb2x2ZShzaWJsaW5nQnJpZGdlcykpO1xyXG5cdH1cclxuXHQvLyBvbmx5IGZvciB0aGUgc2ltdWxhdGlvblxyXG5cdHB1YmxpYyBmaW5pc2hlZEluZGV4aW5nOiBTdWJqZWN0PE1pbmltYWxTcGFuVHJlZXxhbnk+ID0gbmV3IFN1YmplY3QoKTtcclxufVxyXG4iLCJpbXBvcnQge1JvdXRpbmdUYWJsZUVudHJ5fSBmcm9tIFwiLi9CcmlkZ2VcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgU2ltdWxhdGlvblBhY2thZ2Uge1xyXG4gICAgcHJvdG9jb2w6IHN0cmluZyxcclxuICAgIGNvbnRlbnQ6IGFueSxcclxuICAgIHRhcmdldDogc3RyaW5nLFxyXG4gICAgZGVzdGluYXRpb24/OiBzdHJpbmcsXHJcbiAgICBjb3N0PzogbnVtYmVyXHJcbiAgICBzZW5kZXI/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBTaW11bGF0aW9uUGFja2FnZSBpbXBsZW1lbnRzIFNpbXVsYXRpb25QYWNrYWdlIHtcclxuICAgIGNvc3Q/OiBudW1iZXI7XHJcbiAgICBkZXN0aW5hdGlvbj86IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgcHJvdG9jb2w6IHN0cmluZywgcHVibGljIGNvbnRlbnQ6IGFueSwgcHVibGljIHRhcmdldDogc3RyaW5nLCByb3V0aW5nVGFibGU6IFJvdXRpbmdUYWJsZUVudHJ5W10pIHtcclxuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uID0gdGFyZ2V0O1xyXG4gICAgICAgIGxldCByb3V0aW5nVGFibGVFbnRyeSA9IHJvdXRpbmdUYWJsZS5maW5kKGkgPT4gaS50YXJnZXQgPT09IHRoaXMudGFyZ2V0KTtcclxuICAgICAgICBpZighcm91dGluZ1RhYmxlRW50cnkpe1xyXG4gICAgICAgICAgICBkZWJ1Z2dlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSByb3V0aW5nVGFibGVFbnRyeS5uZXh0SG9wO1xyXG4gICAgfVxyXG59XHJcblxyXG4iLCJpbXBvcnQge0JyaWRnZX0gZnJvbSBcIi4uL1NpbXVsYXRpb24vQnJpZGdlXCI7XHJcbmltcG9ydCB7U2ltdWxhdGlvblBhY2thZ2V9IGZyb20gXCIuLi9TaW11bGF0aW9uL1NpbXVsYXRpb25QYWNrYWdlXCI7XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdCA9ICgpID0+IHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWluZXJfdGFyZ2V0JykgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICB0YXJnZXQuY2hpbGROb2Rlcy5mb3JFYWNoKG4gPT4gbi5yZW1vdmUoKSk7XHJcbiAgICB0YXJnZXQuY2hpbGROb2Rlcy5mb3JFYWNoKG4gPT4gbi5yZW1vdmUoKSk7XHJcbiAgICB0YXJnZXQuY2hpbGROb2Rlcy5mb3JFYWNoKG4gPT4gbi5yZW1vdmUoKSk7XHJcbiAgICBjb25zdCBpbml0aWFsUGFja2FnZXNUZW1wbGF0ZSA9IGBcclxuPGRpdiBjbGFzcz1cIml0ZW1cIiBpZD1cImluaXRfcGtnXCIgc3R5bGU9XCJkaXNwbGF5OiBmbGV4XCI+XHJcbiAgICA8ZGl2IHN0eWxlPVwiaGVpZ2h0OiAxMDAlOyB3aWR0aDogOTAlOyBqdXN0aWZ5LXNlbGY6IGNlbnRlcjsgYWxpZ24tc2VsZjogY2VudGVyXCI+XHJcbiAgICAgICAgPGgzPlBhY2thZ2VzOjwvaDM+XHJcbiAgICAgICAgPGRpdiBpZD1cInBrZ19zX3RhcmdldFwiPlxyXG4gICAgPC9kaXY+XHJcbjwvZGl2PlxyXG4gICAgXHJcbjwvZGl2PlxyXG5gO1xyXG4gICAgdGFyZ2V0Lmluc2VydEFkamFjZW50RWxlbWVudChcImJlZm9yZWVuZFwiLCBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGluaXRpYWxQYWNrYWdlc1RlbXBsYXRlLCBcInRleHQvaHRtbFwiKS5nZXRFbGVtZW50QnlJZChgaW5pdF9wa2dgKSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlRG9tQnJpZGdlcyA9IChicmlkZ2VzKSA9PiB7XHJcbiAgICBjb25zdCB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyX3RhcmdldCcpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgY29uc3QgYnJpZGdlVGVtcGxhdGUgPSAoYnJpZGdlOiBCcmlkZ2UpID0+IGBcclxuPGRpdiBjbGFzcz1cIml0ZW1cIj5cclxuICAgIDxkaXYgY2xhc3M9XCJpdGVtLWNvbnRlbnRcIiBpZD1cImJyaWRnZV8ke2JyaWRnZS52YWx1ZX1cIj5cclxuICAgICAgICA8aDM+QnJpZGdlICR7YnJpZGdlLm5hbWV9PC9oMz5cclxuICAgIDxkaXY+XHJcbjwvZGl2PlxyXG5gO1xyXG4gICAgYnJpZGdlcy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgaWYgKGEubmFtZSA8IGIubmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhLm5hbWUgPiBiLm5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfSkuZm9yRWFjaChicmlkZ2UgPT4ge1xyXG4gICAgICAgIHRhcmdldC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJiZWZvcmVlbmRcIiwgbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhicmlkZ2VUZW1wbGF0ZShicmlkZ2UpLCBcInRleHQvaHRtbFwiKS5nZXRFbGVtZW50QnlJZChgYnJpZGdlXyR7YnJpZGdlLnZhbHVlfWApKTtcclxuICAgIH0pXHJcbn07XHJcblxyXG5cclxubGV0IGlkID0gMDtcclxuXHJcbmV4cG9ydCBjb25zdCBkdW1wUGtnID0gKHBrZzogU2ltdWxhdGlvblBhY2thZ2UsIGZyb206IHN0cmluZykgPT4ge1xyXG5cclxuICAgIGNvbnN0IHBrZ19zX3RhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwa2dfc190YXJnZXQnKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuXHJcbiAgICBsZXQgbnVtYmVyID0gaWQrKztcclxuICAgIGNvbnN0IHBrZ1RlbXBsYXRlID0gKHBrZzogU2ltdWxhdGlvblBhY2thZ2UsIGZyb206IHN0cmluZykgPT4gYFxyXG48ZGl2IGlkPVwicGtnXyR7bnVtYmVyfVwiPlxyXG4gICAgJHtmcm9tfSAtPiAke3BrZy50YXJnZXR9IDogJHtwa2cuY29zdH1cclxuPC9kaXY+XHJcbmA7XHJcbiAgICBwa2dfc190YXJnZXQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlZW5kXCIsIG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcocGtnVGVtcGxhdGUocGtnLCBmcm9tKSwgXCJ0ZXh0L2h0bWxcIikuZ2V0RWxlbWVudEJ5SWQoYHBrZ18ke251bWJlcn1gKSk7XHJcbi8vcGtnX3NfdGFyZ2V0LihuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKHBrZ1RlbXBsYXRlKHBrZywgZnJvbSksIFwidGV4dC9odG1sXCIpLmdldEVsZW1lbnRCeUlkKGBwa2dfJHtudW1iZXJ9YCkpO1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICBwa2dfc190YXJnZXQucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHBrZ18ke251bWJlcn1gKSk7XHJcbiAgICB9O1xyXG59O1xyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBkdW1wQnJpZGdlID0gKGJyaWRnZTogQnJpZGdlLCBicmlkZ2VzOiBCcmlkZ2VbXSkgPT4ge1xyXG4gICAgaWYgKGJyaWRnZXMuZmluZEluZGV4KGIgPT4gYi5CTE9DS0VEKCkpID09PSAtMSkge1xyXG4gICAgICAgIGxldCB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGtnX3Rlc3RfdGFyZ2V0JykgYXMgSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICAgICAgIGNvbnN0IGNhcmQgPSBgXHJcbjxkaXYgY2xhc3M9XCJpdGVtXCIgaWQ9XCJwa2ctY2FyZFwiIHN0eWxlPVwiXHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG5cIj5cclxuICAgIDxoMz5TZW5kIGEgc2FtcGxlIHBhY2thZ2UgdGhyb3VnaCB3aXRoIHRoZSBuZXcgdG9wb2xvZ3k8L2gzPlxyXG48L2Rpdj5cclxuYDtcclxuICAgICAgICB0YXJnZXQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlZW5kXCIsIG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoY2FyZCwgXCJ0ZXh0L2h0bWxcIikuZ2V0RWxlbWVudEJ5SWQoJ3BrZy1jYXJkJykpO1xyXG4gICAgICAgIHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwa2ctY2FyZCcpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IGJyaWRnZXMubWFwKGIgPT4gYi5uYW1lKTtcclxuICAgICAgICBjb25zdCBkcm9wZG93blRlbXBsYXRlID0gKGlkOiBzdHJpbmcpID0+IGBcclxuPGxhYmVsIGlkPVwibF8ke2lkfVwiIGZvcj1cIiR7aWR9XCI+U2VuZCAke2lkfTo8L2xhYmVsPlxyXG48c2VsZWN0IGlkPVwiJHtpZH1cIj5cclxuICAgICR7dmFsdWVzLm1hcCh2ID0+IGA8b3B0aW9uIHZhbHVlPVwiJHt2fVwiPiR7dn08L29wdGlvbj5cclxuICAgIGApfVxyXG48L3NlbGVjdD5cclxuYDtcclxuICAgICAgICBsZXQgZHJvcGRvd24gPSAoaWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICB0YXJnZXQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlZW5kXCIsIG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoZHJvcGRvd25UZW1wbGF0ZShpZCkgKyBgPGJyPmAsIFwidGV4dC9odG1sXCIpLmdldEVsZW1lbnRCeUlkKGBsXyR7aWR9YCkpO1xyXG4gICAgICAgICAgICB0YXJnZXQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlZW5kXCIsIG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoZHJvcGRvd25UZW1wbGF0ZShpZCksIFwidGV4dC9odG1sXCIpLmdldEVsZW1lbnRCeUlkKGlkKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBkcm9wZG93bignZnJvbScpO1xyXG4gICAgICAgIGRyb3Bkb3duKCd0bycpO1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGBcclxuPGJ1dHRvbiBpZD1cInRlc3Rfc2VuZFwiPlNlbmQ8L2J1dHRvbj5cclxuYDtcclxuICAgICAgICBjb25zdCBzZW5kUGtnID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAvLyB0aGlzLm11bHRpRm9yQ29zdEluU2Vjb25kcyA9ICsoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ211bHQnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgY29uc3QgZnJvbU5hbWUgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zyb20nKSBhcyBIVE1MU2VsZWN0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvTmFtZSA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG8nKSBhcyBIVE1MU2VsZWN0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgIGxldCBmaW5kID0gYnJpZGdlcy5maW5kKGIgPT4gYi5uYW1lID09PSBmcm9tTmFtZSk7XHJcbiAgICAgICAgICAgIGxldCBzaW11bGF0aW9uUGFja2FnZSA9IG5ldyBTaW11bGF0aW9uUGFja2FnZSgnU09NRV9OT1JNQUwnLCBcIkdyZWV0aW5ncyBmcm9tXCIgKyBmaW5kLm5hbWUsIHRvTmFtZSwgZmluZC5ST1VUSU5HX1RBQkxFKTtcclxuICAgICAgICAgICAgZmluZC5zZW5kKHNpbXVsYXRpb25QYWNrYWdlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRhcmdldC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJiZWZvcmVlbmRcIiwgbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhidXR0b24sIFwidGV4dC9odG1sXCIpLmdldEVsZW1lbnRCeUlkKCd0ZXN0X3NlbmQnKSk7XHJcbiAgICAgICAgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXN0X3NlbmQnKSBhcyBIVE1MQnV0dG9uRWxlbWVudCkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBzZW5kUGtnKCkpXHJcbiAgICB9XHJcbiAgICBjb25zdCBicmlkZ2VUZW1wbGF0ZSA9IChicmlkZ2U6IEJyaWRnZSkgPT4gYFxyXG48ZGl2IGNsYXNzPVwiaXRlbVwiIGlkPVwiYnJpZGdlXyR7YnJpZGdlLnZhbHVlfVwiPlxyXG4gICAgPGRpdiBjbGFzcz1cIml0ZW0tY29udGVudFwiIHN0eWxlPVwid2lkdGg6IDgwJTsgaGVpZ2h0OiAxMDAlOyBvdmVyZmxvdy15OiBhdXRvOyBvdmVyZmxvdy14OiBoaWRkZW47ICR7IWJyaWRnZS5CTE9DS0VEKCkgPyBgYm94LXNoYWRvdzogNXB4IDVweCA0cHggIzMzYjA0MCAhaW1wb3J0YW50O2AgOiAnJ31cIj5cclxuICAgICAgICA8aDM+QnJpZGdlICR7YnJpZGdlLm5hbWV9PC9oMz5cclxuICAgICAgICAke2JyaWRnZS5yb290T2ZJbmRleGluZyA/ICdJbmRleGluZyBSb290IScgOiAnJ308YnI+XHJcbiAgICAgICAgS25vd24gbGlua3M6IFs8YnI+PEJMT0NLUVVPVEU+JHticmlkZ2UuRElTQ09WRVJFRF9MSU5LUy5tYXAobCA9PiBsLm5vZGVzLm1hcChuID0+IG4ubmFtZSkuam9pbignLScpICsgJzonICsgbC5jb3N0KS5qb2luKCcsPGJyPicpfTwvQkxPQ0tRVU9URT48YnI+XTxicj5cclxuICAgICAgICAke2BSZXR1cm5pbmcgRGF0YSB0bzogWzxicj48QkxPQ0tRVU9URT4ke2JyaWRnZS5yZXR1cm5Uby5qb2luKCcsPGJyPicpfTwvQkxPQ0tRVU9URT48YnI+XWB9PGJyPlxyXG4gICAgICAgICR7IWJyaWRnZS5yb290T2ZJbmRleGluZyAmJiBicmlkZ2UuSU5ERVhFRCA/IGA8YnI+Tm9kZSBoYXMgZmluaXNoZWQgaW5kZXhpbmchPGJyPlJldHVybmluZyBEYXRhIHRvICR7YnJpZGdlLnJldHVyblRvLmpvaW4oJyw8YnI+Jyl9YCA6ICcnfTxicj5cclxuICAgICAgICAke2JyaWRnZS5yb290T2ZJbmRleGluZyAmJiBicmlkZ2UuSU5ERVhFRCA/IGA8YnI+TmV0d29yayBoYXMgZmluaXNoZWQgaW5kZXhpbmchPGJyPk1TVCBnZW5lcmF0ZWQuPGJyPlNlbmRpbmcgTVNUIHRvOiBbPGJyPjxCTE9DS1FVT1RFPiR7YnJpZGdlLk1TVC5hbGxOb2Rlcy5tYXAobiA9PiBuLm5hbWUpLmZpbHRlcihzID0+IHMgIT09IGJyaWRnZS5uYW1lKS5qb2luKCcsPGJyPicpfTwvQkxPQ0tRVU9URT48YnI+XWAgOiAnJ31cclxuICAgICAgICAkeyFicmlkZ2UuQkxPQ0tFRCgpID8gYDxicj5SZWNlaXZlZCBNU1QuIFJvdXRpbmcgVGFibGU6IFs8YnI+PEJMT0NLUVVPVEU+JHticmlkZ2UuUk9VVElOR19UQUJMRS5tYXAoaSA9PiBgLT4ke2kudGFyZ2V0fSB2aWEgJHtpLm5leHRIb3B9YCkuam9pbignLDxicj4nKX08L0JMT0NLUVVPVEU+PGJyPl1gIDogJyd9XHJcbiAgICA8L2Rpdj5cclxuPC9kaXY+XHJcbmA7XHJcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBicmlkZ2VfJHticmlkZ2UudmFsdWV9YCk7XHJcbiAgICBlbC5yZXBsYWNlV2l0aChuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGJyaWRnZVRlbXBsYXRlKGJyaWRnZSksIFwidGV4dC9odG1sXCIpLmdldEVsZW1lbnRCeUlkKGBicmlkZ2VfJHticmlkZ2UudmFsdWV9YCkpXHJcbn07XHJcbiIsImltcG9ydCB7U3Bhbm5pbmdUcmVlTm9kZX0gZnJvbSBcIi4uL1NwYW5uaW5nVHJlZS9zcGFubmluZ1RyZWVOb2RlXCI7XHJcbmltcG9ydCB7QnJpZGdlfSBmcm9tIFwiLi9CcmlkZ2VcIjtcclxuaW1wb3J0IHtTaW11bGF0aW9uQ29ubmVjdGlvbn0gZnJvbSBcIi4vU2ltdWxhdGlvbkNvbm5lY3Rpb25cIjtcclxuaW1wb3J0IHtTaW11bGF0aW9uUGFja2FnZX0gZnJvbSBcIi4vU2ltdWxhdGlvblBhY2thZ2VcIjtcclxuaW1wb3J0IHtNaW5pbWFsU3BhblRyZWV9IGZyb20gXCIuLi9TcGFubmluZ1RyZWUvbWluaW1hbFNwYW5uaW5nVHJlZVwiO1xyXG5pbXBvcnQge1NwYW5uaW5nVHJlZUxpbmt9IGZyb20gXCIuLi9TcGFubmluZ1RyZWUvc3Bhbm5pbmdUcmVlTGlua1wiO1xyXG5pbXBvcnQgKiBhcyB2aWV3IGZyb20gXCIuLi92aWV3L1NpbXVsYXRpb25WaWV3XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU2ltdWxhdGlvbiB7XHJcbiAgICBwdWJsaWMgYnJpZGdlczogQnJpZGdlW10gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgbm9kZXM6IFNwYW5uaW5nVHJlZU5vZGVbXSwgcHJpdmF0ZSBtdWx0aUZvckNvc3RJblNlY29uZHMgPSAwLjUpIHtcclxuICAgICAgICB2aWV3LmluaXQoKTtcclxuICAgICAgICAvLyBmb3JlYWNoIG5vZGUgY3JlYXRlIGEgQnJpZGdlIHdpdGggYSBjb25uZWN0aW9uXHJcbiAgICAgICAgbm9kZXMuZm9yRWFjaChub2RlID0+IHtcclxuICAgICAgICAgICAgLy8gY3JlYXRlIENvbm5lY3Rpb25cclxuICAgICAgICAgICAgbGV0IHNpYmxpbmdOb2RlcyA9IG5vZGUubGlua3MubWFwKGwgPT4gbC50b05vZGUpO1xyXG4gICAgICAgICAgICBjb25zdCBjb25uID0gbmV3IFNpbXVsYXRpb25Db25uZWN0aW9uKHNpYmxpbmdOb2Rlcyk7XHJcbiAgICAgICAgICAgIC8vIHB1c2ggbmV3IGJyaWRnZVxyXG4gICAgICAgICAgICB0aGlzLmJyaWRnZXMucHVzaChuZXcgQnJpZGdlKG5vZGUubmFtZSwgbm9kZS52YWx1ZSwgY29ubiwgKGJyaWRnZSkgPT4gdmlldy5kdW1wQnJpZGdlKGJyaWRnZSwgdGhpcy5icmlkZ2VzKSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIGFsbG93IGNvbW11bmljYXRpb24gYmV0d2VlbiBkaXJlY3QgY29ubmVjdGVkIGJyaWRnZXNcclxuICAgICAgICB0aGlzLmJyaWRnZXMuZm9yRWFjaChicmlkZ2UgPT4ge1xyXG4gICAgICAgICAgICBsZXQgbGlua3M6IFNwYW5uaW5nVHJlZUxpbmtbXSA9IG5vZGVzLmZpbmQobiA9PiBuLm5hbWUgPT09IGJyaWRnZS5uYW1lKS5saW5rcztcclxuICAgICAgICAgICAgbGV0IHNpYmxpbmdOb2RlcyA9IGxpbmtzLm1hcChsID0+IGwudG9Ob2RlKTtcclxuICAgICAgICAgICAgYnJpZGdlLmNvbm5lY3Rpb24uc2VuZC5zdWJzY3JpYmUoKHBrZzogU2ltdWxhdGlvblBhY2thZ2UpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBjb25uZWN0ZWROb2RlID0gc2libGluZ05vZGVzLmZpbmQobiA9PiBuID09PSBwa2cudGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIGlmICghIWNvbm5lY3RlZE5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBwa2cuY29zdCA9IGxpbmtzLmZpbmQobCA9PiBsLnRvTm9kZSA9PT0gcGtnLnRhcmdldCkuY29zdDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYiA9IHZpZXcuZHVtcFBrZyhwa2csIGJyaWRnZS5uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNiKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJyaWRnZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZChiID0+IGIubmFtZSA9PT0gcGtnLnRhcmdldClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29ubmVjdGlvbi5yZWNlaXZlLm5leHQocGtnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGtnLmNvc3QgKiAxMDAwICogdGhpcy5tdWx0aUZvckNvc3RJblNlY29uZHMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB2aWV3LmNyZWF0ZURvbUJyaWRnZXModGhpcy5icmlkZ2VzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhcnRJbmRleGluZ0Zyb21SYW5kb21CcmlkZ2U6ICgpID0+IFByb21pc2U8TWluaW1hbFNwYW5UcmVlPiA9ICgpID0+IHtcclxuICAgICAgICAvLyBhcyB0aGUgcHJvdG9jb2wgc2F5cyBzZW5kIGEgQ1NUUCBwYWNrYWdlIHRvIGFsbCBkaXJlY3QgY29ubmVjdGVkIEJyaWRnZXNcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8TWluaW1hbFNwYW5UcmVlPihhc3luYyByZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgbGV0IHJuZG0gPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiB0aGlzLmJyaWRnZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgaWYocm5kbSA8IDAgJiYgcm5kbSA+IHRoaXMuYnJpZGdlcy5sZW5ndGggLSAxKXtcclxuICAgICAgICAgICAgICAgIHJuZG0gPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGJyaWRnZSA9IHRoaXMuYnJpZGdlc1tybmRtXTtcclxuICAgICAgICAgICAgYnJpZGdlLmNvbm5lY3Rpb24uZmluaXNoZWRJbmRleGluZy5zdWJzY3JpYmUoKG1zdCkgPT4gcmVzb2x2ZShtc3QpKTtcclxuICAgICAgICAgICAgYXdhaXQgYnJpZGdlLmluZGV4TmV0d29yaygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufVxyXG4iLCIgICAgLy8gcmVmZXJlbmNlcyB0byB0aGUgZG9tXHJcbmltcG9ydCB7cGFyc2UsIHN0cmluZ2lmeX0gZnJvbSBcIi4vcGFyc2VyXCI7XHJcbmltcG9ydCB7U2ltdWxhdGlvbn0gZnJvbSBcIi4vbW9kZWxzL1NpbXVsYXRpb24vU2ltdWxhdGlvblwiO1xyXG5cclxuLy8gZ2V0IGEgcmVmIHRvIHRoZSBpbnB1dCBhbmQgb3V0cHV0IG9mIGdyYXBoc1xyXG5jb25zdCBpbnB1dEFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGV4dEluJykgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcclxuY29uc3Qgb3V0cHV0QXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXh0T3V0JykgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcclxuLy8gdHJpZ2dlciBuZXcgc2ltdWxhdGlvbiByZWZcclxuY29uc3Qgc2ltdWxhdGlvbkJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW11bGF0ZV9idG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHJcblxyXG4vLyBleGFtcGxlIGlucHV0c1xyXG5jb25zdCBzaW1wbGVUZXN0ID0gYFxyXG5HcmFwaCBteWdyYXBoIHtcclxuXHQvLyBOb2RlXHJcblx0QSA9IDI7XHJcblx0QiA9IDE7XHJcblx0QyA9IDM7XHJcblx0XHJcblx0Ly8gTGlua3MgdW5kIHp1Z2VoLiBLb3N0ZW5cclxuXHRBIC0gQiA6IDE7XHJcblx0QSAtIEMgOiAxO1xyXG5cdEMgLSBCIDogMjtcclxufWA7XHJcbmNvbnN0IHRlc3QgPSBgXHJcbkdyYXBoIG15Z3JhcGgge1xyXG5cdC8vIE5vZGVcclxuXHRBID0gNTtcclxuXHRCID0gMTtcclxuXHRDID0gMztcclxuXHREID0gNztcclxuXHRFID0gNjtcclxuXHRGID0gNDtcclxuXHRcclxuXHQvLyBMaW5rcyB1bmQgenVnZWguIEtvc3RlblxyXG5cdEEgLSBCIDogMTA7XHJcblx0QSAtIEMgOiAxMDtcclxuXHRCIC0gRCA6IDE1O1xyXG5cdEIgLSBFIDogMTA7XHJcblx0QyAtIEQgOiAzO1xyXG5cdEMgLSBFIDogMTA7XHJcblx0RCAtIEUgOiAyO1xyXG5cdEQgLSBGIDogMTA7XHJcblx0RSAtIEYgOiAyO1xyXG59YDtcclxuaW5wdXRBcmVhLnZhbHVlID0gdGVzdDtcclxuXHJcbi8vIGNsaWNrIGltcGxcclxuY29uc3Qgb25TaW11bGF0aW9uQ2xpY2sgPSAoKSA9PiB7XHJcbiAgICAvLyBwYXJzZSBpbnB1dFxyXG4gICAgY29uc3QgcGFyc2VSZXN1bHQgPSBwYXJzZShpbnB1dEFyZWEudmFsdWUpO1xyXG4gICAgLy8gY3JlYXRlIG5ldyBTaW11bGF0aW9uIHdpdGggcGFyc2VkIGdyYXBoIGFuZCBhIG11bHRpcGxpZXIgZm9yIHRoZSBjb3N0IG9mIGxpbmtzIGluIHNlY29uZHMuXHJcbiAgICBjb25zdCBzaW11bGF0aW9uID0gbmV3IFNpbXVsYXRpb24ocGFyc2VSZXN1bHQubm9kZXMsICsoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ211bHQnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSk7XHJcbiAgICAvLyBTdGFydCB0aGUgc2ltdWxhdGlvbiB1c2luZyBteSBvd24gcHJvdG9jb2wgY2FsbGVkIENTVFAgQ2VudHJhbGl6ZWQgU3Bhbm5pbmcgVHJlZSBQcm90b2NvbFxyXG4gICAgc2ltdWxhdGlvbi5zdGFydEluZGV4aW5nRnJvbVJhbmRvbUJyaWRnZSgpLnRoZW4obXN0ID0+IHtcclxuICAgICAgICAvLyB3aGVuIGl0IGhhcyBhbGwgaW5mb3JtYXRpb24gb2YgdGhlIG5ldHdvcmsgaXQgcmV0dXJucyBhIG1zdFxyXG4gICAgICAgIC8vIGFuZCBzaGFyZXMgaXQgd2l0aCBhbGwgb3RoZXIgYnJpZGdlcyB0aGVuIHdoZXJlIHBhcnQgb2YgdGhlIGluZGV4aW5nIHByb2Nlc3MuXHJcbiAgICAgICAgLy8gc2hvdyB0aGUgbXN0IGluIHN0cmluZyB2ZXJzaW9uXHJcbiAgICAgICAgb3V0cHV0QXJlYS52YWx1ZSA9IHN0cmluZ2lmeShtc3QsIHBhcnNlUmVzdWx0LmdyYXBoTmFtZSk7XHJcbiAgICB9KVxyXG59O1xyXG5cclxuLy8gY2FsbCBjbGljayBpbXBsIG9uIHNpbXVsYXRpb25CdXR0b24gY2xpY2tcclxuc2ltdWxhdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uU2ltdWxhdGlvbkNsaWNrKTtcclxuIiwiaW1wb3J0IHtTcGFubmluZ1RyZWVMaW5rfSBmcm9tIFwiLi4vbW9kZWxzL1NwYW5uaW5nVHJlZS9zcGFubmluZ1RyZWVMaW5rXCI7XHJcbmltcG9ydCB7U3Bhbm5pbmdUcmVlTm9kZX0gZnJvbSBcIi4uL21vZGVscy9TcGFubmluZ1RyZWUvc3Bhbm5pbmdUcmVlTm9kZVwiO1xyXG5cclxuLy8gcGFyc2VzIGEgc3RyaW5nIHRvIFNwYW5uaW5nVHJlZU5vZGVzICsgdGhlIG5hbWUgb2YgdGhlIGdyYXBoXHJcbmV4cG9ydCBjb25zdCBwYXJzZTogKGlucHV0OiBzdHJpbmcpID0+IHtncmFwaE5hbWU6IHN0cmluZywgbm9kZXM6IFNwYW5uaW5nVHJlZU5vZGVbXX0gPVxyXG5cdChpbnB1dDogc3RyaW5nKSA9PiB7XHJcblx0XHQvLyB0ZW1wb3JhcnkgQXJyIGZvciBsaW5rcyBiZWNhdXNlIHdlIHdpbGwgbGF0ZXIgYXR0YWNoIHRoZSBsaW5rcyB0byBpdHMgbm9kZXMuXHJcblx0XHRjb25zdCB0ZW1wTGlua3M6IHtub2Rlczogc3RyaW5nW10sIGNvc3Q6IG51bWJlcn1bXSA9IFtdO1xyXG5cdFx0Y29uc3Qgbm9kZXM6IFNwYW5uaW5nVHJlZU5vZGVbXSA9IFtdO1xyXG5cclxuXHRcdC8vIHJlZ2V4IGZvciBnZXR0aW5nIHRoZSBpbmZvcm1hdGlvblxyXG5cdFx0Y29uc3QgZ3JhcGhOYW1lID0gaW5wdXQubWF0Y2goLyg/PD1HcmFwaFsgXSkoXFxTKykvZylbMF07XHJcblx0XHQvLyBtYXRjaGVzOiB3b3JkIGlmICcgPScgaXMgYWZ0ZXIgb3IgdmFsdWUgaWYgJz0gJyBpcyBpbiBmcm9udFxyXG5cdFx0Y29uc3Qgbm9kZU1hdGNoZXMgPSBpbnB1dC5tYXRjaCgvW15cXHNdKyg/PSA9KXwoPzw9PSApWzEtOV0qL2cpO1xyXG5cdFx0Ly8gbWF0Y2hlczogd29yZHMgaWYgJy0nIGZvbGxvd3Mgb3Igd29yZCBpZiAnLScgaXMgaW4gZnJvbnQgb3IgdmFsdWUgaWYgOiBpcyBpbiBmcm9udFxyXG5cdFx0Y29uc3QgbGlua01hdGNoZXMgPSBpbnB1dC5tYXRjaCgvW15cXHNdKyg/PSAtKXxbXlxcc10rKD89IDopfCg/PD06IClbMC05XSovZyk7XHJcblx0XHQvLyBzbyBmb3IgZWFjaCBsaW5rIHdlIGdldCAzIHJlc3VsdHNcclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGlua01hdGNoZXMubGVuZ3RoOyBpID0gaSArIDMpIHtcclxuXHRcdFx0Ly8gcHVzaCBmb3VuZCBpbmZvIGFib3V0IGxpbmtcclxuXHRcdFx0dGVtcExpbmtzLnB1c2goe1xyXG5cdFx0XHRcdG5vZGVzOiBbbGlua01hdGNoZXNbaV0sIGxpbmtNYXRjaGVzW2kgKyAxXV0sXHJcblx0XHRcdFx0Y29zdDogK2xpbmtNYXRjaGVzW2kgKyAyXSAvLyBzb21lIGxpdHRsZSB0cmljayB0byBjYXN0IGEgc3RyaW5nIHRvIG51bWJlciArJzQnID09PSA0XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0Ly8gZm9yIGVhY2ggbm9kZSB3ZSBnZXQgMiByZXN1bHRzXHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVNYXRjaGVzLmxlbmd0aDsgaSA9IGkgKyAyKSB7XHJcblx0XHRcdC8vIGdldCBub2RlIGluZm9cclxuXHRcdFx0Y29uc3QgbmFtZSA9IG5vZGVNYXRjaGVzW2ldO1xyXG5cdFx0XHRjb25zdCB2YWx1ZSA9ICtub2RlTWF0Y2hlc1tpICsgMV07XHJcblx0XHRcdC8vIGFkZCBtYXRjaGluZyBsaW5rcyBhcyBTcGFubmluZ1RyZWVMaW5rXHJcblx0XHRcdGNvbnN0IGxpbmtzID0gdGVtcExpbmtzLmZpbHRlcihsID0+IGwubm9kZXMuZmluZEluZGV4KG4gPT4gbiA9PT0gbmFtZSkgIT09IC0xKVxyXG5cdFx0XHRcdC5tYXAobGluayA9PiBuZXcgU3Bhbm5pbmdUcmVlTGluayhsaW5rLm5vZGVzLmZpbmQobiA9PiBuICE9PSBuYW1lKSwgbGluay5jb3N0KSk7XHJcblx0XHRcdC8vIHB1c2ggbmV3IFNwYW5uaW5nVHJlZU5vZGVcclxuXHRcdFx0bm9kZXMucHVzaChuZXcgU3Bhbm5pbmdUcmVlTm9kZShuYW1lLCB2YWx1ZSwgbGlua3MpKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiB7XHJcblx0XHRcdGdyYXBoTmFtZSxcclxuXHRcdFx0bm9kZXNcclxuXHRcdH1cclxuXHR9O1xyXG4iLCJpbXBvcnQge01pbmltYWxTcGFuVHJlZX0gZnJvbSBcIi4uL21vZGVscy9TcGFubmluZ1RyZWUvbWluaW1hbFNwYW5uaW5nVHJlZVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHN0cmluZ2lmeTogKG1pbmltYWxTcGFuVHJlZTogTWluaW1hbFNwYW5UcmVlLCBuYW1lOiBzdHJpbmcpID0+IHN0cmluZyA9XHJcblx0KG1pbmltYWxTcGFuVHJlZSwgbmFtZTogc3RyaW5nKSA9PiBgXHJcblNwYW5uaW5nLVRyZWUgb2YgJHtuYW1lfSB7XHJcblx0Um9vdDogJHttaW5pbWFsU3BhblRyZWUucm9vdC5uYW1lfTtcclxuXHQke21pbmltYWxTcGFuVHJlZS5saW5rVG9TdHJpbmcoKX1cclxufWA7XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=
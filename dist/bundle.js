!function(n){var t={};function e(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:r})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var o in n)e.d(r,o,function(t){return n[t]}.bind(null,o));return r},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=0)}([function(n,t,e){"use strict";e.r(t);var r=function(){return function(n,t){this.toNode=n,this.cost=t}}(),o=function(){return function(n,t,e){this.name=n,this.value=t,this.links=e}}(),i=function(){return function(n,t){this.nodes=n,this.cost=t}}(),s=function(){function n(n){this.shortestLinks=[],this.allNodes=[];for(var t=n.slice(),e=(t=t.sort(function(n,t){return n.cost-t.cost}).reverse()).flatMap(function(n){return n.nodes}),r=new Map,o=0,i=e;o<i.length;o++){var s=i[o];r.has(s.name)||(r.set(s.name,!0),this.allNodes.push(s))}for(this.root=this.allNodes.sort(function(n,t){return n.value-t.value})[0],console.log(t.slice());!this.allNodesAreConnected(this.allNodes);){var u=t.pop();if(this.shortestLinks.push(u),this.allNodesAreConnected(this.allNodes)){for(var c=void 0,a=c=this.shortestLinks.slice();c;)a=c,c=this.tryToRemove(c);a.length<this.shortestLinks.length&&(this.shortestLinks=a)}}console.log(this.shortestLinks)}return n.prototype.allNodesAreConnected=function(n,t){void 0===t&&(t=this.shortestLinks);for(var e=[],r=t.flatMap(function(n){return n.nodes}),o=new Map,i=0,s=r;i<s.length;i++){var u=s[i];o.has(u.name)||(o.set(u.name,!0),e.push(u))}var c,a=e.length===n.length;if(a){var h=this.allNodes.slice(),f=function(n){var e;e=n,h.splice(h.findIndex(function(n){return n.name===e.name}),1),function(n){return t.filter(function(t){return-1!==t.nodes.findIndex(function(t){return t.name===n.name})}).flatMap(function(t){return t.nodes.find(function(t){return t.name!==n.name})}).filter(function(n){return-1!==h.findIndex(function(t){return t.name===n.name})})}(n).forEach(function(n){return f(n)})};f(this.root),c=0===h.length}return a&&c},n.prototype.tryToRemove=function(n){for(var t,e=function(e){var o=n.slice();if(o.splice(o.findIndex(function(n){return n===e}),1),r.allNodesAreConnected(r.allNodes,o))return t=o,"break"},r=this,o=0,i=n;o<i.length;o++){if("break"===e(i[o]))break}return t},n.prototype.linkToString=function(){var n=this.shortestLinks.map(function(n){return new i(n.nodes.sort(function(n,t){return n.name<t.name?-1:n.name>t.name?1:0}),n.cost)}).sort(function(n,t){if(n.nodes[0].name<t.nodes[0].name)return-1;if(n.nodes[0].name>t.nodes[0].name)return 1;if(n.nodes[0].name===t.nodes[0].name){if(n.nodes[1].name<t.nodes[1].name)return-1;if(n.nodes[1].name>t.nodes[1].name)return 1}return 0}),t="";return n.forEach(function(n){t+=n.nodes[0].name+" - "+n.nodes[1].name+";\n\t"}),t},n}(),u=function(n,t,e,r){return new(e||(e=Promise))(function(o,i){function s(n){try{c(r.next(n))}catch(n){i(n)}}function u(n){try{c(r.throw(n))}catch(n){i(n)}}function c(n){n.done?o(n.value):new e(function(t){t(n.value)}).then(s,u)}c((r=r.apply(n,t||[])).next())})},c=function(n,t){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(n,s)}catch(n){i=[6,n],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},a=function(){function n(n,t,e,r){var o=this;this.rootOfIndexing=!1,this.returnTo=[],this.DISCOVERED_LINKS=[],this.name=n,this.value=t,this.connection=e,this.connection.receive.subscribe(function(n){return o.receive(n)}),this.dumpChanges=function(){return r(o)}}return n.prototype.indexNetwork=function(){return u(this,void 0,void 0,function(){var n,t=this;return c(this,function(e){switch(e.label){case 0:return this.rootOfIndexing=!0,this.dumpChanges(),[4,this.connection.ping];case 1:return n=e.sent(),this.WAITING_FOR_BRIDGES=n,n.forEach(function(n){t.send({protocol:"CSTP",content:{message:"Dear Neighbor hear is my name and the package provides you the cost to me. Follow the CSTP.",from:{name:t.name,value:t.value}},target:n})}),[2]}})})},n.prototype.send=function(n){this.connection.send.next(n)},n.prototype.handleCSTPPackage=function(n){var t,e=this;if(!(this.INDEXED||this.rootOfIndexing&&n.content.from)){if(console.log(this.name,"received pkg"),0!==this.DISCOVERED_LINKS.length||this.rootOfIndexing||(this.connection.ping.then(function(t){if(e.WAITING_FOR_BRIDGES=t.filter(function(t){return t!==n.content.from.name}),e.dumpChanges(),console.log(e.name," waiting for:",e.WAITING_FOR_BRIDGES),e.WAITING_FOR_BRIDGES.forEach(function(n){return e.send({protocol:"CSTP",content:{message:"Dear Neighbor hear is my name and the package provides you the cost to me. Follow the CSTP.",from:{name:e.name,value:e.value}},target:n})}),0===e.WAITING_FOR_BRIDGES.length){var r=e.DISCOVERED_LINKS[0].nodes.find(function(n){return n.name!==e.name});if(e.dumpChanges(),e.send({protocol:"CSTP",content:{message:"Dear Neighbor hear are my discovered links, you may concat them with yours and send them back!",discoveredLinks:e.DISCOVERED_LINKS},target:r.name}),e.INDEXED=!0,e.rootOfIndexing){var o=new s(e.DISCOVERED_LINKS);e.connection.finishedIndexing.next(o)}else e.connection.finishedIndexing.next();e.dumpChanges()}}),this.DISCOVERED_LINKS.push({cost:n.cost,nodes:[{name:this.name,value:this.value},n.content.from]}),this.returnTo.push(n.content.from.name),this.dumpChanges(),console.log("returning from ",this.name,"to ",this.returnTo)),this.WAITING_FOR_BRIDGES&&n.content.discoveredLinks){var r=n.content.discoveredLinks[0].nodes.find(function(n){return n.name!==e.name});this.WAITING_FOR_BRIDGES.splice(this.WAITING_FOR_BRIDGES.findIndex(function(n){return n===r}),1),console.log(this.name," waiting for:",this.WAITING_FOR_BRIDGES),(t=this.DISCOVERED_LINKS).push.apply(t,n.content.discoveredLinks)}else this.WAITING_FOR_BRIDGES&&n.content.from&&(this.WAITING_FOR_BRIDGES.splice(this.WAITING_FOR_BRIDGES.findIndex(function(t){return t===n.content.from.name}),1),console.log(this.name," waiting for:",this.WAITING_FOR_BRIDGES),this.returnTo.push(n.content.from.name),console.log("returning from ",this.name,"to ",this.returnTo),this.DISCOVERED_LINKS.push({cost:n.cost,nodes:[{name:this.name,value:this.value},n.content.from]}));if(this.dumpChanges(),this.WAITING_FOR_BRIDGES&&0===this.WAITING_FOR_BRIDGES.length){if(console.log(this.name,"sending",this.DISCOVERED_LINKS),this.returnTo.forEach(function(n){e.send({protocol:"CSTP",content:{message:"Dear Neighbor hear are my discovered links, you may concat them with yours and send them back!",discoveredLinks:e.DISCOVERED_LINKS},target:n})}),this.INDEXED=!0,console.log("Node has finished ",this.name),this.rootOfIndexing){var o=[];this.DISCOVERED_LINKS.forEach(function(n){o.find(function(t){return-1!==n.nodes.findIndex(function(n){return n.name===t.nodes[0].name})&&-1!==n.nodes.findIndex(function(n){return n.name===t.nodes[1].name})})||o.push(n)}),console.log("dl",this.DISCOVERED_LINKS.map(function(n){return n.nodes})),console.log("l",o);var i=new s(o);this.connection.finishedIndexing.next(i)}else this.connection.finishedIndexing.next();this.dumpChanges()}}},n.prototype.receive=function(n){"CSTP"===n.protocol&&this.handleCSTPPackage(n)},n}(),h=function(n,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e])})(n,t)};function f(n,t){function e(){this.constructor=n}h(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}function l(n){return"function"==typeof n}var d=!1,p={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){n&&(new Error).stack;d=n},get useDeprecatedSynchronousErrorHandling(){return d}};function b(n){setTimeout(function(){throw n})}var m={closed:!0,next:function(n){},error:function(n){if(p.useDeprecatedSynchronousErrorHandling)throw n;b(n)},complete:function(){}},y=Array.isArray||function(n){return n&&"number"==typeof n.length};function g(n){return Error.call(this),this.message=n?n.length+" errors occurred during unsubscription:\n"+n.map(function(n,t){return t+1+") "+n.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=n,this}g.prototype=Object.create(Error.prototype);var v=g,_=function(){function n(n){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,n&&(this._unsubscribe=n)}var t;return n.prototype.unsubscribe=function(){var n,t=!1;if(!this.closed){var e=this._parent,r=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s,u=-1,c=r?r.length:0;e;)e.remove(this),e=++u<c&&r[u]||null;if(l(o))try{o.call(this)}catch(e){t=!0,n=e instanceof v?E(e.errors):[e]}if(y(i))for(u=-1,c=i.length;++u<c;){var a=i[u];if(null!==(s=a)&&"object"==typeof s)try{a.unsubscribe()}catch(e){t=!0,n=n||[],e instanceof v?n=n.concat(E(e.errors)):n.push(e)}}if(t)throw new v(n)}},n.prototype.add=function(t){var e=t;switch(typeof t){case"function":e=new n(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof n)){var r=e;(e=new n)._subscriptions=[r]}break;default:if(!t)return n.EMPTY;throw new Error("unrecognized teardown "+t+" added to Subscription.")}if(e._addParent(this)){var o=this._subscriptions;o?o.push(e):this._subscriptions=[e]}return e},n.prototype.remove=function(n){var t=this._subscriptions;if(t){var e=t.indexOf(n);-1!==e&&t.splice(e,1)}},n.prototype._addParent=function(n){var t=this._parent,e=this._parents;return t!==n&&(t?e?-1===e.indexOf(n)&&(e.push(n),!0):(this._parents=[n],!0):(this._parent=n,!0))},n.EMPTY=((t=new n).closed=!0,t),n}();function E(n){return n.reduce(function(n,t){return n.concat(t instanceof v?t.errors:t)},[])}var w="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),S=function(n){function t(e,r,o){var i=n.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=m;break;case 1:if(!e){i.destination=m;break}if("object"==typeof e){e instanceof t?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new I(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new I(i,e,r,o)}return i}return f(t,n),t.prototype[w]=function(){return this},t.create=function(n,e,r){var o=new t(n,e,r);return o.syncErrorThrowable=!1,o},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this))},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){this.destination.error(n),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var n=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=n,this._parents=t,this},t}(_),I=function(n){function t(t,e,r,o){var i,s=n.call(this)||this;s._parentSubscriber=t;var u=s;return l(e)?i=e:e&&(i=e.next,r=e.error,o=e.complete,e!==m&&(l((u=Object.create(e)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=i,s._error=r,s._complete=o,s}return f(t,n),t.prototype.next=function(n){if(!this.isStopped&&this._next){var t=this._parentSubscriber;p.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,n)&&this.unsubscribe():this.__tryOrUnsub(this._next,n)}},t.prototype.error=function(n){if(!this.isStopped){var t=this._parentSubscriber,e=p.useDeprecatedSynchronousErrorHandling;if(this._error)e&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,n),this.unsubscribe()):(this.__tryOrUnsub(this._error,n),this.unsubscribe());else if(t.syncErrorThrowable)e?(t.syncErrorValue=n,t.syncErrorThrown=!0):b(n),this.unsubscribe();else{if(this.unsubscribe(),e)throw n;b(n)}}},t.prototype.complete=function(){var n=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var e=function(){return n._complete.call(n._context)};p.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(n,t){try{n.call(this._context,t)}catch(n){if(this.unsubscribe(),p.useDeprecatedSynchronousErrorHandling)throw n;b(n)}},t.prototype.__tryOrSetError=function(n,t,e){if(!p.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,e)}catch(t){return p.useDeprecatedSynchronousErrorHandling?(n.syncErrorValue=t,n.syncErrorThrown=!0,!0):(b(t),!0)}return!1},t.prototype._unsubscribe=function(){var n=this._parentSubscriber;this._context=null,this._parentSubscriber=null,n.unsubscribe()},t}(S);var x="function"==typeof Symbol&&Symbol.observable||"@@observable";function O(){}function D(n){return n?1===n.length?n[0]:function(t){return n.reduce(function(n,t){return t(n)},t)}:O}var T=function(){function n(n){this._isScalar=!1,n&&(this._subscribe=n)}return n.prototype.lift=function(t){var e=new n;return e.source=this,e.operator=t,e},n.prototype.subscribe=function(n,t,e){var r=this.operator,o=function(n,t,e){if(n){if(n instanceof S)return n;if(n[w])return n[w]()}return n||t||e?new S(n,t,e):new S(m)}(n,t,e);if(r?o.add(r.call(o,this.source)):o.add(this.source||p.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),p.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},n.prototype._trySubscribe=function(n){try{return this._subscribe(n)}catch(t){p.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=t),!function(n){for(;n;){var t=n,e=t.closed,r=t.destination,o=t.isStopped;if(e||o)return!1;n=r&&r instanceof S?r:null}return!0}(n)?console.warn(t):n.error(t)}},n.prototype.forEach=function(n,t){var e=this;return new(t=N(t))(function(t,r){var o;o=e.subscribe(function(t){try{n(t)}catch(n){r(n),o&&o.unsubscribe()}},r,t)})},n.prototype._subscribe=function(n){var t=this.source;return t&&t.subscribe(n)},n.prototype[x]=function(){return this},n.prototype.pipe=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return 0===n.length?this:D(n)(this)},n.prototype.toPromise=function(n){var t=this;return new(n=N(n))(function(n,e){var r;t.subscribe(function(n){return r=n},function(n){return e(n)},function(){return n(r)})})},n.create=function(t){return new n(t)},n}();function N(n){if(n||(n=p.Promise||Promise),!n)throw new Error("no Promise impl found");return n}function k(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}k.prototype=Object.create(Error.prototype);var R=k,C=function(n){function t(t,e){var r=n.call(this)||this;return r.subject=t,r.subscriber=e,r.closed=!1,r}return f(t,n),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var n=this.subject,t=n.observers;if(this.subject=null,t&&0!==t.length&&!n.isStopped&&!n.closed){var e=t.indexOf(this.subscriber);-1!==e&&t.splice(e,1)}}},t}(_),B=function(n){function t(t){var e=n.call(this,t)||this;return e.destination=t,e}return f(t,n),t}(S),P=function(n){function t(){var t=n.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return f(t,n),t.prototype[w]=function(){return new B(this)},t.prototype.lift=function(n){var t=new G(this,this);return t.operator=n,t},t.prototype.next=function(n){if(this.closed)throw new R;if(!this.isStopped)for(var t=this.observers,e=t.length,r=t.slice(),o=0;o<e;o++)r[o].next(n)},t.prototype.error=function(n){if(this.closed)throw new R;this.hasError=!0,this.thrownError=n,this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),o=0;o<e;o++)r[o].error(n);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new R;this.isStopped=!0;for(var n=this.observers,t=n.length,e=n.slice(),r=0;r<t;r++)e[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new R;return n.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(n){if(this.closed)throw new R;return this.hasError?(n.error(this.thrownError),_.EMPTY):this.isStopped?(n.complete(),_.EMPTY):(this.observers.push(n),new C(this,n))},t.prototype.asObservable=function(){var n=new T;return n.source=this,n},t.create=function(n,t){return new G(n,t)},t}(T),G=function(n){function t(t,e){var r=n.call(this)||this;return r.destination=t,r.source=e,r}return f(t,n),t.prototype.next=function(n){var t=this.destination;t&&t.next&&t.next(n)},t.prototype.error=function(n){var t=this.destination;t&&t.error&&this.destination.error(n)},t.prototype.complete=function(){var n=this.destination;n&&n.complete&&this.destination.complete()},t.prototype._subscribe=function(n){return this.source?this.source.subscribe(n):_.EMPTY},t}(P),L=function(){return function(n){this.send=new P,this.receive=new P,this.finishedIndexing=new P,this.ping=new Promise(function(t){return t(n)})}}(),A=function(n,t,e,r){return new(e||(e=Promise))(function(o,i){function s(n){try{c(r.next(n))}catch(n){i(n)}}function u(n){try{c(r.throw(n))}catch(n){i(n)}}function c(n){n.done?o(n.value):new e(function(t){t(n.value)}).then(s,u)}c((r=r.apply(n,t||[])).next())})},j=function(n,t){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(n,s)}catch(n){i=[6,n],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},F=function(){function n(n,t){void 0===t&&(t=.5);var e=this;this.nodes=n,this.bridges=[],this.startIndexingFromRandomBridge=function(){return new Promise(function(n){return A(e,void 0,void 0,function(){var t;return j(this,function(e){return t=this.bridges[Math.round(Math.random()*this.bridges.length)],console.log(this.bridges,t),t.connection.finishedIndexing.subscribe(function(t){return n(t)}),t.indexNetwork().then(function(){return console.log("wtf")}),[2]})})})},this.id=0,n.forEach(function(n){var t=n.links.map(function(n){return n.toNode}),r=new L(t);e.bridges.push(new a(n.name,n.value,r,e.dumpBridge))}),this.bridges.forEach(function(r){var o=n.find(function(n){return n.name===r.name}).links,i=o.map(function(n){return n.toNode});r.connection.send.subscribe(function(n){if(console.log(r.name+">>>"+n.target),i.find(function(t){return t===n.target})){n.cost=o.find(function(t){return t.toNode===n.target}).cost;var s=e.dumpPkg(n,r.name);setTimeout(function(){s(),e.bridges.find(function(t){return t.name===n.target}).connection.receive.next(n)},1e3*n.cost*t)}})}),this.createDomBridges()}return n.prototype.dumpPkg=function(n,t){var e=document.getElementById("pkg_s_target"),r=this.id++;return e.insertAdjacentElement("beforeend",(new DOMParser).parseFromString(function(n,t){return'\n<div id="pkg_'+r+'">\n    '+t+" -> "+n.target+" : "+n.cost+"\n</div>\n"}(n,t),"text/html").getElementById("pkg_"+r)),function(){e.removeChild(document.getElementById("pkg_"+r))}},n.prototype.createDomBridges=function(){var n=document.getElementById("container_target");this.bridges.sort(function(n,t){return n.name<t.name?-1:n.name>t.name?1:0}).forEach(function(t){n.insertAdjacentElement("beforeend",(new DOMParser).parseFromString(function(n){return'\n<div class="item" id="bridge_'+n.value+'">\n    <h3>Bridge '+n.name+"</h3>\n</div>\n"}(t),"text/html").getElementById("bridge_"+t.value))})},n.prototype.dumpBridge=function(n){document.getElementById("bridge_"+n.value).replaceWith((new DOMParser).parseFromString(function(n){return'\n<div class="item" id="bridge_'+n.value+'">\n    <div style="width: 100%; height: 100%; overflow-y: auto">\n        <h3>Bridge '+n.name+"</h3>\n        "+(n.rootOfIndexing?"Indexing Root!":"")+"<br>\n        Known links: [<BLOCKQUOTE>"+n.DISCOVERED_LINKS.map(function(n){return n.nodes.map(function(n){return n.name}).join("-")+":"+n.cost}).join(",<br>")+"</BLOCKQUOTE>]<br>\n        "+(n.rootOfIndexing?"":"Returning Data to: [<BLOCKQUOTE>"+n.returnTo.join(",<br>")+"</BLOCKQUOTE>]")+"\n    </div>\n</div>\n"}(n),"text/html").getElementById("bridge_"+n.value))},n}(),M=document.getElementById("textIn"),K=document.getElementById("textOut"),V=document.getElementById("simulate_btn");M.value="\nGraph mygraph {\n\t// Node\n\tA = 5;\n\tB = 1;\n\tC = 3;\n\tD = 7;\n\tE = 6;\n\tF = 4;\n\t\n\t// Links und zugeh. Kosten\n\tA - B : 10;\n\tA - C : 10;\n\tB - D : 15;\n\tB - E : 10;\n\tC - D : 3;\n\tC - E : 10;\n\tD - E : 2;\n\tD - F : 10;\n\tE - F : 2;\n}",console.log(M);V.addEventListener("click",function(){var n=function(n){for(var t=[],e=[],i=n.match(/(?<=Graph[ ])(\S+)/g)[0],s=n.match(/[^\s]+(?= =)|(?<== )[1-9]*/g),u=n.match(/[^\s]+(?= -)|[^\s]+(?= :)|(?<=: )[0-9]*/g),c=0;c<u.length;c+=3)t.push({nodes:[u[c],u[c+1]],cost:+u[c+2]});var a=function(n){var i=s[n],u=+s[n+1],c=t.filter(function(n){return-1!==n.nodes.findIndex(function(n){return n===i})}).map(function(n){return new r(n.nodes.find(function(n){return n!==i}),n.cost)});e.push(new o(i,u,c))};for(c=0;c<s.length;c+=2)a(c);return{graphName:i,nodes:e}}(M.value),t=new F(n.nodes,+document.getElementById("mult").value);console.log(t),t.startIndexingFromRandomBridge().then(function(t){var e;K.value=(e=t,"\nSpanning-Tree of "+n.graphName+" {\n\tRoot: "+e.root.name+";\n\t"+e.linkToString()+"\n}")})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9TcGFubmluZ1RyZWUvc3Bhbm5pbmdUcmVlTGluay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1NwYW5uaW5nVHJlZS9zcGFubmluZ1RyZWVOb2RlLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU2ltdWxhdGlvbi9TaW11bGF0aW9uTGluay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1NwYW5uaW5nVHJlZS9taW5pbWFsU3Bhbm5pbmdUcmVlLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU2ltdWxhdGlvbi9CcmlkZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL2lzRnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvY29uZmlnLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaG9zdFJlcG9ydEVycm9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL09ic2VydmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaXNBcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL1Vuc3Vic2NyaXB0aW9uRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvU3Vic2NyaXB0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaXNPYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvc3ltYm9sL3J4U3Vic2NyaWJlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9TdWJzY3JpYmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3N5bWJvbC9vYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvbm9vcC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL3BpcGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL3RvU3Vic2NyaWJlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL2NhblJlcG9ydEVycm9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvU3ViamVjdFN1YnNjcmlwdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9TdWJqZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU2ltdWxhdGlvbi9TaW11bGF0aW9uQ29ubmVjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1NpbXVsYXRpb24vU2ltdWxhdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFyc2VyL2dyYXBoUGFyc2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9wYXJzZXIvbXN0U3RyaW5naWZ5LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiU3Bhbm5pbmdUcmVlTGluayIsInRvTm9kZSIsImNvc3QiLCJ0aGlzIiwiU3Bhbm5pbmdUcmVlTm9kZSIsImxpbmtzIiwiU2ltdWxhdGlvbkxpbmsiLCJub2RlcyIsIm1pbmltYWxTcGFubmluZ1RyZWVfTWluaW1hbFNwYW5UcmVlIiwiTWluaW1hbFNwYW5UcmVlIiwic3BhblRyZWVMaW5rcyIsInNob3J0ZXN0TGlua3MiLCJhbGxOb2RlcyIsInNsaWNlIiwiYXJyYXkiLCJzb3J0IiwiYSIsImIiLCJyZXZlcnNlIiwiZmxhdE1hcCIsIm1hcCIsIk1hcCIsIl9pIiwiYXJyYXlfMSIsImxlbmd0aCIsIml0ZW0iLCJoYXMiLCJzZXQiLCJwdXNoIiwicm9vdCIsImNvbnNvbGUiLCJsb2ciLCJhbGxOb2Rlc0FyZUNvbm5lY3RlZCIsIml0ZW1zIiwicG9wIiwidGVtcCIsImxhc3QiLCJ0cnlUb1JlbW92ZSIsInJlc3VsdCIsImFycmF5XzIiLCJhbGxOb2Rlc0FyZUluY2x1ZGVkIiwibm9kZXNUb0ZpbmRfMSIsInRyYXZlcnNlXzEiLCJjdXJyZW50Tm9kZSIsIm5vZGUiLCJzcGxpY2UiLCJmaW5kSW5kZXgiLCJmaWx0ZXIiLCJsaW5rIiwiZmluZCIsIm4xIiwiZ2V0RGlyZWN0Q29ubmVjdGVkXzEiLCJmb3JFYWNoIiwibmV4dCIsInJlcyIsInNpbXVsYXRpb25MaW5rcyIsInRoaXNfMSIsInNob3J0ZXN0TGlua3NfMSIsImxpbmtUb1N0cmluZyIsInNvcnRlZCIsInJldCIsIkJyaWRnZV9CcmlkZ2UiLCJCcmlkZ2UiLCJjb25uZWN0aW9uIiwiZHVtcENoYW5nZXMiLCJfdGhpcyIsInJvb3RPZkluZGV4aW5nIiwicmV0dXJuVG8iLCJESVNDT1ZFUkVEX0xJTktTIiwicmVjZWl2ZSIsInN1YnNjcmliZSIsInBrZyIsImluZGV4TmV0d29yayIsInBpbmciLCJzaWJsaW5ncyIsIl9hIiwic2VudCIsIldBSVRJTkdfRk9SX0JSSURHRVMiLCJ0YXJnZXQiLCJzZW5kIiwicHJvdG9jb2wiLCJjb250ZW50IiwibWVzc2FnZSIsImZyb20iLCJoYW5kbGVDU1RQUGFja2FnZSIsIklOREVYRUQiLCJ0aGVuIiwiYnJpZGdlcyIsImRpc2NvdmVyZWRMaW5rcyIsIm1zdCIsImZpbmlzaGVkSW5kZXhpbmciLCJuYW1lXzEiLCJhcHBseSIsImxpbmtzXzEiLCJleHRlbmRTdGF0aWNzIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsIl9fZXh0ZW5kcyIsIl9fIiwiY29uc3RydWN0b3IiLCJpc0Z1bmN0aW9uIiwieCIsIl9lbmFibGVfc3VwZXJfZ3Jvc3NfbW9kZV90aGF0X3dpbGxfY2F1c2VfYmFkX3RoaW5ncyIsImNvbmZpZyIsIlByb21pc2UiLCJ1bmRlZmluZWQiLCJ1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nIiwiRXJyb3IiLCJzdGFjayIsImhvc3RSZXBvcnRFcnJvciIsImVyciIsInNldFRpbWVvdXQiLCJlbXB0eSIsImNsb3NlZCIsImVycm9yIiwiY29tcGxldGUiLCJpc0FycmF5IiwiVW5zdWJzY3JpcHRpb25FcnJvckltcGwiLCJlcnJvcnMiLCJ0b1N0cmluZyIsImpvaW4iLCJVbnN1YnNjcmlwdGlvbkVycm9yIiwiU3Vic2NyaXB0aW9uX1N1YnNjcmlwdGlvbiIsIlN1YnNjcmlwdGlvbiIsInVuc3Vic2NyaWJlIiwiX3BhcmVudCIsIl9wYXJlbnRzIiwiX3N1YnNjcmlwdGlvbnMiLCJfdW5zdWJzY3JpYmUiLCJoYXNFcnJvcnMiLCJpbmRleCIsImxlbiIsInJlbW92ZSIsImUiLCJmbGF0dGVuVW5zdWJzY3JpcHRpb25FcnJvcnMiLCJzdWIiLCJjb25jYXQiLCJhZGQiLCJ0ZWFyZG93biIsInN1YnNjcmlwdGlvbiIsInRtcCIsIkVNUFRZIiwiX2FkZFBhcmVudCIsInN1YnNjcmlwdGlvbnMiLCJzdWJzY3JpcHRpb25JbmRleCIsImluZGV4T2YiLCJwYXJlbnQiLCJyZWR1Y2UiLCJlcnJzIiwicnhTdWJzY3JpYmVyIiwiTWF0aCIsInJhbmRvbSIsIlN1YnNjcmliZXJfU3Vic2NyaWJlciIsIl9zdXBlciIsIlN1YnNjcmliZXIiLCJkZXN0aW5hdGlvbk9yTmV4dCIsInN5bmNFcnJvclZhbHVlIiwic3luY0Vycm9yVGhyb3duIiwic3luY0Vycm9yVGhyb3dhYmxlIiwiaXNTdG9wcGVkIiwiYXJndW1lbnRzIiwiZGVzdGluYXRpb24iLCJTdWJzY3JpYmVyX1NhZmVTdWJzY3JpYmVyIiwic3Vic2NyaWJlciIsIl9uZXh0IiwiX2Vycm9yIiwiX2NvbXBsZXRlIiwiX3Vuc3Vic2NyaWJlQW5kUmVjeWNsZSIsIlNhZmVTdWJzY3JpYmVyIiwiX3BhcmVudFN1YnNjcmliZXIiLCJvYnNlcnZlck9yTmV4dCIsImNvbnRleHQiLCJfY29udGV4dCIsIl9fdHJ5T3JTZXRFcnJvciIsIl9fdHJ5T3JVbnN1YiIsIndyYXBwZWRDb21wbGV0ZSIsImZuIiwib2JzZXJ2YWJsZV9vYnNlcnZhYmxlIiwib2JzZXJ2YWJsZSIsIm5vb3AiLCJwaXBlRnJvbUFycmF5IiwiZm5zIiwiaW5wdXQiLCJwcmV2IiwiT2JzZXJ2YWJsZV9PYnNlcnZhYmxlIiwiT2JzZXJ2YWJsZSIsIl9pc1NjYWxhciIsIl9zdWJzY3JpYmUiLCJsaWZ0Iiwib3BlcmF0b3IiLCJzb3VyY2UiLCJzaW5rIiwibmV4dE9yT2JzZXJ2ZXIiLCJ0b1N1YnNjcmliZXIiLCJfdHJ5U3Vic2NyaWJlIiwib2JzZXJ2ZXIiLCJjbG9zZWRfMSIsImNhblJlcG9ydEVycm9yIiwid2FybiIsInByb21pc2VDdG9yIiwiZ2V0UHJvbWlzZUN0b3IiLCJyZXNvbHZlIiwicmVqZWN0IiwicGlwZSIsIm9wZXJhdGlvbnMiLCJ0b1Byb21pc2UiLCJPYmplY3RVbnN1YnNjcmliZWRFcnJvckltcGwiLCJPYmplY3RVbnN1YnNjcmliZWRFcnJvciIsIlN1YmplY3RTdWJzY3JpcHRpb25fU3ViamVjdFN1YnNjcmlwdGlvbiIsIlN1YmplY3RTdWJzY3JpcHRpb24iLCJzdWJqZWN0Iiwib2JzZXJ2ZXJzIiwic3Vic2NyaWJlckluZGV4IiwiU3ViamVjdF9TdWJqZWN0U3Vic2NyaWJlciIsIlN1YmplY3RTdWJzY3JpYmVyIiwiU3ViamVjdF9TdWJqZWN0IiwiU3ViamVjdCIsImhhc0Vycm9yIiwidGhyb3duRXJyb3IiLCJTdWJqZWN0X0Fub255bW91c1N1YmplY3QiLCJjb3B5IiwiYXNPYnNlcnZhYmxlIiwiQW5vbnltb3VzU3ViamVjdCIsIlNpbXVsYXRpb25Db25uZWN0aW9uX1NpbXVsYXRpb25Db25uZWN0aW9uIiwic2libGluZ0JyaWRnZXMiLCJTaW11bGF0aW9uX1NpbXVsYXRpb24iLCJTaW11bGF0aW9uIiwibXVsdGlwbGljYXRvckZvckNvc3RJblNlY29uZHMiLCJzdGFydEluZGV4aW5nRnJvbVJhbmRvbUJyaWRnZSIsIlNpbXVsYXRpb25fYXdhaXRlciIsImJyaWRnZSIsInJvdW5kIiwiaWQiLCJzaWJsaW5nTm9kZXMiLCJjb25uIiwiZHVtcEJyaWRnZSIsImNiXzEiLCJkdW1wUGtnIiwiY3JlYXRlRG9tQnJpZGdlcyIsInBrZ19zX3RhcmdldCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJudW1iZXIiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJwa2dUZW1wbGF0ZSIsInJlbW92ZUNoaWxkIiwiYnJpZGdlVGVtcGxhdGUiLCJyZXBsYWNlV2l0aCIsImlucHV0QXJlYSIsIm91dHB1dEFyZWEiLCJzaW11bGF0aW9uQnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBhcnNlUmVzdWx0IiwidGVtcExpbmtzIiwiZ3JhcGhOYW1lIiwibWF0Y2giLCJub2RlTWF0Y2hlcyIsImxpbmtNYXRjaGVzIiwicGFyc2UiLCJzaW11bGF0aW9uIiwibWluaW1hbFNwYW5UcmVlIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsWUFBQSxDQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxjQUFpRG1CLE9BQUEsS0FRakRyQixFQUFBc0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQXJCLEVBQUFxQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFBLE9B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LEVBQ1QxUCxNQUFLQSxHRHVCZ0I4UCxDQUFNVixFQUFVMVEsT0FDOUJxUixFQUFhLElBQUlwQyxFQUFXNkIsRUFBWXhQLE9BQVMwTyxTQUFTQyxlQUFlLFFBQTZCalEsT0FDNUc2QyxRQUFRQyxJQUFJdU8sR0FDWkEsRUFBV2pDLGdDQUFnQy9JLEtBQUssU0FBQUcsR0VoRG5ELElBQUM4SyxFRmlETVgsRUFBVzNRLE9FakRqQnNSLEVGaURtQzlLLEVFakRELHNCRmlETXNLLEVBQVlFLFVFaEQvQixlQUNkTSxFQUFnQjFPLEtBQUt0RCxLQUFJLFFBQy9CZ1MsRUFBZ0I3TSxlQUFjIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBjbGFzcyBTcGFubmluZ1RyZWVMaW5rIHtcclxuXHRjb25zdHJ1Y3RvcihwdWJsaWMgdG9Ob2RlOiBzdHJpbmcsIHB1YmxpYyBjb3N0OiBudW1iZXIpIHtcclxuXHR9XHJcbn1cclxuIiwiaW1wb3J0IHtTcGFubmluZ1RyZWVMaW5rfSBmcm9tIFwiLi9zcGFubmluZ1RyZWVMaW5rXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU3Bhbm5pbmdUcmVlTm9kZSB7XHJcblx0Y29uc3RydWN0b3IocHVibGljIG5hbWU6IHN0cmluZywgcHVibGljIHZhbHVlOiBudW1iZXIsIHB1YmxpYyBsaW5rczogU3Bhbm5pbmdUcmVlTGlua1tdKSB7XHJcblx0fVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBTaW11bGF0aW9uTGluayB7XHJcblx0Y29uc3RydWN0b3IocHVibGljIG5vZGVzOiB7bmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyfVtdLCBwdWJsaWMgY29zdDogbnVtYmVyKXt9XHJcbn1cclxuIiwiaW1wb3J0IHtTaW11bGF0aW9uTGlua30gZnJvbSBcIi4uL1NpbXVsYXRpb24vU2ltdWxhdGlvbkxpbmtcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNaW5pbWFsU3BhblRyZWUge1xyXG4gICAgcHVibGljIHNob3J0ZXN0TGlua3M6IFNpbXVsYXRpb25MaW5rW10gPSBbXTtcclxuICAgIHB1YmxpYyBhbGxOb2RlczogeyBuYW1lOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIgfVtdID0gW107XHJcbiAgICBwdWJsaWMgcm9vdDogeyBuYW1lOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIgfTtcclxuXHJcbiAgICBhbGxOb2Rlc0FyZUNvbm5lY3RlZChhbGxOb2Rlcywgc2hvcnRlc3RMaW5rcyA9IHRoaXMuc2hvcnRlc3RMaW5rcykge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGFycmF5ID0gc2hvcnRlc3RMaW5rcy5mbGF0TWFwKGwgPT4gbC5ub2Rlcyk7XHJcbiAgICAgICAgY29uc3QgbWFwID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhcnJheSkge1xyXG4gICAgICAgICAgICBpZiAoIW1hcC5oYXMoaXRlbS5uYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgbWFwLnNldChpdGVtLm5hbWUsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGFsbE5vZGVzQXJlSW5jbHVkZWQgPSByZXN1bHQubGVuZ3RoID09PSBhbGxOb2Rlcy5sZW5ndGg7XHJcbiAgICAgICAgbGV0IGFsbE5vZGVzQXJlQ29ubmVjdGVkO1xyXG4gICAgICAgIGlmIChhbGxOb2Rlc0FyZUluY2x1ZGVkKSB7XHJcbiAgICAgICAgICAgIGxldCBub2Rlc1RvRmluZCA9IFsuLi50aGlzLmFsbE5vZGVzXTtcclxuICAgICAgICAgICAgY29uc3QgYWxsRm91bmQgPSAoKSA9PiBub2Rlc1RvRmluZC5sZW5ndGggPT09IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGdldERpcmVjdENvbm5lY3RlZCA9IChub2RlKSA9PiBzaG9ydGVzdExpbmtzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGxpbmsgPT4gbGluay5ub2Rlcy5maW5kSW5kZXgobiA9PiBuLm5hbWUgPT09IG5vZGUubmFtZSkgIT09IC0xKVxyXG4gICAgICAgICAgICAgICAgLmZsYXRNYXAobGluayA9PiBsaW5rLm5vZGVzLmZpbmQobiA9PiBuLm5hbWUgIT09IG5vZGUubmFtZSkpXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKG4gPT4gbm9kZXNUb0ZpbmQuZmluZEluZGV4KG4xID0+IG4xLm5hbWUgPT09IG4ubmFtZSkgIT09IC0xKTtcclxuICAgICAgICAgICAgY29uc3QgcmVtb3ZlTm9kZSA9IChub2RlKSA9PiBub2Rlc1RvRmluZC5zcGxpY2Uobm9kZXNUb0ZpbmQuZmluZEluZGV4KG4gPT4gbi5uYW1lID09PSBub2RlLm5hbWUpLCAxKTtcclxuICAgICAgICAgICAgY29uc3QgdHJhdmVyc2UgPSAoY3VycmVudE5vZGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlbW92ZU5vZGUoY3VycmVudE5vZGUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29ubmVjdGVkID0gZ2V0RGlyZWN0Q29ubmVjdGVkKGN1cnJlbnROb2RlKTtcclxuICAgICAgICAgICAgICAgIGNvbm5lY3RlZC5mb3JFYWNoKG5leHQgPT4gdHJhdmVyc2UobmV4dCkpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0cmF2ZXJzZSh0aGlzLnJvb3QpO1xyXG4gICAgICAgICAgICBhbGxOb2Rlc0FyZUNvbm5lY3RlZCA9IGFsbEZvdW5kKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhbGxOb2Rlc0FyZUluY2x1ZGVkICYmIGFsbE5vZGVzQXJlQ29ubmVjdGVkO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzcGFuVHJlZUxpbmtzOiBTaW11bGF0aW9uTGlua1tdKSB7XHJcblxyXG4gICAgICAgIGxldCBsaW5rcyA9IFsuLi5zcGFuVHJlZUxpbmtzXTtcclxuICAgICAgICBsaW5rcyA9IGxpbmtzLnNvcnQoKGEsIGIpID0+IGEuY29zdCAtIGIuY29zdCkucmV2ZXJzZSgpO1xyXG5cclxuICAgICAgICBjb25zdCBhcnJheSA9IGxpbmtzLmZsYXRNYXAobCA9PiBsLm5vZGVzKTtcclxuXHJcbiAgICAgICAgY29uc3QgbWFwID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhcnJheSkge1xyXG4gICAgICAgICAgICBpZiAoIW1hcC5oYXMoaXRlbS5uYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgbWFwLnNldChpdGVtLm5hbWUsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hbGxOb2Rlcy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucm9vdCA9IHRoaXMuYWxsTm9kZXMuc29ydCgoYSwgYikgPT4gYS52YWx1ZSAtIGIudmFsdWUpWzBdO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFsuLi5saW5rc10pO1xyXG4gICAgICAgIHdoaWxlICghdGhpcy5hbGxOb2Rlc0FyZUNvbm5lY3RlZCh0aGlzLmFsbE5vZGVzKSkge1xyXG4gICAgICAgICAgICBsZXQgaXRlbXMgPSBsaW5rcy5wb3AoKTtcclxuICAgICAgICAgICAgdGhpcy5zaG9ydGVzdExpbmtzLnB1c2goaXRlbXMpO1xyXG4gICAgICAgICAgICBpZih0aGlzLmFsbE5vZGVzQXJlQ29ubmVjdGVkKHRoaXMuYWxsTm9kZXMpKXtcclxuICAgICAgICAgICAgICAgIGxldCB0ZW1wLCBsYXN0ID0gdGVtcCA9IFsuLi50aGlzLnNob3J0ZXN0TGlua3NdO1xyXG4gICAgICAgICAgICAgICAgd2hpbGUoISF0ZW1wKXtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0ID0gdGVtcDtcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wID0gdGhpcy50cnlUb1JlbW92ZSh0ZW1wKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKGxhc3QubGVuZ3RoIDwgdGhpcy5zaG9ydGVzdExpbmtzLmxlbmd0aCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG9ydGVzdExpbmtzID0gbGFzdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNob3J0ZXN0TGlua3MpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSB0cnlUb1JlbW92ZShzaG9ydGVzdExpbmtzKXtcclxuICAgICAgICBsZXQgcmVzO1xyXG4gICAgICAgIGZvciAoY29uc3QgbCBvZiBzaG9ydGVzdExpbmtzKSB7XHJcbiAgICAgICAgICAgIGxldCBzaW11bGF0aW9uTGlua3MgPSBbLi4uc2hvcnRlc3RMaW5rc107XHJcbiAgICAgICAgICAgIHNpbXVsYXRpb25MaW5rcy5zcGxpY2Uoc2ltdWxhdGlvbkxpbmtzLmZpbmRJbmRleChsaW5rID0+IGxpbmsgPT09IGwpLDEpO1xyXG4gICAgICAgICAgICBpZih0aGlzLmFsbE5vZGVzQXJlQ29ubmVjdGVkKHRoaXMuYWxsTm9kZXMsIHNpbXVsYXRpb25MaW5rcykpe1xyXG4gICAgICAgICAgICAgICAgcmVzID0gc2ltdWxhdGlvbkxpbmtzO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcztcclxuICAgIH1cclxuXHJcbiAgICBsaW5rVG9TdHJpbmcoKSB7XHJcbiAgICAgICAgY29uc3Qgc29ydGVkID0gdGhpcy5zaG9ydGVzdExpbmtzLm1hcChsaW5rID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTaW11bGF0aW9uTGluayhsaW5rLm5vZGVzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYS5uYW1lIDwgYi5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEubmFtZSA+IGIubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgICAgICB9KSwgbGluay5jb3N0XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSkuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYS5ub2Rlc1swXS5uYW1lIDwgYi5ub2Rlc1swXS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGEubm9kZXNbMF0ubmFtZSA+IGIubm9kZXNbMF0ubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGEubm9kZXNbMF0ubmFtZSA9PT0gYi5ub2Rlc1swXS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYS5ub2Rlc1sxXS5uYW1lIDwgYi5ub2Rlc1sxXS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGEubm9kZXNbMV0ubmFtZSA+IGIubm9kZXNbMV0ubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGxldCByZXQgPSBcIlwiO1xyXG4gICAgICAgIHNvcnRlZC5mb3JFYWNoKGxpbmsgPT4ge1xyXG4gICAgICAgICAgICByZXQgKz0gYCR7bGluay5ub2Rlc1swXS5uYW1lfSAtICR7bGluay5ub2Rlc1sxXS5uYW1lfTtcXG5cXHRgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHJldDtcclxuICAgIH1cclxuXHJcbn1cclxuIiwiaW1wb3J0IHtTaW11bGF0aW9uQ29ubmVjdGlvbn0gZnJvbSBcIi4vU2ltdWxhdGlvbkNvbm5lY3Rpb25cIjtcclxuaW1wb3J0IHtTaW11bGF0aW9uUGFja2FnZX0gZnJvbSBcIi4vU2ltdWxhdGlvblBhY2thZ2VcIjtcclxuaW1wb3J0IHtNaW5pbWFsU3BhblRyZWV9IGZyb20gXCIuLi9TcGFubmluZ1RyZWUvbWluaW1hbFNwYW5uaW5nVHJlZVwiO1xyXG5pbXBvcnQge3RyeVJlc29sdmVQYWNrYWdlfSBmcm9tIFwidHNsaW50L2xpYi91dGlsc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEJyaWRnZSB7XHJcbiAgICBwdWJsaWMgcm9vdE9mSW5kZXhpbmcgPSBmYWxzZTtcclxuICAgIHB1YmxpYyByZXR1cm5Ubzogc3RyaW5nW10gPSBbXTtcclxuICAgIC8vIEJyaWRnZSBkYXRhXHJcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nO1xyXG4gICAgcHVibGljIHZhbHVlOiBudW1iZXI7XHJcblxyXG4gICAgLy8gRGF0YSBkaXNjb3ZlcmVkXHJcbiAgICBwdWJsaWMga25vd25fUk9PVF9JRD86IHN0cmluZztcclxuICAgIHB1YmxpYyBrbm93bl9ORVhUX0hPUF9UT19ST09UPzogc3RyaW5nO1xyXG4gICAgcHVibGljIGtub3duX0NPU1RfVE9fUk9PVD86IG51bWJlcjtcclxuXHJcbiAgICAvLyBkYXRhIGZvciBDZW50cmFsU3Bhbm5pbmdUcmVlUHJvdG9jb2xcclxuICAgIHB1YmxpYyBJTkRFWEVEOiBib29sZWFuO1xyXG4gICAgcHVibGljIERJU0NPVkVSRURfTElOS1M6IHtcclxuICAgICAgICBub2RlczogeyBuYW1lOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIgfVtdOyAvLyBteSBuYW1lIGFuZCBhIGNvbm5lY3RlZCBicmlkZ2VzIG5hbWVcclxuICAgICAgICBjb3N0OiBudW1iZXI7IC8vIGNvc3QgdG8gcmVhY2ggdGhlIGJyaWRnZVxyXG4gICAgfVtdID0gW107XHJcblxyXG4gICAgcHJpdmF0ZSBXQUlUSU5HX0ZPUl9CUklER0VTOiBzdHJpbmdbXTtcclxuXHJcbiAgICAvLyBzaW11bGF0aW9uIENvbm5lY3Rpb25cclxuICAgIHB1YmxpYyBjb25uZWN0aW9uOiBTaW11bGF0aW9uQ29ubmVjdGlvbjtcclxuICAgIHByaXZhdGUgZHVtcENoYW5nZXM6ICgpID0+IHZvaWQ7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIsIGNvbm5lY3Rpb246IFNpbXVsYXRpb25Db25uZWN0aW9uLCBkdW1wQ2hhbmdlczogKGIpID0+IHZvaWQpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24gPSBjb25uZWN0aW9uO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbi5yZWNlaXZlLnN1YnNjcmliZSgocGtnKSA9PiB0aGlzLnJlY2VpdmUocGtnKSk7XHJcbiAgICAgICAgdGhpcy5kdW1wQ2hhbmdlcyA9ICgpID0+IGR1bXBDaGFuZ2VzKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBpbmRleE5ldHdvcmsoKSB7XHJcbiAgICAgICAgdGhpcy5yb290T2ZJbmRleGluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5kdW1wQ2hhbmdlcygpO1xyXG4gICAgICAgIGxldCBzaWJsaW5ncyA9IChhd2FpdCB0aGlzLmNvbm5lY3Rpb24ucGluZyk7XHJcbiAgICAgICAgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTID0gc2libGluZ3M7XHJcbiAgICAgICAgc2libGluZ3MuZm9yRWFjaCh0YXJnZXQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgcHJvdG9jb2w6ICdDU1RQJyxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRGVhciBOZWlnaGJvciBoZWFyIGlzIG15IG5hbWUgYW5kIHRoZSBwYWNrYWdlIHByb3ZpZGVzIHlvdSB0aGUgY29zdCB0byBtZS4gRm9sbG93IHRoZSBDU1RQLicsXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbToge25hbWU6IHRoaXMubmFtZSwgdmFsdWU6IHRoaXMudmFsdWV9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgc2VuZChwa2c6IFNpbXVsYXRpb25QYWNrYWdlKSB7XHJcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLnNlbmQubmV4dChwa2cpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBoYW5kbGVDU1RQUGFja2FnZShwa2c6IFNpbXVsYXRpb25QYWNrYWdlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuSU5ERVhFRCB8fCB0aGlzLnJvb3RPZkluZGV4aW5nICYmICBwa2cuY29udGVudC5mcm9tKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5uYW1lLCAncmVjZWl2ZWQgcGtnJyk7XHJcbiAgICAgICAgaWYgKHRoaXMuRElTQ09WRVJFRF9MSU5LUy5sZW5ndGggPT09IDAgJiYgIXRoaXMucm9vdE9mSW5kZXhpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLnBpbmcudGhlbihicmlkZ2VzID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuV0FJVElOR19GT1JfQlJJREdFUyA9IGJyaWRnZXMuZmlsdGVyKG5hbWUgPT4gbmFtZSAhPT0gcGtnLmNvbnRlbnQuZnJvbS5uYW1lKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZHVtcENoYW5nZXMoKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubmFtZSwgXCIgd2FpdGluZyBmb3I6XCIsIHRoaXMuV0FJVElOR19GT1JfQlJJREdFUyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMuZm9yRWFjaCh0YXJnZXQgPT4gdGhpcy5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICBwcm90b2NvbDogJ0NTVFAnLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0RlYXIgTmVpZ2hib3IgaGVhciBpcyBteSBuYW1lIGFuZCB0aGUgcGFja2FnZSBwcm92aWRlcyB5b3UgdGhlIGNvc3QgdG8gbWUuIEZvbGxvdyB0aGUgQ1NUUC4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tOiB7bmFtZTogdGhpcy5uYW1lLCB2YWx1ZTogdGhpcy52YWx1ZX1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuV0FJVElOR19GT1JfQlJJREdFUy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXR1cm5UbyA9IHRoaXMuRElTQ09WRVJFRF9MSU5LU1swXS5ub2Rlcy5maW5kKG4gPT4gbi5uYW1lICE9PSB0aGlzLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHVtcENoYW5nZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZW5kKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdG9jb2w6ICdDU1RQJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0RlYXIgTmVpZ2hib3IgaGVhciBhcmUgbXkgZGlzY292ZXJlZCBsaW5rcywgeW91IG1heSBjb25jYXQgdGhlbSB3aXRoIHlvdXJzIGFuZCBzZW5kIHRoZW0gYmFjayEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzY292ZXJlZExpbmtzOiB0aGlzLkRJU0NPVkVSRURfTElOS1NcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiByZXR1cm5Uby5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5JTkRFWEVEID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucm9vdE9mSW5kZXhpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLmZpbmlzaGVkSW5kZXhpbmcubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1zdCA9IG5ldyBNaW5pbWFsU3BhblRyZWUodGhpcy5ESVNDT1ZFUkVEX0xJTktTKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLmZpbmlzaGVkSW5kZXhpbmcubmV4dChtc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmR1bXBDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLkRJU0NPVkVSRURfTElOS1MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBjb3N0OiBwa2cuY29zdCxcclxuICAgICAgICAgICAgICAgIG5vZGVzOiBbe25hbWU6IHRoaXMubmFtZSwgdmFsdWU6IHRoaXMudmFsdWV9LCBwa2cuY29udGVudC5mcm9tXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5yZXR1cm5Uby5wdXNoKHBrZy5jb250ZW50LmZyb20ubmFtZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZHVtcENoYW5nZXMoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmV0dXJuaW5nIGZyb20gXCIsIHRoaXMubmFtZSwgXCJ0byBcIiwgdGhpcy5yZXR1cm5Ubyk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTICYmICEhcGtnLmNvbnRlbnQuZGlzY292ZXJlZExpbmtzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBwa2cuY29udGVudC5kaXNjb3ZlcmVkTGlua3NbMF0ubm9kZXMuZmluZChuID0+IG4ubmFtZSAhPT0gdGhpcy5uYW1lKTtcclxuICAgICAgICAgICAgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTLnNwbGljZSh0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMuZmluZEluZGV4KG4gPT4gbiA9PT0gbmFtZSksIDEpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm5hbWUsIFwiIHdhaXRpbmcgZm9yOlwiLCB0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMpO1xyXG4gICAgICAgICAgICB0aGlzLkRJU0NPVkVSRURfTElOS1MucHVzaCguLi5wa2cuY29udGVudC5kaXNjb3ZlcmVkTGlua3MpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTICYmIHBrZy5jb250ZW50LmZyb20pIHtcclxuICAgICAgICAgICAgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTLnNwbGljZSh0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMuZmluZEluZGV4KG4gPT4gbiA9PT0gcGtnLmNvbnRlbnQuZnJvbS5uYW1lKSwgMSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubmFtZSwgXCIgd2FpdGluZyBmb3I6XCIsIHRoaXMuV0FJVElOR19GT1JfQlJJREdFUyk7XHJcbiAgICAgICAgICAgIHRoaXMucmV0dXJuVG8ucHVzaChwa2cuY29udGVudC5mcm9tLm5hbWUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInJldHVybmluZyBmcm9tIFwiLCB0aGlzLm5hbWUsIFwidG8gXCIsIHRoaXMucmV0dXJuVG8pO1xyXG4gICAgICAgICAgICB0aGlzLkRJU0NPVkVSRURfTElOS1MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBjb3N0OiBwa2cuY29zdCxcclxuICAgICAgICAgICAgICAgIG5vZGVzOiBbe25hbWU6IHRoaXMubmFtZSwgdmFsdWU6IHRoaXMudmFsdWV9LCBwa2cuY29udGVudC5mcm9tXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kdW1wQ2hhbmdlcygpO1xyXG5cclxuICAgICAgICBpZiAoISF0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMgJiYgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm5hbWUsICdzZW5kaW5nJywgdGhpcy5ESVNDT1ZFUkVEX0xJTktTKTtcclxuICAgICAgICAgICAgdGhpcy5yZXR1cm5Uby5mb3JFYWNoKHRhcmdldCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3RvY29sOiAnQ1NUUCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRGVhciBOZWlnaGJvciBoZWFyIGFyZSBteSBkaXNjb3ZlcmVkIGxpbmtzLCB5b3UgbWF5IGNvbmNhdCB0aGVtIHdpdGggeW91cnMgYW5kIHNlbmQgdGhlbSBiYWNrIScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2NvdmVyZWRMaW5rczogdGhpcy5ESVNDT1ZFUkVEX0xJTktTXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5JTkRFWEVEID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ05vZGUgaGFzIGZpbmlzaGVkICcsIHRoaXMubmFtZSk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5yb290T2ZJbmRleGluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLmZpbmlzaGVkSW5kZXhpbmcubmV4dCgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGlua3MgPSBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRElTQ09WRVJFRF9MSU5LUy5mb3JFYWNoKGwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbGlua3MuZmluZChsaW5rID0+IGwubm9kZXMuZmluZEluZGV4KG4gPT4gbi5uYW1lID09PSBsaW5rLm5vZGVzWzBdLm5hbWUpICE9PSAtMSAmJiBsLm5vZGVzLmZpbmRJbmRleChuID0+IG4ubmFtZSA9PT0gbGluay5ub2Rlc1sxXS5uYW1lKSAhPT0gLTEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtzLnB1c2gobCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZGwnLCB0aGlzLkRJU0NPVkVSRURfTElOS1MubWFwKGwgPT4gbC5ub2RlcykpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2wnLCBsaW5rcyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtc3QgPSBuZXcgTWluaW1hbFNwYW5UcmVlKGxpbmtzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdGlvbi5maW5pc2hlZEluZGV4aW5nLm5leHQobXN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmR1bXBDaGFuZ2VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZWNlaXZlKHBrZzogU2ltdWxhdGlvblBhY2thZ2UpIHtcclxuICAgICAgICBpZiAocGtnLnByb3RvY29sID09PSAnQ1NUUCcpIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVDU1RQUGFja2FnZShwa2cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApXHJcbiAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKHgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc0Z1bmN0aW9uLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xudmFyIF9lbmFibGVfc3VwZXJfZ3Jvc3NfbW9kZV90aGF0X3dpbGxfY2F1c2VfYmFkX3RoaW5ncyA9IGZhbHNlO1xuZXhwb3J0IHZhciBjb25maWcgPSB7XG4gICAgUHJvbWlzZTogdW5kZWZpbmVkLFxuICAgIHNldCB1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIGVycm9yID0gLypAX19QVVJFX18qLyBuZXcgRXJyb3IoKTtcbiAgICAgICAgICAgIC8qQF9fUFVSRV9fKi8gY29uc29sZS53YXJuKCdERVBSRUNBVEVEISBSeEpTIHdhcyBzZXQgdG8gdXNlIGRlcHJlY2F0ZWQgc3luY2hyb25vdXMgZXJyb3IgaGFuZGxpbmcgYmVoYXZpb3IgYnkgY29kZSBhdDogXFxuJyArIGVycm9yLnN0YWNrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChfZW5hYmxlX3N1cGVyX2dyb3NzX21vZGVfdGhhdF93aWxsX2NhdXNlX2JhZF90aGluZ3MpIHtcbiAgICAgICAgICAgIC8qQF9fUFVSRV9fKi8gY29uc29sZS5sb2coJ1J4SlM6IEJhY2sgdG8gYSBiZXR0ZXIgZXJyb3IgYmVoYXZpb3IuIFRoYW5rIHlvdS4gPDMnKTtcbiAgICAgICAgfVxuICAgICAgICBfZW5hYmxlX3N1cGVyX2dyb3NzX21vZGVfdGhhdF93aWxsX2NhdXNlX2JhZF90aGluZ3MgPSB2YWx1ZTtcbiAgICB9LFxuICAgIGdldCB1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKCkge1xuICAgICAgICByZXR1cm4gX2VuYWJsZV9zdXBlcl9ncm9zc19tb2RlX3RoYXRfd2lsbF9jYXVzZV9iYWRfdGhpbmdzO1xuICAgIH0sXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Y29uZmlnLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhvc3RSZXBvcnRFcnJvcihlcnIpIHtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgdGhyb3cgZXJyOyB9KTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWhvc3RSZXBvcnRFcnJvci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX2NvbmZpZyxfdXRpbF9ob3N0UmVwb3J0RXJyb3IgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHsgaG9zdFJlcG9ydEVycm9yIH0gZnJvbSAnLi91dGlsL2hvc3RSZXBvcnRFcnJvcic7XG5leHBvcnQgdmFyIGVtcHR5ID0ge1xuICAgIGNsb3NlZDogdHJ1ZSxcbiAgICBuZXh0OiBmdW5jdGlvbiAodmFsdWUpIHsgfSxcbiAgICBlcnJvcjogZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGhvc3RSZXBvcnRFcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkgeyB9XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JzZXJ2ZXIuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgdmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IChmdW5jdGlvbiAoeCkgeyByZXR1cm4geCAmJiB0eXBlb2YgeC5sZW5ndGggPT09ICdudW1iZXInOyB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzQXJyYXkuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5mdW5jdGlvbiBVbnN1YnNjcmlwdGlvbkVycm9ySW1wbChlcnJvcnMpIHtcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICAgIHRoaXMubWVzc2FnZSA9IGVycm9ycyA/XG4gICAgICAgIGVycm9ycy5sZW5ndGggKyBcIiBlcnJvcnMgb2NjdXJyZWQgZHVyaW5nIHVuc3Vic2NyaXB0aW9uOlxcblwiICsgZXJyb3JzLm1hcChmdW5jdGlvbiAoZXJyLCBpKSB7IHJldHVybiBpICsgMSArIFwiKSBcIiArIGVyci50b1N0cmluZygpOyB9KS5qb2luKCdcXG4gICcpIDogJyc7XG4gICAgdGhpcy5uYW1lID0gJ1Vuc3Vic2NyaXB0aW9uRXJyb3InO1xuICAgIHRoaXMuZXJyb3JzID0gZXJyb3JzO1xuICAgIHJldHVybiB0aGlzO1xufVxuVW5zdWJzY3JpcHRpb25FcnJvckltcGwucHJvdG90eXBlID0gLypAX19QVVJFX18qLyBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG5leHBvcnQgdmFyIFVuc3Vic2NyaXB0aW9uRXJyb3IgPSBVbnN1YnNjcmlwdGlvbkVycm9ySW1wbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVVuc3Vic2NyaXB0aW9uRXJyb3IuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF91dGlsX2lzQXJyYXksX3V0aWxfaXNPYmplY3QsX3V0aWxfaXNGdW5jdGlvbixfdXRpbF9VbnN1YnNjcmlwdGlvbkVycm9yIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IGlzQXJyYXkgfSBmcm9tICcuL3V0aWwvaXNBcnJheSc7XG5pbXBvcnQgeyBpc09iamVjdCB9IGZyb20gJy4vdXRpbC9pc09iamVjdCc7XG5pbXBvcnQgeyBpc0Z1bmN0aW9uIH0gZnJvbSAnLi91dGlsL2lzRnVuY3Rpb24nO1xuaW1wb3J0IHsgVW5zdWJzY3JpcHRpb25FcnJvciB9IGZyb20gJy4vdXRpbC9VbnN1YnNjcmlwdGlvbkVycm9yJztcbnZhciBTdWJzY3JpcHRpb24gPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uKHVuc3Vic2NyaWJlKSB7XG4gICAgICAgIHRoaXMuY2xvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3BhcmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3BhcmVudHMgPSBudWxsO1xuICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25zID0gbnVsbDtcbiAgICAgICAgaWYgKHVuc3Vic2NyaWJlKSB7XG4gICAgICAgICAgICB0aGlzLl91bnN1YnNjcmliZSA9IHVuc3Vic2NyaWJlO1xuICAgICAgICB9XG4gICAgfVxuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBoYXNFcnJvcnMgPSBmYWxzZTtcbiAgICAgICAgdmFyIGVycm9ycztcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIF9hID0gdGhpcywgX3BhcmVudCA9IF9hLl9wYXJlbnQsIF9wYXJlbnRzID0gX2EuX3BhcmVudHMsIF91bnN1YnNjcmliZSA9IF9hLl91bnN1YnNjcmliZSwgX3N1YnNjcmlwdGlvbnMgPSBfYS5fc3Vic2NyaXB0aW9ucztcbiAgICAgICAgdGhpcy5jbG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLl9wYXJlbnRzID0gbnVsbDtcbiAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IG51bGw7XG4gICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICB2YXIgbGVuID0gX3BhcmVudHMgPyBfcGFyZW50cy5sZW5ndGggOiAwO1xuICAgICAgICB3aGlsZSAoX3BhcmVudCkge1xuICAgICAgICAgICAgX3BhcmVudC5yZW1vdmUodGhpcyk7XG4gICAgICAgICAgICBfcGFyZW50ID0gKytpbmRleCA8IGxlbiAmJiBfcGFyZW50c1tpbmRleF0gfHwgbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNGdW5jdGlvbihfdW5zdWJzY3JpYmUpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIF91bnN1YnNjcmliZS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBoYXNFcnJvcnMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGVycm9ycyA9IGUgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yID8gZmxhdHRlblVuc3Vic2NyaXB0aW9uRXJyb3JzKGUuZXJyb3JzKSA6IFtlXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnJheShfc3Vic2NyaXB0aW9ucykpIHtcbiAgICAgICAgICAgIGluZGV4ID0gLTE7XG4gICAgICAgICAgICBsZW4gPSBfc3Vic2NyaXB0aW9ucy5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbikge1xuICAgICAgICAgICAgICAgIHZhciBzdWIgPSBfc3Vic2NyaXB0aW9uc1tpbmRleF07XG4gICAgICAgICAgICAgICAgaWYgKGlzT2JqZWN0KHN1YikpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Yi51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNFcnJvcnMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzIHx8IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzID0gZXJyb3JzLmNvbmNhdChmbGF0dGVuVW5zdWJzY3JpcHRpb25FcnJvcnMoZS5lcnJvcnMpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNFcnJvcnMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBVbnN1YnNjcmlwdGlvbkVycm9yKGVycm9ycyk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKHRlYXJkb3duKSB7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0ZWFyZG93bjtcbiAgICAgICAgc3dpdGNoICh0eXBlb2YgdGVhcmRvd24pIHtcbiAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKHRlYXJkb3duKTtcbiAgICAgICAgICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbiA9PT0gdGhpcyB8fCBzdWJzY3JpcHRpb24uY2xvc2VkIHx8IHR5cGVvZiBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCEoc3Vic2NyaXB0aW9uIGluc3RhbmNlb2YgU3Vic2NyaXB0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG1wID0gc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5fc3Vic2NyaXB0aW9ucyA9IFt0bXBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRlYXJkb3duKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb24uRU1QVFk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5yZWNvZ25pemVkIHRlYXJkb3duICcgKyB0ZWFyZG93biArICcgYWRkZWQgdG8gU3Vic2NyaXB0aW9uLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdWJzY3JpcHRpb24uX2FkZFBhcmVudCh0aGlzKSkge1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSB0aGlzLl9zdWJzY3JpcHRpb25zO1xuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25zLnB1c2goc3Vic2NyaXB0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMgPSBbc3Vic2NyaXB0aW9uXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb25zID0gdGhpcy5fc3Vic2NyaXB0aW9ucztcbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBzdWJzY3JpcHRpb25JbmRleCA9IHN1YnNjcmlwdGlvbnMuaW5kZXhPZihzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbkluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMuc3BsaWNlKHN1YnNjcmlwdGlvbkluZGV4LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5fYWRkUGFyZW50ID0gZnVuY3Rpb24gKHBhcmVudCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLCBfcGFyZW50ID0gX2EuX3BhcmVudCwgX3BhcmVudHMgPSBfYS5fcGFyZW50cztcbiAgICAgICAgaWYgKF9wYXJlbnQgPT09IHBhcmVudCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFfcGFyZW50KSB7XG4gICAgICAgICAgICB0aGlzLl9wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghX3BhcmVudHMpIHtcbiAgICAgICAgICAgIHRoaXMuX3BhcmVudHMgPSBbcGFyZW50XTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKF9wYXJlbnRzLmluZGV4T2YocGFyZW50KSA9PT0gLTEpIHtcbiAgICAgICAgICAgIF9wYXJlbnRzLnB1c2gocGFyZW50KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIFN1YnNjcmlwdGlvbi5FTVBUWSA9IChmdW5jdGlvbiAoZW1wdHkpIHtcbiAgICAgICAgZW1wdHkuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGVtcHR5O1xuICAgIH0obmV3IFN1YnNjcmlwdGlvbigpKSk7XG4gICAgcmV0dXJuIFN1YnNjcmlwdGlvbjtcbn0oKSk7XG5leHBvcnQgeyBTdWJzY3JpcHRpb24gfTtcbmZ1bmN0aW9uIGZsYXR0ZW5VbnN1YnNjcmlwdGlvbkVycm9ycyhlcnJvcnMpIHtcbiAgICByZXR1cm4gZXJyb3JzLnJlZHVjZShmdW5jdGlvbiAoZXJycywgZXJyKSB7IHJldHVybiBlcnJzLmNvbmNhdCgoZXJyIGluc3RhbmNlb2YgVW5zdWJzY3JpcHRpb25FcnJvcikgPyBlcnIuZXJyb3JzIDogZXJyKTsgfSwgW10pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3Vic2NyaXB0aW9uLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KHgpIHtcbiAgICByZXR1cm4geCAhPT0gbnVsbCAmJiB0eXBlb2YgeCA9PT0gJ29iamVjdCc7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pc09iamVjdC5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCB2YXIgcnhTdWJzY3JpYmVyID0gdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJ1xuICAgID8gLypAX19QVVJFX18qLyBTeW1ib2woJ3J4U3Vic2NyaWJlcicpXG4gICAgOiAnQEByeFN1YnNjcmliZXJfJyArIC8qQF9fUFVSRV9fKi8gTWF0aC5yYW5kb20oKTtcbmV4cG9ydCB2YXIgJCRyeFN1YnNjcmliZXIgPSByeFN1YnNjcmliZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1yeFN1YnNjcmliZXIuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF91dGlsX2lzRnVuY3Rpb24sX09ic2VydmVyLF9TdWJzY3JpcHRpb24sX2ludGVybmFsX3N5bWJvbF9yeFN1YnNjcmliZXIsX2NvbmZpZyxfdXRpbF9ob3N0UmVwb3J0RXJyb3IgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IGlzRnVuY3Rpb24gfSBmcm9tICcuL3V0aWwvaXNGdW5jdGlvbic7XG5pbXBvcnQgeyBlbXB0eSBhcyBlbXB0eU9ic2VydmVyIH0gZnJvbSAnLi9PYnNlcnZlcic7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICcuL1N1YnNjcmlwdGlvbic7XG5pbXBvcnQgeyByeFN1YnNjcmliZXIgYXMgcnhTdWJzY3JpYmVyU3ltYm9sIH0gZnJvbSAnLi4vaW50ZXJuYWwvc3ltYm9sL3J4U3Vic2NyaWJlcic7XG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgeyBob3N0UmVwb3J0RXJyb3IgfSBmcm9tICcuL3V0aWwvaG9zdFJlcG9ydEVycm9yJztcbnZhciBTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3Vic2NyaWJlcihkZXN0aW5hdGlvbk9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnN5bmNFcnJvclZhbHVlID0gbnVsbDtcbiAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3duID0gZmFsc2U7XG4gICAgICAgIF90aGlzLnN5bmNFcnJvclRocm93YWJsZSA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgc3dpdGNoIChhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBlbXB0eU9ic2VydmVyO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIGlmICghZGVzdGluYXRpb25Pck5leHQpIHtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBlbXB0eU9ic2VydmVyO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkZXN0aW5hdGlvbk9yTmV4dCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlc3RpbmF0aW9uT3JOZXh0IGluc3RhbmNlb2YgU3Vic2NyaWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gZGVzdGluYXRpb25Pck5leHQuc3luY0Vycm9yVGhyb3dhYmxlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBkZXN0aW5hdGlvbk9yTmV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uT3JOZXh0LmFkZChfdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zeW5jRXJyb3JUaHJvd2FibGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBuZXcgU2FmZVN1YnNjcmliZXIoX3RoaXMsIGRlc3RpbmF0aW9uT3JOZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIF90aGlzLnN5bmNFcnJvclRocm93YWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgX3RoaXMuZGVzdGluYXRpb24gPSBuZXcgU2FmZVN1YnNjcmliZXIoX3RoaXMsIGRlc3RpbmF0aW9uT3JOZXh0LCBlcnJvciwgY29tcGxldGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGVbcnhTdWJzY3JpYmVyU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH07XG4gICAgU3Vic2NyaWJlci5jcmVhdGUgPSBmdW5jdGlvbiAobmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIHZhciBzdWJzY3JpYmVyID0gbmV3IFN1YnNjcmliZXIobmV4dCwgZXJyb3IsIGNvbXBsZXRlKTtcbiAgICAgICAgc3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHN1YnNjcmliZXI7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX25leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuX2NvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUudW5zdWJzY3JpYmUuY2FsbCh0aGlzKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl9uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX2NvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl91bnN1YnNjcmliZUFuZFJlY3ljbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIF9wYXJlbnQgPSBfYS5fcGFyZW50LCBfcGFyZW50cyA9IF9hLl9wYXJlbnRzO1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLl9wYXJlbnRzID0gbnVsbDtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9wYXJlbnQgPSBfcGFyZW50O1xuICAgICAgICB0aGlzLl9wYXJlbnRzID0gX3BhcmVudHM7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gICAgcmV0dXJuIFN1YnNjcmliZXI7XG59KFN1YnNjcmlwdGlvbikpO1xuZXhwb3J0IHsgU3Vic2NyaWJlciB9O1xudmFyIFNhZmVTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFNhZmVTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFNhZmVTdWJzY3JpYmVyKF9wYXJlbnRTdWJzY3JpYmVyLCBvYnNlcnZlck9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLl9wYXJlbnRTdWJzY3JpYmVyID0gX3BhcmVudFN1YnNjcmliZXI7XG4gICAgICAgIHZhciBuZXh0O1xuICAgICAgICB2YXIgY29udGV4dCA9IF90aGlzO1xuICAgICAgICBpZiAoaXNGdW5jdGlvbihvYnNlcnZlck9yTmV4dCkpIHtcbiAgICAgICAgICAgIG5leHQgPSBvYnNlcnZlck9yTmV4dDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvYnNlcnZlck9yTmV4dCkge1xuICAgICAgICAgICAgbmV4dCA9IG9ic2VydmVyT3JOZXh0Lm5leHQ7XG4gICAgICAgICAgICBlcnJvciA9IG9ic2VydmVyT3JOZXh0LmVycm9yO1xuICAgICAgICAgICAgY29tcGxldGUgPSBvYnNlcnZlck9yTmV4dC5jb21wbGV0ZTtcbiAgICAgICAgICAgIGlmIChvYnNlcnZlck9yTmV4dCAhPT0gZW1wdHlPYnNlcnZlcikge1xuICAgICAgICAgICAgICAgIGNvbnRleHQgPSBPYmplY3QuY3JlYXRlKG9ic2VydmVyT3JOZXh0KTtcbiAgICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihjb250ZXh0LnVuc3Vic2NyaWJlKSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5hZGQoY29udGV4dC51bnN1YnNjcmliZS5iaW5kKGNvbnRleHQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGV4dC51bnN1YnNjcmliZSA9IF90aGlzLnVuc3Vic2NyaWJlLmJpbmQoX3RoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIF90aGlzLl9jb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgX3RoaXMuX25leHQgPSBuZXh0O1xuICAgICAgICBfdGhpcy5fZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgX3RoaXMuX2NvbXBsZXRlID0gY29tcGxldGU7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCAmJiB0aGlzLl9uZXh0KSB7XG4gICAgICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICAgICAgaWYgKCFjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyB8fCAhX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yVW5zdWIodGhpcy5fbmV4dCwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5fX3RyeU9yU2V0RXJyb3IoX3BhcmVudFN1YnNjcmliZXIsIHRoaXMuX25leHQsIHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICAgICAgdmFyIHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgPSBjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZztcbiAgICAgICAgICAgIGlmICh0aGlzLl9lcnJvcikge1xuICAgICAgICAgICAgICAgIGlmICghdXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyB8fCAhX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclVuc3ViKHRoaXMuX2Vycm9yLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JTZXRFcnJvcihfcGFyZW50U3Vic2NyaWJlciwgdGhpcy5fZXJyb3IsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIGlmICh1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaG9zdFJlcG9ydEVycm9yKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAodXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgICAgICAgICBfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JWYWx1ZSA9IGVycjtcbiAgICAgICAgICAgICAgICAgICAgX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGhvc3RSZXBvcnRFcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdmFyIF9wYXJlbnRTdWJzY3JpYmVyID0gdGhpcy5fcGFyZW50U3Vic2NyaWJlcjtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb21wbGV0ZSkge1xuICAgICAgICAgICAgICAgIHZhciB3cmFwcGVkQ29tcGxldGUgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5fY29tcGxldGUuY2FsbChfdGhpcy5fY29udGV4dCk7IH07XG4gICAgICAgICAgICAgICAgaWYgKCFjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyB8fCAhX3BhcmVudFN1YnNjcmliZXIuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclVuc3ViKHdyYXBwZWRDb21wbGV0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclNldEVycm9yKF9wYXJlbnRTdWJzY3JpYmVyLCB3cmFwcGVkQ29tcGxldGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuX190cnlPclVuc3ViID0gZnVuY3Rpb24gKGZuLCB2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm4uY2FsbCh0aGlzLl9jb250ZXh0LCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgaWYgKGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaG9zdFJlcG9ydEVycm9yKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5fX3RyeU9yU2V0RXJyb3IgPSBmdW5jdGlvbiAocGFyZW50LCBmbiwgdmFsdWUpIHtcbiAgICAgICAgaWYgKCFjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdiYWQgY2FsbCcpO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMuX2NvbnRleHQsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQuc3luY0Vycm9yVmFsdWUgPSBlcnI7XG4gICAgICAgICAgICAgICAgcGFyZW50LnN5bmNFcnJvclRocm93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBob3N0UmVwb3J0RXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICB0aGlzLl9jb250ZXh0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcGFyZW50U3Vic2NyaWJlciA9IG51bGw7XG4gICAgICAgIF9wYXJlbnRTdWJzY3JpYmVyLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICByZXR1cm4gU2FmZVN1YnNjcmliZXI7XG59KFN1YnNjcmliZXIpKTtcbmV4cG9ydCB7IFNhZmVTdWJzY3JpYmVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdWJzY3JpYmVyLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IHZhciBvYnNlcnZhYmxlID0gdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBTeW1ib2wub2JzZXJ2YWJsZSB8fCAnQEBvYnNlcnZhYmxlJztcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW9ic2VydmFibGUuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgZnVuY3Rpb24gbm9vcCgpIHsgfVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bm9vcC5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX25vb3AgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgbm9vcCB9IGZyb20gJy4vbm9vcCc7XG5leHBvcnQgZnVuY3Rpb24gcGlwZSgpIHtcbiAgICB2YXIgZm5zID0gW107XG4gICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgZm5zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgfVxuICAgIHJldHVybiBwaXBlRnJvbUFycmF5KGZucyk7XG59XG5leHBvcnQgZnVuY3Rpb24gcGlwZUZyb21BcnJheShmbnMpIHtcbiAgICBpZiAoIWZucykge1xuICAgICAgICByZXR1cm4gbm9vcDtcbiAgICB9XG4gICAgaWYgKGZucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIGZuc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHBpcGVkKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBmbnMucmVkdWNlKGZ1bmN0aW9uIChwcmV2LCBmbikgeyByZXR1cm4gZm4ocHJldik7IH0sIGlucHV0KTtcbiAgICB9O1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGlwZS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX3V0aWxfY2FuUmVwb3J0RXJyb3IsX3V0aWxfdG9TdWJzY3JpYmVyLF9pbnRlcm5hbF9zeW1ib2xfb2JzZXJ2YWJsZSxfdXRpbF9waXBlLF9jb25maWcgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgY2FuUmVwb3J0RXJyb3IgfSBmcm9tICcuL3V0aWwvY2FuUmVwb3J0RXJyb3InO1xuaW1wb3J0IHsgdG9TdWJzY3JpYmVyIH0gZnJvbSAnLi91dGlsL3RvU3Vic2NyaWJlcic7XG5pbXBvcnQgeyBvYnNlcnZhYmxlIGFzIFN5bWJvbF9vYnNlcnZhYmxlIH0gZnJvbSAnLi4vaW50ZXJuYWwvc3ltYm9sL29ic2VydmFibGUnO1xuaW1wb3J0IHsgcGlwZUZyb21BcnJheSB9IGZyb20gJy4vdXRpbC9waXBlJztcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJy4vY29uZmlnJztcbnZhciBPYnNlcnZhYmxlID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIE9ic2VydmFibGUoc3Vic2NyaWJlKSB7XG4gICAgICAgIHRoaXMuX2lzU2NhbGFyID0gZmFsc2U7XG4gICAgICAgIGlmIChzdWJzY3JpYmUpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1YnNjcmliZSA9IHN1YnNjcmliZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5saWZ0ID0gZnVuY3Rpb24gKG9wZXJhdG9yKSB7XG4gICAgICAgIHZhciBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoKTtcbiAgICAgICAgb2JzZXJ2YWJsZS5zb3VyY2UgPSB0aGlzO1xuICAgICAgICBvYnNlcnZhYmxlLm9wZXJhdG9yID0gb3BlcmF0b3I7XG4gICAgICAgIHJldHVybiBvYnNlcnZhYmxlO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIG9wZXJhdG9yID0gdGhpcy5vcGVyYXRvcjtcbiAgICAgICAgdmFyIHNpbmsgPSB0b1N1YnNjcmliZXIob2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgICAgIGlmIChvcGVyYXRvcikge1xuICAgICAgICAgICAgc2luay5hZGQob3BlcmF0b3IuY2FsbChzaW5rLCB0aGlzLnNvdXJjZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2luay5hZGQodGhpcy5zb3VyY2UgfHwgKGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nICYmICFzaW5rLnN5bmNFcnJvclRocm93YWJsZSkgP1xuICAgICAgICAgICAgICAgIHRoaXMuX3N1YnNjcmliZShzaW5rKSA6XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJ5U3Vic2NyaWJlKHNpbmspKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgIGlmIChzaW5rLnN5bmNFcnJvclRocm93YWJsZSkge1xuICAgICAgICAgICAgICAgIHNpbmsuc3luY0Vycm9yVGhyb3dhYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKHNpbmsuc3luY0Vycm9yVGhyb3duKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IHNpbmsuc3luY0Vycm9yVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaW5rO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3RyeVN1YnNjcmliZSA9IGZ1bmN0aW9uIChzaW5rKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaWJlKHNpbmspO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgICAgIHNpbmsuc3luY0Vycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzaW5rLnN5bmNFcnJvclZhbHVlID0gZXJyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNhblJlcG9ydEVycm9yKHNpbmspKSB7XG4gICAgICAgICAgICAgICAgc2luay5lcnJvcihlcnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAobmV4dCwgcHJvbWlzZUN0b3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcHJvbWlzZUN0b3IgPSBnZXRQcm9taXNlQ3Rvcihwcm9taXNlQ3Rvcik7XG4gICAgICAgIHJldHVybiBuZXcgcHJvbWlzZUN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBuZXh0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCByZWplY3QsIHJlc29sdmUpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5zb3VyY2U7XG4gICAgICAgIHJldHVybiBzb3VyY2UgJiYgc291cmNlLnN1YnNjcmliZShzdWJzY3JpYmVyKTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlW1N5bWJvbF9vYnNlcnZhYmxlXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5waXBlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb3BlcmF0aW9ucyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICAgICAgb3BlcmF0aW9uc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcGVyYXRpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBpcGVGcm9tQXJyYXkob3BlcmF0aW9ucykodGhpcyk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS50b1Byb21pc2UgPSBmdW5jdGlvbiAocHJvbWlzZUN0b3IpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgcHJvbWlzZUN0b3IgPSBnZXRQcm9taXNlQ3Rvcihwcm9taXNlQ3Rvcik7XG4gICAgICAgIHJldHVybiBuZXcgcHJvbWlzZUN0b3IoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIHZhbHVlO1xuICAgICAgICAgICAgX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh4KSB7IHJldHVybiB2YWx1ZSA9IHg7IH0sIGZ1bmN0aW9uIChlcnIpIHsgcmV0dXJuIHJlamVjdChlcnIpOyB9LCBmdW5jdGlvbiAoKSB7IHJldHVybiByZXNvbHZlKHZhbHVlKTsgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlKSB7XG4gICAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZShzdWJzY3JpYmUpO1xuICAgIH07XG4gICAgcmV0dXJuIE9ic2VydmFibGU7XG59KCkpO1xuZXhwb3J0IHsgT2JzZXJ2YWJsZSB9O1xuZnVuY3Rpb24gZ2V0UHJvbWlzZUN0b3IocHJvbWlzZUN0b3IpIHtcbiAgICBpZiAoIXByb21pc2VDdG9yKSB7XG4gICAgICAgIHByb21pc2VDdG9yID0gY29uZmlnLlByb21pc2UgfHwgUHJvbWlzZTtcbiAgICB9XG4gICAgaWYgKCFwcm9taXNlQ3Rvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ25vIFByb21pc2UgaW1wbCBmb3VuZCcpO1xuICAgIH1cbiAgICByZXR1cm4gcHJvbWlzZUN0b3I7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYnNlcnZhYmxlLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfU3Vic2NyaWJlcixfc3ltYm9sX3J4U3Vic2NyaWJlcixfT2JzZXJ2ZXIgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgU3Vic2NyaWJlciB9IGZyb20gJy4uL1N1YnNjcmliZXInO1xuaW1wb3J0IHsgcnhTdWJzY3JpYmVyIGFzIHJ4U3Vic2NyaWJlclN5bWJvbCB9IGZyb20gJy4uL3N5bWJvbC9yeFN1YnNjcmliZXInO1xuaW1wb3J0IHsgZW1wdHkgYXMgZW1wdHlPYnNlcnZlciB9IGZyb20gJy4uL09ic2VydmVyJztcbmV4cG9ydCBmdW5jdGlvbiB0b1N1YnNjcmliZXIobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgIGlmIChuZXh0T3JPYnNlcnZlcikge1xuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgaW5zdGFuY2VvZiBTdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV4dE9yT2JzZXJ2ZXI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyW3J4U3Vic2NyaWJlclN5bWJvbF0pIHtcbiAgICAgICAgICAgIHJldHVybiBuZXh0T3JPYnNlcnZlcltyeFN1YnNjcmliZXJTeW1ib2xdKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFuZXh0T3JPYnNlcnZlciAmJiAhZXJyb3IgJiYgIWNvbXBsZXRlKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3Vic2NyaWJlcihlbXB0eU9ic2VydmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVyKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dG9TdWJzY3JpYmVyLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfU3Vic2NyaWJlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBTdWJzY3JpYmVyIH0gZnJvbSAnLi4vU3Vic2NyaWJlcic7XG5leHBvcnQgZnVuY3Rpb24gY2FuUmVwb3J0RXJyb3Iob2JzZXJ2ZXIpIHtcbiAgICB3aGlsZSAob2JzZXJ2ZXIpIHtcbiAgICAgICAgdmFyIF9hID0gb2JzZXJ2ZXIsIGNsb3NlZF8xID0gX2EuY2xvc2VkLCBkZXN0aW5hdGlvbiA9IF9hLmRlc3RpbmF0aW9uLCBpc1N0b3BwZWQgPSBfYS5pc1N0b3BwZWQ7XG4gICAgICAgIGlmIChjbG9zZWRfMSB8fCBpc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkZXN0aW5hdGlvbiAmJiBkZXN0aW5hdGlvbiBpbnN0YW5jZW9mIFN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIG9ic2VydmVyID0gZGVzdGluYXRpb247XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvYnNlcnZlciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jYW5SZXBvcnRFcnJvci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmZ1bmN0aW9uIE9iamVjdFVuc3Vic2NyaWJlZEVycm9ySW1wbCgpIHtcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICAgIHRoaXMubWVzc2FnZSA9ICdvYmplY3QgdW5zdWJzY3JpYmVkJztcbiAgICB0aGlzLm5hbWUgPSAnT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3InO1xuICAgIHJldHVybiB0aGlzO1xufVxuT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JJbXBsLnByb3RvdHlwZSA9IC8qQF9fUFVSRV9fKi8gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuZXhwb3J0IHZhciBPYmplY3RVbnN1YnNjcmliZWRFcnJvciA9IE9iamVjdFVuc3Vic2NyaWJlZEVycm9ySW1wbDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9iamVjdFVuc3Vic2NyaWJlZEVycm9yLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfU3Vic2NyaXB0aW9uIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICcuL1N1YnNjcmlwdGlvbic7XG52YXIgU3ViamVjdFN1YnNjcmlwdGlvbiA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhTdWJqZWN0U3Vic2NyaXB0aW9uLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YmplY3RTdWJzY3JpcHRpb24oc3ViamVjdCwgc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5zdWJqZWN0ID0gc3ViamVjdDtcbiAgICAgICAgX3RoaXMuc3Vic2NyaWJlciA9IHN1YnNjcmliZXI7XG4gICAgICAgIF90aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN1YmplY3RTdWJzY3JpcHRpb24ucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsb3NlZCA9IHRydWU7XG4gICAgICAgIHZhciBzdWJqZWN0ID0gdGhpcy5zdWJqZWN0O1xuICAgICAgICB2YXIgb2JzZXJ2ZXJzID0gc3ViamVjdC5vYnNlcnZlcnM7XG4gICAgICAgIHRoaXMuc3ViamVjdCA9IG51bGw7XG4gICAgICAgIGlmICghb2JzZXJ2ZXJzIHx8IG9ic2VydmVycy5sZW5ndGggPT09IDAgfHwgc3ViamVjdC5pc1N0b3BwZWQgfHwgc3ViamVjdC5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3Vic2NyaWJlckluZGV4ID0gb2JzZXJ2ZXJzLmluZGV4T2YodGhpcy5zdWJzY3JpYmVyKTtcbiAgICAgICAgaWYgKHN1YnNjcmliZXJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgIG9ic2VydmVycy5zcGxpY2Uoc3Vic2NyaWJlckluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIFN1YmplY3RTdWJzY3JpcHRpb247XG59KFN1YnNjcmlwdGlvbikpO1xuZXhwb3J0IHsgU3ViamVjdFN1YnNjcmlwdGlvbiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ViamVjdFN1YnNjcmlwdGlvbi5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX09ic2VydmFibGUsX1N1YnNjcmliZXIsX1N1YnNjcmlwdGlvbixfdXRpbF9PYmplY3RVbnN1YnNjcmliZWRFcnJvcixfU3ViamVjdFN1YnNjcmlwdGlvbixfaW50ZXJuYWxfc3ltYm9sX3J4U3Vic2NyaWJlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4vT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBTdWJzY3JpYmVyIH0gZnJvbSAnLi9TdWJzY3JpYmVyJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yIH0gZnJvbSAnLi91dGlsL09iamVjdFVuc3Vic2NyaWJlZEVycm9yJztcbmltcG9ydCB7IFN1YmplY3RTdWJzY3JpcHRpb24gfSBmcm9tICcuL1N1YmplY3RTdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgcnhTdWJzY3JpYmVyIGFzIHJ4U3Vic2NyaWJlclN5bWJvbCB9IGZyb20gJy4uL2ludGVybmFsL3N5bWJvbC9yeFN1YnNjcmliZXInO1xudmFyIFN1YmplY3RTdWJzY3JpYmVyID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFN1YmplY3RTdWJzY3JpYmVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFN1YmplY3RTdWJzY3JpYmVyKGRlc3RpbmF0aW9uKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGRlc3RpbmF0aW9uKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIHJldHVybiBTdWJqZWN0U3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcikpO1xuZXhwb3J0IHsgU3ViamVjdFN1YnNjcmliZXIgfTtcbnZhciBTdWJqZWN0ID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFN1YmplY3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3ViamVjdCgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMub2JzZXJ2ZXJzID0gW107XG4gICAgICAgIF90aGlzLmNsb3NlZCA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgX3RoaXMudGhyb3duRXJyb3IgPSBudWxsO1xuICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgfVxuICAgIFN1YmplY3QucHJvdG90eXBlW3J4U3Vic2NyaWJlclN5bWJvbF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3ViamVjdFN1YnNjcmliZXIodGhpcyk7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5saWZ0ID0gZnVuY3Rpb24gKG9wZXJhdG9yKSB7XG4gICAgICAgIHZhciBzdWJqZWN0ID0gbmV3IEFub255bW91c1N1YmplY3QodGhpcywgdGhpcyk7XG4gICAgICAgIHN1YmplY3Qub3BlcmF0b3IgPSBvcGVyYXRvcjtcbiAgICAgICAgcmV0dXJuIHN1YmplY3Q7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdmFyIG9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzO1xuICAgICAgICAgICAgdmFyIGxlbiA9IG9ic2VydmVycy5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgY29weSA9IG9ic2VydmVycy5zbGljZSgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGNvcHlbaV0ubmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3RVbnN1YnNjcmliZWRFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICB0aGlzLnRocm93bkVycm9yID0gZXJyO1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVycztcbiAgICAgICAgdmFyIGxlbiA9IG9ic2VydmVycy5sZW5ndGg7XG4gICAgICAgIHZhciBjb3B5ID0gb2JzZXJ2ZXJzLnNsaWNlKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNvcHlbaV0uZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB2YXIgb2JzZXJ2ZXJzID0gdGhpcy5vYnNlcnZlcnM7XG4gICAgICAgIHZhciBsZW4gPSBvYnNlcnZlcnMubGVuZ3RoO1xuICAgICAgICB2YXIgY29weSA9IG9ic2VydmVycy5zbGljZSgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjb3B5W2ldLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBudWxsO1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuX3RyeVN1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gX3N1cGVyLnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlLmNhbGwodGhpcywgc3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPYmplY3RVbnN1YnNjcmliZWRFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaGFzRXJyb3IpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuZXJyb3IodGhpcy50aHJvd25FcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gU3Vic2NyaXB0aW9uLkVNUFRZO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICBzdWJzY3JpYmVyLmNvbXBsZXRlKCk7XG4gICAgICAgICAgICByZXR1cm4gU3Vic2NyaXB0aW9uLkVNUFRZO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChzdWJzY3JpYmVyKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3ViamVjdFN1YnNjcmlwdGlvbih0aGlzLCBzdWJzY3JpYmVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuYXNPYnNlcnZhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IG5ldyBPYnNlcnZhYmxlKCk7XG4gICAgICAgIG9ic2VydmFibGUuc291cmNlID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGU7XG4gICAgfTtcbiAgICBTdWJqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChkZXN0aW5hdGlvbiwgc291cmNlKSB7XG4gICAgICAgIHJldHVybiBuZXcgQW5vbnltb3VzU3ViamVjdChkZXN0aW5hdGlvbiwgc291cmNlKTtcbiAgICB9O1xuICAgIHJldHVybiBTdWJqZWN0O1xufShPYnNlcnZhYmxlKSk7XG5leHBvcnQgeyBTdWJqZWN0IH07XG52YXIgQW5vbnltb3VzU3ViamVjdCA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICB0c2xpYl8xLl9fZXh0ZW5kcyhBbm9ueW1vdXNTdWJqZWN0LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIEFub255bW91c1N1YmplY3QoZGVzdGluYXRpb24sIHNvdXJjZSkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uO1xuICAgICAgICBfdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICBpZiAoZGVzdGluYXRpb24gJiYgZGVzdGluYXRpb24ubmV4dCkge1xuICAgICAgICAgICAgZGVzdGluYXRpb24ubmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFub255bW91c1N1YmplY3QucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICB2YXIgZGVzdGluYXRpb24gPSB0aGlzLmRlc3RpbmF0aW9uO1xuICAgICAgICBpZiAoZGVzdGluYXRpb24gJiYgZGVzdGluYXRpb24uZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdGluYXRpb24uZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUuY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGlmIChkZXN0aW5hdGlvbiAmJiBkZXN0aW5hdGlvbi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBbm9ueW1vdXNTdWJqZWN0LnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuc291cmNlO1xuICAgICAgICBpZiAoc291cmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFN1YnNjcmlwdGlvbi5FTVBUWTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIEFub255bW91c1N1YmplY3Q7XG59KFN1YmplY3QpKTtcbmV4cG9ydCB7IEFub255bW91c1N1YmplY3QgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YmplY3QuanMubWFwXG4iLCJpbXBvcnQge1NpbXVsYXRpb25QYWNrYWdlfSBmcm9tIFwiLi9TaW11bGF0aW9uUGFja2FnZVwiO1xyXG5pbXBvcnQge1N1YmplY3R9IGZyb20gXCJyeGpzXCI7XHJcbmltcG9ydCB7TWluaW1hbFNwYW5UcmVlfSBmcm9tIFwiLi4vU3Bhbm5pbmdUcmVlL21pbmltYWxTcGFubmluZ1RyZWVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTaW11bGF0aW9uQ29ubmVjdGlvbntcclxuXHRwdWJsaWMgc2VuZDogU3ViamVjdDxTaW11bGF0aW9uUGFja2FnZT4gPSBuZXcgU3ViamVjdDxTaW11bGF0aW9uUGFja2FnZT4oKTtcclxuXHRwdWJsaWMgcmVjZWl2ZTogU3ViamVjdDxTaW11bGF0aW9uUGFja2FnZT4gPSBuZXcgU3ViamVjdDxTaW11bGF0aW9uUGFja2FnZT4oKTtcclxuXHRwdWJsaWMgcGluZzogUHJvbWlzZTxzdHJpbmdbXT47XHJcblx0Y29uc3RydWN0b3Ioc2libGluZ0JyaWRnZXM6IHN0cmluZ1tdKXtcclxuXHRcdHRoaXMucGluZyA9IG5ldyBQcm9taXNlPHN0cmluZ1tdPihyZXNvbHZlID0+IHJlc29sdmUoc2libGluZ0JyaWRnZXMpKTtcclxuXHR9XHJcblx0cHVibGljIGZpbmlzaGVkSW5kZXhpbmc6IFN1YmplY3Q8TWluaW1hbFNwYW5UcmVlfGFueT4gPSBuZXcgU3ViamVjdCgpO1xyXG59XHJcbiIsImltcG9ydCB7U3Bhbm5pbmdUcmVlTm9kZX0gZnJvbSBcIi4uL1NwYW5uaW5nVHJlZS9zcGFubmluZ1RyZWVOb2RlXCI7XHJcbmltcG9ydCB7QnJpZGdlfSBmcm9tIFwiLi9CcmlkZ2VcIjtcclxuaW1wb3J0IHtTaW11bGF0aW9uQ29ubmVjdGlvbn0gZnJvbSBcIi4vU2ltdWxhdGlvbkNvbm5lY3Rpb25cIjtcclxuaW1wb3J0IHtTaW11bGF0aW9uUGFja2FnZX0gZnJvbSBcIi4vU2ltdWxhdGlvblBhY2thZ2VcIjtcclxuaW1wb3J0IHtNaW5pbWFsU3BhblRyZWV9IGZyb20gXCIuLi9TcGFubmluZ1RyZWUvbWluaW1hbFNwYW5uaW5nVHJlZVwiO1xyXG5pbXBvcnQge1NwYW5uaW5nVHJlZUxpbmt9IGZyb20gXCIuLi9TcGFubmluZ1RyZWUvc3Bhbm5pbmdUcmVlTGlua1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNpbXVsYXRpb24ge1xyXG4gICAgcHVibGljIGJyaWRnZXM6IEJyaWRnZVtdID0gW107XHJcblxyXG4gICAgY29uc3RydWN0b3IocHVibGljIG5vZGVzOiBTcGFubmluZ1RyZWVOb2RlW10sIG11bHRpcGxpY2F0b3JGb3JDb3N0SW5TZWNvbmRzID0gMC41KSB7XHJcbiAgICAgICAgbm9kZXMuZm9yRWFjaChub2RlID0+IHtcclxuICAgICAgICAgICAgbGV0IHNpYmxpbmdOb2RlcyA9IG5vZGUubGlua3MubWFwKGwgPT4gbC50b05vZGUpO1xyXG4gICAgICAgICAgICBjb25zdCBjb25uID0gbmV3IFNpbXVsYXRpb25Db25uZWN0aW9uKHNpYmxpbmdOb2Rlcyk7XHJcbiAgICAgICAgICAgIHRoaXMuYnJpZGdlcy5wdXNoKG5ldyBCcmlkZ2Uobm9kZS5uYW1lLCBub2RlLnZhbHVlLCBjb25uLCB0aGlzLmR1bXBCcmlkZ2UpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBhbGxvdyBjb21tdW5pY2F0aW9uIGJldHdlZW4gZGlyZWN0IGNvbm5lY3RlZCBicmlkZ2VzXHJcbiAgICAgICAgdGhpcy5icmlkZ2VzLmZvckVhY2goYnJpZGdlID0+IHtcclxuICAgICAgICAgICAgbGV0IGxpbmtzOiBTcGFubmluZ1RyZWVMaW5rW10gPSBub2Rlcy5maW5kKG4gPT4gbi5uYW1lID09PSBicmlkZ2UubmFtZSkubGlua3M7XHJcbiAgICAgICAgICAgIGxldCBzaWJsaW5nTm9kZXMgPSBsaW5rcy5tYXAobCA9PiBsLnRvTm9kZSk7XHJcbiAgICAgICAgICAgIGJyaWRnZS5jb25uZWN0aW9uLnNlbmQuc3Vic2NyaWJlKChwa2c6IFNpbXVsYXRpb25QYWNrYWdlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgJHticmlkZ2UubmFtZX0+Pj4ke3BrZy50YXJnZXR9YCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY29ubmVjdGVkTm9kZSA9IHNpYmxpbmdOb2Rlcy5maW5kKG4gPT4gbiA9PT0gcGtnLnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoISFjb25uZWN0ZWROb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGtnLmNvc3QgPSBsaW5rcy5maW5kKGwgPT4gbC50b05vZGUgPT09IHBrZy50YXJnZXQpLmNvc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2IgPSB0aGlzLmR1bXBQa2cocGtnLCBicmlkZ2UubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5icmlkZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoYiA9PiBiLm5hbWUgPT09IHBrZy50YXJnZXQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbm5lY3Rpb24ucmVjZWl2ZS5uZXh0KHBrZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBrZy5jb3N0ICogMTAwMCAqIG11bHRpcGxpY2F0b3JGb3JDb3N0SW5TZWNvbmRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVEb21CcmlkZ2VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXJ0SW5kZXhpbmdGcm9tUmFuZG9tQnJpZGdlOiAoKSA9PiBQcm9taXNlPE1pbmltYWxTcGFuVHJlZT4gPSAoKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPE1pbmltYWxTcGFuVHJlZT4oYXN5bmMgcmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJyaWRnZSA9IHRoaXMuYnJpZGdlc1tNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiB0aGlzLmJyaWRnZXMubGVuZ3RoKV07XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuYnJpZGdlcywgYnJpZGdlKTtcclxuICAgICAgICAgICAgYnJpZGdlLmNvbm5lY3Rpb24uZmluaXNoZWRJbmRleGluZy5zdWJzY3JpYmUoKG1zdCkgPT4gcmVzb2x2ZShtc3QpKTtcclxuICAgICAgICAgICAgYnJpZGdlLmluZGV4TmV0d29yaygpLnRoZW4oKCkgPT4gY29uc29sZS5sb2coJ3d0ZicpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBwcml2YXRlIGlkID0gMDtcclxuXHJcbiAgICBwcml2YXRlIGR1bXBQa2cocGtnOiBTaW11bGF0aW9uUGFja2FnZSwgZnJvbTogc3RyaW5nKTogKCkgPT4gdm9pZCB7XHJcblxyXG4gICAgICAgIGNvbnN0IHBrZ19zX3RhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwa2dfc190YXJnZXQnKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuXHJcbiAgICAgICAgbGV0IG51bWJlciA9IHRoaXMuaWQrKztcclxuICAgICAgICBjb25zdCBwa2dUZW1wbGF0ZSA9IChwa2c6IFNpbXVsYXRpb25QYWNrYWdlLCBmcm9tOiBzdHJpbmcpID0+IGBcclxuPGRpdiBpZD1cInBrZ18ke251bWJlcn1cIj5cclxuICAgICR7ZnJvbX0gLT4gJHtwa2cudGFyZ2V0fSA6ICR7cGtnLmNvc3R9XHJcbjwvZGl2PlxyXG5gO1xyXG4gICAgICAgIHBrZ19zX3RhcmdldC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJiZWZvcmVlbmRcIiwgbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhwa2dUZW1wbGF0ZShwa2csIGZyb20pLCBcInRleHQvaHRtbFwiKS5nZXRFbGVtZW50QnlJZChgcGtnXyR7bnVtYmVyfWApKTtcclxuICAgICAgICAvL3BrZ19zX3RhcmdldC4obmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhwa2dUZW1wbGF0ZShwa2csIGZyb20pLCBcInRleHQvaHRtbFwiKS5nZXRFbGVtZW50QnlJZChgcGtnXyR7bnVtYmVyfWApKTtcclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBwa2dfc190YXJnZXQucmVtb3ZlQ2hpbGQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYHBrZ18ke251bWJlcn1gKSk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVEb21CcmlkZ2VzKCkge1xyXG4gICAgICAgIGNvbnN0IHBrZ19zX3RhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWluZXJfdGFyZ2V0JykgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgYnJpZGdlVGVtcGxhdGUgPSAoYnJpZGdlOiBCcmlkZ2UpID0+IGBcclxuPGRpdiBjbGFzcz1cIml0ZW1cIiBpZD1cImJyaWRnZV8ke2JyaWRnZS52YWx1ZX1cIj5cclxuICAgIDxoMz5CcmlkZ2UgJHticmlkZ2UubmFtZX08L2gzPlxyXG48L2Rpdj5cclxuYDtcclxuICAgICAgICB0aGlzLmJyaWRnZXMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYS5uYW1lIDwgYi5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGEubmFtZSA+IGIubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfSkuZm9yRWFjaChicmlkZ2UgPT4ge1xyXG4gICAgICAgICAgICBwa2dfc190YXJnZXQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlZW5kXCIsIG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoYnJpZGdlVGVtcGxhdGUoYnJpZGdlKSwgXCJ0ZXh0L2h0bWxcIikuZ2V0RWxlbWVudEJ5SWQoYGJyaWRnZV8ke2JyaWRnZS52YWx1ZX1gKSk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBkdW1wQnJpZGdlKGJyaWRnZTogQnJpZGdlKSB7XHJcbiAgICAgICAgY29uc3QgYnJpZGdlVGVtcGxhdGUgPSAoYnJpZGdlOiBCcmlkZ2UpID0+IGBcclxuPGRpdiBjbGFzcz1cIml0ZW1cIiBpZD1cImJyaWRnZV8ke2JyaWRnZS52YWx1ZX1cIj5cclxuICAgIDxkaXYgc3R5bGU9XCJ3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBvdmVyZmxvdy15OiBhdXRvXCI+XHJcbiAgICAgICAgPGgzPkJyaWRnZSAke2JyaWRnZS5uYW1lfTwvaDM+XHJcbiAgICAgICAgJHticmlkZ2Uucm9vdE9mSW5kZXhpbmc/J0luZGV4aW5nIFJvb3QhJzogJyd9PGJyPlxyXG4gICAgICAgIEtub3duIGxpbmtzOiBbPEJMT0NLUVVPVEU+JHticmlkZ2UuRElTQ09WRVJFRF9MSU5LUy5tYXAobCA9PiBsLm5vZGVzLm1hcChuID0+IG4ubmFtZSkuam9pbignLScpICsgJzonICsgbC5jb3N0KS5qb2luKCcsPGJyPicpfTwvQkxPQ0tRVU9URT5dPGJyPlxyXG4gICAgICAgICR7IWJyaWRnZS5yb290T2ZJbmRleGluZyA/IGBSZXR1cm5pbmcgRGF0YSB0bzogWzxCTE9DS1FVT1RFPiR7YnJpZGdlLnJldHVyblRvLmpvaW4oJyw8YnI+Jyl9PC9CTE9DS1FVT1RFPl1gOiAnJ31cclxuICAgIDwvZGl2PlxyXG48L2Rpdj5cclxuYDtcclxuICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBicmlkZ2VfJHticmlkZ2UudmFsdWV9YCk7XHJcbiAgICAgICAgZWwucmVwbGFjZVdpdGgobmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhicmlkZ2VUZW1wbGF0ZShicmlkZ2UpLCBcInRleHQvaHRtbFwiKS5nZXRFbGVtZW50QnlJZChgYnJpZGdlXyR7YnJpZGdlLnZhbHVlfWApKVxyXG4gICAgfVxyXG5cclxufVxyXG4iLCIvLyByZWZlcmVuY2VzIHRvIHRoZSBkb21cclxuaW1wb3J0IHtwYXJzZSwgc3RyaW5naWZ5fSBmcm9tIFwiLi9wYXJzZXJcIjtcclxuaW1wb3J0IHtTaW11bGF0aW9ufSBmcm9tIFwiLi9tb2RlbHMvU2ltdWxhdGlvbi9TaW11bGF0aW9uXCI7XHJcbmltcG9ydCB7U2ltdWxhdGlvblBhY2thZ2V9IGZyb20gXCIuL21vZGVscy9TaW11bGF0aW9uL1NpbXVsYXRpb25QYWNrYWdlXCI7XHJcblxyXG5jb25zdCBpbnB1dEFyZWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGV4dEluJykgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcclxuY29uc3Qgb3V0cHV0QXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXh0T3V0JykgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcclxuY29uc3Qgc2ltdWxhdGlvbkJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaW11bGF0ZV9idG4nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcclxuXHJcblxyXG5cclxuY29uc3Qgc2ltcGxlVGVzdCA9IGBcclxuR3JhcGggbXlncmFwaCB7XHJcblx0Ly8gTm9kZVxyXG5cdEEgPSAyO1xyXG5cdEIgPSAxO1xyXG5cdEMgPSAzO1xyXG5cdFxyXG5cdC8vIExpbmtzIHVuZCB6dWdlaC4gS29zdGVuXHJcblx0QSAtIEIgOiAxO1xyXG5cdEEgLSBDIDogMTtcclxuXHRDIC0gQiA6IDI7XHJcbn1gO1xyXG5jb25zdCB0ZXN0ID0gYFxyXG5HcmFwaCBteWdyYXBoIHtcclxuXHQvLyBOb2RlXHJcblx0QSA9IDU7XHJcblx0QiA9IDE7XHJcblx0QyA9IDM7XHJcblx0RCA9IDc7XHJcblx0RSA9IDY7XHJcblx0RiA9IDQ7XHJcblx0XHJcblx0Ly8gTGlua3MgdW5kIHp1Z2VoLiBLb3N0ZW5cclxuXHRBIC0gQiA6IDEwO1xyXG5cdEEgLSBDIDogMTA7XHJcblx0QiAtIEQgOiAxNTtcclxuXHRCIC0gRSA6IDEwO1xyXG5cdEMgLSBEIDogMztcclxuXHRDIC0gRSA6IDEwO1xyXG5cdEQgLSBFIDogMjtcclxuXHREIC0gRiA6IDEwO1xyXG5cdEUgLSBGIDogMjtcclxufWA7XHJcbmlucHV0QXJlYS52YWx1ZSA9IHRlc3Q7XHJcbmNvbnNvbGUubG9nKGlucHV0QXJlYSk7XHJcbi8vIGNsaWNrIGltcGxcclxuY29uc3Qgb25TaW11bGF0aW9uQ2xpY2sgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBwYXJzZVJlc3VsdCA9IHBhcnNlKGlucHV0QXJlYS52YWx1ZSk7XHJcbiAgICBjb25zdCBzaW11bGF0aW9uID0gbmV3IFNpbXVsYXRpb24ocGFyc2VSZXN1bHQubm9kZXMsICsoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ211bHQnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSk7XHJcbiAgICBjb25zb2xlLmxvZyhzaW11bGF0aW9uKTtcclxuICAgIHNpbXVsYXRpb24uc3RhcnRJbmRleGluZ0Zyb21SYW5kb21CcmlkZ2UoKS50aGVuKG1zdCA9PiB7XHJcbiAgICAgICAgb3V0cHV0QXJlYS52YWx1ZSA9IHN0cmluZ2lmeShtc3QsIHBhcnNlUmVzdWx0LmdyYXBoTmFtZSk7XHJcbiAgICB9KVxyXG59O1xyXG5cclxuLy8gY2FsbCBjbGljayBpbXBsIG9uIHNpbXVsYXRpb25CdXR0b24gY2xpY2tcclxuc2ltdWxhdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uU2ltdWxhdGlvbkNsaWNrKTtcclxuIiwiaW1wb3J0IHtTcGFubmluZ1RyZWVMaW5rfSBmcm9tIFwiLi4vbW9kZWxzL1NwYW5uaW5nVHJlZS9zcGFubmluZ1RyZWVMaW5rXCI7XHJcbmltcG9ydCB7U3Bhbm5pbmdUcmVlTm9kZX0gZnJvbSBcIi4uL21vZGVscy9TcGFubmluZ1RyZWUvc3Bhbm5pbmdUcmVlTm9kZVwiO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBhcnNlOiAoaW5wdXQ6IHN0cmluZykgPT4ge2dyYXBoTmFtZTogc3RyaW5nLCBub2RlczogU3Bhbm5pbmdUcmVlTm9kZVtdfSA9XHJcblx0KGlucHV0OiBzdHJpbmcpID0+IHtcclxuXHRcdGNvbnN0IHRlbXBMaW5rczoge25vZGVzOiBzdHJpbmdbXSwgY29zdDogbnVtYmVyfVtdID0gW107XHJcblx0XHRjb25zdCBub2RlczogU3Bhbm5pbmdUcmVlTm9kZVtdID0gW107XHJcblx0XHRjb25zdCBncmFwaE5hbWUgPSBpbnB1dC5tYXRjaCgvKD88PUdyYXBoWyBdKShcXFMrKS9nKVswXTtcclxuXHRcdGNvbnN0IG5vZGVNYXRjaGVzID0gaW5wdXQubWF0Y2goL1teXFxzXSsoPz0gPSl8KD88PT0gKVsxLTldKi9nKTtcclxuXHRcdGNvbnN0IGxpbmtNYXRjaGVzID0gaW5wdXQubWF0Y2goL1teXFxzXSsoPz0gLSl8W15cXHNdKyg/PSA6KXwoPzw9OiApWzAtOV0qL2cpO1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsaW5rTWF0Y2hlcy5sZW5ndGg7IGkgPSBpICsgMykge1xyXG5cdFx0XHR0ZW1wTGlua3MucHVzaCh7XHJcblx0XHRcdFx0bm9kZXM6IFtsaW5rTWF0Y2hlc1tpXSwgbGlua01hdGNoZXNbaSArIDFdXSxcclxuXHRcdFx0XHRjb3N0OiArbGlua01hdGNoZXNbaSArIDJdIC8vIHNvbWUgbGl0dGxlIHRyaWNrIHRvIGNhc3QgYSBzdHJpbmcgdG8gbnVtYmVyICsnNCcgPT09IDRcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVNYXRjaGVzLmxlbmd0aDsgaSA9IGkgKyAyKSB7XHJcblx0XHRcdGNvbnN0IG5hbWUgPSBub2RlTWF0Y2hlc1tpXTtcclxuXHRcdFx0Y29uc3QgdmFsdWUgPSArbm9kZU1hdGNoZXNbaSArIDFdO1xyXG5cdFx0XHRjb25zdCBsaW5rcyA9IHRlbXBMaW5rcy5maWx0ZXIobCA9PiBsLm5vZGVzLmZpbmRJbmRleChuID0+IG4gPT09IG5hbWUpICE9PSAtMSlcclxuXHRcdFx0XHQubWFwKGxpbmsgPT4gbmV3IFNwYW5uaW5nVHJlZUxpbmsobGluay5ub2Rlcy5maW5kKG4gPT4gbiAhPT0gbmFtZSksIGxpbmsuY29zdCkpO1xyXG5cdFx0XHRub2Rlcy5wdXNoKG5ldyBTcGFubmluZ1RyZWVOb2RlKG5hbWUsIHZhbHVlLCBsaW5rcykpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0Z3JhcGhOYW1lLFxyXG5cdFx0XHRub2Rlc1xyXG5cdFx0fVxyXG5cdH07XHJcbiIsImltcG9ydCB7TWluaW1hbFNwYW5UcmVlfSBmcm9tIFwiLi4vbW9kZWxzL1NwYW5uaW5nVHJlZS9taW5pbWFsU3Bhbm5pbmdUcmVlXCI7XHJcblxyXG5leHBvcnQgY29uc3Qgc3RyaW5naWZ5OiAobWluaW1hbFNwYW5UcmVlOiBNaW5pbWFsU3BhblRyZWUsIG5hbWU6IHN0cmluZykgPT4gc3RyaW5nID1cclxuXHQobWluaW1hbFNwYW5UcmVlLCBuYW1lOiBzdHJpbmcpID0+IGBcclxuU3Bhbm5pbmctVHJlZSBvZiAke25hbWV9IHtcclxuXHRSb290OiAke21pbmltYWxTcGFuVHJlZS5yb290Lm5hbWV9O1xyXG5cdCR7bWluaW1hbFNwYW5UcmVlLmxpbmtUb1N0cmluZygpfVxyXG59YDtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==